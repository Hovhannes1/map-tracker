(self.webpackChunkmap_tracker=self.webpackChunkmap_tracker||[]).push([[179],{2011:(lt,Re,ee)=>{"use strict";ee.d(Re,{Dh:()=>F,GT:()=>V,cc:()=>P,hO:()=>x,on:()=>c,pX:()=>Y,xv:()=>j});var h=ee(4650),ue=ee(127),z=ee(2680);lt=ee.hmd(lt);const re=["ngOnDestroy"],Y=(te,me,Me,De={})=>new Proxy(te,{get:(Ee,Ie)=>Me.runOutsideAngular(()=>{var He;if(te[Ie])return!(null===(He=De?.spy)||void 0===He)&&He.get&&De.spy.get(Ie,te[Ie]),te[Ie];if(re.indexOf(Ie)>-1)return()=>{};const ze=me.toPromise().then(oe=>{const Ae=oe&&oe[Ie];return"function"==typeof Ae?Ae.bind(oe):Ae&&Ae.then?Ae.then(he=>Me.run(()=>he)):Me.run(()=>Ae)});return new Proxy(()=>{},{get:(oe,Ae)=>ze[Ae],apply:(oe,Ae,he)=>ze.then(_e=>{var Ce;const we=_e&&_e(...he);return!(null===(Ce=De?.spy)||void 0===Ce)&&Ce.apply&&De.spy.apply(Ie,he,we),we})})})}),V=(te,me)=>{me.forEach(Me=>{Object.getOwnPropertyNames(Me.prototype||Me).forEach(De=>{Object.defineProperty(te.prototype,De,Object.getOwnPropertyDescriptor(Me.prototype||Me,De))})})};class g{constructor(me){return me}}const F=new h.OlP("angularfire2.app.options"),j=new h.OlP("angularfire2.app.name");function c(te,me,Me){const Ee="object"==typeof Me&&Me||{};Ee.name=Ee.name||"string"==typeof Me&&Me||"[DEFAULT]";const He=ue.Z.apps.filter(ze=>ze&&ze.name===Ee.name)[0]||me.runOutsideAngular(()=>ue.Z.initializeApp(te,Ee));try{JSON.stringify(te)!==JSON.stringify(He.options)&&m("error",`${He.name} Firebase App already initialized with different options${lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new g(He)}const m=(te,...me)=>{(0,h.X6Q)()&&typeof console<"u"&&console[te](...me)},w={provide:g,useFactory:c,deps:[F,h.R0b,[new h.FiY,j]]};let x=(()=>{class te{constructor(Me){ue.Z.registerVersion("angularfire",z.q4.full,"core"),ue.Z.registerVersion("angularfire",z.q4.full,"app-compat"),ue.Z.registerVersion("angular",h.q4F.full,Me.toString())}static initializeApp(Me,De){return{ngModule:te,providers:[{provide:F,useValue:Me},{provide:j,useValue:De}]}}}return te.\u0275fac=function(Me){return new(Me||te)(h.LFG(h.Lbi))},te.\u0275mod=h.oAB({type:te}),te.\u0275inj=h.cJS({providers:[w]}),te})();function P(te,me,Me,De,Ee){const[,Ie,He]=globalThis.\u0275AngularfireInstanceCache.find(ze=>ze[0]===te)||[];if(Ie)return function U(te,me){try{return te.toString()===me.toString()}catch{return te===me}}(Ee,He)||(X("error",`${me} was already initialized on the ${Me} Firebase App with different settings.${q?" You may need to reload as Firebase is not HMR aware.":""}`),X("warn",{is:Ee,was:He})),Ie;{const ze=De();return globalThis.\u0275AngularfireInstanceCache.push([te,ze,Ee]),ze}}const q=!!lt.hot,X=(te,...me)=>{(0,h.X6Q)()&&typeof console<"u"&&console[te](...me)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2680:(lt,Re,ee)=>{"use strict";ee.d(Re,{q4:()=>cu,iC:()=>mu,fc:()=>Zn,HU:()=>pu,vb:()=>wa,JM:()=>Rn});var h=ee(4650),ue=ee(5867),z=ee(5861),re=ee(9681),Y=ee(2090),V=ee(4859),g=ee(1877),F=ee(8766);const j="@firebase/installations",c="0.5.15",w=`w:${c}`,x="FIS_v2",me=new Y.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Me(k){return k instanceof Y.ZR&&k.code.includes("request-failed")}function De({projectId:k}){return`https://firebaseinstallations.googleapis.com/v1/projects/${k}/installations`}function Ee(k){return{token:k.token,requestStatus:2,expiresIn:_e(k.expiresIn),creationTime:Date.now()}}function Ie(k,O){return He.apply(this,arguments)}function He(){return(He=(0,z.Z)(function*(k,O){const ie=(yield O.json()).error;return me.create("request-failed",{requestName:k,serverCode:ie.code,serverMessage:ie.message,serverStatus:ie.status})})).apply(this,arguments)}function ze({apiKey:k}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":k})}function oe(k,{refreshToken:O}){const G=ze(k);return G.append("Authorization",function Ce(k){return`${x} ${k}`}(O)),G}function Ae(k){return he.apply(this,arguments)}function he(){return(he=(0,z.Z)(function*(k){const O=yield k();return O.status>=500&&O.status<600?k():O})).apply(this,arguments)}function _e(k){return Number(k.replace("s","000"))}function we(k,O){return We.apply(this,arguments)}function We(){return(We=(0,z.Z)(function*({appConfig:k,heartbeatServiceProvider:O},{fid:G}){const ie=De(k),pe=ze(k),be=O.getImmediate({optional:!0});if(be){const pt=yield be.getHeartbeatsHeader();pt&&pe.append("x-firebase-client",pt)}const Ke={method:"POST",headers:pe,body:JSON.stringify({fid:G,authVersion:x,appId:k.appId,sdkVersion:w})},nt=yield Ae(()=>fetch(ie,Ke));if(nt.ok){const pt=yield nt.json();return{fid:pt.fid||G,registrationStatus:2,refreshToken:pt.refreshToken,authToken:Ee(pt.authToken)}}throw yield Ie("Create Installation",nt)})).apply(this,arguments)}function je(k){return new Promise(O=>{setTimeout(O,k)})}const sn=/^[cdef][\w-]{21}$/;function rt(){try{const k=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(k),k[0]=112+k[0]%16;const G=function mn(k){return function _t(k){return btoa(String.fromCharCode(...k)).replace(/\+/g,"-").replace(/\//g,"_")}(k).substr(0,22)}(k);return sn.test(G)?G:""}catch{return""}}function Tn(k){return`${k.appName}!${k.appId}`}const nn=new Map;function on(k,O){const G=Tn(k);gn(G,O),function Gs(k,O){const G=function Wi(){return!Fr&&"BroadcastChannel"in self&&(Fr=new BroadcastChannel("[Firebase] FID Change"),Fr.onmessage=k=>{gn(k.data.key,k.data.fid)}),Fr}();G&&G.postMessage({key:k,fid:O}),function $i(){0===nn.size&&Fr&&(Fr.close(),Fr=null)}()}(G,O)}function gn(k,O){const G=nn.get(k);if(G)for(const ie of G)ie(O)}let Fr=null;const ir="firebase-installations-store";let gr=null;function ra(){return gr||(gr=(0,F.X3)("firebase-installations-database",1,{upgrade:(k,O)=>{0===O&&k.createObjectStore(ir)}})),gr}function ot(k,O){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,z.Z)(function*(k,O){const G=Tn(k),pe=(yield ra()).transaction(ir,"readwrite"),be=pe.objectStore(ir),Ne=yield be.get(G);return yield be.put(O,G),yield pe.done,(!Ne||Ne.fid!==O.fid)&&on(k,O.fid),O})).apply(this,arguments)}function $s(k){return ai.apply(this,arguments)}function ai(){return(ai=(0,z.Z)(function*(k){const O=Tn(k),ie=(yield ra()).transaction(ir,"readwrite");yield ie.objectStore(ir).delete(O),yield ie.done})).apply(this,arguments)}function _r(k,O){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,z.Z)(function*(k,O){const G=Tn(k),pe=(yield ra()).transaction(ir,"readwrite"),be=pe.objectStore(ir),Ne=yield be.get(G),Ke=O(Ne);return void 0===Ke?yield be.delete(G):yield be.put(Ke,G),yield pe.done,Ke&&(!Ne||Ne.fid!==Ke.fid)&&on(k,Ke.fid),Ke})).apply(this,arguments)}function Bn(k){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,z.Z)(function*(k){let O;const G=yield _r(k.appConfig,ie=>{const pe=Cn(ie),be=Et(k,pe);return O=be.registrationPromise,be.installationEntry});return""===G.fid?{installationEntry:yield O}:{installationEntry:G,registrationPromise:O}})).apply(this,arguments)}function Cn(k){return Mt(k||{fid:rt(),registrationStatus:0})}function Et(k,O){if(0===O.registrationStatus){if(!navigator.onLine)return{installationEntry:O,registrationPromise:Promise.reject(me.create("app-offline"))};const G={fid:O.fid,registrationStatus:1,registrationTime:Date.now()},ie=function ft(k,O){return hn.apply(this,arguments)}(k,G);return{installationEntry:G,registrationPromise:ie}}return 1===O.registrationStatus?{installationEntry:O,registrationPromise:gi(k)}:{installationEntry:O}}function hn(){return(hn=(0,z.Z)(function*(k,O){try{const G=yield we(k,O);return ot(k.appConfig,G)}catch(G){throw Me(G)&&409===G.customData.serverCode?yield $s(k.appConfig):yield ot(k.appConfig,{fid:O.fid,registrationStatus:0}),G}})).apply(this,arguments)}function gi(k){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,z.Z)(function*(k){let O=yield rr(k.appConfig);for(;1===O.registrationStatus;)yield je(100),O=yield rr(k.appConfig);if(0===O.registrationStatus){const{installationEntry:G,registrationPromise:ie}=yield Bn(k);return ie||G}return O})).apply(this,arguments)}function rr(k){return _r(k,O=>{if(!O)throw me.create("installation-not-found");return Mt(O)})}function Mt(k){return function ms(k){return 1===k.registrationStatus&&k.registrationTime+1e4<Date.now()}(k)?{fid:k.fid,registrationStatus:0}:k}function an(k,O){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,z.Z)(function*({appConfig:k,heartbeatServiceProvider:O},G){const ie=cn(k,G),pe=oe(k,G),be=O.getImmediate({optional:!0});if(be){const pt=yield be.getHeartbeatsHeader();pt&&pe.append("x-firebase-client",pt)}const Ke={method:"POST",headers:pe,body:JSON.stringify({installation:{sdkVersion:w,appId:k.appId}})},nt=yield Ae(()=>fetch(ie,Ke));if(nt.ok)return Ee(yield nt.json());throw yield Ie("Generate Auth Token",nt)})).apply(this,arguments)}function cn(k,{fid:O}){return`${De(k)}/${O}/authTokens:generate`}function li(k){return qi.apply(this,arguments)}function qi(){return(qi=(0,z.Z)(function*(k,O=!1){let G;const ie=yield _r(k.appConfig,be=>{if(!Ht(be))throw me.create("not-registered");const Ne=be.authToken;if(!O&&ae(Ne))return be;if(1===Ne.requestStatus)return G=ct(k,O),be;{if(!navigator.onLine)throw me.create("app-offline");const Ke=fe(be);return G=At(k,Ke),Ke}});return G?yield G:ie.authToken})).apply(this,arguments)}function ct(k,O){return Le.apply(this,arguments)}function Le(){return(Le=(0,z.Z)(function*(k,O){let G=yield ut(k.appConfig);for(;1===G.authToken.requestStatus;)yield je(100),G=yield ut(k.appConfig);const ie=G.authToken;return 0===ie.requestStatus?li(k,O):ie})).apply(this,arguments)}function ut(k){return _r(k,O=>{if(!Ht(O))throw me.create("not-registered");return function Pe(k){return 1===k.requestStatus&&k.requestTime+1e4<Date.now()}(O.authToken)?Object.assign(Object.assign({},O),{authToken:{requestStatus:0}}):O})}function At(k,O){return St.apply(this,arguments)}function St(){return(St=(0,z.Z)(function*(k,O){try{const G=yield an(k,O),ie=Object.assign(Object.assign({},O),{authToken:G});return yield ot(k.appConfig,ie),G}catch(G){if(!Me(G)||401!==G.customData.serverCode&&404!==G.customData.serverCode){const ie=Object.assign(Object.assign({},O),{authToken:{requestStatus:0}});yield ot(k.appConfig,ie)}else yield $s(k.appConfig);throw G}})).apply(this,arguments)}function Ht(k){return void 0!==k&&2===k.registrationStatus}function ae(k){return 2===k.requestStatus&&!function se(k){const O=Date.now();return O<k.creationTime||k.creationTime+k.expiresIn<O+36e5}(k)}function fe(k){const O={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},k),{authToken:O})}function et(){return(et=(0,z.Z)(function*(k){const O=k,{installationEntry:G,registrationPromise:ie}=yield Bn(O);return ie?ie.catch(console.error):li(O).catch(console.error),G.fid})).apply(this,arguments)}function ln(){return(ln=(0,z.Z)(function*(k,O=!1){const G=k;return yield En(G),(yield li(G,O)).token})).apply(this,arguments)}function En(k){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,z.Z)(function*(k){const{registrationPromise:O}=yield Bn(k);O&&(yield O)})).apply(this,arguments)}function qs(k){return me.create("missing-app-config-values",{valueName:k})}const sa="installations",Mn=k=>{const O=k.getProvider("app").getImmediate(),G=function Sn(k){if(!k||!k.options)throw qs("App Configuration");if(!k.name)throw qs("App Name");const O=["projectId","apiKey","appId"];for(const G of O)if(!k.options[G])throw qs(G);return{appName:k.name,projectId:k.options.projectId,apiKey:k.options.apiKey,appId:k.options.appId}}(O);return{app:O,appConfig:G,heartbeatServiceProvider:(0,re._getProvider)(O,"heartbeat"),_delete:()=>Promise.resolve()}},vo=k=>{const O=k.getProvider("app").getImmediate(),G=(0,re._getProvider)(O,sa).getImmediate();return{getId:()=>function ge(k){return et.apply(this,arguments)}(G),getToken:pe=>function mt(k){return ln.apply(this,arguments)}(G,pe)}};(function Rl(){(0,re._registerComponent)(new V.wA(sa,Mn,"PUBLIC")),(0,re._registerComponent)(new V.wA("installations-internal",vo,"PRIVATE"))})(),(0,re.registerVersion)(j,c),(0,re.registerVersion)(j,c,"esm2017");const Jr="@firebase/remote-config",Jn=new Y.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class wf{constructor(O,G,ie,pe){this.client=O,this.storage=G,this.storageCache=ie,this.logger=pe}isCachedDataFresh(O,G){if(!G)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ie=Date.now()-G,pe=ie<=O;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ie}. Cache max age millis (minimumFetchIntervalMillis setting): ${O}. Is cache hit: ${pe}.`),pe}fetch(O){var G=this;return(0,z.Z)(function*(){const[ie,pe]=yield Promise.all([G.storage.getLastSuccessfulFetchTimestampMillis(),G.storage.getLastSuccessfulFetchResponse()]);if(pe&&G.isCachedDataFresh(O.cacheMaxAgeMillis,ie))return pe;O.eTag=pe&&pe.eTag;const be=yield G.client.fetch(O),Ne=[G.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===be.status&&Ne.push(G.storage.setLastSuccessfulFetchResponse(be)),yield Promise.all(Ne),be})()}}function lc(k=navigator){return k.languages&&k.languages[0]||k.language}class uc{constructor(O,G,ie,pe,be,Ne){this.firebaseInstallations=O,this.sdkVersion=G,this.namespace=ie,this.projectId=pe,this.apiKey=be,this.appId=Ne}fetch(O){var G=this;return(0,z.Z)(function*(){var ie,pe,be;const[Ne,Ke]=yield Promise.all([G.firebaseInstallations.getId(),G.firebaseInstallations.getToken()]),pt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${G.projectId}/namespaces/${G.namespace}:fetch?key=${G.apiKey}`,Vt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":O.eTag||"*"},yt={sdk_version:G.sdkVersion,app_instance_id:Ne,app_instance_id_token:Ke,app_id:G.appId,language_code:lc()},Ci={method:"POST",headers:Vt,body:JSON.stringify(yt)},Di=fetch(pt,Ci),ao=new Promise((Er,Bo)=>{O.signal.addEventListener(()=>{const Ts=new Error("The operation was aborted.");Ts.name="AbortError",Bo(Ts)})});let Fo;try{yield Promise.race([Di,ao]),Fo=yield Di}catch(Er){let Bo="fetch-client-network";throw"AbortError"===(null===(ie=Er)||void 0===ie?void 0:ie.name)&&(Bo="fetch-timeout"),Jn.create(Bo,{originalErrorMessage:null===(pe=Er)||void 0===pe?void 0:pe.message})}let dl=Fo.status;const kf=Fo.headers.get("ETag")||void 0;let Xd,ss;if(200===Fo.status){let Er;try{Er=yield Fo.json()}catch(Bo){throw Jn.create("fetch-client-parse",{originalErrorMessage:null===(be=Bo)||void 0===be?void 0:be.message})}Xd=Er.entries,ss=Er.state}if("INSTANCE_STATE_UNSPECIFIED"===ss?dl=500:"NO_CHANGE"===ss?dl=304:("NO_TEMPLATE"===ss||"EMPTY_CONFIG"===ss)&&(Xd={}),304!==dl&&200!==dl)throw Jn.create("fetch-status",{httpStatus:dl});return{status:dl,eTag:kf,config:Xd}})()}}class km{constructor(O,G){this.client=O,this.storage=G}fetch(O){var G=this;return(0,z.Z)(function*(){const ie=(yield G.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return G.attemptFetch(O,ie)})()}attemptFetch(O,{throttleEndTimeMillis:G,backoffCount:ie}){var pe=this;return(0,z.Z)(function*(){yield function ci(k,O){return new Promise((G,ie)=>{const pe=Math.max(O-Date.now(),0),be=setTimeout(G,pe);k.addEventListener(()=>{clearTimeout(be),ie(Jn.create("fetch-throttle",{throttleEndTimeMillis:O}))})})}(O.signal,G);try{const be=yield pe.client.fetch(O);return yield pe.storage.deleteThrottleMetadata(),be}catch(be){if(!function kd(k){if(!(k instanceof Y.ZR&&k.customData))return!1;const O=Number(k.customData.httpStatus);return 429===O||500===O||503===O||504===O}(be))throw be;const Ne={throttleEndTimeMillis:Date.now()+(0,Y.$s)(ie),backoffCount:ie+1};return yield pe.storage.setThrottleMetadata(Ne),pe.attemptFetch(O,Ne)}})()}}class Rd{constructor(O,G,ie,pe,be){this.app=O,this._client=G,this._storageCache=ie,this._storage=pe,this._logger=be,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function cc(k,O){var G;const ie=k.target.error||void 0;return Jn.create(O,{originalErrorMessage:ie&&(null===(G=ie)||void 0===G?void 0:G.message)})}const Qs="app_namespace_store";class Nm{constructor(O,G,ie,pe=function Om(){return new Promise((k,O)=>{var G;try{const ie=indexedDB.open("firebase_remote_config",1);ie.onerror=pe=>{O(cc(pe,"storage-open"))},ie.onsuccess=pe=>{k(pe.target.result)},ie.onupgradeneeded=pe=>{0===pe.oldVersion&&pe.target.result.createObjectStore(Qs,{keyPath:"compositeKey"})}}catch(ie){O(Jn.create("storage-open",{originalErrorMessage:null===(G=ie)||void 0===G?void 0:G.message}))}})}()){this.appId=O,this.appName=G,this.namespace=ie,this.openDbPromise=pe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(O){return this.set("last_fetch_status",O)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(O){return this.set("last_successful_fetch_timestamp_millis",O)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(O){return this.set("last_successful_fetch_response",O)}getActiveConfig(){return this.get("active_config")}setActiveConfig(O){return this.set("active_config",O)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(O){return this.set("active_config_etag",O)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(O){return this.set("throttle_metadata",O)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(O){var G=this;return(0,z.Z)(function*(){const ie=yield G.openDbPromise;return new Promise((pe,be)=>{var Ne;const nt=ie.transaction([Qs],"readonly").objectStore(Qs),pt=G.createCompositeKey(O);try{const Vt=nt.get(pt);Vt.onerror=yt=>{be(cc(yt,"storage-get"))},Vt.onsuccess=yt=>{const Ci=yt.target.result;pe(Ci?Ci.value:void 0)}}catch(Vt){be(Jn.create("storage-get",{originalErrorMessage:null===(Ne=Vt)||void 0===Ne?void 0:Ne.message}))}})})()}set(O,G){var ie=this;return(0,z.Z)(function*(){const pe=yield ie.openDbPromise;return new Promise((be,Ne)=>{var Ke;const pt=pe.transaction([Qs],"readwrite").objectStore(Qs),Vt=ie.createCompositeKey(O);try{const yt=pt.put({compositeKey:Vt,value:G});yt.onerror=Ci=>{Ne(cc(Ci,"storage-set"))},yt.onsuccess=()=>{be()}}catch(yt){Ne(Jn.create("storage-set",{originalErrorMessage:null===(Ke=yt)||void 0===Ke?void 0:Ke.message}))}})})()}delete(O){var G=this;return(0,z.Z)(function*(){const ie=yield G.openDbPromise;return new Promise((pe,be)=>{var Ne;const nt=ie.transaction([Qs],"readwrite").objectStore(Qs),pt=G.createCompositeKey(O);try{const Vt=nt.delete(pt);Vt.onerror=yt=>{be(cc(yt,"storage-delete"))},Vt.onsuccess=()=>{pe()}}catch(Vt){be(Jn.create("storage-delete",{originalErrorMessage:null===(Ne=Vt)||void 0===Ne?void 0:Ne.message}))}})})()}createCompositeKey(O){return[this.appId,this.appName,this.namespace,O].join()}}class Od{constructor(O){this.storage=O}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var O=this;return(0,z.Z)(function*(){const G=O.storage.getLastFetchStatus(),ie=O.storage.getLastSuccessfulFetchTimestampMillis(),pe=O.storage.getActiveConfig(),be=yield G;be&&(O.lastFetchStatus=be);const Ne=yield ie;Ne&&(O.lastSuccessfulFetchTimestampMillis=Ne);const Ke=yield pe;Ke&&(O.activeConfig=Ke)})()}setLastFetchStatus(O){return this.lastFetchStatus=O,this.storage.setLastFetchStatus(O)}setLastSuccessfulFetchTimestampMillis(O){return this.lastSuccessfulFetchTimestampMillis=O,this.storage.setLastSuccessfulFetchTimestampMillis(O)}setActiveConfig(O){return this.activeConfig=O,this.storage.setActiveConfig(O)}}function Pl(){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,z.Z)(function*(){if(!(0,Y.hl)())return!1;try{return yield(0,Y.eu)()}catch{return!1}})).apply(this,arguments)}!function Xs(){(0,re._registerComponent)(new V.wA("remote-config",function k(O,{instanceIdentifier:G}){const ie=O.getProvider("app").getImmediate(),pe=O.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Jn.create("registration-window");if(!(0,Y.hl)())throw Jn.create("indexed-db-unavailable");const{projectId:be,apiKey:Ne,appId:Ke}=ie.options;if(!be)throw Jn.create("registration-project-id");if(!Ne)throw Jn.create("registration-api-key");if(!Ke)throw Jn.create("registration-app-id");const nt=new Nm(Ke,ie.name,G=G||"firebase"),pt=new Od(nt),Vt=new g.Yd(Jr);Vt.logLevel=g.in.ERROR;const yt=new uc(pe,re.SDK_VERSION,G,be,Ne,Ke),Ci=new km(yt,nt),Di=new wf(Ci,nt,pt,Vt),ao=new Rd(ie,Di,pt,nt,Vt);return function yi(k){const O=(0,Y.m9)(k);O._initializePromise||(O._initializePromise=O._storageCache.loadFromStorage().then(()=>{O._isInitializationComplete=!0}))}(ao),ao},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(Jr,"0.3.14"),(0,re.registerVersion)(Jr,"0.3.14","esm2017")}();const es="/firebase-messaging-sw.js",_s="/firebase-cloud-messaging-push-scope",ys="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Wa="google.c.a.c_id",Ol="google.c.a.c_l",dc="google.c.a.ts",Cf="google.c.a.e";var vs=(()=>{return(k=vs||(vs={})).PUSH_RECEIVED="push-received",k.NOTIFICATION_CLICKED="notification-clicked",vs;var k})();function yr(k){const O=new Uint8Array(k);return btoa(String.fromCharCode(...O)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function or(k){const G=(k+"=".repeat((4-k.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ie=atob(G),pe=new Uint8Array(ie.length);for(let be=0;be<ie.length;++be)pe[be]=ie.charCodeAt(be);return pe}const ua="fcm_token_details_db",Si="fcm_token_object_Store";function Df(k){return If.apply(this,arguments)}function If(){return If=(0,z.Z)(function*(k){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(be=>be.name).includes(ua))return null;let O=null;return(yield(0,F.X3)(ua,5,{upgrade:(ie=(0,z.Z)(function*(pe,be,Ne,Ke){var nt;if(be<2||!pe.objectStoreNames.contains(Si))return;const pt=Ke.objectStore(Si),Vt=yield pt.index("fcmSenderId").get(k);if(yield pt.clear(),Vt)if(2===be){const yt=Vt;if(!yt.auth||!yt.p256dh||!yt.endpoint)return;O={token:yt.fcmToken,createTime:null!==(nt=yt.createTime)&&void 0!==nt?nt:Date.now(),subscriptionOptions:{auth:yt.auth,p256dh:yt.p256dh,endpoint:yt.endpoint,swScope:yt.swScope,vapidKey:"string"==typeof yt.vapidKey?yt.vapidKey:yr(yt.vapidKey)}}}else if(3===be){const yt=Vt;O={token:yt.fcmToken,createTime:yt.createTime,subscriptionOptions:{auth:yr(yt.auth),p256dh:yr(yt.p256dh),endpoint:yt.endpoint,swScope:yt.swScope,vapidKey:yr(yt.vapidKey)}}}else if(4===be){const yt=Vt;O={token:yt.fcmToken,createTime:yt.createTime,subscriptionOptions:{auth:yr(yt.auth),p256dh:yr(yt.p256dh),endpoint:yt.endpoint,swScope:yt.swScope,vapidKey:yr(yt.vapidKey)}}}}),function(be,Ne,Ke,nt){return ie.apply(this,arguments)})})).close(),yield(0,F.Lj)(ua),yield(0,F.Lj)("fcm_vapid_details_db"),yield(0,F.Lj)("undefined"),Vn(O)?O:null;var ie}),If.apply(this,arguments)}function Vn(k){if(!k||!k.subscriptionOptions)return!1;const{subscriptionOptions:O}=k;return"number"==typeof k.createTime&&k.createTime>0&&"string"==typeof k.token&&k.token.length>0&&"string"==typeof O.auth&&O.auth.length>0&&"string"==typeof O.p256dh&&O.p256dh.length>0&&"string"==typeof O.endpoint&&O.endpoint.length>0&&"string"==typeof O.swScope&&O.swScope.length>0&&"string"==typeof O.vapidKey&&O.vapidKey.length>0}const vr="firebase-messaging-store";let Ki=null;function Nl(){return Ki||(Ki=(0,F.X3)("firebase-messaging-database",1,{upgrade:(k,O)=>{0===O&&k.createObjectStore(vr)}})),Ki}function Eo(k){return bs.apply(this,arguments)}function bs(){return(bs=(0,z.Z)(function*(k){const O=Hr(k),ie=yield(yield Nl()).transaction(vr).objectStore(vr).get(O);if(ie)return ie;{const pe=yield Df(k.appConfig.senderId);if(pe)return yield en(k,pe),pe}})).apply(this,arguments)}function en(k,O){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,z.Z)(function*(k,O){const G=Hr(k),pe=(yield Nl()).transaction(vr,"readwrite");return yield pe.objectStore(vr).put(O,G),yield pe.done,O})).apply(this,arguments)}function Co(k){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,z.Z)(function*(k){const O=Hr(k),ie=(yield Nl()).transaction(vr,"readwrite");yield ie.objectStore(vr).delete(O),yield ie.done})).apply(this,arguments)}function Hr({appConfig:k}){return k.appId}const kn=new Y.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function kt(k,O){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,z.Z)(function*(k,O){var G;const ie=yield mc(k),pe=Fe(O),be={method:"POST",headers:ie,body:JSON.stringify(pe)};let Ne;try{Ne=yield(yield fetch(ws(k.appConfig),be)).json()}catch(Ke){throw kn.create("token-subscribe-failed",{errorInfo:null===(G=Ke)||void 0===G?void 0:G.toString()})}if(Ne.error)throw kn.create("token-subscribe-failed",{errorInfo:Ne.error.message});if(!Ne.token)throw kn.create("token-subscribe-no-token");return Ne.token})).apply(this,arguments)}function Tf(k,O){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,z.Z)(function*(k,O){var G;const ie=yield mc(k),pe=Fe(O.subscriptionOptions),be={method:"PATCH",headers:ie,body:JSON.stringify(pe)};let Ne;try{Ne=yield(yield fetch(`${ws(k.appConfig)}/${O.token}`,be)).json()}catch(Ke){throw kn.create("token-update-failed",{errorInfo:null===(G=Ke)||void 0===G?void 0:G.toString()})}if(Ne.error)throw kn.create("token-update-failed",{errorInfo:Ne.error.message});if(!Ne.token)throw kn.create("token-update-no-token");return Ne.token})).apply(this,arguments)}function Hl(k,O){return pc.apply(this,arguments)}function pc(){return(pc=(0,z.Z)(function*(k,O){var G;const pe={method:"DELETE",headers:yield mc(k)};try{const Ne=yield(yield fetch(`${ws(k.appConfig)}/${O}`,pe)).json();if(Ne.error)throw kn.create("token-unsubscribe-failed",{errorInfo:Ne.error.message})}catch(be){throw kn.create("token-unsubscribe-failed",{errorInfo:null===(G=be)||void 0===G?void 0:G.toString()})}})).apply(this,arguments)}function ws({projectId:k}){return`https://fcmregistrations.googleapis.com/v1/projects/${k}/registrations`}function mc(k){return $a.apply(this,arguments)}function $a(){return($a=(0,z.Z)(function*({appConfig:k,installations:O}){const G=yield O.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":k.apiKey,"x-goog-firebase-installations-auth":`FIS ${G}`})})).apply(this,arguments)}function Fe({p256dh:k,auth:O,endpoint:G,vapidKey:ie}){const pe={web:{endpoint:G,auth:O,p256dh:k}};return ie!==ys&&(pe.web.applicationPubKey=ie),pe}const Yt=6048e5;function jl(k){return zl.apply(this,arguments)}function zl(){return(zl=(0,z.Z)(function*(k){const O=yield gc(k.swRegistration,k.vapidKey),G={vapidKey:k.vapidKey,swScope:k.swRegistration.scope,endpoint:O.endpoint,auth:yr(O.getKey("auth")),p256dh:yr(O.getKey("p256dh"))},ie=yield Eo(k.firebaseDependencies);if(ie){if(Fd(ie.subscriptionOptions,G))return Date.now()>=ie.createTime+Yt?ca(k,{token:ie.token,createTime:Date.now(),subscriptionOptions:G}):ie.token;try{yield Hl(k.firebaseDependencies,ie.token)}catch(pe){console.warn(pe)}return qa(k.firebaseDependencies,G)}return qa(k.firebaseDependencies,G)})).apply(this,arguments)}function Un(k){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,z.Z)(function*(k){const O=yield Eo(k.firebaseDependencies);O&&(yield Hl(k.firebaseDependencies,O.token),yield Co(k.firebaseDependencies));const G=yield k.swRegistration.pushManager.getSubscription();return!G||G.unsubscribe()})).apply(this,arguments)}function ca(k,O){return br.apply(this,arguments)}function br(){return(br=(0,z.Z)(function*(k,O){try{const G=yield Tf(k.firebaseDependencies,O),ie=Object.assign(Object.assign({},O),{token:G,createTime:Date.now()});return yield en(k.firebaseDependencies,ie),G}catch(G){throw yield Un(k),G}})).apply(this,arguments)}function qa(k,O){return Za.apply(this,arguments)}function Za(){return(Za=(0,z.Z)(function*(k,O){const ie={token:yield kt(k,O),createTime:Date.now(),subscriptionOptions:O};return yield en(k,ie),ie.token})).apply(this,arguments)}function gc(k,O){return _c.apply(this,arguments)}function _c(){return(_c=(0,z.Z)(function*(k,O){return(yield k.pushManager.getSubscription())||k.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:or(O)})})).apply(this,arguments)}function Fd(k,O){return O.vapidKey===k.vapidKey&&O.endpoint===k.endpoint&&O.auth===k.auth&&O.p256dh===k.p256dh}function Ka(k){const O={from:k.from,collapseKey:k.collapse_key,messageId:k.fcmMessageId};return function Hn(k,O){if(!O.notification)return;k.notification={};const G=O.notification.title;G&&(k.notification.title=G);const ie=O.notification.body;ie&&(k.notification.body=ie);const pe=O.notification.image;pe&&(k.notification.image=pe)}(O,k),function ts(k,O){!O.data||(k.data=O.data)}(O,k),function yc(k,O){var G,ie,pe,be,Ne;if(!(O.fcmOptions||null!==(G=O.notification)&&void 0!==G&&G.click_action))return;k.fcmOptions={};const Ke=null!==(pe=null===(ie=O.fcmOptions)||void 0===ie?void 0:ie.link)&&void 0!==pe?pe:null===(be=O.notification)||void 0===be?void 0:be.click_action;Ke&&(k.fcmOptions.link=Ke);const nt=null===(Ne=O.fcmOptions)||void 0===Ne?void 0:Ne.analytics_label;nt&&(k.fcmOptions.analyticsLabel=nt)}(O,k),O}function Do(k){return"object"==typeof k&&!!k&&Wa in k}function Es(k,O){const G=[];for(let ie=0;ie<k.length;ie++)G.push(k.charAt(ie)),ie<O.length&&G.push(O.charAt(ie));return G.join("")}function Ya(k){return kn.create("missing-app-config-values",{valueName:k})}Es("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Es("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Bm{constructor(O,G,ie){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const pe=function Fm(k){if(!k||!k.options)throw Ya("App Configuration Object");if(!k.name)throw Ya("App Name");const O=["projectId","apiKey","appId","messagingSenderId"],{options:G}=k;for(const ie of O)if(!G[ie])throw Ya(ie);return{appName:k.name,projectId:G.projectId,apiKey:G.apiKey,appId:G.appId,senderId:G.messagingSenderId}}(O);this.firebaseDependencies={app:O,appConfig:pe,installations:G,analyticsProvider:ie}}_delete(){return Promise.resolve()}}function vc(k){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,z.Z)(function*(k){var O;try{k.swRegistration=yield navigator.serviceWorker.register(es,{scope:_s}),k.swRegistration.update().catch(()=>{})}catch(G){throw kn.create("failed-service-worker-registration",{browserErrorMessage:null===(O=G)||void 0===O?void 0:O.message})}})).apply(this,arguments)}function Qa(k,O){return bc.apply(this,arguments)}function bc(){return(bc=(0,z.Z)(function*(k,O){if(!O&&!k.swRegistration&&(yield vc(k)),O||!k.swRegistration){if(!(O instanceof ServiceWorkerRegistration))throw kn.create("invalid-sw-registration");k.swRegistration=O}})).apply(this,arguments)}function Xa(k,O){return wc.apply(this,arguments)}function wc(){return(wc=(0,z.Z)(function*(k,O){O?k.vapidKey=O:k.vapidKey||(k.vapidKey=ys)})).apply(this,arguments)}function ql(){return(ql=(0,z.Z)(function*(k,O){if(!navigator)throw kn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw kn.create("permission-blocked");return yield Xa(k,O?.vapidKey),yield Qa(k,O?.serviceWorkerRegistration),jl(k)})).apply(this,arguments)}function Ec(k,O,G){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,z.Z)(function*(k,O,G){const ie=Dc(O);(yield k.firebaseDependencies.analyticsProvider.get()).logEvent(ie,{message_id:G[Wa],message_name:G[Ol],message_time:G[dc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Dc(k){switch(k){case vs.NOTIFICATION_CLICKED:return"notification_open";case vs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Io(){return(Io=(0,z.Z)(function*(k,O){const G=O.data;if(!G.isFirebaseMessaging)return;k.onMessageHandler&&G.messageType===vs.PUSH_RECEIVED&&("function"==typeof k.onMessageHandler?k.onMessageHandler(Ka(G)):k.onMessageHandler.next(Ka(G)));const ie=G.data;Do(ie)&&"1"===ie[Cf]&&(yield Ec(k,G.messageType,ie))})).apply(this,arguments)}const To="@firebase/messaging",di=k=>{const O=new Bm(k.getProvider("app").getImmediate(),k.getProvider("installations-internal").getImmediate(),k.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",G=>function Bd(k,O){return Io.apply(this,arguments)}(O,G)),O},ar=k=>{const O=k.getProvider("messaging").getImmediate();return{getToken:ie=>function $l(k,O){return ql.apply(this,arguments)}(O,ie)}};function Vd(){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,z.Z)(function*(){try{yield(0,Y.eu)()}catch{return!1}return typeof window<"u"&&(0,Y.hl)()&&(0,Y.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function An(){(0,re._registerComponent)(new V.wA("messaging",di,"PUBLIC")),(0,re._registerComponent)(new V.wA("messaging-internal",ar,"PRIVATE")),(0,re.registerVersion)(To,"0.9.19"),(0,re.registerVersion)(To,"0.9.19","esm2017")}();const ha="analytics",jd="firebase_id",Ao="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ql="https://www.googletagmanager.com/gtag/js",jn=new g.Yd("@firebase/analytics");function Xl(k){return Promise.all(k.map(O=>O.catch(G=>G)))}function Jl(k,O){const G=document.createElement("script");G.src=`${Ql}?l=${k}&id=${O}`,G.async=!0,document.head.appendChild(G)}function Af(k,O,G,ie,pe,be){return xo.apply(this,arguments)}function xo(){return(xo=(0,z.Z)(function*(k,O,G,ie,pe,be){const Ne=ie[pe];try{if(Ne)yield O[Ne];else{const nt=(yield Xl(G)).find(pt=>pt.measurementId===pe);nt&&(yield O[nt.appId])}}catch(Ke){jn.error(Ke)}k("config",pe,be)})).apply(this,arguments)}function fa(k,O,G,ie,pe){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,z.Z)(function*(k,O,G,ie,pe){try{let be=[];if(pe&&pe.send_to){let Ne=pe.send_to;Array.isArray(Ne)||(Ne=[Ne]);const Ke=yield Xl(G);for(const nt of Ne){const pt=Ke.find(yt=>yt.measurementId===nt),Vt=pt&&O[pt.appId];if(!Vt){be=[];break}be.push(Vt)}}0===be.length&&(be=Object.values(O)),yield Promise.all(be),k("event",ie,pe||{})}catch(be){jn.error(be)}})).apply(this,arguments)}function Gd(k){const O=window.document.getElementsByTagName("script");for(const G of Object.values(O))if(G.src&&G.src.includes(Ql)&&G.src.includes(k))return G;return null}const bi=new Y.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),nl=new class ns{constructor(O={},G=1e3){this.throttleMetadata=O,this.intervalMillis=G}getThrottleMetadata(O){return this.throttleMetadata[O]}setThrottleMetadata(O,G){this.throttleMetadata[O]=G}deleteThrottleMetadata(O){delete this.throttleMetadata[O]}};function $d(k){return new Headers({Accept:"application/json","x-goog-api-key":k})}function il(k){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,z.Z)(function*(k){var O;const{appId:G,apiKey:ie}=k,pe={method:"GET",headers:$d(ie)},be=Ao.replace("{app-id}",G),Ne=yield fetch(be,pe);if(200!==Ne.status&&304!==Ne.status){let Ke="";try{const nt=yield Ne.json();null!==(O=nt.error)&&void 0!==O&&O.message&&(Ke=nt.error.message)}catch{}throw bi.create("config-fetch-failed",{httpStatus:Ne.status,responseMessage:Ke})}return Ne.json()})).apply(this,arguments)}function $n(k){return jr.apply(this,arguments)}function jr(){return(jr=(0,z.Z)(function*(k,O=nl,G){const{appId:ie,apiKey:pe,measurementId:be}=k.options;if(!ie)throw bi.create("no-app-id");if(!pe){if(be)return{measurementId:be,appId:ie};throw bi.create("no-api-key")}const Ne=O.getThrottleMetadata(ie)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ke=new iu;return setTimeout((0,z.Z)(function*(){Ke.abort()}),void 0!==G?G:6e4),tu({appId:ie,apiKey:pe,measurementId:be},Ne,Ke,O)})).apply(this,arguments)}function tu(k,O,G){return ko.apply(this,arguments)}function ko(){return(ko=(0,z.Z)(function*(k,{throttleEndTimeMillis:O,backoffCount:G},ie,pe=nl){var be,Ne;const{appId:Ke,measurementId:nt}=k;try{yield rl(ie,O)}catch(pt){if(nt)return jn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${nt} provided in the "measurementId" field in the local Firebase config. [${null===(be=pt)||void 0===be?void 0:be.message}]`),{appId:Ke,measurementId:nt};throw pt}try{const pt=yield il(k);return pe.deleteThrottleMetadata(Ke),pt}catch(pt){const Vt=pt;if(!nu(Vt)){if(pe.deleteThrottleMetadata(Ke),nt)return jn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${nt} provided in the "measurementId" field in the local Firebase config. [${Vt?.message}]`),{appId:Ke,measurementId:nt};throw pt}const yt=503===Number(null===(Ne=Vt?.customData)||void 0===Ne?void 0:Ne.httpStatus)?(0,Y.$s)(G,pe.intervalMillis,30):(0,Y.$s)(G,pe.intervalMillis),Ci={throttleEndTimeMillis:Date.now()+yt,backoffCount:G+1};return pe.setThrottleMetadata(Ke,Ci),jn.debug(`Calling attemptFetch again in ${yt} millis`),tu(k,Ci,ie,pe)}})).apply(this,arguments)}function rl(k,O){return new Promise((G,ie)=>{const pe=Math.max(O-Date.now(),0),be=setTimeout(G,pe);k.addEventListener(()=>{clearTimeout(be),ie(bi.create("fetch-throttle",{throttleEndTimeMillis:O}))})})}function nu(k){if(!(k instanceof Y.ZR&&k.customData))return!1;const O=Number(k.customData.httpStatus);return 429===O||500===O||503===O||504===O}class iu{constructor(){this.listeners=[]}addEventListener(O){this.listeners.push(O)}abort(){this.listeners.forEach(O=>O())}}let to,al;function no(){return(no=(0,z.Z)(function*(k,O,G,ie,pe){if(pe&&pe.global)k("event",G,ie);else{const be=yield O;k("event",G,Object.assign(Object.assign({},ie),{send_to:be}))}})).apply(this,arguments)}function Po(k){al=k}function xc(k){to=k}function Cs(){return ou.apply(this,arguments)}function ou(){return(ou=(0,z.Z)(function*(){var k;if(!(0,Y.hl)())return jn.warn(bi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Y.eu)()}catch(O){return jn.warn(bi.create("indexeddb-unavailable",{errorInfo:null===(k=O)||void 0===k?void 0:k.toString()}).message),!1}return!0})).apply(this,arguments)}function ma(){return(ma=(0,z.Z)(function*(k,O,G,ie,pe,be,Ne){var Ke;const nt=$n(k);nt.then(Di=>{G[Di.measurementId]=Di.appId,k.options.measurementId&&Di.measurementId!==k.options.measurementId&&jn.warn(`The measurement ID in the local Firebase config (${k.options.measurementId}) does not match the measurement ID fetched from the server (${Di.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Di=>jn.error(Di)),O.push(nt);const pt=Cs().then(Di=>{if(Di)return ie.getId()}),[Vt,yt]=yield Promise.all([nt,pt]);Gd(be)||Jl(be,Vt.measurementId),al&&(pe("consent","default",al),Po(void 0)),pe("js",new Date);const Ci=null!==(Ke=Ne?.config)&&void 0!==Ke?Ke:{};return Ci.origin="firebase",Ci.update=!0,null!=yt&&(Ci[jd]=yt),pe("config",Vt.measurementId,Ci),to&&(pe("set",to),xc(void 0)),Vt.measurementId})).apply(this,arguments)}class au{constructor(O){this.app=O}_delete(){return delete lr[this.app.options.appId],Promise.resolve()}}let lr={},ro=[];const ga={};let ya,Oo,_a="dataLayer",ll=!1;function uy(k,O,G){!function Vm(){const k=[];if((0,Y.ru)()&&k.push("This is a browser extension environment."),(0,Y.zI)()||k.push("Cookies are not available."),k.length>0){const O=k.map((ie,pe)=>`(${pe+1}) ${ie}`).join(" "),G=bi.create("invalid-analytics-context",{errorInfo:O});jn.warn(G.message)}}();const ie=k.options.appId;if(!ie)throw bi.create("no-app-id");if(!k.options.apiKey){if(!k.options.measurementId)throw bi.create("no-api-key");jn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${k.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=lr[ie])throw bi.create("already-exists",{id:ie});if(!ll){!function zd(k){let O=[];Array.isArray(window[k])?O=window[k]:window[k]=O}(_a);const{wrappedGtag:be,gtagCore:Ne}=function Ja(k,O,G,ie,pe){let be=function(...Ne){window[ie].push(arguments)};return window[pe]&&"function"==typeof window[pe]&&(be=window[pe]),window[pe]=function eu(k,O,G,ie){function be(){return(be=(0,z.Z)(function*(Ne,Ke,nt){try{"event"===Ne?yield fa(k,O,G,Ke,nt):"config"===Ne?yield Af(k,O,G,ie,Ke,nt):"consent"===Ne?k("consent","update",nt):k("set",Ke)}catch(pt){jn.error(pt)}})).apply(this,arguments)}return function pe(Ne,Ke,nt){return be.apply(this,arguments)}}(be,k,O,G),{gtagCore:be,wrappedGtag:window[pe]}}(lr,ro,ga,_a,"gtag");Oo=be,ya=Ne,ll=!0}return lr[ie]=function pa(k,O,G,ie,pe,be,Ne){return ma.apply(this,arguments)}(k,ro,ga,O,ya,_a,G),new au(k)}function dy(){return xf.apply(this,arguments)}function xf(){return(xf=(0,z.Z)(function*(){if((0,Y.ru)()||!(0,Y.zI)()||!(0,Y.hl)())return!1;try{return yield(0,Y.eu)()}catch{return!1}})).apply(this,arguments)}const ur="@firebase/analytics";!function Ni(){(0,re._registerComponent)(new V.wA(ha,(O,{options:G})=>uy(O.getProvider("app").getImmediate(),O.getProvider("installations-internal").getImmediate(),G),"PUBLIC")),(0,re._registerComponent)(new V.wA("analytics-internal",function k(O){try{const G=O.getProvider(ha).getImmediate();return{logEvent:(ie,pe,be)=>function Ds(k,O,G,ie){k=(0,Y.m9)(k),function qd(k,O,G,ie,pe){return no.apply(this,arguments)}(Oo,lr[k.app.options.appId],O,G,ie).catch(pe=>jn.error(pe))}(G,ie,pe,be)}}catch(G){throw bi.create("interop-component-reg-failed",{reason:G})}},"PRIVATE")),(0,re.registerVersion)(ur,"0.8.3"),(0,re.registerVersion)(ur,"0.8.3","esm2017")}();var ei=ee(4408),ti=ee(7565);const Yi=new class In extends ti.v{}(class Kd extends ei.o{constructor(O,G){super(O,G),this.scheduler=O,this.work=G}schedule(O,G=0){return G>0?super.schedule(O,G):(this.delay=G,this.state=O,this.scheduler.flush(this),this)}execute(O,G){return G>0||this.closed?super.execute(O,G):this._execute(O,G)}requestAsyncId(O,G,ie=0){return null!=ie&&ie>0||null==ie&&this.delay>0?super.requestAsyncId(O,G,ie):(O.flush(this),0)}});var uu=ee(4986),ul=ee(576),Qi=ee(4482),kc=ee(5403),cr=ee(4671),No=ee(5363),Yd=ee(9468);const cu=new h.GfV("7.4.1"),va="__angularfire_symbol__analyticsIsSupportedValue",is="__angularfire_symbol__analyticsIsSupported",du="__angularfire_symbol__remoteConfigIsSupportedValue",Pc="__angularfire_symbol__remoteConfigIsSupported",cl="__angularfire_symbol__messagingIsSupportedValue",hu="__angularfire_symbol__messagingIsSupported";function Rn(k,O,G){if(O){if(1===O.length)return O[0];const be=O.filter(Ne=>Ne.app===G);if(1===be.length)return be[0]}return G.container.getProvider(k).getImmediate({optional:!0})}globalThis[is]||(globalThis[is]=dy().then(k=>globalThis[va]=k).catch(()=>globalThis[va]=!1)),globalThis[hu]||(globalThis[hu]=Vd().then(k=>globalThis[cl]=k).catch(()=>globalThis[cl]=!1)),globalThis[Pc]||(globalThis[Pc]=Pl().then(k=>globalThis[du]=k).catch(()=>globalThis[du]=!1));const wa=(k,O)=>{const G=O?[O]:(0,ue.C6)(),ie=[];return G.forEach(pe=>{pe.container.getProvider(k).instances.forEach(Ne=>{ie.includes(Ne)||ie.push(Ne)})}),ie};function rs(){}class Lo{constructor(O,G=Yi){this.zone=O,this.delegate=G}now(){return this.delegate.now()}schedule(O,G,ie){const pe=this.zone;return this.delegate.schedule(function(Ne){pe.runGuarded(()=>{O.apply(this,[Ne])})},G,ie)}}class fu{constructor(O){this.zone=O,this.task=null}call(O,G){const ie=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",rs,{},rs,rs)),G.pipe(function Rc(k,O,G){const ie=(0,ul.m)(k)||O||G?{next:k,error:O,complete:G}:k;return ie?(0,Qi.e)((pe,be)=>{var Ne;null===(Ne=ie.subscribe)||void 0===Ne||Ne.call(ie);let Ke=!0;pe.subscribe((0,kc.x)(be,nt=>{var pt;null===(pt=ie.next)||void 0===pt||pt.call(ie,nt),be.next(nt)},()=>{var nt;Ke=!1,null===(nt=ie.complete)||void 0===nt||nt.call(ie),be.complete()},nt=>{var pt;Ke=!1,null===(pt=ie.error)||void 0===pt||pt.call(ie,nt),be.error(nt)},()=>{var nt,pt;Ke&&(null===(nt=ie.unsubscribe)||void 0===nt||nt.call(ie)),null===(pt=ie.finalize)||void 0===pt||pt.call(ie)}))}):cr.y}({next:ie,complete:ie,error:ie})).subscribe(O).add(ie)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let pu=(()=>{class k{constructor(G){this.ngZone=G,this.outsideAngular=G.runOutsideAngular(()=>new Lo(Zone.current)),this.insideAngular=G.run(()=>new Lo(Zone.current,uu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return k.\u0275fac=function(G){return new(G||k)(h.LFG(h.R0b))},k.\u0275prov=h.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();function Xi(){const k=globalThis.\u0275AngularFireScheduler;if(!k)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return k}function Zn(k){return k.pipe((0,No.Q)(Xi().outsideAngular))}function mu(k){return Xi(),function Qd(k){return function(G){return(G=G.lift(new fu(k.ngZone))).pipe((0,Yd.R)(k.outsideAngular),(0,No.Q)(k.insideAngular))}}(Xi())(k)}},2090:(lt,Re,ee)=>{"use strict";ee.d(Re,{$s:()=>ut,BH:()=>Zt,DV:()=>ir,Dv:()=>gi,G6:()=>Ie,GJ:()=>Ws,L:()=>F,LL:()=>nn,Pz:()=>sn,Sg:()=>rt,UG:()=>U,UI:()=>ra,US:()=>V,Wj:()=>Mt,Wl:()=>gn,Yr:()=>Ee,ZB:()=>m,ZR:()=>Tn,aH:()=>_t,b$:()=>te,cI:()=>Ft,dS:()=>an,eu:()=>ze,g5:()=>z,gK:()=>Wn,gQ:()=>Bn,h$:()=>g,hl:()=>He,hu:()=>ue,jU:()=>q,lb:()=>ms,m9:()=>Ht,ne:()=>Qn,p$:()=>c,pd:()=>Xr,r3:()=>Br,ru:()=>X,tV:()=>j,uI:()=>P,ug:()=>Vr,vZ:()=>ot,w1:()=>Me,w9:()=>$i,xO:()=>ai,xb:()=>gr,z$:()=>x,zI:()=>oe,zd:()=>_r});const ue=function(ae,se){if(!ae)throw z(se)},z=function(ae){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+ae)},re=function(ae){const se=[];let fe=0;for(let Pe=0;Pe<ae.length;Pe++){let ge=ae.charCodeAt(Pe);ge<128?se[fe++]=ge:ge<2048?(se[fe++]=ge>>6|192,se[fe++]=63&ge|128):55296==(64512&ge)&&Pe+1<ae.length&&56320==(64512&ae.charCodeAt(Pe+1))?(ge=65536+((1023&ge)<<10)+(1023&ae.charCodeAt(++Pe)),se[fe++]=ge>>18|240,se[fe++]=ge>>12&63|128,se[fe++]=ge>>6&63|128,se[fe++]=63&ge|128):(se[fe++]=ge>>12|224,se[fe++]=ge>>6&63|128,se[fe++]=63&ge|128)}return se},V={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ae,se){if(!Array.isArray(ae))throw Error("encodeByteArray takes an array as a parameter");this.init_();const fe=se?this.byteToCharMapWebSafe_:this.byteToCharMap_,Pe=[];for(let ge=0;ge<ae.length;ge+=3){const et=ae[ge],mt=ge+1<ae.length,ln=mt?ae[ge+1]:0,En=ge+2<ae.length,Jt=En?ae[ge+2]:0;let zt=(15&ln)<<2|Jt>>6,_i=63&Jt;En||(_i=64,mt||(zt=64)),Pe.push(fe[et>>2],fe[(3&et)<<4|ln>>4],fe[zt],fe[_i])}return Pe.join("")},encodeString(ae,se){return this.HAS_NATIVE_SUPPORT&&!se?btoa(ae):this.encodeByteArray(re(ae),se)},decodeString(ae,se){return this.HAS_NATIVE_SUPPORT&&!se?atob(ae):function(ae){const se=[];let fe=0,Pe=0;for(;fe<ae.length;){const ge=ae[fe++];if(ge<128)se[Pe++]=String.fromCharCode(ge);else if(ge>191&&ge<224){const et=ae[fe++];se[Pe++]=String.fromCharCode((31&ge)<<6|63&et)}else if(ge>239&&ge<365){const En=((7&ge)<<18|(63&ae[fe++])<<12|(63&ae[fe++])<<6|63&ae[fe++])-65536;se[Pe++]=String.fromCharCode(55296+(En>>10)),se[Pe++]=String.fromCharCode(56320+(1023&En))}else{const et=ae[fe++],mt=ae[fe++];se[Pe++]=String.fromCharCode((15&ge)<<12|(63&et)<<6|63&mt)}}return se.join("")}(this.decodeStringToByteArray(ae,se))},decodeStringToByteArray(ae,se){this.init_();const fe=se?this.charToByteMapWebSafe_:this.charToByteMap_,Pe=[];for(let ge=0;ge<ae.length;){const et=fe[ae.charAt(ge++)],ln=ge<ae.length?fe[ae.charAt(ge)]:0;++ge;const Jt=ge<ae.length?fe[ae.charAt(ge)]:64;++ge;const Je=ge<ae.length?fe[ae.charAt(ge)]:64;if(++ge,null==et||null==ln||null==Jt||null==Je)throw Error();Pe.push(et<<2|ln>>4),64!==Jt&&(Pe.push(ln<<4&240|Jt>>2),64!==Je&&Pe.push(Jt<<6&192|Je))}return Pe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ae=0;ae<this.ENCODED_VALS.length;ae++)this.byteToCharMap_[ae]=this.ENCODED_VALS.charAt(ae),this.charToByteMap_[this.byteToCharMap_[ae]]=ae,this.byteToCharMapWebSafe_[ae]=this.ENCODED_VALS_WEBSAFE.charAt(ae),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ae]]=ae,ae>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ae)]=ae,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ae)]=ae)}}},g=function(ae){const se=re(ae);return V.encodeByteArray(se,!0)},F=function(ae){return g(ae).replace(/\./g,"")},j=function(ae){try{return V.decodeString(ae,!0)}catch(se){console.error("base64Decode failed: ",se)}return null};function c(ae){return m(void 0,ae)}function m(ae,se){if(!(se instanceof Object))return se;switch(se.constructor){case Date:return new Date(se.getTime());case Object:void 0===ae&&(ae={});break;case Array:ae=[];break;default:return se}for(const fe in se)!se.hasOwnProperty(fe)||!w(fe)||(ae[fe]=m(ae[fe],se[fe]));return ae}function w(ae){return"__proto__"!==ae}function x(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function P(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(x())}function U(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function q(){return"object"==typeof self&&self.self===self}function X(){const ae="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ae&&void 0!==ae.id}function te(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Me(){const ae=x();return ae.indexOf("MSIE ")>=0||ae.indexOf("Trident/")>=0}function Ee(){return!1}function Ie(){return!U()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function He(){return"object"==typeof indexedDB}function ze(){return new Promise((ae,se)=>{try{let fe=!0;const Pe="validate-browser-context-for-indexeddb-analytics-module",ge=self.indexedDB.open(Pe);ge.onsuccess=()=>{ge.result.close(),fe||self.indexedDB.deleteDatabase(Pe),ae(!0)},ge.onupgradeneeded=()=>{fe=!1},ge.onerror=()=>{var et;se((null===(et=ge.error)||void 0===et?void 0:et.message)||"")}}catch(fe){se(fe)}})}function oe(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const we=()=>{try{return function Ae(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ae=process.env.__FIREBASE_DEFAULTS__;return ae?JSON.parse(ae):void 0})()||(()=>{if(typeof document>"u")return;let ae;try{ae=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const se=ae&&j(ae[1]);return se&&JSON.parse(se)})()}catch(ae){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ae}`)}},_t=()=>{var ae;return null===(ae=we())||void 0===ae?void 0:ae.config},sn=ae=>{var se;return null===(se=we())||void 0===se?void 0:se[`_${ae}`]};class Zt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((se,fe)=>{this.resolve=se,this.reject=fe})}wrapCallback(se){return(fe,Pe)=>{fe?this.reject(fe):this.resolve(Pe),"function"==typeof se&&(this.promise.catch(()=>{}),1===se.length?se(fe):se(fe,Pe))}}}function rt(ae,se){if(ae.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Pe=se||"demo-project",ge=ae.iat||0,et=ae.sub||ae.user_id;if(!et)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const mt=Object.assign({iss:`https://securetoken.google.com/${Pe}`,aud:Pe,iat:ge,exp:ge+3600,auth_time:ge,sub:et,user_id:et,firebase:{sign_in_provider:"custom",identities:{}}},ae);return[F(JSON.stringify({alg:"none",type:"JWT"})),F(JSON.stringify(mt)),""].join(".")}class Tn extends Error{constructor(se,fe,Pe){super(fe),this.code=se,this.customData=Pe,this.name="FirebaseError",Object.setPrototypeOf(this,Tn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nn.prototype.create)}}class nn{constructor(se,fe,Pe){this.service=se,this.serviceName=fe,this.errors=Pe}create(se,...fe){const Pe=fe[0]||{},ge=`${this.service}/${se}`,et=this.errors[se],mt=et?function on(ae,se){return ae.replace(Gi,(fe,Pe)=>{const ge=se[Pe];return null!=ge?String(ge):`<${Pe}?>`})}(et,Pe):"Error";return new Tn(ge,`${this.serviceName}: ${mt} (${ge}).`,Pe)}}const Gi=/\{\$([^}]+)}/g;function Ft(ae){return JSON.parse(ae)}function gn(ae){return JSON.stringify(ae)}const Gs=function(ae){let se={},fe={},Pe={},ge="";try{const et=ae.split(".");se=Ft(j(et[0])||""),fe=Ft(j(et[1])||""),ge=et[2],Pe=fe.d||{},delete fe.d}catch{}return{header:se,claims:fe,data:Pe,signature:ge}},$i=function(ae){const fe=Gs(ae).claims;return!!fe&&"object"==typeof fe&&fe.hasOwnProperty("iat")},Ws=function(ae){const se=Gs(ae).claims;return"object"==typeof se&&!0===se.admin};function Br(ae,se){return Object.prototype.hasOwnProperty.call(ae,se)}function ir(ae,se){if(Object.prototype.hasOwnProperty.call(ae,se))return ae[se]}function gr(ae){for(const se in ae)if(Object.prototype.hasOwnProperty.call(ae,se))return!1;return!0}function ra(ae,se,fe){const Pe={};for(const ge in ae)Object.prototype.hasOwnProperty.call(ae,ge)&&(Pe[ge]=se.call(fe,ae[ge],ge,ae));return Pe}function ot(ae,se){if(ae===se)return!0;const fe=Object.keys(ae),Pe=Object.keys(se);for(const ge of fe){if(!Pe.includes(ge))return!1;const et=ae[ge],mt=se[ge];if(Pi(et)&&Pi(mt)){if(!ot(et,mt))return!1}else if(et!==mt)return!1}for(const ge of Pe)if(!fe.includes(ge))return!1;return!0}function Pi(ae){return null!==ae&&"object"==typeof ae}function ai(ae){const se=[];for(const[fe,Pe]of Object.entries(ae))Array.isArray(Pe)?Pe.forEach(ge=>{se.push(encodeURIComponent(fe)+"="+encodeURIComponent(ge))}):se.push(encodeURIComponent(fe)+"="+encodeURIComponent(Pe));return se.length?"&"+se.join("&"):""}function _r(ae){const se={};return ae.replace(/^\?/,"").split("&").forEach(Pe=>{if(Pe){const[ge,et]=Pe.split("=");se[decodeURIComponent(ge)]=decodeURIComponent(et)}}),se}function Xr(ae){const se=ae.indexOf("?");if(!se)return"";const fe=ae.indexOf("#",se);return ae.substring(se,fe>0?fe:void 0)}class Bn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let se=1;se<this.blockSize;++se)this.pad_[se]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(se,fe){fe||(fe=0);const Pe=this.W_;if("string"==typeof se)for(let Je=0;Je<16;Je++)Pe[Je]=se.charCodeAt(fe)<<24|se.charCodeAt(fe+1)<<16|se.charCodeAt(fe+2)<<8|se.charCodeAt(fe+3),fe+=4;else for(let Je=0;Je<16;Je++)Pe[Je]=se[fe]<<24|se[fe+1]<<16|se[fe+2]<<8|se[fe+3],fe+=4;for(let Je=16;Je<80;Je++){const zt=Pe[Je-3]^Pe[Je-8]^Pe[Je-14]^Pe[Je-16];Pe[Je]=4294967295&(zt<<1|zt>>>31)}let Jt,Ze,ge=this.chain_[0],et=this.chain_[1],mt=this.chain_[2],ln=this.chain_[3],En=this.chain_[4];for(let Je=0;Je<80;Je++){Je<40?Je<20?(Jt=ln^et&(mt^ln),Ze=1518500249):(Jt=et^mt^ln,Ze=1859775393):Je<60?(Jt=et&mt|ln&(et|mt),Ze=2400959708):(Jt=et^mt^ln,Ze=3395469782);const zt=(ge<<5|ge>>>27)+Jt+En+Ze+Pe[Je]&4294967295;En=ln,ln=mt,mt=4294967295&(et<<30|et>>>2),et=ge,ge=zt}this.chain_[0]=this.chain_[0]+ge&4294967295,this.chain_[1]=this.chain_[1]+et&4294967295,this.chain_[2]=this.chain_[2]+mt&4294967295,this.chain_[3]=this.chain_[3]+ln&4294967295,this.chain_[4]=this.chain_[4]+En&4294967295}update(se,fe){if(null==se)return;void 0===fe&&(fe=se.length);const Pe=fe-this.blockSize;let ge=0;const et=this.buf_;let mt=this.inbuf_;for(;ge<fe;){if(0===mt)for(;ge<=Pe;)this.compress_(se,ge),ge+=this.blockSize;if("string"==typeof se){for(;ge<fe;)if(et[mt]=se.charCodeAt(ge),++mt,++ge,mt===this.blockSize){this.compress_(et),mt=0;break}}else for(;ge<fe;)if(et[mt]=se[ge],++mt,++ge,mt===this.blockSize){this.compress_(et),mt=0;break}}this.inbuf_=mt,this.total_+=fe}digest(){const se=[];let fe=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ge=this.blockSize-1;ge>=56;ge--)this.buf_[ge]=255&fe,fe/=256;this.compress_(this.buf_);let Pe=0;for(let ge=0;ge<5;ge++)for(let et=24;et>=0;et-=8)se[Pe]=this.chain_[ge]>>et&255,++Pe;return se}}function Qn(ae,se){const fe=new Cn(ae,se);return fe.subscribe.bind(fe)}class Cn{constructor(se,fe){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=fe,this.task.then(()=>{se(this)}).catch(Pe=>{this.error(Pe)})}next(se){this.forEachObserver(fe=>{fe.next(se)})}error(se){this.forEachObserver(fe=>{fe.error(se)}),this.close(se)}complete(){this.forEachObserver(se=>{se.complete()}),this.close()}subscribe(se,fe,Pe){let ge;if(void 0===se&&void 0===fe&&void 0===Pe)throw new Error("Missing Observer.");ge=function ft(ae,se){if("object"!=typeof ae||null===ae)return!1;for(const fe of se)if(fe in ae&&"function"==typeof ae[fe])return!0;return!1}(se,["next","error","complete"])?se:{next:se,error:fe,complete:Pe},void 0===ge.next&&(ge.next=hn),void 0===ge.error&&(ge.error=hn),void 0===ge.complete&&(ge.complete=hn);const et=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ge.error(this.finalError):ge.complete()}catch{}}),this.observers.push(ge),et}unsubscribeOne(se){void 0===this.observers||void 0===this.observers[se]||(delete this.observers[se],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(se){if(!this.finalized)for(let fe=0;fe<this.observers.length;fe++)this.sendOne(fe,se)}sendOne(se,fe){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[se])try{fe(this.observers[se])}catch(Pe){typeof console<"u"&&console.error&&console.error(Pe)}})}close(se){this.finalized||(this.finalized=!0,void 0!==se&&(this.finalError=se),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hn(){}const gi=function(ae,se,fe,Pe){let ge;if(Pe<se?ge="at least "+se:Pe>fe&&(ge=0===fe?"none":"no more than "+fe),ge)throw new Error(ae+" failed: Was called with "+Pe+(1===Pe?" argument.":" arguments.")+" Expects "+ge+".")};function Wn(ae,se){return`${ae} failed: ${se} argument `}function Mt(ae,se,fe,Pe){if((!Pe||fe)&&"function"!=typeof fe)throw new Error(Wn(ae,se)+"must be a valid function.")}function ms(ae,se,fe,Pe){if((!Pe||fe)&&("object"!=typeof fe||null===fe))throw new Error(Wn(ae,se)+"must be a valid context object.")}const an=function(ae){const se=[];let fe=0;for(let Pe=0;Pe<ae.length;Pe++){let ge=ae.charCodeAt(Pe);if(ge>=55296&&ge<=56319){const et=ge-55296;Pe++,ue(Pe<ae.length,"Surrogate pair missing trail surrogate."),ge=65536+(et<<10)+(ae.charCodeAt(Pe)-56320)}ge<128?se[fe++]=ge:ge<2048?(se[fe++]=ge>>6|192,se[fe++]=63&ge|128):ge<65536?(se[fe++]=ge>>12|224,se[fe++]=ge>>6&63|128,se[fe++]=63&ge|128):(se[fe++]=ge>>18|240,se[fe++]=ge>>12&63|128,se[fe++]=ge>>6&63|128,se[fe++]=63&ge|128)}return se},Vr=function(ae){let se=0;for(let fe=0;fe<ae.length;fe++){const Pe=ae.charCodeAt(fe);Pe<128?se++:Pe<2048?se+=2:Pe>=55296&&Pe<=56319?(se+=4,fe++):se+=3}return se};function ut(ae,se=1e3,fe=2){const Pe=se*Math.pow(fe,ae),ge=Math.round(.5*Pe*(Math.random()-.5)*2);return Math.min(144e5,Pe+ge)}function Ht(ae){return ae&&ae._delegate?ae._delegate:ae}},3941:(lt,Re,ee)=>{"use strict";var h=ee(4650);let ue=null;function z(){return ue}const g=new h.OlP("DocumentToken");let F=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function j(){return(0,h.LFG)(m)}()},providedIn:"platform"}),n})(),m=(()=>{class n extends F{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return z().getBaseHref(this._doc)}onPopState(t){const i=z().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=z().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){w()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){w()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(g))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function x(){return new m((0,h.LFG)(g))}()},providedIn:"platform"}),n})();function w(){return!!window.history.pushState}function P(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function U(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function q(n){return n&&"?"!==n[0]?"?"+n:n}let X=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(me)},providedIn:"root"}),n})();const te=new h.OlP("appBaseHref");let me=(()=>{class n extends X{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(g).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return P(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+q(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){const u=this.prepareExternalUrl(r+q(o));this._platformLocation.pushState(t,i,u)}replaceState(t,i,r,o){const u=this.prepareExternalUrl(r+q(o));this._platformLocation.replaceState(t,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(F),h.LFG(te,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),De=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._baseHref=U(He(i)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+q(i))}normalize(t){return n.stripTrailingSlash(function Ie(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,He(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+q(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+q(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=q,n.joinWithSlash=P,n.stripTrailingSlash=U,n.\u0275fac=function(t){return new(t||n)(h.LFG(X))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ee(){return new De((0,h.LFG)(X))}()},providedIn:"root"}),n})();function He(n){return n.replace(/\/index.html$/,"")}function ja(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,o]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}let _n=(()=>{class n{constructor(t,i,r,o){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=o,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,h.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,h.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})(),yi=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new oc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){vi("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){vi("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class oc{constructor(){this.$implicit=null,this.ngIf=null}}function vi(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}class Zi{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Ga=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),aa=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new Zi(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(Ga,9))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),la=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const vs="browser";function Si(n){return"server"===n}class Eo{}class Io extends class Bd extends class V{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Y(n){ue||(ue=n)}(new Io)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Zl(){return To=To||document.querySelector("base"),To?To.getAttribute("href"):null}();return null==t?null:function ar(n){di=di||document.createElement("a"),di.setAttribute("href",n);const e=di.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){To=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ja(document.cookie,e)}}let di,To=null;const An=new h.OlP("TRANSITION_ID"),Ic=[{provide:h.ip1,useFactory:function Vd(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const i=z(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<r.length;o++)i.remove(r[o])})}},deps:[An,g,h.zs3],multi:!0}];let Tc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Kl=new h.OlP("EventManagerPlugins");let Ud=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let o=0;o<r.length;o++){const u=r[o];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Kl),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Yl{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=z().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let So=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),da=(()=>{class n extends So{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(o=>{const u=this._doc.createElement("style");u.textContent=o,r.push(i.appendChild(u))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(Hd),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Hd))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(g))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Hd(n){z().remove(n)}const ha={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},jd=/%COMP%/g;function Jl(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?Jl(n,r,t):(r=r.replace(jd,n),t.push(r))}return t}function zd(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let xo=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new fa(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case h.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Gd(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case h.ifc.ShadowDom:return new Wd(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=Jl(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ud),h.LFG(da),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class fa{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ha[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Ja(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(Ja(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const o=ha[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=ha[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,i,r&h.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,zd(i)):this.eventManager.addEventListener(e,t,zd(i))}}function Ja(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Gd extends fa{constructor(e,t,i,r){super(e),this.component=i;const o=Jl(r+"-"+i.id,i.styles,[]);t.addStyles(o),this.contentAttr=function jn(n){return"_ngcontent-%COMP%".replace(jd,n)}(r+"-"+i.id),this.hostAttr=function Xl(n){return"_nghost-%COMP%".replace(jd,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class Wd extends fa{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Jl(r.id,r.styles,[]);for(let u=0;u<o.length;u++){const f=document.createElement("style");f.textContent=o[u],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let bi=(()=>{class n extends Yl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(g))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const el=["alt","control","meta","shift"],tl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ns={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let nl=(()=>{class n extends Yl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const o=n.parseEventName(i),u=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>z().onAndCancel(t,o.domEventName,u))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=n._normalizeKey(i.pop());let u="",f=i.indexOf("code");if(f>-1&&(i.splice(f,1),u="code."),el.forEach(E=>{const S=i.indexOf(E);S>-1&&(i.splice(S,1),u+=E+".")}),u+=o,0!=i.length||0===o.length)return null;const y={};return y.domEventName=r,y.fullKey=u,y}static matchEventFullKeyCode(t,i){let r=tl[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),el.forEach(u=>{u!==r&&(0,ns[u])(t)&&(o+=u+".")}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(g))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const iu=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:vs},{provide:h.g9A,useValue:function tu(){Io.makeCurrent()},multi:!0},{provide:g,useFactory:function rl(){return(0,h.RDi)(document),document},deps:[]}]),to=new h.OlP(""),qd=[{provide:h.rWj,useClass:class Sf{addToWindow(e){h.dqk.getAngularTestability=(i,r=!0)=>{const o=e.findTestabilityInTree(i,r);if(null==o)throw new Error("Could not find testability for element.");return o},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(i=>{const r=h.dqk.getAllAngularTestabilities();let o=r.length,u=!1;const f=function(y){u=u||y,o--,0==o&&i(u)};r.forEach(function(y){y.whenStable(f)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?z().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],no=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function ko(){return new h.qLn},deps:[]},{provide:Kl,useClass:bi,multi:!0,deps:[g,h.R0b,h.Lbi]},{provide:Kl,useClass:nl,multi:!0,deps:[g]},{provide:xo,useClass:xo,deps:[Ud,da,h.AFp]},{provide:h.FYo,useExisting:xo},{provide:So,useExisting:da},{provide:da,useClass:da,deps:[g]},{provide:Ud,useClass:Ud,deps:[Kl,h.R0b]},{provide:Eo,useClass:Tc,deps:[]},[]];let ru=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:An,useExisting:h.AFp},Ic]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(to,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...no,...qd],imports:[la,h.hGG]}),n})();typeof window<"u"&&window;var Ds=ee(3269),qn=ee(8996);function ur(...n){const e=(0,Ds.yG)(n);return(0,qn.D)(n,e)}var Ei=ee(8306),Ni=ee(5577),ei=ee(576),ti=ee(4482),In=ee(5403);function Yi(n,e){return(0,ti.e)((t,i)=>{let r=0;t.subscribe((0,In.x)(i,o=>n.call(e,o,r++)&&i.next(o)))})}var bn=ee(4004);class uu{}class ul{}class Qi{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),o=r.toLowerCase(),u=t.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(u):this.headers.set(o,[u])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Qi?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Qi;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Qi?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const o=e.value;if(o){let u=this.headers.get(t);if(!u)return;u=u.filter(f=>-1===o.indexOf(f)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class cr{encodeKey(e){return cu(e)}encodeValue(e){return cu(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const No=/%(\d[a-f0-9])/gi,Yd={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function cu(n){return encodeURIComponent(n).replace(No,(e,t)=>Yd[t]??e)}function va(n){return`${n}`}class is{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new cr,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Rc(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[u,f]=-1==o?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],y=t.get(u)||[];y.push(f),t.set(u,y)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(va):[va(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new is({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(va(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(va(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Pc{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function hu(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function so(n){return typeof Blob<"u"&&n instanceof Blob}function ba(n){return typeof FormData<"u"&&n instanceof FormData}class wr{constructor(e,t,i,r){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function cl(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Qi),this.context||(this.context=new Pc),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+u}}else this.params=new is,this.urlWithParams=t}serializeBody(){return null===this.body?null:hu(this.body)||so(this.body)||ba(this.body)||function py(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof is?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ba(this.body)?null:so(this.body)?this.body.type||null:hu(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof is?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,u=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,f=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let y=e.headers||this.headers,E=e.params||this.params;const S=e.context??this.context;return void 0!==e.setHeaders&&(y=Object.keys(e.setHeaders).reduce((R,H)=>R.set(H,e.setHeaders[H]),y)),e.setParams&&(E=Object.keys(e.setParams).reduce((R,H)=>R.set(H,e.setParams[H]),E)),new wr(t,i,o,{params:E,headers:y,context:S,reportProgress:f,responseType:r,withCredentials:u})}}var Rn=(()=>((Rn=Rn||{})[Rn.Sent=0]="Sent",Rn[Rn.UploadProgress=1]="UploadProgress",Rn[Rn.ResponseHeader=2]="ResponseHeader",Rn[Rn.DownloadProgress=3]="DownloadProgress",Rn[Rn.Response=4]="Response",Rn[Rn.User=5]="User",Rn))();class wa{constructor(e,t=200,i="OK"){this.headers=e.headers||new Qi,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class rs extends wa{constructor(e={}){super(e),this.type=Rn.ResponseHeader}clone(e={}){return new rs({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Lo extends wa{constructor(e={}){super(e),this.type=Rn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Lo({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class fu extends wa{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function pu(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Xi=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof wr)o=t;else{let y,E;y=r.headers instanceof Qi?r.headers:new Qi(r.headers),r.params&&(E=r.params instanceof is?r.params:new is({fromObject:r.params})),o=new wr(t,i,void 0!==r.body?r.body:null,{headers:y,context:r.context,params:E,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const u=ur(o).pipe(function Kd(n,e){return(0,ei.m)(e)?(0,Ni.z)(n,e,1):(0,Ni.z)(n,1)}(y=>this.handler.handle(y)));if(t instanceof wr||"events"===r.observe)return u;const f=u.pipe(Yi(y=>y instanceof Lo));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return f.pipe((0,bn.U)(y=>{if(null!==y.body&&!(y.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return y.body}));case"blob":return f.pipe((0,bn.U)(y=>{if(null!==y.body&&!(y.body instanceof Blob))throw new Error("Response is not a Blob.");return y.body}));case"text":return f.pipe((0,bn.U)(y=>{if(null!==y.body&&"string"!=typeof y.body)throw new Error("Response is not a string.");return y.body}));default:return f.pipe((0,bn.U)(y=>y.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new is).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,pu(r,i))}post(t,i,r={}){return this.request("POST",t,pu(r,i))}put(t,i,r={}){return this.request("PUT",t,pu(r,i))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(uu))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class oo{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Is=new h.OlP("HTTP_INTERCEPTORS");let Zn=(()=>{class n{intercept(t,i){return i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const pe=/^\)\]\}',?\n/;let Ne=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ei.y(i=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((K,J)=>r.setRequestHeader(K,J.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const K=t.detectContentTypeHeader();null!==K&&r.setRequestHeader("Content-Type",K)}if(t.responseType){const K=t.responseType.toLowerCase();r.responseType="json"!==K?K:"text"}const o=t.serializeBody();let u=null;const f=()=>{if(null!==u)return u;const K=r.statusText||"OK",J=new Qi(r.getAllResponseHeaders()),le=function be(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||t.url;return u=new rs({headers:J,status:r.status,statusText:K,url:le}),u},y=()=>{let{headers:K,status:J,statusText:le,url:ve}=f(),Ve=null;204!==J&&(Ve=typeof r.response>"u"?r.responseText:r.response),0===J&&(J=Ve?200:0);let Ye=J>=200&&J<300;if("json"===t.responseType&&"string"==typeof Ve){const Qe=Ve;Ve=Ve.replace(pe,"");try{Ve=""!==Ve?JSON.parse(Ve):null}catch(Xe){Ve=Qe,Ye&&(Ye=!1,Ve={error:Xe,text:Ve})}}Ye?(i.next(new Lo({body:Ve,headers:K,status:J,statusText:le,url:ve||void 0})),i.complete()):i.error(new fu({error:Ve,headers:K,status:J,statusText:le,url:ve||void 0}))},E=K=>{const{url:J}=f(),le=new fu({error:K,status:r.status||0,statusText:r.statusText||"Unknown Error",url:J||void 0});i.error(le)};let S=!1;const R=K=>{S||(i.next(f()),S=!0);let J={type:Rn.DownloadProgress,loaded:K.loaded};K.lengthComputable&&(J.total=K.total),"text"===t.responseType&&!!r.responseText&&(J.partialText=r.responseText),i.next(J)},H=K=>{let J={type:Rn.UploadProgress,loaded:K.loaded};K.lengthComputable&&(J.total=K.total),i.next(J)};return r.addEventListener("load",y),r.addEventListener("error",E),r.addEventListener("timeout",E),r.addEventListener("abort",E),t.reportProgress&&(r.addEventListener("progress",R),null!==o&&r.upload&&r.upload.addEventListener("progress",H)),r.send(o),i.next({type:Rn.Sent}),()=>{r.removeEventListener("error",E),r.removeEventListener("abort",E),r.removeEventListener("load",y),r.removeEventListener("timeout",E),t.reportProgress&&(r.removeEventListener("progress",R),null!==o&&r.upload&&r.upload.removeEventListener("progress",H)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Eo))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Ke=new h.OlP("XSRF_COOKIE_NAME"),nt=new h.OlP("XSRF_HEADER_NAME");class pt{}let Vt=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ja(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(g),h.LFG(h.Lbi),h.LFG(Ke))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),yt=(()=>{class n{constructor(t,i){this.tokenService=t,this.headerName=i}intercept(t,i){const r=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(t);const o=this.tokenService.getToken();return null!==o&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,o)})),i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(pt),h.LFG(nt))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ci=(()=>{class n{constructor(t,i){this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=this.injector.get(Is,[]);this.chain=i.reduceRight((r,o)=>new oo(r,o),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ul),h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Fo=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:yt,useClass:Zn}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Ke,useValue:t.cookieName}:[],t.headerName?{provide:nt,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[yt,{provide:Is,useExisting:yt,multi:!0},{provide:pt,useClass:Vt},{provide:Ke,useValue:"XSRF-TOKEN"},{provide:nt,useValue:"X-XSRF-TOKEN"}]}),n})(),dl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Xi,{provide:uu,useClass:Ci},Ne,{provide:ul,useExisting:Ne}],imports:[Fo.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();var ss=ee(4986),Er=ee(6451),Bo=ee(3099),Ts=ee(8421);function Cr(n,e){return(0,ti.e)((t,i)=>{let r=null,o=0,u=!1;const f=()=>u&&!r&&i.complete();t.subscribe((0,In.x)(i,y=>{r?.unsubscribe();let E=0;const S=o++;(0,Ts.Xf)(n(y,S)).subscribe(r=(0,In.x)(i,R=>i.next(e?e(y,R,S,E++):R),()=>{r=null,f()}))},()=>{u=!0,f()}))})}function Oc(n,e,t,i,r){return(o,u)=>{let f=t,y=e,E=0;o.subscribe((0,In.x)(u,S=>{const R=E++;y=f?n(y,S,R):(f=!0,S),i&&u.next(y)},r&&(()=>{f&&u.next(y),u.complete()})))}}function Nc(n,e){return(0,ti.e)(Oc(n,e,arguments.length>=2,!0))}var _u=ee(4671);function jm(n,e=_u.y){return n=n??zm,(0,ti.e)((t,i)=>{let r,o=!0;t.subscribe((0,In.x)(i,u=>{const f=e(u);(o||!n(r,f))&&(o=!1,r=f,i.next(u))}))})}function zm(n,e){return n===e}var my=ee(5032),un=ee(2680),Pn=ee(2011),Ea=(ee(9545),ee(3942)),Ss=ee(4859),ke=ee(5861),Dr=ee(9681),Q=ee(2090),zr=ee(1877);const Pf="@firebase/database";let Jd="";function Lc(n){Jd=n}class _y{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,Q.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,Q.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Nf{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,Q.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Wm=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new _y(e)}}catch{}return new Nf},Ca=Wm("localStorage"),Lf=Wm("sessionStorage"),dr=new zr.Yd("@firebase/database"),yu=function(){let n=1;return function(){return n++}}(),Ff=function(n){const e=(0,Q.dS)(n),t=new Q.gQ;t.update(e);const i=t.digest();return Q.US.encodeByteArray(i)},Fc=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=Fc.apply(null,i):e+="object"==typeof i?(0,Q.Wl)(i):i,e+=" "}return e};let vu=null,yy=!0;const vy=function(n,e){(0,Q.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(dr.logLevel=zr.in.VERBOSE,vu=dr.log.bind(dr),e&&Lf.set("logging_enabled",!0)):"function"==typeof n?vu=n:(vu=null,Lf.remove("logging_enabled"))},Li=function(...n){if(!0===yy&&(yy=!1,null===vu&&!0===Lf.get("logging_enabled")&&vy(!0)),vu){const e=Fc.apply(null,n);vu(e)}},bu=function(n){return function(...e){Li(n,...e)}},eh=function(...n){const e="FIREBASE INTERNAL ERROR: "+Fc(...n);dr.error(e)},lo=function(...n){const e=`FIREBASE FATAL ERROR: ${Fc(...n)}`;throw dr.error(e),new Error(e)},hr=function(...n){const e="FIREBASE WARNING: "+Fc(...n);dr.warn(e)},wu=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},fr="[MIN_NAME]",As="[MAX_NAME]",uo=function(n,e){if(n===e)return 0;if(n===fr||e===As)return-1;if(e===fr||n===As)return 1;{const t=Cu(n),i=Cu(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},$m=function(n,e){return n===e?0:n<e?-1:1},th=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,Q.Wl)(e))},nh=function(n){if("object"!=typeof n||null===n)return(0,Q.Wl)(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=(0,Q.Wl)(e[i]),t+=":",t+=nh(n[e[i]]);return t+="}",t},by=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function hi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Eu=function(n){(0,Q.hu)(!wu(n),"Invalid JSON number");const i=1023;let r,o,u,f,y;0===n?(o=0,u=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),i),o=f+i,u=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(o=0,u=Math.round(n/Math.pow(2,-1074))));const E=[];for(y=52;y;y-=1)E.push(u%2?1:0),u=Math.floor(u/2);for(y=11;y;y-=1)E.push(o%2?1:0),o=Math.floor(o/2);E.push(r?1:0),E.reverse();const S=E.join("");let R="";for(y=0;y<64;y+=8){let H=parseInt(S.substr(y,8),2).toString(16);1===H.length&&(H="0"+H),R+=H}return R.toLowerCase()},wy=new RegExp("^-?(0*)\\d{1,10}$"),Zm=-2147483648,ih=2147483647,Cu=function(n){if(wy.test(n)){const e=Number(n);if(e>=Zm&&e<=ih)return e}return null},fl=function(n){try{n()}catch(e){setTimeout(()=>{throw hr("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},pl=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Bc{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){hr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Ey{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Li("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',hr(e)}}let On=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Ym=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Vc="websocket",Cy="long_polling";class Da{constructor(e,t,i,r,o=!1,u="",f=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=u,this.includeNamespaceInQueryParams=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ca.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ca.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function jf(n,e,t){let i;if((0,Q.hu)("string"==typeof e,"typeof type must == string"),(0,Q.hu)("object"==typeof t,"typeof params must == object"),e===Vc)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Cy)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Jm(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return hi(t,(o,u)=>{r.push(o+"="+u)}),i+r.join("&")}class eg{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,Q.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,Q.p$)(this.counters_)}}const sh={},oh={};function Du(n){const e=n.toString();return sh[e]||(sh[e]=new eg),sh[e]}class lh{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&fl(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class co{constructor(e,t,i,r,o,u,f){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=u,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=bu(e),this.stats_=Du(t),this.urlFn=y=>(this.appCheckToken&&(y.ac=this.appCheckToken),jf(t,Cy,y))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new lh(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,Q.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ni((...o)=>{const[u,f,y,E,S]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=f,this.password=y;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[u,f]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(u,f)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Ym.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){co.forceAllow_=!0}static forceDisallow(){co.forceDisallow_=!0}static isAvailable(){return!((0,Q.Yr)()||!co.forceAllow_&&(co.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,Q.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=(0,Q.h$)(t),r=by(i,1840);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,Q.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,Q.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class ni{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Q.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=yu(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=ni.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(f){Li("frame writing exception"),f.stack&&Li(f.stack),Li(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Li("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const u=this.pendingSegs.shift();i=i+"&seg"+r+"="+u.seg+"&ts"+r+"="+u.ts+"&d"+r+"="+u.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){(0,Q.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Li("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let hh=null;typeof MozWebSocket<"u"?hh=MozWebSocket:typeof WebSocket<"u"&&(hh=WebSocket);let Sr=(()=>{class n{constructor(t,i,r,o,u,f,y){this.connId=t,this.applicationId=r,this.appCheckToken=o,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=bu(this.connId),this.stats_=Du(i),this.connURL=n.connectionURL_(i,f,y,o,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,o,u){const f={v:"5"};return!(0,Q.Yr)()&&typeof location<"u"&&location.hostname&&Ym.test(location.hostname)&&(f.r="f"),i&&(f.s=i),r&&(f.ls=r),o&&(f.ac=o),u&&(f.p=u),jf(t,Vc,f)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ca.set("previous_websocket_failure",!0);try{let r;if((0,Q.Yr)()){r={headers:{"User-Agent":`Firebase/5/${Jd}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,f=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;f&&(r.proxy={origin:f})}this.mySock=new hh(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const o=r.message||r.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==hh&&!n.forceDisallow_}static previouslyFailed(){return Ca.isInMemoryStorage||!0===Ca.get("previous_websocket_failure")}markConnectionHealthy(){Ca.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,Q.cI)(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,Q.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=(0,Q.Wl)(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=by(i,16384);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Ia=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[co,Sr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=Sr&&Sr.isAvailable();let r=i&&!Sr.previouslyFailed();if(t.webSocketOnly&&(i||hr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Sr];else{const o=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&o.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class de{constructor(e,t,i,r,o,u,f,y,E,S){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=u,this.onReady_=f,this.onDisconnect_=y,this.onKill_=E,this.lastSessionId=S,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=bu("c:"+this.id+":"),this.transportManager_=new Ia(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=pl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=th("t",e),i=th("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=th("t",e),i=th("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=th("t",e);if("d"in e){const i=e.d;if("h"===t)this.onHandshake_(i);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?eh("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):eh("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&hr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),pl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):pl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ca.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Se{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class $e{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,Q.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let o=0;o<r.length;o++)if(r[o].callback===t&&(!i||i===r[o].context))return void r.splice(o,1)}validateEventType_(e){(0,Q.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class at extends $e{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,Q.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new at}getInitialEvent(e){return(0,Q.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Rt{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Bt(){return new Rt("")}function Gt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ta(n){return n.pieces_.length-n.pieceNum_}function fn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Rt(n.pieces_,e)}function Kf(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Tu(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function og(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Rt(e,0)}function Nn(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof Rt)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new Rt(t,0)}function Wt(n){return n.pieceNum_>=n.pieces_.length}function Fi(n,e){const t=Gt(n),i=Gt(e);if(null===t)return e;if(t===i)return Fi(fn(n),fn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Yf(n,e){const t=Tu(n,0),i=Tu(e,0);for(let r=0;r<t.length&&r<i.length;r++){const o=uo(t[r],i[r]);if(0!==o)return o}return t.length===i.length?0:t.length<i.length?-1:1}function Su(n,e){if(Ta(n)!==Ta(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Gr(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Ta(n)>Ta(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class mE{constructor(e,t){this.errorPrefix_=t,this.parts_=Tu(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,Q.ug)(this.parts_[i]);ag(this)}}function ag(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ho(n))}function Ho(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class ky extends $e{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new ky}getInitialEvent(e){return(0,Q.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Qf=1e3;let ug,_l=(()=>{class n extends Se{constructor(t,i,r,o,u,f,y,E){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=u,this.authTokenProvider_=f,this.appCheckTokenProvider_=y,this.authOverride_=E,this.id=n.nextPersistentConnectionId_++,this.log_=bu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Qf,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,E&&!(0,Q.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ky.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&at.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const o=++this.requestNumber_,u={r:o,a:t,b:i};this.log_((0,Q.Wl)(u)),(0,Q.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),r&&(this.requestCBHash_[o]=r)}get(t){this.initConnection_();const i=new Q.BH,r={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:r,onComplete:f=>{const y=f.d;"ok"===f.s?i.resolve(y):i.reject(y)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(t,i,r,o){this.initConnection_();const u=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+u),this.listens.has(f)||this.listens.set(f,new Map),(0,Q.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Q.hu)(!this.listens.get(f).has(u),"listen() called twice for same path/queryId.");const y={onComplete:o,hashFn:i,query:t,tag:r};this.listens.get(f).set(u,y),this.connected_&&this.sendListen_(y)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+r+" for "+o);const u={p:r};t.tag&&(u.q=i._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,y=>{const E=y.d,S=y.s;n.warnOnListenWarnings_(E,i),(this.listens.get(r)&&this.listens.get(r).get(o))===t&&(this.log_("listen response",y),"ok"!==S&&this.removeListen_(r,o),t.onComplete&&t.onComplete(S,E))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&(0,Q.r3)(t,"w")){const r=(0,Q.DV)(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',u=i._path.toString();hr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,Q.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=(0,Q.w9)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,o=>{const u=o.s,f=o.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),(0,Q.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,t._queryObject,i)}sendUnlisten_(t,i,r,o){this.log_("Unlisten on "+t+" for "+i);const u={p:t};o&&(u.q=r,u.t=o),this.sendRequest("n",u)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,o){const u={p:i,d:r};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,f=>{o&&setTimeout(()=>{o(f.s,f.d)},Math.floor(0))})}put(t,i,r,o){this.putInternal("p",t,i,r,o)}merge(t,i,r,o){this.putInternal("m",t,i,r,o)}putInternal(t,i,r,o,u){this.initConnection_();const f={p:i,d:r};void 0!==u&&(f.h=u),this.outstandingPuts_.push({action:t,request:f,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,u=>{this.log_(i+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(u.s,u.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,Q.Wl)(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):eh("Unrecognized action received from server: "+(0,Q.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,Q.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Qf,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Qf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Qf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ke.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let y=!1,E=null;const S=function(){E?E.close():(y=!0,o())};t.realtime_={close:S,sendRequest:function(K){(0,Q.hu)(E,"sendRequest call when we're not connected not allowed."),E.sendRequest(K)}};const H=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[K,J]=yield Promise.all([t.authTokenProvider_.getToken(H),t.appCheckTokenProvider_.getToken(H)]);y?Li("getToken() completed but was canceled"):(Li("getToken() completed. Creating connection."),t.authToken_=K&&K.accessToken,t.appCheckToken_=J&&J.token,E=new de(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,o,le=>{hr(le+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(K){t.log_("Failed to get token: "+K),y||(t.repoInfo_.nodeAdmin&&hr(K),S())}}})()}interrupt(t){Li("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Li("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,Q.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Qf,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(u=>nh(u)).join("$"):"default";const o=this.removeListen_(t,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,i){const r=new Rt(t).toString();let o;if(this.listens.has(r)){const u=this.listens.get(r);o=u.get(i),u.delete(i),0===u.size&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(t,i){Li("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){Li("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";(0,Q.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+i+"."+Jd.replace(/\./g,"-")]=1,(0,Q.uI)()?t["framework.cordova"]=1:(0,Q.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=at.getInstance().currentlyOnline();return(0,Q.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Xt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Xt(e,t)}}class lg{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Xt(fr,e),r=new Xt(fr,t);return 0!==this.compare(i,r)}minPost(){return Xt.MIN}}class Py extends lg{static get __EMPTY_NODE(){return ug}static set __EMPTY_NODE(e){ug=e}compare(e,t){return uo(e.name,t.name)}isDefinedOn(e){throw(0,Q.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Xt.MIN}maxPost(){return new Xt(As,ug)}makePost(e,t){return(0,Q.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Xt(e,ug)}toString(){return".key"}}const Sa=new Py;class cg{constructor(e,t,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(u=t?i(e.key,t):1,r&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let jc,zn=(()=>{class n{constructor(t,i,r,o,u){this.key=t,this.value=i,this.color=r??n.RED,this.left=o??Wr.EMPTY_NODE,this.right=u??Wr.EMPTY_NODE}copy(t,i,r,o,u){return new n(t??this.key,i??this.value,r??this.color,o??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let o=this;const u=r(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,i,r),null):0===u?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(t,i,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Wr.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,o;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return Wr.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Wr{constructor(e,t=Wr.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Wr(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,zn.BLACK,null,null))}remove(e){return new Wr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,zn.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new cg(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new cg(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new cg(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new cg(this.root_,null,this.comparator_,!0,e)}}function Ny(n,e){return uo(n.name,e.name)}function Ji(n,e){return uo(n,e)}Wr.EMPTY_NODE=new class Oy{copy(e,t,i,r,o){return this}insert(e,t,i){return new zn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const yE=function(n){return"number"==typeof n?"number:"+Eu(n):"string:"+n},vE=function(n){if(n.isLeafNode()){const e=n.val();(0,Q.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,Q.r3)(e,".sv"),"Priority must be a string or number.")}else(0,Q.hu)(n===jc||n.isEmpty(),"priority of unexpected type.");(0,Q.hu)(n===jc||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Ly,Fy,bE,ph=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,(0,Q.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),vE(this.priorityNode_)}static set __childrenNodeConstructor(t){Ly=t}static get __childrenNodeConstructor(){return Ly}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Wt(t)?this:".priority"===Gt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=Gt(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,Q.hu)(".priority"!==r||1===Ta(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(fn(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+yE(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?Eu(this.value_):this.value_,this.lazyHash_=Ff(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,Q.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(i),u=n.VALUE_TYPE_ORDER.indexOf(r);return(0,Q.hu)(o>=0,"Unknown leaf type: "+i),(0,Q.hu)(u>=0,"Unknown leaf type: "+r),o===u?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Ln=new class XT extends lg{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),o=i.compareTo(r);return 0===o?uo(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Xt.MIN}maxPost(){return new Xt(As,new ph("[PRIORITY-POST]",bE))}makePost(e,t){const i=Fy(e);return new Xt(t,new ph("[PRIORITY-POST]",i))}toString(){return".priority"}},EE=Math.log(2);class JT{constructor(e){this.count=parseInt(Math.log(e+1)/EE,10),this.current_=this.count-1;const r=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const yl=function(n,e,t,i){n.sort(e);const r=function(y,E){const S=E-y;let R,H;if(0===S)return null;if(1===S)return R=n[y],H=t?t(R):R,new zn(H,R.node,zn.BLACK,null,null);{const K=parseInt(S/2,10)+y,J=r(y,K),le=r(K+1,E);return R=n[K],H=t?t(R):R,new zn(H,R.node,zn.BLACK,J,le)}},f=function(y){let E=null,S=null,R=n.length;const H=function(J,le){const ve=R-J,Ve=R;R-=J;const Ye=r(ve+1,Ve),Qe=n[ve],Xe=t?t(Qe):Qe;K(new zn(Xe,Qe.node,le,null,Ye))},K=function(J){E?(E.left=J,E=J):(S=J,E=J)};for(let J=0;J<y.count;++J){const le=y.nextBitIsOne(),ve=Math.pow(2,y.count-(J+1));le?H(ve,zn.BLACK):(H(ve,zn.BLACK),H(ve,zn.RED))}return S}(new JT(n.length));return new Wr(i||e,f)};let jo;const mh={};class vl{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,Q.hu)(mh&&Ln,"ChildrenNode.ts has not been loaded"),jo=jo||new vl({".priority":mh},{".priority":Ln}),jo}get(e){const t=(0,Q.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Wr?t:null}hasIndex(e){return(0,Q.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,Q.hu)(e!==Sa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const o=t.getIterator(Xt.Wrap);let f,u=o.getNext();for(;u;)r=r||e.isDefinedOn(u.node),i.push(u),u=o.getNext();f=r?yl(i,e.getCompare()):mh;const y=e.toString(),E=Object.assign({},this.indexSet_);E[y]=e;const S=Object.assign({},this.indexes_);return S[y]=f,new vl(S,E)}addToIndexes(e,t){const i=(0,Q.UI)(this.indexes_,(r,o)=>{const u=(0,Q.DV)(this.indexSet_,o);if((0,Q.hu)(u,"Missing index implementation for "+o),r===mh){if(u.isDefinedOn(e.node)){const f=[],y=t.getIterator(Xt.Wrap);let E=y.getNext();for(;E;)E.name!==e.name&&f.push(E),E=y.getNext();return f.push(e),yl(f,u.getCompare())}return mh}{const f=t.get(e.name);let y=r;return f&&(y=y.remove(new Xt(e.name,f))),y.insert(e,e.node)}});return new vl(i,this.indexSet_)}removeFromIndexes(e,t){const i=(0,Q.UI)(this.indexes_,r=>{if(r===mh)return r;{const o=t.get(e.name);return o?r.remove(new Xt(e.name,o)):r}});return new vl(i,this.indexSet_)}}let dg,Kt=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&vE(this.priorityNode_),this.children_.isEmpty()&&(0,Q.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return dg||(dg=new n(new Wr(Ji),null,vl.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||dg}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?dg:i}}getChild(t){const i=Gt(t);return null===i?this:this.getImmediateChild(i).getChild(fn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if((0,Q.hu)(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new Xt(t,i);let o,u;i.isEmpty()?(o=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(t,i),u=this.indexMap_.addToIndexes(r,this.children_));const f=o.isEmpty()?dg:this.priorityNode_;return new n(o,f,u)}}updateChild(t,i){const r=Gt(t);if(null===r)return i;{(0,Q.hu)(".priority"!==Gt(t)||1===Ta(t),".priority must be the last token in a path");const o=this.getImmediateChild(r).updateChild(fn(t),i);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,o=0,u=!0;if(this.forEachChild(Ln,(f,y)=>{i[f]=y.val(t),r++,u&&n.INTEGER_REGEXP_.test(f)?o=Math.max(o,Number(f)):u=!1}),!t&&u&&o<2*r){const f=[];for(const y in i)f[y]=i[y];return f}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+yE(this.getPriority().val())+":"),this.forEachChild(Ln,(i,r)=>{const o=r.hash();""!==o&&(t+=":"+i+":"+o)}),this.lazyHash_=""===t?"":Ff(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const o=this.resolveIndex_(r);if(o){const u=o.getPredecessorKey(new Xt(t,i));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new Xt(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new Xt(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,Xt.Wrap);let u=o.peek();for(;null!=u&&i.compare(u,t)<0;)o.getNext(),u=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,Xt.Wrap);let u=o.peek();for(;null!=u&&i.compare(u,t)>0;)o.getNext(),u=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===hg?-1:0}withIndex(t){if(t===Sa||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===Sa||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(Ln),o=i.getIterator(Ln);let u=r.getNext(),f=o.getNext();for(;u&&f;){if(u.name!==f.name||!u.node.equals(f.node))return!1;u=r.getNext(),f=o.getNext()}return null===u&&null===f}return!1}return!1}}resolveIndex_(t){return t===Sa?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const hg=new class CE extends Kt{constructor(){super(new Wr(Ji),Kt.EMPTY_NODE,vl.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Kt.EMPTY_NODE}isEmpty(){return!1}};function Gn(n,e=null){if(null===n)return Kt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,Q.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new ph(n,Gn(e));if(n instanceof Array){let t=Kt.EMPTY_NODE;return hi(n,(i,r)=>{if((0,Q.r3)(n,i)&&"."!==i.substring(0,1)){const o=Gn(r);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(i,o))}}),t.updatePriority(Gn(e))}{const t=[];let i=!1;if(hi(n,(u,f)=>{if("."!==u.substring(0,1)){const y=Gn(f);y.isEmpty()||(i=i||!y.getPriority().isEmpty(),t.push(new Xt(u,y)))}}),0===t.length)return Kt.EMPTY_NODE;const o=yl(t,Ny,u=>u.name,Ji);if(i){const u=yl(t,Ln.getCompare());return new Kt(o,Gn(e),new vl({".priority":u},{".priority":Ln}))}return new Kt(o,Gn(e),vl.Default)}}Object.defineProperties(Xt,{MIN:{value:new Xt(fr,Kt.EMPTY_NODE)},MAX:{value:new Xt(As,hg)}}),Py.__EMPTY_NODE=Kt.EMPTY_NODE,ph.__childrenNodeConstructor=Kt,function _E(n){jc=n}(hg),function QT(n){bE=n}(hg),function wE(n){Fy=n}(Gn);class Xf extends lg{constructor(e){super(),this.indexPath_=e,(0,Q.hu)(!Wt(e)&&".priority"!==Gt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),o=i.compareTo(r);return 0===o?uo(e.name,t.name):o}makePost(e,t){const i=Gn(e),r=Kt.EMPTY_NODE.updateChild(this.indexPath_,i);return new Xt(t,r)}maxPost(){const e=Kt.EMPTY_NODE.updateChild(this.indexPath_,hg);return new Xt(As,e)}toString(){return Tu(this.indexPath_,0).join("/")}}const fg=new class eS extends lg{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?uo(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Xt.MIN}maxPost(){return Xt.MAX}makePost(e,t){const i=Gn(e);return new Xt(t,i)}toString(){return".value"}},gh="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",By=function(){let n=0;const e=[];return function(t){const i=t===n;let r;n=t;const o=new Array(8);for(r=7;r>=0;r--)o[r]=gh.charAt(t%64),t=Math.floor(t/64);(0,Q.hu)(0===t,"Cannot push at time == 0");let u=o.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)u+=gh.charAt(e[r]);return(0,Q.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),pg=function(n){if(n===""+ih)return"-";const e=Cu(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let i=t.length-1;for(;i>=0&&"z"===t[i];)i--;if(-1===i)return As;const o=gh.charAt(gh.indexOf(t[i])+1);return t[i]=o,t.slice(0,i+1).join("")},Vy=function(n){if(n===""+Zm)return fr;const e=Cu(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let i=0;i<t.length;i++)t[i]=n.charAt(i);return"-"===t[t.length-1]?1===t.length?""+ih:(delete t[t.length-1],t.join("")):(t[t.length-1]=gh.charAt(gh.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function tS(n){return{type:"value",snapshotNode:n}}function zo(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Gc(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function _h(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Jf{constructor(e){this.index_=e}updateChild(e,t,i,r,o,u){(0,Q.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(r).equals(i.getChild(r))&&f.isEmpty()===i.isEmpty()||(null!=u&&(i.isEmpty()?e.hasChild(t)?u.trackChildChange(Gc(t,f)):(0,Q.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?u.trackChildChange(zo(t,i)):u.trackChildChange(_h(t,i,f))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild(Ln,(r,o)=>{t.hasChild(r)||i.trackChildChange(Gc(r,o))}),t.isLeafNode()||t.forEachChild(Ln,(r,o)=>{if(e.hasChild(r)){const u=e.getImmediateChild(r);u.equals(o)||i.trackChildChange(_h(r,o,u))}else i.trackChildChange(zo(r,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Kt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ep{constructor(e){this.indexedFilter_=new Jf(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ep.getStartPost_(e),this.endPost_=ep.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,i,r,o,u){return this.matches(new Xt(t,i))||(i=Kt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,o,u)}updateFullNode(e,t,i){t.isLeafNode()&&(t=Kt.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(Kt.EMPTY_NODE);const o=this;return t.forEachChild(Ln,(u,f)=>{o.matches(new Xt(u,f))||(r=r.updateImmediateChild(u,Kt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class iS{constructor(e){this.rangedFilter_=new ep(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,i,r,o,u){return this.rangedFilter_.matches(new Xt(t,i))||(i=Kt.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,o,u):this.fullLimitUpdateChild_(e,t,i,o,u)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=Kt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let o;r=Kt.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;o.hasNext()&&u<this.limit_;){const f=o.getNext();let y;if(y=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),f)<=0:this.index_.compare(f,this.rangedFilter_.getEndPost())<=0,!y)break;r=r.updateImmediateChild(f.name,f.node),u++}}else{let o,u,f,y;if(r=t.withIndex(this.index_),r=r.updatePriority(Kt.EMPTY_NODE),this.reverse_){y=r.getReverseIterator(this.index_),o=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const R=this.index_.getCompare();f=(H,K)=>R(K,H)}else y=r.getIterator(this.index_),o=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),f=this.index_.getCompare();let E=0,S=!1;for(;y.hasNext();){const R=y.getNext();!S&&f(o,R)<=0&&(S=!0),S&&E<this.limit_&&f(R,u)<=0?E++:r=r.updateImmediateChild(R.name,Kt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,o){let u;if(this.reverse_){const R=this.index_.getCompare();u=(H,K)=>R(K,H)}else u=this.index_.getCompare();const f=e;(0,Q.hu)(f.numChildren()===this.limit_,"");const y=new Xt(t,i),E=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),S=this.rangedFilter_.matches(y);if(f.hasChild(t)){const R=f.getImmediateChild(t);let H=r.getChildAfterChild(this.index_,E,this.reverse_);for(;null!=H&&(H.name===t||f.hasChild(H.name));)H=r.getChildAfterChild(this.index_,H,this.reverse_);const K=null==H?1:u(H,y);if(S&&!i.isEmpty()&&K>=0)return o?.trackChildChange(_h(t,i,R)),f.updateImmediateChild(t,i);{o?.trackChildChange(Gc(t,R));const le=f.updateImmediateChild(t,Kt.EMPTY_NODE);return null!=H&&this.rangedFilter_.matches(H)?(o?.trackChildChange(zo(H.name,H.node)),le.updateImmediateChild(H.name,H.node)):le}}return i.isEmpty()?e:S&&u(E,y)>=0?(null!=o&&(o.trackChildChange(Gc(E.name,E.node)),o.trackChildChange(zo(t,i))),f.updateImmediateChild(t,i).updateImmediateChild(E.name,Kt.EMPTY_NODE)):e}}class mg{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ln}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Q.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Q.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:fr}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Q.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Q.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:As}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Q.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ln}copy(){const e=new mg;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function gg(n,e,t){const i=n.copy();return i.startSet_=!0,void 0===e&&(e=null),i.indexStartValue_=e,null!=t?(i.startNameSet_=!0,i.indexStartName_=t):(i.startNameSet_=!1,i.indexStartName_=""),i}function _g(n,e,t){const i=n.copy();return i.endSet_=!0,void 0===e&&(e=null),i.indexEndValue_=e,void 0!==t?(i.endNameSet_=!0,i.indexEndName_=t):(i.endNameSet_=!1,i.indexEndName_=""),i}function yg(n,e){const t=n.copy();return t.index_=e,t}function TE(n){const e={};if(n.isDefault())return e;let t;return n.index_===Ln?t="$priority":n.index_===fg?t="$value":n.index_===Sa?t="$key":((0,Q.hu)(n.index_ instanceof Xf,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,Q.Wl)(t),n.startSet_&&(e.startAt=(0,Q.Wl)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,Q.Wl)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,Q.Wl)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,Q.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function jy(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Ln&&(e.i=n.index_.toString()),e}class tp extends Se{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=bu("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,Q.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const u=tp.getListenId_(e,i),f={};this.listens_[u]=f;const y=TE(e._queryParams);this.restRequest_(o+".json",y,(E,S)=>{let R=S;if(404===E&&(R=null,E=null),null===E&&this.onDataUpdate_(o,R,!1,i),(0,Q.DV)(this.listens_,u)===f){let H;H=E?401===E?"permission_denied":"rest_error:"+E:"ok",r(H,null)}})}unlisten(e,t){const i=tp.getListenId_(e,t);delete this.listens_[i]}get(e){const t=TE(e._queryParams),i=e._path.toString(),r=new Q.BH;return this.restRequest_(i+".json",t,(o,u)=>{let f=u;404===o&&(f=null,o=null),null===o?(this.onDataUpdate_(i,f,!1,null),r.resolve(f)):r.reject(new Error(f))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(t.auth=r.accessToken),o&&o.token&&(t.ac=o.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,Q.xO)(t);this.log_("Sending REST request for "+u);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(i&&4===f.readyState){this.log_("REST Response for "+u+" received. status:",f.status,"response:",f.responseText);let y=null;if(f.status>=200&&f.status<300){try{y=(0,Q.cI)(f.responseText)}catch{hr("Failed to parse JSON response for "+u+": "+f.responseText)}i(null,y)}else 401!==f.status&&404!==f.status&&hr("Got unsuccessful REST response for "+u+" Status: "+f.status),i(f.status);i=null}},f.open("GET",u,!0),f.send()})}}class Wc{constructor(){this.rootNode_=Kt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function np(){return{value:null,children:new Map}}function $c(n,e,t){if(Wt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=Gt(e);n.children.has(i)||n.children.set(i,np()),$c(n.children.get(i),e=fn(e),t)}}function zy(n,e){if(Wt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Ln,(i,r)=>{$c(n,new Rt(i),r)}),zy(n,e)}}if(n.children.size>0){const t=Gt(e);return e=fn(e),n.children.has(t)&&zy(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function SE(n,e,t){null!==n.value?t(e,n.value):function vg(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{SE(r,new Rt(e.toString()+"/"+i),t)})}class aS{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&hi(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class Wy{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new aS(e);const i=1e4+2e4*Math.random();pl(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;hi(e,(r,o)=>{o>0&&(0,Q.r3)(this.statsToReport_,r)&&(t[r]=o,i=!0)}),i&&this.server_.reportStats(t),pl(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var xs=(()=>{return(n=xs||(xs={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",xs;var n})();function bg(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class bh{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=xs.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Wt(this.path)){if(null!=this.affectedTree.value)return(0,Q.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Rt(e));return new bh(Bt(),t,this.revert)}}return(0,Q.hu)(Gt(this.path)===e,"operationForChild called for unrelated child."),new bh(fn(this.path),this.affectedTree,this.revert)}}class wh{constructor(e,t){this.source=e,this.path=t,this.type=xs.LISTEN_COMPLETE}operationForChild(e){return Wt(this.path)?new wh(this.source,Bt()):new wh(this.source,fn(this.path))}}class bl{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=xs.OVERWRITE}operationForChild(e){return Wt(this.path)?new bl(this.source,Bt(),this.snap.getImmediateChild(e)):new bl(this.source,fn(this.path),this.snap)}}class xa{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=xs.MERGE}operationForChild(e){if(Wt(this.path)){const t=this.children.subtree(new Rt(e));return t.isEmpty()?null:t.value?new bl(this.source,Bt(),t.value):new xa(this.source,Bt(),t)}return(0,Q.hu)(Gt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new xa(this.source,fn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Au{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Wt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Gt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class ME{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function ip(n,e,t,i,r,o){const u=i.filter(f=>f.type===t);u.sort((f,y)=>function $y(n,e,t){if(null==e.childName||null==t.childName)throw(0,Q.g5)("Should only compare child_ events.");const i=new Xt(e.childName,e.snapshotNode),r=new Xt(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,f,y)),u.forEach(f=>{const y=function kE(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,o);r.forEach(E=>{E.respondsTo(f.type)&&e.push(E.createEvent(y,n.query_))})})}function rp(n,e){return{eventCache:n,serverCache:e}}function wg(n,e,t,i){return rp(new Au(e,t,i),n.serverCache)}function qy(n,e,t,i){return rp(n.eventCache,new Au(e,t,i))}function Eg(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function xu(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Zy;class rn{constructor(e,t=(()=>(Zy||(Zy=new Wr($m)),Zy))()){this.value=e,this.children=t}static fromObject(e){let t=new rn(null);return hi(e,(i,r)=>{t=t.set(new Rt(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Bt(),value:this.value};if(Wt(e))return null;{const i=Gt(e),r=this.children.get(i);if(null!==r){const o=r.findRootMostMatchingPathAndValue(fn(e),t);return null!=o?{path:Nn(new Rt(i),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Wt(e))return this;{const t=Gt(e),i=this.children.get(t);return null!==i?i.subtree(fn(e)):new rn(null)}}set(e,t){if(Wt(e))return new rn(t,this.children);{const i=Gt(e),o=(this.children.get(i)||new rn(null)).set(fn(e),t),u=this.children.insert(i,o);return new rn(this.value,u)}}remove(e){if(Wt(e))return this.children.isEmpty()?new rn(null):new rn(null,this.children);{const t=Gt(e),i=this.children.get(t);if(i){const r=i.remove(fn(e));let o;return o=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&o.isEmpty()?new rn(null):new rn(this.value,o)}return this}}get(e){if(Wt(e))return this.value;{const t=Gt(e),i=this.children.get(t);return i?i.get(fn(e)):null}}setTree(e,t){if(Wt(e))return t;{const i=Gt(e),o=(this.children.get(i)||new rn(null)).setTree(fn(e),t);let u;return u=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new rn(this.value,u)}}fold(e){return this.fold_(Bt(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(Nn(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,Bt(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(Wt(e))return null;{const o=Gt(e),u=this.children.get(o);return u?u.findOnPath_(fn(e),Nn(t,o),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Bt(),t)}foreachOnPath_(e,t,i){if(Wt(e))return this;{this.value&&i(t,this.value);const r=Gt(e),o=this.children.get(r);return o?o.foreachOnPath_(fn(e),Nn(t,r),i):new rn(null)}}foreach(e){this.foreach_(Bt(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(Nn(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class Go{constructor(e){this.writeTree_=e}static empty(){return new Go(new rn(null))}}function Eh(n,e,t){if(Wt(e))return new Go(new rn(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let o=i.value;const u=Fi(r,e);return o=o.updateChild(u,t),new Go(n.writeTree_.set(r,o))}{const r=new rn(t),o=n.writeTree_.setTree(e,r);return new Go(o)}}}function Ky(n,e,t){let i=n;return hi(t,(r,o)=>{i=Eh(i,Nn(e,r),o)}),i}function RE(n,e){if(Wt(e))return Go.empty();{const t=n.writeTree_.setTree(e,new rn(null));return new Go(t)}}function Yy(n,e){return null!=qc(n,e)}function qc(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Fi(t.path,e)):null}function Qy(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Ln,(i,r)=>{e.push(new Xt(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new Xt(i,r.value))}),e}function Mu(n,e){if(Wt(e))return n;{const t=qc(n,e);return new Go(null!=t?new rn(t):n.writeTree_.subtree(e))}}function Xy(n){return n.writeTree_.isEmpty()}function Ch(n,e){return Ut(Bt(),n.writeTree_,e)}function Ut(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,o)=>{".priority"===r?((0,Q.hu)(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):t=Ut(Nn(n,r),o,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(Nn(n,".priority"),i)),t}}function sp(n,e){return mS(e,n)}function NE(n,e){if(n.snap)return Gr(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Gr(Nn(n.path,t),e))return!0;return!1}function LE(n){return n.visible}function FE(n,e,t){let i=Go.empty();for(let r=0;r<n.length;++r){const o=n[r];if(e(o)){const u=o.path;let f;if(o.snap)Gr(t,u)?(f=Fi(t,u),i=Eh(i,f,o.snap)):Gr(u,t)&&(f=Fi(u,t),i=Eh(i,Bt(),o.snap.getChild(f)));else{if(!o.children)throw(0,Q.g5)("WriteRecord should have .snap or .children");if(Gr(t,u))f=Fi(t,u),i=Ky(i,f,o.children);else if(Gr(u,t))if(f=Fi(u,t),Wt(f))i=Ky(i,Bt(),o.children);else{const y=(0,Q.DV)(o.children,Gt(f));if(y){const E=y.getChild(fn(f));i=Eh(i,Bt(),E)}}}}}return i}function BE(n,e,t,i,r){if(i||r){const o=Mu(n.visibleWrites,e);return!r&&Xy(o)?t:r||null!=t||Yy(o,Bt())?Ch(FE(n.allWrites,function(E){return(E.visible||r)&&(!i||!~i.indexOf(E.writeId))&&(Gr(E.path,e)||Gr(e,E.path))},e),t||Kt.EMPTY_NODE):null}{const o=qc(n.visibleWrites,e);if(null!=o)return o;{const u=Mu(n.visibleWrites,e);return Xy(u)?t:null!=t||Yy(u,Bt())?Ch(u,t||Kt.EMPTY_NODE):null}}}function Dh(n,e,t,i){return BE(n.writeTree,n.treePath,e,t,i)}function ev(n,e){return function gO(n,e,t){let i=Kt.EMPTY_NODE;const r=qc(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Ln,(o,u)=>{i=i.updateImmediateChild(o,u)}),i;if(t){const o=Mu(n.visibleWrites,e);return t.forEachChild(Ln,(u,f)=>{const y=Ch(Mu(o,new Rt(u)),f);i=i.updateImmediateChild(u,y)}),Qy(o).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}return Qy(Mu(n.visibleWrites,e)).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}(n.writeTree,n.treePath,e)}function pS(n,e,t,i){return function VE(n,e,t,i,r){(0,Q.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const o=Nn(e,t);if(Yy(n.visibleWrites,o))return null;{const u=Mu(n.visibleWrites,o);return Xy(u)?r.getChild(t):Ch(u,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function tv(n,e){return function Zc(n,e){return qc(n.visibleWrites,e)}(n.writeTree,Nn(n.treePath,e))}function nv(n,e,t){return function UE(n,e,t,i){const r=Nn(e,t),o=qc(n.visibleWrites,r);return null!=o?o:i.isCompleteForChild(t)?Ch(Mu(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function iv(n,e){return mS(Nn(n.treePath,e),n.writeTree)}function mS(n,e){return{treePath:n,writeTree:e}}class gS{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;(0,Q.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,Q.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const o=r.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(i,_h(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(i,Gc(i,r.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(i,zo(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,Q.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,_h(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const HE=new class Ih{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class Cg{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new Au(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return nv(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:xu(this.viewCache_),o=function _O(n,e,t,i,r,o){return function fS(n,e,t,i,r,o,u){let f;const y=Mu(n.visibleWrites,e),E=qc(y,Bt());if(null!=E)f=E;else{if(null==t)return[];f=Ch(y,t)}if(f=f.withIndex(u),f.isEmpty()||f.isLeafNode())return[];{const S=[],R=u.getCompare(),H=o?f.getReverseIteratorFrom(i,u):f.getIteratorFrom(i,u);let K=H.getNext();for(;K&&S.length<r;)0!==R(K,i)&&S.push(K),K=H.getNext();return S}}(n.writeTree,n.treePath,e,t,i,r,o)}(this.writes_,r,t,1,i,e);return 0===o.length?null:o[0]}}function zE(n,e,t,i,r,o){const u=e.eventCache;if(null!=tv(i,t))return e;{let f,y;if(Wt(t))if((0,Q.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const E=xu(e),R=ev(i,E instanceof Kt?E:Kt.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),R,o)}else{const E=Dh(i,xu(e));f=n.filter.updateFullNode(e.eventCache.getNode(),E,o)}else{const E=Gt(t);if(".priority"===E){(0,Q.hu)(1===Ta(t),"Can't have a priority with additional path components");const S=u.getNode();y=e.serverCache.getNode();const R=pS(i,t,S,y);f=null!=R?n.filter.updatePriority(S,R):u.getNode()}else{const S=fn(t);let R;if(u.isCompleteForChild(E)){y=e.serverCache.getNode();const H=pS(i,t,u.getNode(),y);R=null!=H?u.getNode().getImmediateChild(E).updateChild(S,H):u.getNode().getImmediateChild(E)}else R=nv(i,E,e.serverCache);f=null!=R?n.filter.updateChild(u.getNode(),E,R,S,r,o):u.getNode()}}return wg(e,f,u.isFullyInitialized()||Wt(t),n.filter.filtersNodes())}}function Ig(n,e,t,i,r,o,u,f){const y=e.serverCache;let E;const S=u?n.filter:n.filter.getIndexedFilter();if(Wt(t))E=S.updateFullNode(y.getNode(),i,null);else if(S.filtersNodes()&&!y.isFiltered()){const K=y.getNode().updateChild(t,i);E=S.updateFullNode(y.getNode(),K,null)}else{const K=Gt(t);if(!y.isCompleteForPath(t)&&Ta(t)>1)return e;const J=fn(t),ve=y.getNode().getImmediateChild(K).updateChild(J,i);E=".priority"===K?S.updatePriority(y.getNode(),ve):S.updateChild(y.getNode(),K,ve,J,HE,null)}const R=qy(e,E,y.isFullyInitialized()||Wt(t),S.filtersNodes());return zE(n,R,t,r,new Cg(r,R,o),f)}function rv(n,e,t,i,r,o,u){const f=e.eventCache;let y,E;const S=new Cg(r,e,o);if(Wt(t))E=n.filter.updateFullNode(e.eventCache.getNode(),i,u),y=wg(e,E,!0,n.filter.filtersNodes());else{const R=Gt(t);if(".priority"===R)E=n.filter.updatePriority(e.eventCache.getNode(),i),y=wg(e,E,f.isFullyInitialized(),f.isFiltered());else{const H=fn(t),K=f.getNode().getImmediateChild(R);let J;if(Wt(H))J=i;else{const le=S.getCompleteChild(R);J=null!=le?".priority"===Kf(H)&&le.getChild(og(H)).isEmpty()?le:le.updateChild(H,i):Kt.EMPTY_NODE}y=K.equals(J)?e:wg(e,n.filter.updateChild(f.getNode(),R,J,H,S,u),f.isFullyInitialized(),n.filter.filtersNodes())}}return y}function GE(n,e){return n.eventCache.isCompleteForChild(e)}function $E(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function Tg(n,e,t,i,r,o,u,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let E,y=e;E=Wt(t)?i:new rn(null).setTree(t,i);const S=e.serverCache.getNode();return E.children.inorderTraversal((R,H)=>{if(S.hasChild(R)){const J=$E(0,e.serverCache.getNode().getImmediateChild(R),H);y=Ig(n,y,new Rt(R),J,r,o,u,f)}}),E.children.inorderTraversal((R,H)=>{const K=!e.serverCache.isCompleteForChild(R)&&null===H.value;if(!S.hasChild(R)&&!K){const le=$E(0,e.serverCache.getNode().getImmediateChild(R),H);y=Ig(n,y,new Rt(R),le,r,o,u,f)}}),y}class ov{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new Jf(i.getIndex()),o=function rS(n){return n.loadsAllData()?new Jf(n.getIndex()):n.hasLimit()?new iS(n):new ep(n)}(i);this.processor_=function Dg(n){return{filter:n}}(o);const u=t.serverCache,f=t.eventCache,y=r.updateFullNode(Kt.EMPTY_NODE,u.getNode(),null),E=o.updateFullNode(Kt.EMPTY_NODE,f.getNode(),null),S=new Au(y,u.isFullyInitialized(),r.filtersNodes()),R=new Au(E,f.isFullyInitialized(),o.filtersNodes());this.viewCache_=rp(R,S),this.eventGenerator_=new ME(this.query_)}get query(){return this.query_}}function Th(n,e){const t=xu(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Wt(e)&&!t.getImmediateChild(Gt(e)).isEmpty())?t.getChild(e):null}function av(n){return 0===n.eventRegistrations_.length}function op(n,e,t){const i=[];if(t){(0,Q.hu)(null==e,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(o=>{const u=o.createCancelEvent(t,r);u&&i.push(u)})}if(e){let r=[];for(let o=0;o<n.eventRegistrations_.length;++o){const u=n.eventRegistrations_[o];if(u.matches(e)){if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(o+1));break}}else r.push(u)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function ho(n,e,t,i){e.type===xs.MERGE&&null!==e.source.queryId&&((0,Q.hu)(xu(n.viewCache_),"We should always have a full cache before handling merges"),(0,Q.hu)(Eg(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,o=function jE(n,e,t,i,r){const o=new gS;let u,f;if(t.type===xs.OVERWRITE){const E=t;E.source.fromUser?u=rv(n,e,E.path,E.snap,i,r,o):((0,Q.hu)(E.source.fromServer,"Unknown source."),f=E.source.tagged||e.serverCache.isFiltered()&&!Wt(E.path),u=Ig(n,e,E.path,E.snap,i,r,f,o))}else if(t.type===xs.MERGE){const E=t;E.source.fromUser?u=function WE(n,e,t,i,r,o,u){let f=e;return i.foreach((y,E)=>{const S=Nn(t,y);GE(e,Gt(S))&&(f=rv(n,f,S,E,r,o,u))}),i.foreach((y,E)=>{const S=Nn(t,y);GE(e,Gt(S))||(f=rv(n,f,S,E,r,o,u))}),f}(n,e,E.path,E.children,i,r,o):((0,Q.hu)(E.source.fromServer,"Unknown source."),f=E.source.tagged||e.serverCache.isFiltered(),u=Tg(n,e,E.path,E.children,i,r,f,o))}else if(t.type===xs.ACK_USER_WRITE){const E=t;u=E.revert?function yO(n,e,t,i,r,o){let u;if(null!=tv(i,t))return e;{const f=new Cg(i,e,r),y=e.eventCache.getNode();let E;if(Wt(t)||".priority"===Gt(t)){let S;if(e.serverCache.isFullyInitialized())S=Dh(i,xu(e));else{const R=e.serverCache.getNode();(0,Q.hu)(R instanceof Kt,"serverChildren would be complete if leaf node"),S=ev(i,R)}E=n.filter.updateFullNode(y,S,o)}else{const S=Gt(t);let R=nv(i,S,e.serverCache);null==R&&e.serverCache.isCompleteForChild(S)&&(R=y.getImmediateChild(S)),E=null!=R?n.filter.updateChild(y,S,R,fn(t),f,o):e.eventCache.getNode().hasChild(S)?n.filter.updateChild(y,S,Kt.EMPTY_NODE,fn(t),f,o):y,E.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=Dh(i,xu(e)),u.isLeafNode()&&(E=n.filter.updateFullNode(E,u,o)))}return u=e.serverCache.isFullyInitialized()||null!=tv(i,Bt()),wg(e,E,u,n.filter.filtersNodes())}}(n,e,E.path,i,r,o):function qE(n,e,t,i,r,o,u){if(null!=tv(r,t))return e;const f=e.serverCache.isFiltered(),y=e.serverCache;if(null!=i.value){if(Wt(t)&&y.isFullyInitialized()||y.isCompleteForPath(t))return Ig(n,e,t,y.getNode().getChild(t),r,o,f,u);if(Wt(t)){let E=new rn(null);return y.getNode().forEachChild(Sa,(S,R)=>{E=E.set(new Rt(S),R)}),Tg(n,e,t,E,r,o,f,u)}return e}{let E=new rn(null);return i.foreach((S,R)=>{const H=Nn(t,S);y.isCompleteForPath(H)&&(E=E.set(S,y.getNode().getChild(H)))}),Tg(n,e,t,E,r,o,f,u)}}(n,e,E.path,E.affectedTree,i,r,o)}else{if(t.type!==xs.LISTEN_COMPLETE)throw(0,Q.g5)("Unknown operation type: "+t.type);u=function sv(n,e,t,i,r){const o=e.serverCache;return zE(n,qy(e,o.getNode(),o.isFullyInitialized()||Wt(t),o.isFiltered()),t,i,HE,r)}(n,e,t.path,i,o)}const y=o.getChanges();return function yS(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=Eg(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&t.push(tS(Eg(e)))}}(e,u,y),{viewCache:u,changes:y}}(n.processor_,r,e,t,i);return function _S(n,e){(0,Q.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,Q.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,Q.hu)(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,YE(n,o.changes,o.viewCache.eventCache.getNode(),null)}function YE(n,e,t,i){return function lS(n,e,t,i){const r=[],o=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&o.push(function nS(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),ip(n,r,"child_removed",e,i,t),ip(n,r,"child_added",e,i,t),ip(n,r,"child_moved",o,i,t),ip(n,r,"child_changed",e,i,t),ip(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let Sh,kg;class Ma{constructor(){this.views=new Map}}function XE(n,e,t,i){const r=e.source.queryId;if(null!==r){const o=n.views.get(r);return(0,Q.hu)(null!=o,"SyncTree gave us an op for an invalid query."),ho(o,e,t,i)}{let o=[];for(const u of n.views.values())o=o.concat(ho(u,e,t,i));return o}}function cv(n,e,t,i,r){const u=n.views.get(e._queryIdentifier);if(!u){let f=Dh(t,r?i:null),y=!1;f?y=!0:i instanceof Kt?(f=ev(t,i),y=!1):(f=Kt.EMPTY_NODE,y=!1);const E=rp(new Au(f,y,!1),new Au(i,r,!1));return new ov(e,E)}return u}function ap(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function ka(n,e){let t=null;for(const i of n.views.values())t=t||Th(i,e);return t}function Ag(n,e){return e._queryParams.loadsAllData()?Mg(n):n.views.get(e._queryIdentifier)}function xg(n,e){return null!=Ag(n,e)}function Kc(n){return null!=Mg(n)}function Mg(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let JE=1;class ES{constructor(e){this.listenProvider_=e,this.syncPointTree_=new rn(null),this.pendingWriteTree_=function Jy(){return{visibleWrites:Go.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function dv(n,e,t,i,r){return function PE(n,e,t,i,r){(0,Q.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=Eh(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?lp(n,new bl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function wl(n,e,t=!1){const i=function cS(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function dS(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,Q.hu)(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,o=!1,u=n.allWrites.length-1;for(;r&&u>=0;){const f=n.allWrites[u];f.visible&&(u>=t&&NE(f,i.path)?r=!1:Gr(i.path,f.path)&&(o=!0)),u--}return!!r&&(o?(function hS(n){n.visibleWrites=FE(n.allWrites,LE,Bt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=RE(n.visibleWrites,i.path):hi(i.children,y=>{n.visibleWrites=RE(n.visibleWrites,Nn(i.path,y))}),!0))}(n.pendingWriteTree_,e)){let o=new rn(null);return null!=i.snap?o=o.set(Bt(),!0):hi(i.children,u=>{o=o.set(new Rt(u),!0)}),lp(n,new bh(i.path,o,t))}return[]}function Ah(n,e,t){return lp(n,new bl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function fv(n,e,t,i,r=!1){const o=e._path,u=n.syncPointTree_.get(o);let f=[];if(u&&("default"===e._queryIdentifier||xg(u,e))){const y=function Sg(n,e,t,i){const r=e._queryIdentifier,o=[];let u=[];const f=Kc(n);if("default"===r)for(const[y,E]of n.views.entries())u=u.concat(op(E,t,i)),av(E)&&(n.views.delete(y),E.query._queryParams.loadsAllData()||o.push(E.query));else{const y=n.views.get(r);y&&(u=u.concat(op(y,t,i)),av(y)&&(n.views.delete(r),y.query._queryParams.loadsAllData()||o.push(y.query)))}return f&&!Kc(n)&&o.push(new(function QE(){return(0,Q.hu)(Sh,"Reference.ts has not been loaded"),Sh}())(e._repo,e._path)),{removed:o,events:u}}(u,e,t,i);(function uv(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const E=y.removed;if(f=y.events,!r){const S=-1!==E.findIndex(H=>H._queryParams.loadsAllData()),R=n.syncPointTree_.findOnPath(o,(H,K)=>Kc(K));if(S&&!R){const H=n.syncPointTree_.subtree(o);if(!H.isEmpty()){const K=function mv(n){return n.fold((e,t,i)=>{if(t&&Kc(t))return[Mg(t)];{let r=[];return t&&(r=ap(t)),hi(i,(o,u)=>{r=r.concat(u)}),r}})}(H);for(let J=0;J<K.length;++J){const le=K[J],ve=le.query,Ve=El(n,le);n.listenProvider_.startListening(cp(ve),Yc(n,ve),Ve.hashFn,Ve.onComplete)}}}!R&&E.length>0&&!i&&(S?n.listenProvider_.stopListening(cp(e),null):E.forEach(H=>{const K=n.queryToTagMap.get(Rg(H));n.listenProvider_.stopListening(cp(H),K)}))}!function ku(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=Rg(i),o=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(o)}}}(n,E)}return f}function DS(n,e,t,i){const r=Pg(n,i);if(null!=r){const o=up(r),u=o.path,f=o.queryId,y=Fi(u,e);return Og(n,u,new bl(bg(f),y,t))}return[]}function e0(n,e,t,i=!1){const r=e._path;let o=null,u=!1;n.syncPointTree_.foreachOnPath(r,(H,K)=>{const J=Fi(H,r);o=o||ka(K,J),u=u||Kc(K)});let y,f=n.syncPointTree_.get(r);f?(u=u||Kc(f),o=o||ka(f,Bt())):(f=new Ma,n.syncPointTree_=n.syncPointTree_.set(r,f)),null!=o?y=!0:(y=!1,o=Kt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((K,J)=>{const le=ka(J,Bt());le&&(o=o.updateImmediateChild(K,le))}));const E=xg(f,e);if(!E&&!e._queryParams.loadsAllData()){const H=Rg(e);(0,Q.hu)(!n.queryToTagMap.has(H),"View does not exist, but we have a tag");const K=function t0(){return JE++}();n.queryToTagMap.set(H,K),n.tagToQueryMap.set(K,H)}let R=function bO(n,e,t,i,r,o){const u=cv(n,e,i,r,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function ZE(n,e){n.eventRegistrations_.push(e)}(u,t),function KE(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Ln,(o,u)=>{i.push(zo(o,u))}),t.isFullyInitialized()&&i.push(tS(t.getNode())),YE(n,i,t.getNode(),e)}(u,t)}(f,e,t,sp(n.pendingWriteTree_,r),o,y);if(!E&&!u&&!i){const H=Ag(f,e);R=R.concat(function SS(n,e,t){const i=e._path,r=Yc(n,e),o=El(n,t),u=n.listenProvider_.startListening(cp(e),r,o.hashFn,o.onComplete),f=n.syncPointTree_.subtree(i);if(r)(0,Q.hu)(!Kc(f.value),"If we're adding a query, it shouldn't be shadowed");else{const y=f.fold((E,S,R)=>{if(!Wt(E)&&S&&Kc(S))return[Mg(S).query];{let H=[];return S&&(H=H.concat(ap(S).map(K=>K.query))),hi(R,(K,J)=>{H=H.concat(J)}),H}});for(let E=0;E<y.length;++E){const S=y[E];n.listenProvider_.stopListening(cp(S),Yc(n,S))}}return u}(n,e,H))}return R}function pv(n,e,t){const r=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(u,f)=>{const E=ka(f,Fi(u,e));if(E)return E});return BE(r,e,o,t,!0)}function lp(n,e){return IS(e,n.syncPointTree_,null,sp(n.pendingWriteTree_,Bt()))}function IS(n,e,t,i){if(Wt(n.path))return TS(n,e,t,i);{const r=e.get(Bt());null==t&&null!=r&&(t=ka(r,Bt()));let o=[];const u=Gt(n.path),f=n.operationForChild(u),y=e.children.get(u);if(y&&f){const E=t?t.getImmediateChild(u):null,S=iv(i,u);o=o.concat(IS(f,y,E,S))}return r&&(o=o.concat(XE(r,n,i,t))),o}}function TS(n,e,t,i){const r=e.get(Bt());null==t&&null!=r&&(t=ka(r,Bt()));let o=[];return e.children.inorderTraversal((u,f)=>{const y=t?t.getImmediateChild(u):null,E=iv(i,u),S=n.operationForChild(u);S&&(o=o.concat(TS(S,f,y,E)))}),r&&(o=o.concat(XE(r,n,i,t))),o}function El(n,e){const t=e.query,i=Yc(n,t);return{hashFn:()=>(function vS(n){return n.viewCache_.serverCache.getNode()}(e)||Kt.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function EO(n,e,t){const i=Pg(n,t);if(i){const r=up(i),o=r.path,u=r.queryId,f=Fi(o,e);return Og(n,o,new wh(bg(u),f))}return[]}(n,t._path,i):function hv(n,e){return lp(n,new wh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const o=function qm(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(r,t);return fv(n,t,null,o)}}}}function Yc(n,e){const t=Rg(e);return n.queryToTagMap.get(t)}function Rg(n){return n._path.toString()+"$"+n._queryIdentifier}function Pg(n,e){return n.tagToQueryMap.get(e)}function up(n){const e=n.indexOf("$");return(0,Q.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Rt(n.substr(0,e))}}function Og(n,e,t){const i=n.syncPointTree_.get(e);return(0,Q.hu)(i,"Missing sync point for query tag that we're tracking"),XE(i,t,sp(n.pendingWriteTree_,e),null)}function cp(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function wS(){return(0,Q.hu)(kg,"Reference.ts has not been loaded"),kg}())(n._repo,n._path):n}class gv{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new gv(t)}node(){return this.node_}}class Ng{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Nn(this.path_,e);return new Ng(this.syncTree_,t)}node(){return pv(this.syncTree_,this.path_)}}const n0=function(n,e,t){return n&&"object"==typeof n?((0,Q.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Lg(n[".sv"],e,t):"object"==typeof n[".sv"]?xh(n[".sv"],e):void(0,Q.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Lg=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,Q.hu)(!1,"Unexpected server value: "+n)},xh=function(n,e,t){n.hasOwnProperty("increment")||(0,Q.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,Q.hu)(!1,"Unexpected increment value: "+i);const r=e.node();if((0,Q.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const u=r.getValue();return"number"!=typeof u?i:u+i},Fg=function(n,e,t,i){return dp(e,new Ng(t,n),i)},Ru=function(n,e,t){return dp(n,new gv(e),t)};function dp(n,e,t){const i=n.getPriority().val(),r=n0(i,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const u=n,f=n0(u.getValue(),e,t);return f!==u.getValue()||r!==u.getPriority().val()?new ph(f,Gn(r)):n}{const u=n;return o=u,r!==u.getPriority().val()&&(o=o.updatePriority(new ph(r))),u.forEachChild(Ln,(f,y)=>{const E=dp(y,e.getImmediateChild(f),t);E!==y&&(o=o.updateImmediateChild(f,E))}),o}}class Mh{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function hp(n,e){let t=e instanceof Rt?e:new Rt(e),i=n,r=Gt(t);for(;null!==r;){const o=(0,Q.DV)(i.node.children,r)||{children:{},childCount:0};i=new Mh(r,i,o),t=fn(t),r=Gt(t)}return i}function Pu(n){return n.node.value}function fp(n,e){n.node.value=e,Vg(n)}function Bg(n){return n.node.childCount>0}function kh(n,e){hi(n.node.children,(t,i)=>{e(new Mh(t,n,i))})}function s0(n,e,t,i){t&&!i&&e(n),kh(n,r=>{s0(r,e,!0,i)}),t&&i&&e(n)}function pp(n){return new Rt(null===n.parent?n.name:pp(n.parent)+"/"+n.name)}function Vg(n){null!==n.parent&&function xS(n,e,t){const i=function r0(n){return void 0===Pu(n)&&!Bg(n)}(t),r=(0,Q.r3)(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,Vg(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,Vg(n))}(n.parent,n.name,n)}const o0=/[\[\].#$\/\u0000-\u001F\u007F]/,a0=/[\[\].#$\u0000-\u001F\u007F]/,_v=10485760,Ar=function(n){return"string"==typeof n&&0!==n.length&&!o0.test(n)},yv=function(n){return"string"==typeof n&&0!==n.length&&!a0.test(n)},Ug=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!wu(n)||n&&"object"==typeof n&&(0,Q.r3)(n,".sv")},Ra=function(n,e,t,i){i&&void 0===e||Qc((0,Q.gK)(n,"value"),e,t)},Qc=function(n,e,t){const i=t instanceof Rt?new mE(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Ho(i));if("function"==typeof e)throw new Error(n+"contains a function "+Ho(i)+" with contents = "+e.toString());if(wu(e))throw new Error(n+"contains "+e.toString()+" "+Ho(i));if("string"==typeof e&&e.length>_v/3&&(0,Q.ug)(e)>_v)throw new Error(n+"contains a string greater than "+_v+" utf8 bytes "+Ho(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,o=!1;if(hi(e,(u,f)=>{if(".value"===u)r=!0;else if(".priority"!==u&&".sv"!==u&&(o=!0,!Ar(u)))throw new Error(n+" contains an invalid key ("+u+") "+Ho(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function My(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,Q.ug)(e),ag(n)})(i,u),Qc(n,f,i),function $T(n){const e=n.parts_.pop();n.byteLength_-=(0,Q.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&o)throw new Error(n+' contains ".value" child '+Ho(i)+" in addition to actual children.")}},u0=function(n,e,t,i){if(i&&void 0===e)return;const r=(0,Q.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const o=[];hi(e,(u,f)=>{const y=new Rt(u);if(Qc(r,f,Nn(t,y)),".priority"===Kf(y)&&!Ug(f))throw new Error(r+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(y)}),function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const o=Tu(i);for(let u=0;u<o.length;u++)if((".priority"!==o[u]||u!==o.length-1)&&!Ar(o[u]))throw new Error(n+"contains an invalid key ("+o[u]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Yf);let r=null;for(t=0;t<e.length;t++){if(i=e[t],null!==r&&Gr(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,o)},vv=function(n,e,t){if(!t||void 0!==e){if(wu(e))throw new Error((0,Q.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ug(e))throw new Error((0,Q.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},mp=function(n,e,t,i){if(!(i&&void 0===t||Ar(t)))throw new Error((0,Q.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Rh=function(n,e,t,i){if(!(i&&void 0===t||yv(t)))throw new Error((0,Q.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ms=function(n,e){if(".info"===Gt(e))throw new Error(n+" failed = Can't modify data under /.info/")},c0=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Ar(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),yv(n)}(t))throw new Error((0,Q.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class RS{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function gp(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],o=r.getPath();null!==t&&!Su(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(r)}t&&n.eventLists_.push(t)}function bv(n,e,t){gp(n,t),Wo(n,i=>Su(i,e))}function ks(n,e,t){gp(n,t),Wo(n,i=>Gr(i,e)||Gr(e,i))}function Wo(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?(wv(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function wv(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();vu&&Li("event: "+t.toString()),fl(i)}}}const d0="repo_interrupt";class TO{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new RS,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=np(),this.transactionQueueTree_=new Mh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function f0(n){const t=n.infoData_.getNode(new Rt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function _p(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:f0(n)})}function p0(n,e,t,i,r){n.dataUpdateCount++;const o=new Rt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(r)if(i){const y=(0,Q.UI)(t,E=>Gn(E));u=function CO(n,e,t,i){const r=Pg(n,i);if(r){const o=up(r),u=o.path,f=o.queryId,y=Fi(u,e),E=rn.fromObject(t);return Og(n,u,new xa(bg(f),y,E))}return[]}(n.serverSyncTree_,o,y,r)}else{const y=Gn(t);u=DS(n.serverSyncTree_,o,y,r)}else if(i){const y=(0,Q.UI)(t,E=>Gn(E));u=function CS(n,e,t){const i=rn.fromObject(t);return lp(n,new xa({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,o,y)}else{const y=Gn(t);u=Ah(n.serverSyncTree_,o,y)}let f=o;u.length>0&&(f=Oh(n,o)),ks(n.eventQueue_,f,u)}function Hg(n,e){Ev(n,"connected",e),!1===e&&function Dv(n){Cl(n,"onDisconnectEvents");const e=_p(n),t=np();SE(n.onDisconnect_,Bt(),(r,o)=>{const u=Fg(r,o,n.serverSyncTree_,e);$c(t,r,u)});let i=[];SE(t,Bt(),(r,o)=>{i=i.concat(Ah(n.serverSyncTree_,r,o));const u=Sv(n,r);Oh(n,u)}),n.onDisconnect_=np(),ks(n.eventQueue_,Bt(),i)}(n)}function Ev(n,e,t){const i=new Rt("/.info/"+e),r=Gn(t);n.infoData_.updateSnapshot(i,r);const o=Ah(n.infoSyncTree_,i,r);ks(n.eventQueue_,i,o)}function Xc(n){return n.nextWriteId_++}function Ph(n,e,t,i,r){Cl(n,"set",{path:e.toString(),value:t,priority:i});const o=_p(n),u=Gn(t,i),f=pv(n.serverSyncTree_,e),y=Ru(u,f,o),E=Xc(n),S=dv(n.serverSyncTree_,e,y,E,!0);gp(n.eventQueue_,S),n.server_.put(e.toString(),u.val(!0),(H,K)=>{const J="ok"===H;J||hr("set at "+e+" failed: "+H);const le=wl(n.serverSyncTree_,E,!J);ks(n.eventQueue_,e,le),fo(0,r,H,K)});const R=Sv(n,e);Oh(n,R),ks(n.eventQueue_,R,[])}function AO(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,r)=>{"ok"===i&&zy(n.onDisconnect_,e),fo(0,t,i,r)})}function Iv(n,e,t,i){const r=Gn(t);n.server_.onDisconnectPut(e.toString(),r.val(!0),(o,u)=>{"ok"===o&&$c(n.onDisconnect_,e,r),fo(0,i,o,u)})}function yp(n,e,t){let i;i=".info"===Gt(e._path)?fv(n.infoSyncTree_,e,t):fv(n.serverSyncTree_,e,t),bv(n.eventQueue_,e._path,i)}function Pa(n){n.persistentConnection_&&n.persistentConnection_.interrupt(d0)}function Cl(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Li(t,...e)}function fo(n,e,t,i){e&&fl(()=>{if("ok"===t)e(null);else{const r=(t||"error").toUpperCase();let o=r;i&&(o+=": "+i);const u=new Error(o);u.code=r,e(u)}})}function vp(n,e,t){return pv(n.serverSyncTree_,e,t)||Kt.EMPTY_NODE}function bp(n,e=n.transactionQueueTree_){if(e||Tv(n,e),Pu(e)){const t=FS(n,e);(0,Q.hu)(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function LS(n,e,t){const i=t.map(E=>E.currentWriteId),r=vp(n,e,i);let o=r;const u=r.hash();for(let E=0;E<t.length;E++){const S=t[E];(0,Q.hu)(0===S.status,"tryToSendTransactionQueue_: items in queue should all be run."),S.status=1,S.retryCount++;const R=Fi(e,S.path);o=o.updateChild(R,S.currentOutputSnapshotRaw)}const f=o.val(!0),y=e;n.server_.put(y.toString(),f,E=>{Cl(n,"transaction put response",{path:y.toString(),status:E});let S=[];if("ok"===E){const R=[];for(let H=0;H<t.length;H++)t[H].status=2,S=S.concat(wl(n.serverSyncTree_,t[H].currentWriteId)),t[H].onComplete&&R.push(()=>t[H].onComplete(null,!0,t[H].currentOutputSnapshotResolved)),t[H].unwatcher();Tv(n,hp(n.transactionQueueTree_,e)),bp(n,n.transactionQueueTree_),ks(n.eventQueue_,e,S);for(let H=0;H<R.length;H++)fl(R[H])}else{if("datastale"===E)for(let R=0;R<t.length;R++)t[R].status=3===t[R].status?4:0;else{hr("transaction at "+y.toString()+" failed: "+E);for(let R=0;R<t.length;R++)t[R].status=4,t[R].abortReason=E}Oh(n,e)}},u)}(n,pp(e),t)}else Bg(e)&&kh(e,t=>{bp(n,t)})}function Oh(n,e){const t=y0(n,e),i=pp(t);return function wp(n,e,t){if(0===e.length)return;const i=[];let r=[];const u=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const y=e[f],E=Fi(t,y.path);let R,S=!1;if((0,Q.hu)(null!==E,"rerunTransactionsUnderNode_: relativePath should not be null."),4===y.status)S=!0,R=y.abortReason,r=r.concat(wl(n.serverSyncTree_,y.currentWriteId,!0));else if(0===y.status)if(y.retryCount>=25)S=!0,R="maxretry",r=r.concat(wl(n.serverSyncTree_,y.currentWriteId,!0));else{const H=vp(n,y.path,u);y.currentInputSnapshot=H;const K=e[f].update(H.val());if(void 0!==K){Qc("transaction failed: Data returned ",K,y.path);let J=Gn(K);"object"==typeof K&&null!=K&&(0,Q.r3)(K,".priority")||(J=J.updatePriority(H.getPriority()));const ve=y.currentWriteId,Ve=_p(n),Ye=Ru(J,H,Ve);y.currentOutputSnapshotRaw=J,y.currentOutputSnapshotResolved=Ye,y.currentWriteId=Xc(n),u.splice(u.indexOf(ve),1),r=r.concat(dv(n.serverSyncTree_,y.path,Ye,y.currentWriteId,y.applyLocally)),r=r.concat(wl(n.serverSyncTree_,ve,!0))}else S=!0,R="nodata",r=r.concat(wl(n.serverSyncTree_,y.currentWriteId,!0))}ks(n.eventQueue_,t,r),r=[],S&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&i.push("nodata"===R?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(R),!1,null)))}Tv(n,n.transactionQueueTree_);for(let f=0;f<i.length;f++)fl(i[f]);bp(n,n.transactionQueueTree_)}(n,FS(n,t),i),i}function y0(n,e){let t,i=n.transactionQueueTree_;for(t=Gt(e);null!==t&&void 0===Pu(i);)i=hp(i,t),t=Gt(e=fn(e));return i}function FS(n,e){const t=[];return v0(n,e,t),t.sort((i,r)=>i.order-r.order),t}function v0(n,e,t){const i=Pu(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);kh(e,r=>{v0(n,r,t)})}function Tv(n,e){const t=Pu(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,fp(e,t.length>0?t:void 0)}kh(e,i=>{Tv(n,i)})}function Sv(n,e){const t=pp(y0(n,e)),i=hp(n.transactionQueueTree_,e);return function IO(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{Av(n,r)}),Av(n,i),s0(i,r=>{Av(n,r)}),t}function Av(n,e){const t=Pu(e);if(t){const i=[];let r=[],o=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,Q.hu)(o===u-1,"All SENT items should be at beginning of queue."),o=u,t[u].status=3,t[u].abortReason="set"):((0,Q.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),r=r.concat(wl(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&i.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===o?fp(e,void 0):t.length=o+1,ks(n.eventQueue_,pp(e),r);for(let u=0;u<i.length;u++)fl(i[u])}}const Ep=function(n,e){const t=VS(n),i=t.namespace;return"firebase.com"===t.domain&&lo(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&lo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&hr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Da(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new Rt(t.pathString)}},VS=function(n){let e="",t="",i="",r="",o="",u=!0,f="https",y=443;if("string"==typeof n){let E=n.indexOf("//");E>=0&&(f=n.substring(0,E-1),n=n.substring(E+2));let S=n.indexOf("/");-1===S&&(S=n.length);let R=n.indexOf("?");-1===R&&(R=n.length),e=n.substring(0,Math.min(S,R)),S<R&&(r=function BS(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}(n.substring(S,R)));const H=function b0(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):hr(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,R)));E=e.indexOf(":"),E>=0?(u="https"===f||"wss"===f,y=parseInt(e.substring(E+1),10)):E=e.length;const K=e.slice(0,E);if("localhost"===K.toLowerCase())t="localhost";else if(K.split(".").length<=2)t=K;else{const J=e.indexOf(".");i=e.substring(0,J).toLowerCase(),t=e.substring(J+1),o=i}"ns"in H&&(o=H.ns)}return{host:e,port:y,domain:t,subdomain:i,secure:u,scheme:f,pathString:r,namespace:o}};class zg{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,Q.Wl)(this.snapshot.exportVal())}}class w0{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class xv{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,Q.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class E0{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new Q.BH;return AO(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ms("OnDisconnect.remove",this._path);const e=new Q.BH;return Iv(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ms("OnDisconnect.set",this._path),Ra("OnDisconnect.set",e,this._path,!1);const t=new Q.BH;return Iv(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ms("OnDisconnect.setWithPriority",this._path),Ra("OnDisconnect.setWithPriority",e,this._path,!1),vv("OnDisconnect.setWithPriority",t,!1);const i=new Q.BH;return function m0(n,e,t,i,r){const o=Gn(t,i);n.server_.onDisconnectPut(e.toString(),o.val(!0),(u,f)=>{"ok"===u&&$c(n.onDisconnect_,e,o),fo(0,r,u,f)})}(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){Ms("OnDisconnect.update",this._path),u0("OnDisconnect.update",e,this._path,!1);const t=new Q.BH;return function g0(n,e,t,i){if((0,Q.xb)(t))return Li("onDisconnect().update() called with empty data.  Don't do anything."),void fo(0,i,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(r,o)=>{"ok"===r&&hi(t,(u,f)=>{const y=Gn(f);$c(n.onDisconnect_,Nn(e,u),y)}),fo(0,i,r,o)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class os{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return Wt(this._path)?null:Kf(this._path)}get ref(){return new er(this._repo,this._path)}get _queryIdentifier(){const e=jy(this._queryParams),t=nh(e);return"{}"===t?"default":t}get _queryObject(){return jy(this._queryParams)}isEqual(e){if(!((e=(0,Q.m9)(e))instanceof os))return!1;const t=this._repo===e._repo,i=Su(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function xy(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Gg(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ou(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Sa){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==fr)throw new Error(i);if("string"!=typeof e)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==As)throw new Error(i);if("string"!=typeof t)throw new Error(r)}}else if(n.getIndex()===Ln){if(null!=e&&!Ug(e)||null!=t&&!Ug(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,Q.hu)(n.getIndex()instanceof Xf||n.getIndex()===fg,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Jc(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class er extends os{constructor(e,t){super(e,t,new mg,!1)}get parent(){const e=og(this._path);return null===e?null:new er(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Nh{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Rt(e),i=ed(this.ref,e);return new Nh(this._node.getChild(t),i,Ln)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>e(new Nh(r,ed(this.ref,i),Ln)))}hasChild(e){const t=new Rt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Lh(n,e){return(n=(0,Q.m9)(n))._checkNotDeleted("ref"),void 0!==e?ed(n._root,e):n._root}function C0(n,e){(n=(0,Q.m9)(n))._checkNotDeleted("refFromURL");const t=Ep(e,n._repo.repoInfo_.nodeAdmin);c0("refFromURL",t);const i=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&lo("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),Lh(n,t.path.toString())}function ed(n,e){return null===Gt((n=(0,Q.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Rh("child","path",t,!1)):Rh("child","path",e,!1),new er(n._repo,Nn(n._path,e));var t}function td(n,e){n=(0,Q.m9)(n),Ms("set",n._path),Ra("set",e,n._path,!1);const t=new Q.BH;return Ph(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function Wg(n,e){u0("update",e,n._path,!1);const t=new Q.BH;return function SO(n,e,t,i){Cl(n,"update",{path:e.toString(),value:t});let r=!0;const o=_p(n),u={};if(hi(t,(f,y)=>{r=!1,u[f]=Fg(Nn(e,f),Gn(y),n.serverSyncTree_,o)}),r)Li("update() called with empty data.  Don't do anything."),fo(0,i,"ok",void 0);else{const f=Xc(n),y=function wO(n,e,t,i){!function OE(n,e,t,i){(0,Q.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=Ky(n.visibleWrites,e,t),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i);const r=rn.fromObject(t);return lp(n,new xa({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,e,u,f);gp(n.eventQueue_,y),n.server_.merge(e.toString(),t,(E,S)=>{const R="ok"===E;R||hr("update at "+e+" failed: "+E);const H=wl(n.serverSyncTree_,f,!R),K=H.length>0?Oh(n,e):e;ks(n.eventQueue_,K,H),fo(0,i,E,S)}),hi(t,E=>{const S=Sv(n,Nn(e,E));Oh(n,S)}),ks(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function po(n){n=(0,Q.m9)(n);const e=new xv(()=>{}),t=new id(e);return function Cv(n,e,t){const i=function DO(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(E,S)=>{const R=Fi(E,t);i=i||ka(S,R)});let r=n.syncPointTree_.get(t);r?i=i||ka(r,Bt()):(r=new Ma,n.syncPointTree_=n.syncPointTree_.set(t,r));const o=null!=i,u=o?new Au(i,!0,!1):null;return function vO(n){return Eg(n.viewCache_)}(cv(r,e,sp(n.pendingWriteTree_,e._path),o?u.getNode():Kt.EMPTY_NODE,o))}(n.serverSyncTree_,e);return null!=i?Promise.resolve(i):n.server_.get(e).then(r=>{const o=Gn(r).withIndex(e._queryParams.getIndex());let u;if(e0(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())u=Ah(n.serverSyncTree_,e._path,o);else{const f=Yc(n.serverSyncTree_,e);u=DS(n.serverSyncTree_,e._path,o,f)}return ks(n.eventQueue_,e._path,u),fv(n.serverSyncTree_,e,t,null,!0),o},r=>(Cl(n,"get for query "+(0,Q.Wl)(e)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,t).then(i=>new Nh(i,new er(n._repo,n._path),n._queryParams.getIndex()))}class id{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new zg("value",this,new Nh(e.snapshotNode,new er(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new w0(this,e,t):null}matches(e){return e instanceof id&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Dl{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new w0(this,e,t):null}createEvent(e,t){(0,Q.hu)(null!=e.childName,"Child events should have a childName.");const i=ed(new er(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new zg(e.type,this,new Nh(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Dl&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Na(n,e,t,i,r){let o;if("object"==typeof i&&(o=void 0,r=i),"function"==typeof i&&(o=i),r&&r.onlyOnce){const y=t,E=(S,R)=>{yp(n._repo,n,f),y(S,R)};E.userCallback=t.userCallback,E.context=t.context,t=E}const u=new xv(t,o||void 0),f="value"===e?new id(u):new Dl(e,u);return function _0(n,e,t){let i;i=".info"===Gt(e._path)?e0(n.infoSyncTree_,e,t):e0(n.serverSyncTree_,e,t),bv(n.eventQueue_,e._path,i)}(n._repo,n,f),()=>yp(n._repo,n,f)}function Nu(n,e,t,i){return Na(n,"value",e,t,i)}function rd(n,e,t,i){return Na(n,"child_added",e,t,i)}function sd(n,e,t,i){return Na(n,"child_changed",e,t,i)}function od(n,e,t,i){return Na(n,"child_moved",e,t,i)}function ad(n,e,t,i){return Na(n,"child_removed",e,t,i)}function ld(n,e,t){let i=null;const r=t?new xv(t):null;"value"===e?i=new id(r):e&&(i=new Dl(e,r)),yp(n._repo,n,i)}class Mr{}class Mv extends Mr{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ra("endAt",this._value,e._path,!0);const t=_g(e._queryParams,this._value,this._key);if(Jc(t),Ou(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new os(e._repo,e._path,t,e._orderByCalled)}}class T0 extends Mr{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ra("endBefore",this._value,e._path,!1);const t=function Hy(n,e,t){let i,r;return n.index_===Sa?("string"==typeof e&&(e=Vy(e)),r=_g(n,e,t)):(i=null==t?fr:Vy(t),r=_g(n,e,i)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(Jc(t),Ou(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new os(e._repo,e._path,t,e._orderByCalled)}}class kv extends Mr{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ra("startAt",this._value,e._path,!0);const t=gg(e._queryParams,this._value,this._key);if(Jc(t),Ou(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new os(e._repo,e._path,t,e._orderByCalled)}}class x0 extends Mr{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ra("startAfter",this._value,e._path,!1);const t=function Uy(n,e,t){let i;if(n.index_===Sa)"string"==typeof e&&(e=pg(e)),i=gg(n,e,t);else{let r;r=null==t?As:pg(t),i=gg(n,e,r)}return i.startAfterSet_=!0,i}(e._queryParams,this._value,this._key);if(Jc(t),Ou(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new os(e._repo,e._path,t,e._orderByCalled)}}class k0 extends Mr{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new os(e._repo,e._path,function sS(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class jS extends Mr{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new os(e._repo,e._path,function oS(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class zS extends Mr{constructor(e){super(),this._path=e}_apply(e){Gg(e,"orderByChild");const t=new Rt(this._path);if(Wt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new Xf(t),r=yg(e._queryParams,i);return Ou(r),new os(e._repo,e._path,r,!0)}}class Rv extends Mr{_apply(e){Gg(e,"orderByKey");const t=yg(e._queryParams,Sa);return Ou(t),new os(e._repo,e._path,t,!0)}}class GS extends Mr{_apply(e){Gg(e,"orderByPriority");const t=yg(e._queryParams,Ln);return Ou(t),new os(e._repo,e._path,t,!0)}}class qg extends Mr{_apply(e){Gg(e,"orderByValue");const t=yg(e._queryParams,fg);return Ou(t),new os(e._repo,e._path,t,!0)}}class WS extends Mr{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Ra("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Mv(this._value,this._key)._apply(new kv(this._value,this._key)._apply(e))}}function as(n,...e){let t=(0,Q.m9)(n);for(const i of e)t=i._apply(t);return t}(function lv(n){(0,Q.hu)(!Sh,"__referenceConstructor has already been defined"),Sh=n})(er),function bS(n){(0,Q.hu)(!kg,"__referenceConstructor has already been defined"),kg=n}(er);const Kg={};function Nv(n,e,t,i,r){let o=i||n.options.databaseURL;void 0===o&&(n.options.projectId||lo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Li("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let y,E,u=Ep(o,r),f=u.repoInfo;typeof process<"u"&&process.env&&(E=process.env.FIREBASE_DATABASE_EMULATOR_HOST),E?(y=!0,o=`http://${E}?ns=${f.namespace}`,u=Ep(o,r),f=u.repoInfo):y=!u.repoInfo.secure;const S=r&&y?new On(On.OWNER):new Ey(n.name,n.options,e);c0("Invalid Firebase Database URL",u),Wt(u.path)||lo("Database URL must point to the root of a Firebase Database (not including a child path).");const R=function Fv(n,e,t,i){let r=Kg[e.name];r||(r={},Kg[e.name]=r);let o=r[n.toURLString()];return o&&lo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new TO(n,false,t,i),r[n.toURLString()]=o,o}(f,n,S,new Bc(n.name,t));return new L0(R,n)}class L0{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function h0(n,e,t){if(n.stats_=Du(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new tp(n.repoInfo_,(i,r,o,u)=>{p0(n,i,r,o,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Hg(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Q.Wl)(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new _l(n.repoInfo_,e,(i,r,o,u)=>{p0(n,i,r,o,u)},i=>{Hg(n,i)},i=>{!function OS(n,e){hi(e,(t,i)=>{Ev(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function ah(n,e){const t=n.toString();return oh[t]||(oh[t]=e()),oh[t]}(n.repoInfo_,()=>new Wy(n.stats_,n.server_)),n.infoData_=new Wc,n.infoSyncTree_=new ES({startListening:(i,r,o,u)=>{let f=[];const y=n.infoData_.getNode(i._path);return y.isEmpty()||(f=Ah(n.infoSyncTree_,i._path,y),setTimeout(()=>{u("ok")},0)),f},stopListening:()=>{}}),Ev(n,"connected",!1),n.serverSyncTree_=new ES({startListening:(i,r,o,u)=>(n.server_.listen(i,o,r,(f,y)=>{const E=u(f,y);ks(n.eventQueue_,i._path,E)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new er(this._repo,Bt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Lv(n,e){const t=Kg[e];(!t||t[n.key]!==n)&&lo(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Pa(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&lo("Cannot call "+e+" on a deleted database.")}}function Bv(){Ia.IS_TRANSPORT_INITIALIZED&&hr("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function F0(){Bv(),co.forceDisallow()}function B0(){Bv(),Sr.forceDisallow(),co.forceAllow()}function Uv(n,e){vy(n,e)}const j0={".sv":"timestamp"};class W0{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}_l.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},_l.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function H0(n){Lc(Dr.SDK_VERSION),(0,Dr._registerComponent)(new Ss.wA("database",(e,{instanceIdentifier:t})=>Nv(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Dr.registerVersion)(Pf,"0.13.9",n),(0,Dr.registerVersion)(Pf,"0.13.9","esm2017")}();const YS=new zr.Yd("@firebase/database-compat"),Hv=function(n){YS.warn("FIREBASE WARNING: "+n)};class q0{constructor(e){this._delegate=e}cancel(e){(0,Q.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,Q.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),i=>e(i)),t}remove(e){(0,Q.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,Q.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),i=>e(i)),t}set(e,t){(0,Q.Dv)("OnDisconnect.set",1,2,arguments.length),(0,Q.Wj)("OnDisconnect.set","onComplete",t,!0);const i=this._delegate.set(e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,Q.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,Q.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(e,t);return i&&r.then(()=>i(null),o=>i(o)),r}update(e,t){if((0,Q.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let o=0;o<e.length;++o)r[""+o]=e[o];e=r,Hv("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,Q.Wj)("OnDisconnect.update","onComplete",t,!0);const i=this._delegate.update(e);return t&&i.then(()=>t(null),r=>t(r)),i}}class XS{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,Q.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Lu{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,Q.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,Q.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,Q.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,Q.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,Q.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Rh("DataSnapshot.child","path",e,!1),new Lu(this._database,this._delegate.child(e))}hasChild(e){return(0,Q.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Rh("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,Q.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,Q.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,Q.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Lu(this._database,t)))}hasChildren(){return(0,Q.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,Q.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,Q.Dv)("DataSnapshot.ref",0,0,arguments.length),new Rs(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class tr{constructor(e,t){this.database=e,this._delegate=t}on(e,t,i,r){var o;(0,Q.Dv)("Query.on",2,4,arguments.length),(0,Q.Wj)("Query.on","callback",t,!1);const u=tr.getCancelAndContextArgs_("Query.on",i,r),f=(E,S)=>{t.call(u.context,new Lu(this.database,E),S)};f.userCallback=t,f.context=u.context;const y=null===(o=u.cancel)||void 0===o?void 0:o.bind(u.context);switch(e){case"value":return Nu(this._delegate,f,y),t;case"child_added":return rd(this._delegate,f,y),t;case"child_removed":return ad(this._delegate,f,y),t;case"child_changed":return sd(this._delegate,f,y),t;case"child_moved":return od(this._delegate,f,y),t;default:throw new Error((0,Q.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,i){if((0,Q.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,Q.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,Q.Wj)("Query.off","callback",t,!0),(0,Q.lb)("Query.off","context",i,!0),t){const r=()=>{};r.userCallback=t,r.context=i,ld(this._delegate,e,r)}else ld(this._delegate,e)}get(){return po(this._delegate).then(e=>new Lu(this.database,e))}once(e,t,i,r){(0,Q.Dv)("Query.once",1,4,arguments.length),(0,Q.Wj)("Query.once","callback",t,!0);const o=tr.getCancelAndContextArgs_("Query.once",i,r),u=new Q.BH,f=(E,S)=>{const R=new Lu(this.database,E);t&&t.call(o.context,R,S),u.resolve(R)};f.userCallback=t,f.context=o.context;const y=E=>{o.cancel&&o.cancel.call(o.context,E),u.reject(E)};switch(e){case"value":Nu(this._delegate,f,y,{onlyOnce:!0});break;case"child_added":rd(this._delegate,f,y,{onlyOnce:!0});break;case"child_removed":ad(this._delegate,f,y,{onlyOnce:!0});break;case"child_changed":sd(this._delegate,f,y,{onlyOnce:!0});break;case"child_moved":od(this._delegate,f,y,{onlyOnce:!0});break;default:throw new Error((0,Q.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,Q.Dv)("Query.limitToFirst",1,1,arguments.length),new tr(this.database,as(this._delegate,function HS(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new k0(n)}(e)))}limitToLast(e){return(0,Q.Dv)("Query.limitToLast",1,1,arguments.length),new tr(this.database,as(this._delegate,function R0(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new jS(n)}(e)))}orderByChild(e){return(0,Q.Dv)("Query.orderByChild",1,1,arguments.length),new tr(this.database,as(this._delegate,function P0(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Rh("orderByChild","path",n,!1),new zS(n)}(e)))}orderByKey(){return(0,Q.Dv)("Query.orderByKey",0,0,arguments.length),new tr(this.database,as(this._delegate,function Pv(){return new Rv}()))}orderByPriority(){return(0,Q.Dv)("Query.orderByPriority",0,0,arguments.length),new tr(this.database,as(this._delegate,function $g(){return new GS}()))}orderByValue(){return(0,Q.Dv)("Query.orderByValue",0,0,arguments.length),new tr(this.database,as(this._delegate,function Ov(){return new qg}()))}startAt(e=null,t){return(0,Q.Dv)("Query.startAt",0,2,arguments.length),new tr(this.database,as(this._delegate,function A0(n=null,e){return mp("startAt","key",e,!0),new kv(n,e)}(e,t)))}startAfter(e=null,t){return(0,Q.Dv)("Query.startAfter",0,2,arguments.length),new tr(this.database,as(this._delegate,function M0(n,e){return mp("startAfter","key",e,!0),new x0(n,e)}(e,t)))}endAt(e=null,t){return(0,Q.Dv)("Query.endAt",0,2,arguments.length),new tr(this.database,as(this._delegate,function I0(n,e){return mp("endAt","key",e,!0),new Mv(n,e)}(e,t)))}endBefore(e=null,t){return(0,Q.Dv)("Query.endBefore",0,2,arguments.length),new tr(this.database,as(this._delegate,function S0(n,e){return mp("endBefore","key",e,!0),new T0(n,e)}(e,t)))}equalTo(e,t){return(0,Q.Dv)("Query.equalTo",1,2,arguments.length),new tr(this.database,as(this._delegate,function Zg(n,e){return mp("equalTo","key",e,!0),new WS(n,e)}(e,t)))}toString(){return(0,Q.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,Q.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,Q.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof tr))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,i){const r={cancel:void 0,context:void 0};if(t&&i)r.cancel=t,(0,Q.Wj)(e,"cancel",r.cancel,!0),r.context=i,(0,Q.lb)(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error((0,Q.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new Rs(this.database,new er(this._delegate._repo,this._delegate._path))}}class Rs extends tr{constructor(e,t){super(e,new os(t._repo,t._path,new mg,!1)),this.database=e,this._delegate=t}getKey(){return(0,Q.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,Q.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Rs(this.database,ed(this._delegate,e))}getParent(){(0,Q.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Rs(this.database,e):null}getRoot(){return(0,Q.Dv)("Reference.root",0,0,arguments.length),new Rs(this.database,this._delegate.root)}set(e,t){(0,Q.Dv)("Reference.set",1,2,arguments.length),(0,Q.Wj)("Reference.set","onComplete",t,!0);const i=td(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}update(e,t){if((0,Q.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let o=0;o<e.length;++o)r[""+o]=e[o];e=r,Hv("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ms("Reference.update",this._delegate._path),(0,Q.Wj)("Reference.update","onComplete",t,!0);const i=Wg(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,Q.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,Q.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function nd(n,e,t){if(Ms("setWithPriority",n._path),Ra("setWithPriority",e,n._path,!1),vv("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new Q.BH;return Ph(n._repo,n._path,e,t,i.wrapCallback(()=>{})),i.promise}(this._delegate,e,t);return i&&r.then(()=>i(null),o=>i(o)),r}remove(e){(0,Q.Dv)("Reference.remove",0,1,arguments.length),(0,Q.Wj)("Reference.remove","onComplete",e,!0);const t=function Oa(n){return Ms("remove",n._path),td(n,null)}(this._delegate);return e&&t.then(()=>e(null),i=>e(i)),t}transaction(e,t,i){(0,Q.Dv)("Reference.transaction",1,3,arguments.length),(0,Q.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,Q.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,i){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,Q.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function $0(n,e,t){var i;if(n=(0,Q.m9)(n),Ms("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=t?.applyLocally)||void 0===i||i,o=new Q.BH,f=Nu(n,()=>{});return function NS(n,e,t,i,r,o){Cl(n,"transaction on "+e);const u={path:e,update:t,onComplete:i,status:null,order:yu(),applyLocally:o,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=vp(n,e,void 0);u.currentInputSnapshot=f;const y=u.update(f.val());if(void 0===y)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{Qc("transaction failed: Data returned ",y,u.path),u.status=0;const E=hp(n.transactionQueueTree_,e),S=Pu(E)||[];let R;S.push(u),fp(E,S),"object"==typeof y&&null!==y&&(0,Q.r3)(y,".priority")?(R=(0,Q.DV)(y,".priority"),(0,Q.hu)(Ug(R),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):R=(pv(n.serverSyncTree_,e)||Kt.EMPTY_NODE).getPriority().val();const H=_p(n),K=Gn(y,R),J=Ru(K,f,H);u.currentOutputSnapshotRaw=K,u.currentOutputSnapshotResolved=J,u.currentWriteId=Xc(n);const le=dv(n.serverSyncTree_,e,J,u.currentWriteId,u.applyLocally);ks(n.eventQueue_,e,le),bp(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(y,E,S)=>{let R=null;y?o.reject(y):(R=new Nh(S,new er(n._repo,n._path),Ln),o.resolve(new W0(E,R)))},f,r),o.promise}(this._delegate,e,{applyLocally:i}).then(o=>new XS(o.committed,new Lu(this.database,o.snapshot)));return t&&r.then(o=>t(null,o.committed,o.snapshot),o=>t(o,!1,null)),r}setPriority(e,t){(0,Q.Dv)("Reference.setPriority",1,2,arguments.length),(0,Q.Wj)("Reference.setPriority","onComplete",t,!0);const i=function xr(n,e){n=(0,Q.m9)(n),Ms("setPriority",n._path),vv("setPriority",e,!1);const t=new Q.BH;return Ph(n._repo,Nn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}push(e,t){(0,Q.Dv)("Reference.push",0,2,arguments.length),(0,Q.Wj)("Reference.push","onComplete",t,!0);const i=function US(n,e){n=(0,Q.m9)(n),Ms("push",n._path),Ra("push",e,n._path,!0);const t=f0(n._repo),i=By(t),r=ed(n,i),o=ed(n,i);let u;return u=null!=e?td(o,e).then(()=>o):Promise.resolve(o),r.then=u.then.bind(u),r.catch=u.then.bind(u,void 0),r}(this._delegate,e),r=i.then(u=>new Rs(this.database,u));t&&r.then(()=>t(null),u=>t(u));const o=new Rs(this.database,i);return o.then=r.then.bind(r),o.catch=r.catch.bind(r,void 0),o}onDisconnect(){return Ms("Reference.onDisconnect",this._delegate._path),new q0(new E0(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Fh{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:F0,forceLongPolling:B0}}useEmulator(e,t,i={}){!function Vv(n,e,t,i={}){(n=(0,Q.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&lo("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&lo('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new On(On.OWNER);else if(i.mockUserToken){const u="string"==typeof i.mockUserToken?i.mockUserToken:(0,Q.Sg)(i.mockUserToken,n.app.options.projectId);o=new On(u)}!function N0(n,e,t,i){n.repoInfo_=new Da(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,e,t,o)}(this._delegate,e,t,i)}ref(e){if((0,Q.Dv)("database.ref",0,1,arguments.length),e instanceof Rs){const t=C0(this._delegate,e.toString());return new Rs(this,t)}{const t=Lh(this._delegate,e);return new Rs(this,t)}}refFromURL(e){(0,Q.Dv)("database.refFromURL",1,1,arguments.length);const i=C0(this._delegate,e);return new Rs(this,i)}goOffline(){return(0,Q.Dv)("database.goOffline",0,0,arguments.length),function V0(n){(n=(0,Q.m9)(n))._checkNotDeleted("goOffline"),Pa(n._repo)}(this._delegate)}goOnline(){return(0,Q.Dv)("database.goOnline",0,0,arguments.length),function U0(n){(n=(0,Q.m9)(n))._checkNotDeleted("goOnline"),function jg(n){n.persistentConnection_&&n.persistentConnection_.resume(d0)}(n._repo)}(this._delegate)}}Fh.ServerValue={TIMESTAMP:function z0(){return j0}(),increment:n=>function G0(n){return{".sv":{increment:n}}}(n)};var Bh=Object.freeze({__proto__:null,initStandalone:function Z0({app:n,url:e,version:t,customAuthImpl:i,namespace:r,nodeAdmin:o=!1}){Lc(t);const u=new Ss.zt("auth-internal",new Ss.H0("database-standalone"));return u.setComponent(new Ss.wA("auth-internal",()=>i,"PRIVATE")),{instance:new Fh(Nv(n,u,void 0,e,o),n),namespace:r}}});const JS=Fh.ServerValue;!function eA(n){n.INTERNAL.registerComponent(new Ss.wA("database-compat",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new Fh(r,i)},"PUBLIC").setServiceProps({Reference:Rs,Query:tr,Database:Fh,DataSnapshot:Lu,enableLogging:Uv,INTERNAL:Bh,ServerValue:JS}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.9")}(Ea.Z);var xn=ee(7579),Qg=ee(5363),K0=ee(6063);class kO extends xn.x{constructor(e=1/0,t=1/0,i=K0.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:u}=this;t||(i.push(e),!r&&i.push(o.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let u=0;u<o.length&&!e.closed;u+=i?1:2)e.next(o[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){const u=t.now();let f=0;for(let y=1;y<i.length&&i[y]<=u;y+=2)f=y;f&&i.splice(0,f+1)}}}function jv(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=n??1/0,(0,Bo.B)({connector:()=>new kO(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}const $o=(0,ee(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Y0=ee(515);function Fu(n){return n<=0?()=>Y0.E:(0,ti.e)((e,t)=>{let i=0;e.subscribe((0,In.x)(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function La(n){return(0,ti.e)((e,t)=>{let i=!1;e.subscribe((0,In.x)(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function qo(n=Zo){return(0,ti.e)((e,t)=>{let i=!1;e.subscribe((0,In.x)(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function Zo(){return new $o}function Gv(n,e){return(0,ei.m)(e)?Cr(()=>n,e):Cr(()=>n)}var Wv=ee(9468);ee(5867);const Zv=new Map,rC={activated:!1,tokenObservers:[]},sC={initialized:!1,enabled:!1};function Vi(n){return Zv.get(n)||rC}function Ps(n,e){Zv.set(n,e)}function Dp(){return sC}class dA{constructor(e,t,i,r,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ke.Z)(function*(){t.stop();try{t.pending=new Q.BH,yield function hA(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Q.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const $r=new Q.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function aC(n){if(!Vi(n).activated)throw $r.create("use-before-activation",{appName:n.name})}function Qv(n,e){return Xv.apply(this,arguments)}function Xv(){return(Xv=(0,ke.Z)(function*({url:n,body:e},t){var i,r;const o={"Content-Type":"application/json"},u=t.getImmediate({optional:!0});if(u){const K=yield u.getHeartbeatsHeader();K&&(o["X-Firebase-Client"]=K)}const f={method:"POST",body:JSON.stringify(e),headers:o};let y,E;try{y=yield fetch(n,f)}catch(K){throw $r.create("fetch-network-error",{originalErrorMessage:null===(i=K)||void 0===i?void 0:i.message})}if(200!==y.status)throw $r.create("fetch-status-error",{httpStatus:y.status});try{E=yield y.json()}catch(K){throw $r.create("fetch-parse-error",{originalErrorMessage:null===(r=K)||void 0===r?void 0:r.message})}const S=E.ttl.match(/^([\d.]+)(s)$/);if(!S||!S[2]||isNaN(Number(S[1])))throw $r.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${E.ttl}`});const R=1e3*Number(S[1]),H=Date.now();return{token:E.token,expireTimeMillis:H+R,issuedAtTimeMillis:H}})).apply(this,arguments)}function lC(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:e}}}const Vh="firebase-app-check-store";let Ip=null;function eb(){return Ip||(Ip=new Promise((n,e)=>{var t;try{const i=indexedDB.open("firebase-app-check-database",1);i.onsuccess=r=>{n(r.target.result)},i.onerror=r=>{var o;e($r.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},i.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Vh,{keyPath:"compositeKey"})}}catch(i){e($r.create("storage-open",{originalErrorMessage:null===(t=i)||void 0===t?void 0:t.message}))}}),Ip)}function ib(){return(ib=(0,ke.Z)(function*(n,e){const i=(yield eb()).transaction(Vh,"readwrite"),o=i.objectStore(Vh).put({compositeKey:n,value:e});return new Promise((u,f)=>{o.onsuccess=y=>{u()},i.onerror=y=>{var E;f($r.create("storage-set",{originalErrorMessage:null===(E=y.target.error)||void 0===E?void 0:E.message}))}})})).apply(this,arguments)}const ud=new zr.Yd("@firebase/app-check");function n_(n,e){return(0,Q.hl)()?function hC(n,e){return function Bu(n,e){return ib.apply(this,arguments)}(function gA(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{ud.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function pC(){return Dp().enabled}function mC(){return rb.apply(this,arguments)}function rb(){return(rb=(0,ke.Z)(function*(){const n=Dp();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const _A={error:"UNKNOWN_ERROR"};function i_(n){return Q.US.encodeString(JSON.stringify(n),!1)}function cd(n){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,ke.Z)(function*(n,e=!1){const t=n.app;aC(t);const i=Vi(t);let o,r=i.token;if(r&&!dd(r)&&(Ps(t,Object.assign(Object.assign({},i),{token:void 0})),r=void 0),!r){const y=yield i.cachedTokenPromise;y&&(dd(y)?r=y:yield n_(t,void 0))}if(!e&&r&&dd(r))return{token:r.token};let f,u=!1;if(pC()){i.exchangeTokenPromise||(i.exchangeTokenPromise=Qv(lC(t,yield mC()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),u=!0);const y=yield i.exchangeTokenPromise;return yield n_(t,y),Ps(t,Object.assign(Object.assign({},i),{token:y})),{token:y.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),u=!0),r=yield i.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?ud.warn(y.message):ud.error(y),o=y}return r?o?f=dd(r)?{token:r.token,internalError:o}:ab(o):(f={token:r.token},Ps(t,Object.assign(Object.assign({},i),{token:r})),yield n_(t,r)):f=ab(o),u&&ob(t,f),f})).apply(this,arguments)}function r_(n,e){const t=Vi(n),i=t.tokenObservers.filter(r=>r.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ps(n,Object.assign(Object.assign({},t),{tokenObservers:i}))}function sb(n){const{app:e}=n,t=Vi(e);let i=t.tokenRefresher;i||(i=function yA(n){const{app:e}=n;return new dA((0,ke.Z)(function*(){let i;if(i=Vi(e).token?yield cd(n,!0):yield cd(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const t=Vi(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),Ps(e,Object.assign(Object.assign({},t),{tokenRefresher:i}))),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function ob(n,e){const t=Vi(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch{}}function dd(n){return n.expireTimeMillis-Date.now()>0}function ab(n){return{token:i_(_A),error:n}}class _C{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Vi(this.app);for(const t of e)r_(this.app,t.next);return Promise.resolve()}}const TA="app-check-internal";!function EC(){(0,Dr._registerComponent)(new Ss.wA("app-check",n=>function vA(n,e){return new _C(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(TA).initialize()})),(0,Dr._registerComponent)(new Ss.wA(TA,n=>function bA(n){return{getToken:e=>cd(n,e),addTokenListener:e=>function gC(n,e,t,i){const{app:r}=n,o=Vi(r),u={next:t,error:i,type:e};if(Ps(r,Object.assign(Object.assign({},o),{tokenObservers:[...o.tokenObservers,u]})),o.token&&dd(o.token)){const f=o.token;Promise.resolve().then(()=>{t({token:f.token}),sb(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>sb(n))}(n,"INTERNAL",e),removeTokenListener:e=>r_(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Dr.registerVersion)("@firebase/app-check","0.5.15")}();class kp{constructor(){return(0,un.vb)("app-check")}}typeof window<"u"&&window;var a_=ee(127);const mb=new h.OlP("angularfire2.auth.use-emulator"),Rp=new h.OlP("angularfire2.auth.settings"),gb=new h.OlP("angularfire2.auth.tenant-id"),l_=new h.OlP("angularfire2.auth.langugage-code"),u_=new h.OlP("angularfire2.auth.use-device-language"),_b=new h.OlP("angularfire.auth.persistence"),yb=(n,e,t,i,r,o,u,f)=>(0,Pn.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),i&&(y.tenantId=i),y.languageCode=r,o&&y.useDeviceLanguage(),u)for(const[E,S]of Object.entries(u))y.settings[E]=S;return f&&y.setPersistence(f),y},[t,i,r,o,u,f]);let c_=(()=>{class n{constructor(t,i,r,o,u,f,y,E,S,R,H,K){const J=new xn.x,le=ur(void 0).pipe((0,Qg.Q)(u.outsideAngular),Cr(()=>o.runOutsideAngular(()=>Promise.resolve().then(ee.bind(ee,9545)))),(0,bn.U)(()=>(0,Pn.on)(t,o,i)),(0,bn.U)(ve=>yb(ve,o,f,E,S,R,y,H)),jv({bufferSize:1,refCount:!1}));if(Si(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ur(null);else{le.pipe(function Q0(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Yi((r,o)=>n(r,o,i)):_u.y,Fu(1),t?La(e):qo(()=>new $o))}()).subscribe();const Ve=le.pipe(Cr(Xe=>Xe.getRedirectResult().then(wt=>wt,()=>null)),un.iC,jv({bufferSize:1,refCount:!1})),Ye=le.pipe(Cr(Xe=>new Ei.y(wt=>({unsubscribe:o.runOutsideAngular(()=>Xe.onAuthStateChanged(It=>wt.next(It),It=>wt.error(It),()=>wt.complete()))})))),Qe=le.pipe(Cr(Xe=>new Ei.y(wt=>({unsubscribe:o.runOutsideAngular(()=>Xe.onIdTokenChanged(It=>wt.next(It),It=>wt.error(It),()=>wt.complete()))}))));this.authState=Ve.pipe(Gv(Ye),(0,Wv.R)(u.outsideAngular),(0,Qg.Q)(u.insideAngular)),this.user=Ve.pipe(Gv(Qe),(0,Wv.R)(u.outsideAngular),(0,Qg.Q)(u.insideAngular)),this.idToken=this.user.pipe(Cr(Xe=>Xe?(0,qn.D)(Xe.getIdToken()):ur(null))),this.idTokenResult=this.user.pipe(Cr(Xe=>Xe?(0,qn.D)(Xe.getIdTokenResult()):ur(null))),this.credential=(0,Er.T)(Ve,J,this.authState.pipe(Yi(Xe=>!Xe))).pipe((0,bn.U)(Xe=>Xe?.user?Xe:null),(0,Wv.R)(u.outsideAngular),(0,Qg.Q)(u.insideAngular))}return(0,Pn.pX)(this,le,o,{spy:{apply:(ve,Ve,Ye)=>{(ve.startsWith("signIn")||ve.startsWith("createUser"))&&Ye.then(Qe=>J.next(Qe))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Pn.Dh),h.LFG(Pn.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(un.HU),h.LFG(mb,8),h.LFG(Rp,8),h.LFG(gb,8),h.LFG(l_,8),h.LFG(u_,8),h.LFG(_b,8),h.LFG(kp,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),vb=(()=>{class n{constructor(){a_.Z.registerVersion("angularfire",un.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[c_]}),n})();function IC(n){return null==n}function TC(n){return"function"==typeof n.set}function SC(n,e){return TC(e)?e:n.ref(e)}function AC(n,e){if(function NA(n){return"string"==typeof n}(n))return e.stringCase();if(TC(n))return e.firebaseCase();if(function DC(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Pp(n,e,t="on",i=ss.z){return new Ei.y(r=>{let o=null;return o=n[t](e,(u,f)=>{i.schedule(()=>{r.next({snapshot:u,prevKey:f})}),"once"===t&&i.schedule(()=>r.complete())},u=>{i.schedule(()=>r.error(u))}),"on"===t?{unsubscribe(){null!=o&&n.off(e,o)}}:{unsubscribe(){}}}).pipe((0,bn.U)(r=>{const{snapshot:o,prevKey:u}=r;let f=null;return o.exists()&&(f=o.key),{type:e,payload:o,prevKey:u,key:f}}),(0,Bo.B)())}function xC(n,e){const t=n.length;for(let i=0;i<t;i++)if(n[i].payload.key===e)return i;return-1}function MC(n,e){const{payload:t,prevKey:i,key:r}=e,o=xC(n,r),u=function FA(n,e){if(IC(e))return 0;{const t=xC(n,e);return-1===t?n.length:t+1}}(n,i);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let f=null;e.payload.forEach(y=>{const E={payload:y,type:"value",prevKey:f,key:y.key};return f=y.key,n=[...n,E],!1})}return n;case"child_added":if(o>-1){const f=n[o-1];(f&&f.key||null)!==i&&(n=n.filter(y=>y.payload.key!==t.key)).splice(u,0,e)}else{if(null==i)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(f=>f.payload.key!==t.key);case"child_changed":return n.map(f=>f.payload.key===r?e:f);case"child_moved":if(o>-1){const f=n.splice(o,1)[0];return(n=n.slice()).splice(u,0,f),n}return n;default:return n}}function bb(n){return(IC(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function kC(n,e,t){return function LA(n,e,t){return Pp(n,"value","once",t).pipe(Cr(i=>{const r=[ur(i)];return e.forEach(o=>r.push(Pp(n,o,"on",t))),(0,Er.T)(...r).pipe(Nc(MC,[]))}),jm())}(n,e=bb(e),t)}function RC(n,e,t){const i=(e=bb(e)).map(r=>Pp(n,r,"on",t));return(0,Er.T)(...i)}function OC(n,e){return function(i,r){return AC(i,{stringCase:()=>n.child(i)[e](r),firebaseCase:()=>i[e](r),snapshotCase:()=>i.ref[e](r)})}}function wb(n){return function(t){return t?AC(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function Cb(n,e){return function(){return Pp(n,"value","on",e)}}const UA=new h.OlP("angularfire2.realtimeDatabaseURL"),HA=new h.OlP("angularfire2.database.use-emulator");let Op=(()=>{class n{constructor(t,i,r,o,u,f,y,E,S,R,H,K,J,le,ve){this.schedulers=f;const Ve=y,Ye=(0,Pn.on)(t,u,i);E&&yb(Ye,u,S,H,K,J,R,le),this.database=(0,Pn.cc)(`${Ye.name}.database.${r}`,"AngularFireDatabase",Ye.name,()=>{const Qe=u.runOutsideAngular(()=>Ye.database(r||void 0));return Ve&&Qe.useEmulator(...Ve),Qe},[Ve])}list(t,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>SC(this.database,t));let o=r;return i&&(o=i(r)),function Eb(n,e){const t=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:OC(i,"update"),set:OC(i,"set"),push:r=>i.push(r),remove:wb(i),snapshotChanges:r=>kC(n,r,t).pipe(un.iC),stateChanges:r=>RC(n,r,t).pipe(un.iC),auditTrail:r=>function PC(n,e,t){return function VA(n,e,t){return function BA(n,e){return Pp(n,"value","on",e).pipe((0,bn.U)(t=>{let i;return t.payload.forEach(r=>(i=r.key,!1)),{data:t,lastKeyToLoad:i}}))}(n,t).pipe(function Rf(...n){const e=(0,Ds.jO)(n);return(0,ti.e)((t,i)=>{const r=n.length,o=new Array(r);let u=n.map(()=>!1),f=!1;for(let y=0;y<r;y++)(0,Ts.Xf)(n[y]).subscribe((0,In.x)(i,E=>{o[y]=E,!f&&!u[y]&&(u[y]=!0,(f=u.every(_u.y))&&(u=null))},my.Z));t.subscribe((0,In.x)(i,y=>{if(f){const E=[y,...o];i.next(e?e(...E):E)}}))})}(e),(0,bn.U)(([r,o])=>{const u=r.lastKeyToLoad,f=o.map(y=>y.key);return{actions:o,lastKeyToLoad:u,loadedKeys:f}}),function gy(n){return(0,ti.e)((e,t)=>{let i=!1,r=0;e.subscribe((0,In.x)(t,o=>(i||(i=!n(o,r++)))&&t.next(o)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,bn.U)(r=>r.actions))}(n,RC(n,e).pipe(Nc((r,o)=>[...r,o],[])),t)}(n,r,t).pipe(un.iC),valueChanges:(r,o)=>kC(n,r,t).pipe((0,bn.U)(f=>f.map(y=>o&&o.idField?Object.assign(Object.assign({},y.payload.val()),{[o.idField]:y.key}):y.payload.val())),un.iC)}}(o,this)}object(t){return function Db(n,e){return{query:n,snapshotChanges:()=>Cb(n,e.schedulers.outsideAngular)().pipe(un.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Cb(n,e.schedulers.outsideAngular)().pipe(un.iC,(0,bn.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>SC(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Pn.Dh),h.LFG(Pn.xv,8),h.LFG(UA,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(un.HU),h.LFG(HA,8),h.LFG(c_,8),h.LFG(mb,8),h.LFG(Rp,8),h.LFG(gb,8),h.LFG(l_,8),h.LFG(u_,8),h.LFG(_b,8),h.LFG(kp,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),jA=(()=>{class n{constructor(){a_.Z.registerVersion("angularfire",un.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Op]}),n})();ee(3162);var ii=ee(8407);let Ib;ee(1554);try{Ib=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Ib=!1}let Uu,Os=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function hc(n){return n===vs}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Ib)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.Lbi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const NC=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Tb(){if(Uu)return Uu;if("object"!=typeof document||!document)return Uu=new Set(NC),Uu;let n=document.createElement("input");return Uu=new Set(NC.filter(e=>(n.setAttribute("type",e),n.type===e))),Uu}let Np,Hu,Sb;function Hh(n){return function WA(){if(null==Np&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Np=!0}))}finally{Np=Np||!1}return Np}()?n:!!n.capture}function LC(){if(null==Hu){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Hu=!1,Hu;if("scrollBehavior"in document.documentElement.style)Hu=!0;else{const n=Element.prototype.scrollTo;Hu=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Hu}function Ab(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function ju(n){return n.composedPath?n.composedPath()[0]:n.target}function FC(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}class BC extends xn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function Rb(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function tD(n){return Yi((e,t)=>n<=t)}function jh(n){return(0,ti.e)((e,t)=>{(0,Ts.Xf)(n).subscribe((0,In.x)(t,()=>t.complete(),my.Z)),!t.closed&&e.subscribe(t)})}function Ko(n){return null!=n&&"false"!=`${n}`}function Pb(n){return Array.isArray(n)?n:[n]}function Ui(n){return null==n?"":"string"==typeof n?n:`${n}px`}function zu(n){return n instanceof h.SBq?n.nativeElement:n}function iD(n,e=ss.z){return(0,ti.e)((t,i)=>{let r=null,o=null,u=null;const f=()=>{if(r){r.unsubscribe(),r=null;const E=o;o=null,i.next(E)}};function y(){const E=u+n,S=e.now();if(S<E)return r=this.schedule(void 0,E-S),void i.add(r);f()}t.subscribe((0,In.x)(i,E=>{o=E,u=e.now(),r||(r=e.schedule(y,n),i.add(r))},()=>{f(),i.complete()},void 0,()=>{o=r=null}))})}let Ax=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zN=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=zu(t);return new Ei.y(r=>{const u=this._observeElement(i).subscribe(r);return()=>{u.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new xn.x,r=this._mutationObserverFactory.create(o=>i.next(o));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ax))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),m_=(()=>{class n{constructor(t,i,r){this._contentObserver=t,this._elementRef=i,this._ngZone=r,this.event=new h.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Ko(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=function nD(n,e=0){return function jN(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(iD(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(zN),h.Y36(h.SBq),h.Y36(h.R0b))},n.\u0275dir=h.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),xx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Ax]}),n})();const{isArray:rD}=Array,{getPrototypeOf:g_,prototype:sD,keys:oD}=Object;function Mx(n){if(1===n.length){const e=n[0];if(rD(e))return{args:e,keys:null};if(function Ob(n){return n&&"object"==typeof n&&g_(n)===sD}(e)){const t=oD(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:aD}=Array;function Nb(n){return(0,bn.U)(e=>function kx(n,e){return aD(e)?n(...e):n(e)}(n,e))}function Rx(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}var Px=ee(9672);function Vp(n,e,t){n?(0,Px.f)(t,n,e):e()}var Nx=ee(8189);function lD(...n){return function WN(){return(0,Nx.J)(1)}()((0,qn.D)(n,(0,Ds.yG)(n)))}function Gu(...n){const e=(0,Ds.yG)(n);return(0,ti.e)((t,i)=>{(e?lD(n,t,e):lD(n,t)).subscribe(i)})}const Lx=new Set;let zh,qN=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):uD}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function Fx(n){if(!Lx.has(n))try{zh||(zh=document.createElement("style"),zh.setAttribute("type","text/css"),document.head.appendChild(zh)),zh.sheet&&(zh.sheet.insertRule(`@media ${n} {body{ }}`,0),Lx.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Os))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function uD(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let cD=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new xn.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return Bx(Pb(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let o=function GN(...n){const e=(0,Ds.yG)(n),t=(0,Ds.jO)(n),{args:i,keys:r}=Mx(n);if(0===i.length)return(0,qn.D)([],e);const o=new Ei.y(function Ox(n,e,t=_u.y){return i=>{Vp(e,()=>{const{length:r}=n,o=new Array(r);let u=r,f=r;for(let y=0;y<r;y++)Vp(e,()=>{const E=(0,qn.D)(n[y],e);let S=!1;E.subscribe((0,In.x)(i,R=>{o[y]=R,S||(S=!0,f--),f||i.next(t(o.slice()))},()=>{--u||i.complete()}))},i)},i)}}(i,e,r?u=>Rx(r,u):_u.y));return t?o.pipe(Nb(t)):o}(Bx(Pb(t)).map(u=>this._registerQuery(u).observable));return o=lD(o.pipe(Fu(1)),o.pipe(tD(1),iD(0))),o.pipe((0,bn.U)(u=>{const f={matches:!1,breakpoints:{}};return u.forEach(({matches:y,query:E})=>{f.matches=f.matches||y,f.breakpoints[E]=y}),f}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),o={observable:new Ei.y(u=>{const f=y=>this._zone.run(()=>u.next(y));return i.addListener(f),()=>{i.removeListener(f)}}).pipe(Gu(i),(0,bn.U)(({matches:u})=>({query:t,matches:u})),jh(this._destroySubject)),mql:i};return this._queries.set(t,o),o}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(qN),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Bx(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}let Up=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function Fb(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function Gx(n){try{return n.frameElement}catch{return null}}(function Zx(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===mD(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),o=mD(t);return t.hasAttribute("contenteditable")?-1!==o:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function JN(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==o:"video"===r?-1!==o&&(null!==o||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function qx(n){return!function pD(n){return function Tl(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function Wu(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function Bb(n){return function Wx(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||$x(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Os))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $x(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function mD(n){if(!$x(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class gD{constructor(e,t,i,r,o=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Fu(1)).subscribe(e)}}let _D=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new gD(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Up),h.LFG(h.R0b),h.LFG(g))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Vb(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function Ub(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const vD=new h.OlP("cdk-input-modality-detector-options"),bD={ignoreKeys:[18,17,224,91,16]},Sl=Hh({passive:!0,capture:!0});let wD=(()=>{class n{constructor(t,i,r,o){this._platform=t,this._mostRecentTarget=null,this._modality=new BC(null),this._lastTouchMs=0,this._onKeydown=u=>{this._options?.ignoreKeys?.some(f=>f===u.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=ju(u))},this._onMousedown=u=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Vb(u)?"keyboard":"mouse"),this._mostRecentTarget=ju(u))},this._onTouchstart=u=>{Ub(u)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ju(u))},this._options={...bD,...o},this.modalityDetected=this._modality.pipe(tD(1)),this.modalityChanged=this.modalityDetected.pipe(jm()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Sl),r.addEventListener("mousedown",this._onMousedown,Sl),r.addEventListener("touchstart",this._onTouchstart,Sl)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Sl),document.removeEventListener("mousedown",this._onMousedown,Sl),document.removeEventListener("touchstart",this._onTouchstart,Sl))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Os),h.LFG(h.R0b),h.LFG(g),h.LFG(vD,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rL=new h.OlP("cdk-focus-monitor-default-options"),Hb=Hh({passive:!0,capture:!0});let Gh=(()=>{class n{constructor(t,i,r,o,u){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new xn.x,this._rootNodeFocusAndBlurListener=f=>{for(let E=ju(f);E;E=E.parentElement)"focus"===f.type?this._onFocus(f,E):this._onBlur(f,E)},this._document=o,this._detectionMode=u?.detectionMode||0}monitor(t,i=!1){const r=zu(t);if(!this._platform.isBrowser||1!==r.nodeType)return ur(null);const o=function ZA(n){if(function qA(){if(null==Sb){const n=typeof document<"u"?document.head:null;Sb=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Sb}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),u=this._elementInfo.get(r);if(u)return i&&(u.checkChildren=!0),u.subject;const f={checkChildren:i,subject:new xn.x,rootNode:o};return this._elementInfo.set(r,f),this._registerGlobalListeners(f),f.subject}stopMonitoring(t){const i=zu(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const o=zu(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([f,y])=>this._originChanged(f,i,y)):(this._setOrigin(i),"function"==typeof o.focus&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),o=ju(t);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Hb),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Hb)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(jh(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Hb),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Hb),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,o)=>{(o===t||r.checkChildren&&o.contains(t))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const o=t.labels;if(o)for(let u=0;u<o.length;u++)if(o[u].contains(i))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.R0b),h.LFG(Os),h.LFG(wD),h.LFG(g,8),h.LFG(rL,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const CD="cdk-high-contrast-black-on-white",DD="cdk-high-contrast-white-on-black",ID="cdk-high-contrast-active";let Jx=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=(0,h.f3M)(cD).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(ID,CD,DD),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(ID,CD):2===i&&t.add(ID,DD)}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Os),h.LFG(g))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),oL=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Jx))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[xx]}),n})();var aL=ee(1144);const lL=["addListener","removeListener"],eM=["addEventListener","removeEventListener"],__=["on","off"];function y_(n,e,t,i){if((0,ei.m)(t)&&(i=t,t=void 0),i)return y_(n,e,t).pipe(Nb(i));const[r,o]=function AD(n){return(0,ei.m)(n.addEventListener)&&(0,ei.m)(n.removeEventListener)}(n)?eM.map(u=>f=>n[u](e,f,t)):function SD(n){return(0,ei.m)(n.addListener)&&(0,ei.m)(n.removeListener)}(n)?lL.map(TD(n,e)):function fd(n){return(0,ei.m)(n.on)&&(0,ei.m)(n.off)}(n)?__.map(TD(n,e)):[];if(!r&&(0,aL.z)(n))return(0,Ni.z)(u=>y_(u,e,t))((0,Ts.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new Ei.y(u=>{const f=(...y)=>u.next(1<y.length?y:y[0]);return r(f),()=>o(f)})}function TD(n,e){return t=>i=>n[t](e,i)}var v_=ee(4408),jp=ee(727);const zp={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=zp;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(o=>{t=void 0,n(o)});return new jp.w0(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=zp;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=zp;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var b_=ee(7565);new class w_ extends b_.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class jb extends v_.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=zp.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:o}=e;null!=t&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==t&&(zp.cancelAnimationFrame(t),e._scheduled=void 0)}});let xD,cL=1;const Gp={};function MD(n){return n in Gp&&(delete Gp[n],!0)}const tM={setImmediate(n){const e=cL++;return Gp[e]=!0,xD||(xD=Promise.resolve()),xD.then(()=>MD(e)&&n()),e},clearImmediate(n){MD(n)}},{setImmediate:nM,clearImmediate:kD}=tM,Wp={setImmediate(...n){const{delegate:e}=Wp;return(e?.setImmediate||nM)(...n)},clearImmediate(n){const{delegate:e}=Wp;return(e?.clearImmediate||kD)(n)},delegate:void 0};new class iM extends b_.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class RD extends v_.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=Wp.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:o}=e;null!=t&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==t&&(Wp.clearImmediate(t),e._scheduled=void 0)}});var hL=ee(3532);function OD(n,e=ss.z){return function zb(n){return(0,ti.e)((e,t)=>{let i=!1,r=null,o=null,u=!1;const f=()=>{if(o?.unsubscribe(),o=null,i){i=!1;const E=r;r=null,t.next(E)}u&&t.complete()},y=()=>{o=null,u&&t.complete()};e.subscribe((0,In.x)(t,E=>{i=!0,r=E,o||(0,Ts.Xf)(n(E)).subscribe(o=(0,In.x)(t,f,y))},()=>{u=!0,(!i||!o||o.closed)&&t.complete()}))})}(()=>function Gb(n=0,e,t=ss.P){let i=-1;return null!=e&&((0,hL.K)(e)?t=e:i=e),new Ei.y(r=>{let o=function PD(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let u=0;return t.schedule(function(){r.closed||(r.next(u++),0<=i?this.schedule(void 0,i):r.complete())},o)})}(n,e))}const oM=new h.OlP("cdk-dir-doc",{providedIn:"root",factory:function fL(){return(0,h.f3M)(g)}}),pL=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let E_=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new h.vpe,t){const r=t.documentElement?t.documentElement.dir:null;this.value=function aM(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?pL.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oM,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),C_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),yL=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new xn.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Ei.y(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(OD(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ur()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(Yi(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,t)&&i.push(o)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=zu(i),o=t.getElementRef().nativeElement;do{if(r==o)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>y_(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.R0b),h.LFG(Os),h.LFG(g,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lM=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new xn.x,this._changeListener=o=>{this._change.next(o)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,o=r.getBoundingClientRect();return{top:-o.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-o.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(OD(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Os),h.LFG(h.R0b),h.LFG(g,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),N=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),W=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[C_,N,C_,N]}),n})();class dt{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Dt extends dt{constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r}}class Be extends dt{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class Pt extends dt{constructor(e){super(),this.element=e instanceof h.SBq?e.nativeElement:e}}class pn{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof Dt?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof Be?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof Pt?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class pd extends pn{constructor(e,t,i,r,o){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=u=>{const f=u.element,y=this._document.createComment("dom-portal");f.parentNode.insertBefore(y,f),this.outletElement.appendChild(f),this._attachedPortal=u,super.setDisposeFn(()=>{y.parentNode&&y.parentNode.replaceChild(f,y)})},this._document=o}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||h.zs3.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let $p=(()=>{class n extends pn{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new h.vpe,this.attachDomPortal=o=>{const u=o.element,f=this._document.createComment("dom-portal");o.setAttachedHost(this),u.parentNode.insertBefore(f,u),this._getRootNode().appendChild(u),this._attachedPortal=o,super.setDisposeFn(()=>{f.parentNode&&f.parentNode.replaceChild(u,f)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),u=i.createComponent(o,i.length,t.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(u.hostView.rootNodes[0]),super.setDisposeFn(()=>u.destroy()),this._attachedPortal=t,this._attachedRef=u,this.attached.emit(u),u}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h._Vd),h.Y36(h.s_b),h.Y36(g))},n.\u0275dir=h.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[h.qOj]}),n})(),Wh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const D_=LC();class Wb{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Ui(-this._previousScrollPosition.left),e.style.top=Ui(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,o=i.scrollBehavior||"",u=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),D_&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),D_&&(i.scrollBehavior=o,r.scrollBehavior=u)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class Jj{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class bL{enable(){}disable(){}attach(){}}function uM(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function wL(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class ez{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();uM(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let tz=(()=>{class n{constructor(t,i,r,o){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new bL,this.close=u=>new Jj(this._scrollDispatcher,this._ngZone,this._viewportRuler,u),this.block=()=>new Wb(this._viewportRuler,this._document),this.reposition=u=>new ez(this._scrollDispatcher,this._viewportRuler,this._ngZone,u),this._document=o}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(yL),h.LFG(lM),h.LFG(h.R0b),h.LFG(g))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class EL{constructor(e){if(this.scrollStrategy=new bL,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class nz{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let CL=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(g))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),iz=(()=>{class n extends CL{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const o=this._attachedOverlays;for(let u=o.length-1;u>-1;u--)if(o[u]._keydownEvents.observers.length>0){const f=o[u]._keydownEvents;this._ngZone?this._ngZone.run(()=>f.next(r)):f.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(g),h.LFG(h.R0b,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rz=(()=>{class n extends CL{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=ju(o)},this._clickListener=o=>{const u=ju(o),f="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:u;this._pointerDownEventTarget=null;const y=this._attachedOverlays.slice();for(let E=y.length-1;E>-1;E--){const S=y[E];if(S._outsidePointerEvents.observers.length<1||!S.hasAttached())continue;if(S.overlayElement.contains(u)||S.overlayElement.contains(f))break;const R=S._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>R.next(o)):R.next(o)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(g),h.LFG(Os),h.LFG(h.R0b,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),UD=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||FC()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}const i=this._document.createElement("div");i.classList.add(t),FC()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(g),h.LFG(Os))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class $b{constructor(e,t,i,r,o,u,f,y,E,S=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=u,this._document=f,this._location=y,this._outsideClickDispatcher=E,this._animationsDisabled=S,this._backdropElement=null,this._backdropClick=new xn.x,this._attachments=new xn.x,this._detachments=new xn.x,this._locationChanges=jp.w0.EMPTY,this._backdropClickHandler=R=>this._backdropClick.next(R),this._backdropTransitionendHandler=R=>{this._disposeBackdrop(R.target)},this._keydownEvents=new xn.x,this._outsidePointerEvents=new xn.x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Fu(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Ui(this._config.width),e.height=Ui(this._config.height),e.minWidth=Ui(this._config.minWidth),e.minHeight=Ui(this._config.minHeight),e.maxWidth=Ui(this._config.maxWidth),e.maxHeight=Ui(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=Pb(t||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(jh((0,Er.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const DL="cdk-overlay-connected-position-bounding-box",sz=/([A-Za-z%]+)$/;class oz{constructor(e,t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new xn.x,this._resizeSubscription=jp.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(DL),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[];let u;for(let f of this._preferredPositions){let y=this._getOriginPoint(e,r,f),E=this._getOverlayPoint(y,t,f),S=this._getOverlayFit(E,t,i,f);if(S.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(f,y);this._canFitWithFlexibleDimensions(S,E,i)?o.push({position:f,origin:y,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(y,f)}):(!u||u.overlayFit.visibleArea<S.visibleArea)&&(u={overlayFit:S,overlayPoint:E,originPoint:y,position:f,overlayRect:t})}if(o.length){let f=null,y=-1;for(const E of o){const S=E.boundingBoxRect.width*E.boundingBoxRect.height*(E.position.weight||1);S>y&&(y=S,f=E)}return this._isPushed=!1,void this._applyPosition(f.position,f.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(u.position,u.originPoint);this._applyPosition(u.position,u.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&qp(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(DL),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,o;if("center"==i.originX)r=e.left+e.width/2;else{const u=this._isRtl()?e.right:e.left,f=this._isRtl()?e.left:e.right;r="start"==i.originX?u:f}return t.left<0&&(r-=t.left),o="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(o-=t.top),{x:r,y:o}}_getOverlayPoint(e,t,i){let r,o;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,o="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,t,i,r){const o=TL(t);let{x:u,y:f}=e,y=this._getOffset(r,"x"),E=this._getOffset(r,"y");y&&(u+=y),E&&(f+=E);let H=0-f,K=f+o.height-i.height,J=this._subtractOverflows(o.width,0-u,u+o.width-i.width),le=this._subtractOverflows(o.height,H,K),ve=J*le;return{visibleArea:ve,isCompletelyWithinViewport:o.width*o.height===ve,fitsInViewportVertically:le===o.height,fitsInViewportHorizontally:J==o.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,o=i.right-t.x,u=IL(this._overlayRef.getConfig().minHeight),f=IL(this._overlayRef.getConfig().minWidth),E=e.fitsInViewportHorizontally||null!=f&&f<=o;return(e.fitsInViewportVertically||null!=u&&u<=r)&&E}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=TL(t),o=this._viewportRect,u=Math.max(e.x+r.width-o.width,0),f=Math.max(e.y+r.height-o.height,0),y=Math.max(o.top-i.top-e.y,0),E=Math.max(o.left-i.left-e.x,0);let S=0,R=0;return S=r.width<=o.width?E||-u:e.x<this._viewportMargin?o.left-i.left-e.x:0,R=r.height<=o.height?y||-f:e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:S,y:R},{x:e.x+S,y:e.y+R}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new nz(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let o,u,f,S,R,H;if("top"===t.overlayY)u=e.y,o=i.height-u+this._viewportMargin;else if("bottom"===t.overlayY)f=i.height-e.y+2*this._viewportMargin,o=i.height-f+this._viewportMargin;else{const K=Math.min(i.bottom-e.y+i.top,e.y),J=this._lastBoundingBoxSize.height;o=2*K,u=e.y-K,o>J&&!this._isInitialRender&&!this._growAfterOpen&&(u=e.y-J/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)H=i.width-e.x+this._viewportMargin,S=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)R=e.x,S=i.right-e.x;else{const K=Math.min(i.right-e.x+i.left,e.x),J=this._lastBoundingBoxSize.width;S=2*K,R=e.x-K,S>J&&!this._isInitialRender&&!this._growAfterOpen&&(R=e.x-J/2)}return{top:u,left:R,bottom:f,right:H,width:S,height:o}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,u=this._overlayRef.getConfig().maxWidth;r.height=Ui(i.height),r.top=Ui(i.top),r.bottom=Ui(i.bottom),r.width=Ui(i.width),r.left=Ui(i.left),r.right=Ui(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",o&&(r.maxHeight=Ui(o)),u&&(r.maxWidth=Ui(u))}this._lastBoundingBoxSize=i,qp(this._boundingBox.style,r)}_resetBoundingBoxStyles(){qp(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){qp(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,u=this._overlayRef.getConfig();if(r){const S=this._viewportRuler.getViewportScrollPosition();qp(i,this._getExactOverlayY(t,e,S)),qp(i,this._getExactOverlayX(t,e,S))}else i.position="static";let f="",y=this._getOffset(t,"x"),E=this._getOffset(t,"y");y&&(f+=`translateX(${y}px) `),E&&(f+=`translateY(${E}px)`),i.transform=f.trim(),u.maxHeight&&(r?i.maxHeight=Ui(u.maxHeight):o&&(i.maxHeight="")),u.maxWidth&&(r?i.maxWidth=Ui(u.maxWidth):o&&(i.maxWidth="")),qp(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":r.top=Ui(o.y),r}_getExactOverlayX(e,t,i){let u,r={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),u=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===u?r.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":r.left=Ui(o.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:wL(e,i),isOriginOutsideView:uM(e,i),isOverlayClipped:wL(t,i),isOverlayOutsideView:uM(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?e.offsetX??this._offsetX:e.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Pb(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof h.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function qp(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function IL(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(sz);return t&&"px"!==t?null:parseFloat(e)}return n||null}function TL(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const SL="cdk-global-overlay-wrapper";class az{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(SL),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:u,maxHeight:f}=i,y=!("100%"!==r&&"100vw"!==r||u&&"100%"!==u&&"100vw"!==u),E=!("100%"!==o&&"100vh"!==o||f&&"100%"!==f&&"100vh"!==f),S=this._xPosition,R=this._xOffset,H="rtl"===this._overlayRef.getConfig().direction;let K="",J="",le="";y?le="flex-start":"center"===S?(le="center",H?J=R:K=R):H?"left"===S||"end"===S?(le="flex-end",K=R):("right"===S||"start"===S)&&(le="flex-start",J=R):"left"===S||"start"===S?(le="flex-start",K=R):("right"===S||"end"===S)&&(le="flex-end",J=R),e.position=this._cssPosition,e.marginLeft=y?"0":K,e.marginTop=E?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=y?"0":J,t.justifyContent=le,t.alignItems=E?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(SL),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let lz=(()=>{class n{constructor(t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o}global(){return new az}flexibleConnectedTo(t){return new oz(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(lM),h.LFG(g),h.LFG(Os),h.LFG(UD))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),uz=0,I_=(()=>{class n{constructor(t,i,r,o,u,f,y,E,S,R,H,K){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=o,this._keyboardDispatcher=u,this._injector=f,this._ngZone=y,this._document=E,this._directionality=S,this._location=R,this._outsideClickDispatcher=H,this._animationsModuleType=K}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),o=this._createPortalOutlet(r),u=new EL(t);return u.direction=u.direction||this._directionality.value,new $b(o,i,r,u,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+uz++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(h.z2F)),new pd(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(tz),h.LFG(UD),h.LFG(h._Vd),h.LFG(lz),h.LFG(iz),h.LFG(h.zs3),h.LFG(h.R0b),h.LFG(g),h.LFG(E_),h.LFG(De),h.LFG(rz),h.LFG(h.QbO,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const hz={provide:new h.OlP("cdk-connected-overlay-scroll-strategy"),deps:[I_],useFactory:function dz(n){return()=>n.scrollStrategies.reposition()}};let AL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[I_,hz],imports:[C_,Wh,W,W]}),n})();function xL(n){return new Ei.y(e=>{(0,Ts.Xf)(n()).subscribe(e)})}function fz(n,e){}class HD{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let ML=(()=>{class n extends pn{constructor(t,i,r,o,u,f,y,E){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=o,this._interactivityChecker=u,this._ngZone=f,this._overlayRef=y,this._focusMonitor=E,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=S=>{this._portalOutlet.hasAttached();const R=this._portalOutlet.attachDomPortal(S);return this._contentAttached(),R},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=r}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let i=null;if("string"==typeof t?i=this._document.querySelector(t):"boolean"==typeof t?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=Ab(),o=this._elementRef.nativeElement;(!r||r===this._document.body||r===o||o.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=Ab();return t===i||t.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Ab())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(_D),h.Y36(g,8),h.Y36(HD),h.Y36(Up),h.Y36(h.R0b),h.Y36($b),h.Y36(Gh))},n.\u0275cmp=h.Xpm({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(t,i){if(1&t&&h.Gf($p,7),2&t){let r;h.iGM(r=h.CRH())&&(i._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,i){2&t&&h.uIk("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[h.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&h.YNc(0,fz,0,0,"ng-template",0)},dependencies:[$p],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),n})();class cM{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new xn.x,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!Rb(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(e,t){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const kL=new h.OlP("DialogScrollStrategy"),pz=new h.OlP("DialogData"),mz=new h.OlP("DefaultDialogConfig"),_z={provide:kL,deps:[I_],useFactory:function gz(n){return()=>n.scrollStrategies.block()}};let yz=0,RL=(()=>{class n{constructor(t,i,r,o,u,f){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=o,this._overlayContainer=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new xn.x,this._afterOpenedAtThisLevel=new xn.x,this._ariaHiddenElements=new Map,this.afterAllClosed=xL(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Gu(void 0))),this._scrollStrategy=f}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(t,i){(i={...this._defaultOptions||new HD,...i}).id=i.id||"cdk-dialog-"+yz++,i.id&&this.getDialogById(i.id);const o=this._getOverlayConfig(i),u=this._overlay.create(o),f=new cM(u,i),y=this._attachContainer(u,f,i);return f.containerInstance=y,this._attachDialogContent(t,f,y,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(f),f.closed.subscribe(()=>this._removeOpenDialog(f,!0)),this.afterOpened.next(f),f}closeAll(){dM(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){dM(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),dM(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const i=new EL({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){const o=r.injector||r.viewContainerRef?.injector,u=[{provide:HD,useValue:r},{provide:cM,useValue:i},{provide:$b,useValue:t}];let f;r.container?"function"==typeof r.container?f=r.container:(f=r.container.type,u.push(...r.container.providers(r))):f=ML;const y=new Dt(f,r.viewContainerRef,h.zs3.create({parent:o||this._injector,providers:u}),r.componentFactoryResolver);return t.attach(y).instance}_attachDialogContent(t,i,r,o){if(t instanceof h.Rgc){const u=this._createInjector(o,i,r,void 0);let f={$implicit:o.data,dialogRef:i};o.templateContext&&(f={...f,..."function"==typeof o.templateContext?o.templateContext():o.templateContext}),r.attachTemplatePortal(new Be(t,null,f,u))}else{const u=this._createInjector(o,i,r,this._injector),f=r.attachComponentPortal(new Dt(t,o.viewContainerRef,u,o.componentFactoryResolver));i.componentInstance=f.instance}}_createInjector(t,i,r,o){const u=t.injector||t.viewContainerRef?.injector,f=[{provide:pz,useValue:t.data},{provide:cM,useValue:i}];return t.providers&&("function"==typeof t.providers?f.push(...t.providers(i,t,r)):f.push(...t.providers)),t.direction&&(!u||!u.get(E_,null,h.XFs.Optional))&&f.push({provide:E_,useValue:{value:t.direction,change:ur()}}),h.zs3.create({parent:u||o,providers:f})}_removeOpenDialog(t,i){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,u)=>{o?u.setAttribute("aria-hidden",o):u.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){const o=i[r];o!==t&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(I_),h.LFG(h.zs3),h.LFG(mz,8),h.LFG(n,12),h.LFG(UD),h.LFG(kL))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function dM(n,e){let t=n.length;for(;t--;)e(n[t])}let vz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[RL,_z],imports:[AL,Wh,oL,Wh]}),n})();const wz=new h.OlP("mat-sanity-checks",{providedIn:"root",factory:function bz(){return!0}});let Al=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!FC()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Jx),h.LFG(wz,8),h.LFG(g))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[C_,C_]}),n})();function Ez(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Ko(e)}}}function NL(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function LL(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Ko(e)}}}function Cz(n){return class extends n{constructor(...e){super(...e),this.errorState=!1}updateErrorState(){const e=this.errorState,o=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);o!==e&&(this.errorState=o,this.stateChanges.next())}}}let FL=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Iz{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const BL={enterDuration:225,exitDuration:150},hM=Hh({passive:!0}),VL=["mousedown","touchstart"],UL=["mouseup","mouseleave","touchend","touchcancel"];class Sz{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=zu(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...BL,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const u=i.radius||function Az(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),f=e-r.left,y=t-r.top,E=o.enterDuration,S=document.createElement("div");S.classList.add("mat-ripple-element"),S.style.left=f-u+"px",S.style.top=y-u+"px",S.style.height=2*u+"px",S.style.width=2*u+"px",null!=i.color&&(S.style.backgroundColor=i.color),S.style.transitionDuration=`${E}ms`,this._containerElement.appendChild(S);const R=window.getComputedStyle(S),K=R.transitionDuration,J="none"===R.transitionProperty||"0s"===K||"0s, 0s"===K,le=new Iz(this,S,i,J);S.style.transform="scale3d(1, 1, 1)",le.state=0,i.persistent||(this._mostRecentTransientRipple=le);let ve=null;return!J&&(E||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Ve=()=>this._finishRippleTransition(le),Ye=()=>this._destroyRipple(le);S.addEventListener("transitionend",Ve),S.addEventListener("transitioncancel",Ye),ve={onTransitionEnd:Ve,onTransitionCancel:Ye}}),this._activeRipples.set(le,ve),(J||!E)&&this._finishRippleTransition(le),le}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...BL,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=zu(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(VL))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(UL),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=Vb(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Ub(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,hM)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(VL.forEach(e=>{this._triggerElement.removeEventListener(e,this,hM)}),this._pointerUpEventsRegistered&&UL.forEach(e=>{this._triggerElement.removeEventListener(e,this,hM)}))}}const xz=new h.OlP("mat-ripple-global-options");let fM=(()=>{class n{constructor(t,i,r,o,u){this._elementRef=t,this._animationMode=u,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new Sz(this,i,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.R0b),h.Y36(Os),h.Y36(xz,8),h.Y36(h.QbO,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&h.ekj("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),HL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Al,Al]}),n})();class jL{}const md="*";function zL(n,e){return{type:7,name:n,definitions:e,options:{}}}function pM(n,e=null){return{type:4,styles:e,timings:n}}function GL(n,e=null){return{type:3,steps:n,options:e}}function WL(n,e=null){return{type:2,steps:n,options:e}}function $h(n){return{type:6,styles:n,offset:null}}function mM(n,e,t){return{type:0,name:n,styles:e,options:t}}function gM(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function $L(n=null){return{type:9,options:n}}function qL(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function ZL(n){Promise.resolve().then(n)}class Zb{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){ZL(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class KL{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const o=this.players.length;0==o?ZL(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==o&&this._onFinish()}),u.onDestroy(()=>{++i==o&&this._onDestroy()}),u.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((u,f)=>Math.max(u,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}function kz(n,e){}const T_={params:{enterAnimationDuration:"150ms",exitAnimationDuration:"75ms"}},Rz={dialogContainer:zL("dialogContainer",[mM("void, exit",$h({opacity:0,transform:"scale(0.7)"})),mM("enter",$h({transform:"none"})),gM("* => enter",GL([pM("{{enterAnimationDuration}} cubic-bezier(0, 0, 0.2, 1)",$h({transform:"none",opacity:1})),qL("@*",$L(),{optional:!0})]),T_),gM("* => void, * => exit",GL([pM("{{exitAnimationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)",$h({opacity:0})),qL("@*",$L(),{optional:!0})]),T_)])};class jD{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0,this.enterAnimationDuration=T_.params.enterAnimationDuration,this.exitAnimationDuration=T_.params.exitAnimationDuration}}let Pz=(()=>{class n extends ML{constructor(t,i,r,o,u,f,y,E){super(t,i,r,o,u,f,y,E),this._animationStateChanged=new h.vpe}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(_D),h.Y36(g,8),h.Y36(jD),h.Y36(Up),h.Y36(h.R0b),h.Y36($b),h.Y36(Gh))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],features:[h.qOj],decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})(),Oz=(()=>{class n extends Pz{constructor(t,i,r,o,u,f,y,E,S){super(t,i,r,o,u,f,y,S),this._changeDetectorRef=E,this._state="enter"}_onAnimationDone({toState:t,totalTime:i}){"enter"===t?this._openAnimationDone(i):"exit"===t&&this._animationStateChanged.next({state:"closed",totalTime:i})}_onAnimationStart({toState:t,totalTime:i}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_getAnimationState(){return{value:this._state,params:{enterAnimationDuration:this._config.enterAnimationDuration||T_.params.enterAnimationDuration,exitAnimationDuration:this._config.exitAnimationDuration||T_.params.exitAnimationDuration}}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(_D),h.Y36(g,8),h.Y36(jD),h.Y36(Up),h.Y36(h.R0b),h.Y36($b),h.Y36(h.sBO),h.Y36(Gh))},n.\u0275cmp=h.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-dialog-container"],hostVars:7,hostBindings:function(t,i){1&t&&h.WFA("@dialogContainer.start",function(o){return i._onAnimationStart(o)})("@dialogContainer.done",function(o){return i._onAnimationDone(o)}),2&t&&(h.Ikx("id",i._config.id),h.uIk("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),h.d8E("@dialogContainer",i._getAnimationState()))},features:[h.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&h.YNc(0,kz,0,0,"ng-template",0)},dependencies:[$p],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions.mat-dialog-actions-align-center,.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions.mat-dialog-actions-align-end,.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[Rz.dialogContainer]}}),n})();class zD{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new xn.x,this._beforeClosed=new xn.x,this._state=0,this.disableClose=t.disableClose,this.id=e.id,i._animationStateChanged.pipe(Yi(r=>"opened"===r.state),Fu(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Yi(r=>"closed"===r.state),Fu(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),(0,Er.T)(this.backdropClick(),this.keydownEvents().pipe(Yi(r=>27===r.keyCode&&!this.disableClose&&!Rb(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),YL(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Yi(t=>"closing"===t.state),Fu(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}function YL(n,e,t){return n._closeInteractionType=e,n.close(t)}const QL=new h.OlP("MatDialogData"),Nz=new h.OlP("mat-dialog-default-options"),XL=new h.OlP("mat-dialog-scroll-strategy"),Fz={provide:XL,deps:[I_],useFactory:function Lz(n){return()=>n.scrollStrategies.block()}};let Bz=0,Vz=(()=>{class n{constructor(t,i,r,o,u,f,y,E,S,R){this._overlay=t,this._defaultOptions=r,this._parentDialog=o,this._dialogRefConstructor=y,this._dialogContainerType=E,this._dialogDataToken=S,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new xn.x,this._afterOpenedAtThisLevel=new xn.x,this._idPrefix="mat-dialog-",this.afterAllClosed=xL(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Gu(void 0))),this._scrollStrategy=f,this._dialog=i.get(RL)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,i){let r;(i={...this._defaultOptions||new jD,...i}).id=i.id||`${this._idPrefix}${Bz++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const o=this._dialog.open(t,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:jD,useValue:i},{provide:HD,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(u,f,y)=>(r=new this._dialogRefConstructor(u,i,y),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:y},{provide:this._dialogDataToken,useValue:f.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentInstance=o.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const u=this.openDialogs.indexOf(r);u>-1&&(this.openDialogs.splice(u,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),GD=(()=>{class n extends Vz{constructor(t,i,r,o,u,f,y,E){super(t,i,o,f,y,u,zD,Oz,QL,E)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(I_),h.LFG(h.zs3),h.LFG(De,8),h.LFG(Nz,8),h.LFG(XL),h.LFG(n,12),h.LFG(UD),h.LFG(h.QbO,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Uz=0,Hz=(()=>{class n{constructor(t,i,r){this.dialogRef=t,this._elementRef=i,this._dialog=r,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=JL(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){const i=t._matDialogClose||t._matDialogCloseResult;i&&(this.dialogResult=i.currentValue)}_onButtonClick(t){YL(this.dialogRef,0===t.screenX&&0===t.screenY?"keyboard":"mouse",this.dialogResult)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(zD,8),h.Y36(h.SBq),h.Y36(GD))},n.\u0275dir=h.lG2({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(t,i){1&t&&h.NdJ("click",function(o){return i._onButtonClick(o)}),2&t&&h.uIk("aria-label",i.ariaLabel||null)("type",i.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[h.TTD]}),n})(),jz=(()=>{class n{constructor(t,i,r){this._dialogRef=t,this._elementRef=i,this._dialog=r,this.id="mat-dialog-title-"+Uz++}ngOnInit(){this._dialogRef||(this._dialogRef=JL(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(zD,8),h.Y36(h.SBq),h.Y36(GD))},n.\u0275dir=h.lG2({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(t,i){2&t&&h.Ikx("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),n})(),zz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),n})(),Gz=(()=>{class n{constructor(){this.align="start"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"],hostVars:4,hostBindings:function(t,i){2&t&&h.ekj("mat-dialog-actions-align-center","center"===i.align)("mat-dialog-actions-align-end","end"===i.align)},inputs:{align:"align"}}),n})();function JL(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-dialog-container");)t=t.parentElement;return t?e.find(i=>i.id===t.id):null}let Wz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[GD,Fz],imports:[vz,AL,Wh,Al,Al]}),n})();const $z=["mat-button",""],qz=["*"],Kz=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Yz=NL(Ez(LL(class{constructor(n){this._elementRef=n}})));let e1=(()=>{class n extends Yz{constructor(t,i,r){super(t),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const o of Kz)this._hasHostAttributes(o)&&this._getHostElement().classList.add(o);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(Gh),h.Y36(h.QbO,8))},n.\u0275cmp=h.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,i){if(1&t&&h.Gf(fM,5),2&t){let r;h.iGM(r=h.CRH())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,i){2&t&&(h.uIk("disabled",i.disabled||null),h.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[h.qOj],attrs:$z,ngContentSelectors:qz,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(h.F$t(),h.TgZ(0,"span",0),h.Hsn(1),h.qZA(),h._UZ(2,"span",1)(3,"span",2)),2&t&&(h.xp6(2),h.ekj("mat-button-ripple-round",i.isRoundButton||i.isIconButton),h.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},dependencies:[fM],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),Qz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[HL,Al,Al]}),n})();const Xz=["connectionContainer"],Jz=["inputContainer"],eG=["label"];function tG(n,e){1&n&&(h.ynx(0),h.TgZ(1,"div",14),h._UZ(2,"div",15)(3,"div",16)(4,"div",17),h.qZA(),h.TgZ(5,"div",18),h._UZ(6,"div",15)(7,"div",16)(8,"div",17),h.qZA(),h.BQk())}function nG(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",19),h.NdJ("cdkObserveContent",function(){h.CHM(t);const r=h.oxw();return h.KtG(r.updateOutlineGap())}),h.Hsn(1,1),h.qZA()}if(2&n){const t=h.oxw();h.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)}}function iG(n,e){if(1&n&&(h.ynx(0),h.Hsn(1,2),h.TgZ(2,"span"),h._uU(3),h.qZA(),h.BQk()),2&n){const t=h.oxw(2);h.xp6(3),h.Oqu(t._control.placeholder)}}function rG(n,e){1&n&&h.Hsn(0,3,["*ngSwitchCase","true"])}function sG(n,e){1&n&&(h.TgZ(0,"span",23),h._uU(1," *"),h.qZA())}function oG(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"label",20,21),h.NdJ("cdkObserveContent",function(){h.CHM(t);const r=h.oxw();return h.KtG(r.updateOutlineGap())}),h.YNc(2,iG,4,1,"ng-container",12),h.YNc(3,rG,1,0,"ng-content",12),h.YNc(4,sG,2,0,"span",22),h.qZA()}if(2&n){const t=h.oxw();h.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),h.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),h.uIk("for",t._control.id)("aria-owns",t._control.id),h.xp6(2),h.Q6J("ngSwitchCase",!1),h.xp6(1),h.Q6J("ngSwitchCase",!0),h.xp6(1),h.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function aG(n,e){1&n&&(h.TgZ(0,"div",24),h.Hsn(1,4),h.qZA())}function lG(n,e){if(1&n&&(h.TgZ(0,"div",25),h._UZ(1,"span",26),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function uG(n,e){if(1&n&&(h.TgZ(0,"div"),h.Hsn(1,5),h.qZA()),2&n){const t=h.oxw();h.Q6J("@transitionMessages",t._subscriptAnimationState)}}function cG(n,e){if(1&n&&(h.TgZ(0,"div",30),h._uU(1),h.qZA()),2&n){const t=h.oxw(2);h.Q6J("id",t._hintLabelId),h.xp6(1),h.Oqu(t.hintLabel)}}function dG(n,e){if(1&n&&(h.TgZ(0,"div",27),h.YNc(1,cG,2,2,"div",28),h.Hsn(2,6),h._UZ(3,"div",29),h.Hsn(4,7),h.qZA()),2&n){const t=h.oxw();h.Q6J("@transitionMessages",t._subscriptAnimationState),h.xp6(1),h.Q6J("ngIf",t.hintLabel)}}const hG=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],fG=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],pG=new h.OlP("MatError"),mG={transitionMessages:zL("transitionMessages",[mM("enter",$h({opacity:1,transform:"translateY(0%)"})),gM("void => enter",[$h({opacity:0,transform:"translateY(-5px)"}),pM("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let yM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n}),n})();const gG=new h.OlP("MatHint");let vM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["mat-label"]]}),n})(),_G=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const yG=new h.OlP("MatPrefix"),vG=new h.OlP("MatSuffix");let t1=0;const wG=NL(class{constructor(n){this._elementRef=n}},"primary"),EG=new h.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),r1=new h.OlP("MatFormField");let CG=(()=>{class n extends wG{constructor(t,i,r,o,u,f,y){super(t),this._changeDetectorRef=i,this._dir=r,this._defaults=o,this._platform=u,this._ngZone=f,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new xn.x,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+t1++,this._labelId="mat-form-field-label-"+t1++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==y,this.appearance=o?.appearance||"legacy",o&&(this._hideRequiredMarker=Boolean(o.hideRequiredMarker),o.color&&(this.color=this.defaultColor=o.color))}get appearance(){return this._appearance}set appearance(t){const i=this._appearance;this._appearance=t||this._defaults?.appearance||"legacy","outline"===this._appearance&&i!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Ko(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(Gu(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(jh(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(jh(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,Er.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Gu(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Gu(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(jh(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const i=this._control?this._control.ngControl:null;return i&&i[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,y_(this._label.nativeElement,"transitionend").pipe(Fu(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(o=>"start"===o.align):null,r=this._hintChildren?this._hintChildren.find(o=>"end"===o.align):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,i=this._connectionContainerRef.nativeElement,r=".mat-form-field-outline-start",o=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const S=i.querySelectorAll(`${r}, ${o}`);for(let R=0;R<S.length;R++)S[R].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let u=0,f=0;const y=i.querySelectorAll(r),E=i.querySelectorAll(o);if(this._label&&this._label.nativeElement.children.length){const S=i.getBoundingClientRect();if(0===S.width&&0===S.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const R=this._getStartEnd(S),H=t.children,K=this._getStartEnd(H[0].getBoundingClientRect());let J=0;for(let le=0;le<H.length;le++)J+=H[le].offsetWidth;u=Math.abs(K-R)-5,f=J>0?.75*J+10:0}for(let S=0;S<y.length;S++)y[S].style.width=`${u}px`;for(let S=0;S<E.length;S++)E[S].style.width=`${f}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.sBO),h.Y36(E_,8),h.Y36(EG,8),h.Y36(Os),h.Y36(h.R0b),h.Y36(h.QbO,8))},n.\u0275cmp=h.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,i,r){if(1&t&&(h.Suo(r,yM,5),h.Suo(r,yM,7),h.Suo(r,vM,5),h.Suo(r,vM,7),h.Suo(r,_G,5),h.Suo(r,pG,5),h.Suo(r,gG,5),h.Suo(r,yG,5),h.Suo(r,vG,5)),2&t){let o;h.iGM(o=h.CRH())&&(i._controlNonStatic=o.first),h.iGM(o=h.CRH())&&(i._controlStatic=o.first),h.iGM(o=h.CRH())&&(i._labelChildNonStatic=o.first),h.iGM(o=h.CRH())&&(i._labelChildStatic=o.first),h.iGM(o=h.CRH())&&(i._placeholderChild=o.first),h.iGM(o=h.CRH())&&(i._errorChildren=o),h.iGM(o=h.CRH())&&(i._hintChildren=o),h.iGM(o=h.CRH())&&(i._prefixChildren=o),h.iGM(o=h.CRH())&&(i._suffixChildren=o)}},viewQuery:function(t,i){if(1&t&&(h.Gf(Xz,7),h.Gf(Jz,5),h.Gf(eG,5)),2&t){let r;h.iGM(r=h.CRH())&&(i._connectionContainerRef=r.first),h.iGM(r=h.CRH())&&(i._inputContainerRef=r.first),h.iGM(r=h.CRH())&&(i._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,i){2&t&&h.ekj("mat-form-field-appearance-standard","standard"==i.appearance)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-appearance-legacy","legacy"==i.appearance)("mat-form-field-invalid",i._control.errorState)("mat-form-field-can-float",i._canLabelFloat())("mat-form-field-should-float",i._shouldLabelFloat())("mat-form-field-has-label",i._hasFloatingLabel())("mat-form-field-hide-placeholder",i._hideControlPlaceholder())("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-focused",i._control.focused)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))("_mat-animation-noopable",!i._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[h._Bn([{provide:r1,useExisting:n}]),h.qOj],ngContentSelectors:fG,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,i){1&t&&(h.F$t(hG),h.TgZ(0,"div",0)(1,"div",1,2),h.NdJ("click",function(o){return i._control.onContainerClick&&i._control.onContainerClick(o)}),h.YNc(3,tG,9,0,"ng-container",3),h.YNc(4,nG,2,1,"div",4),h.TgZ(5,"div",5,6),h.Hsn(7),h.TgZ(8,"span",7),h.YNc(9,oG,5,16,"label",8),h.qZA()(),h.YNc(10,aG,2,0,"div",9),h.qZA(),h.YNc(11,lG,2,4,"div",10),h.TgZ(12,"div",11),h.YNc(13,uG,2,1,"div",12),h.YNc(14,dG,5,2,"div",13),h.qZA()()),2&t&&(h.xp6(3),h.Q6J("ngIf","outline"==i.appearance),h.xp6(1),h.Q6J("ngIf",i._prefixChildren.length),h.xp6(5),h.Q6J("ngIf",i._hasFloatingLabel()),h.xp6(1),h.Q6J("ngIf",i._suffixChildren.length),h.xp6(1),h.Q6J("ngIf","outline"!=i.appearance),h.xp6(1),h.Q6J("ngSwitch",i._getDisplayedMessages()),h.xp6(1),h.Q6J("ngSwitchCase","error"),h.xp6(1),h.Q6J("ngSwitchCase","hint"))},dependencies:[yi,Ga,aa,m_],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[mG.transitionMessages]},changeDetection:0}),n})(),s1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[la,Al,xx,Al]}),n})();const o1=Hh({passive:!0});let DG=(()=>{class n{constructor(t,i){this._platform=t,this._ngZone=i,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Y0.E;const i=zu(t),r=this._monitoredElements.get(i);if(r)return r.subject;const o=new xn.x,u="cdk-text-field-autofilled",f=y=>{"cdk-text-field-autofill-start"!==y.animationName||i.classList.contains(u)?"cdk-text-field-autofill-end"===y.animationName&&i.classList.contains(u)&&(i.classList.remove(u),this._ngZone.run(()=>o.next({target:y.target,isAutofilled:!1}))):(i.classList.add(u),this._ngZone.run(()=>o.next({target:y.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",f,o1),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:o,unlisten:()=>{i.removeEventListener("animationstart",f,o1)}}),o}stopMonitoring(t){const i=zu(t),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Os),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),a1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),l1=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),Zp=(()=>{class n extends l1{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=h.n5z(n)))(i||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const xl=new h.OlP("NgValueAccessor"),SG={provide:xl,useExisting:(0,h.Gpc)(()=>WD),multi:!0},xG=new h.OlP("CompositionEventMode");let WD=(()=>{class n extends l1{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function AG(){const n=z()?z().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(xG,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&h.NdJ("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[h._Bn([SG]),h.qOj]}),n})();function qh(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function c1(n){return null!=n&&"number"==typeof n.length}const us=new h.OlP("NgValidators"),Zh=new h.OlP("NgAsyncValidators"),kG=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class RG{static min(e){return function d1(n){return e=>{if(qh(e.value)||qh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function h1(n){return e=>{if(qh(e.value)||qh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function f1(n){return qh(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function p1(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function m1(n){return qh(n.value)||kG.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function g1(n){return e=>qh(e.value)||!c1(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function _1(n){return e=>c1(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function y1(n){if(!n)return $D;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(qh(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return D1(e)}static composeAsync(e){return I1(e)}}function $D(n){return null}function v1(n){return null!=n}function b1(n){return(0,h.QGY)(n)?(0,qn.D)(n):n}function w1(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function E1(n,e){return e.map(t=>t(n))}function C1(n){return n.map(e=>function PG(n){return!n.validate}(e)?e:t=>e.validate(t))}function D1(n){if(!n)return null;const e=n.filter(v1);return 0==e.length?null:function(t){return w1(E1(t,e))}}function bM(n){return null!=n?D1(C1(n)):null}function I1(n){if(!n)return null;const e=n.filter(v1);return 0==e.length?null:function(t){return function IG(...n){const e=(0,Ds.jO)(n),{args:t,keys:i}=Mx(n),r=new Ei.y(o=>{const{length:u}=t;if(!u)return void o.complete();const f=new Array(u);let y=u,E=u;for(let S=0;S<u;S++){let R=!1;(0,Ts.Xf)(t[S]).subscribe((0,In.x)(o,H=>{R||(R=!0,E--),f[S]=H},()=>y--,void 0,()=>{(!y||!R)&&(E||o.next(i?Rx(i,f):f),o.complete())}))}});return e?r.pipe(Nb(e)):r}(E1(t,e).map(b1)).pipe((0,bn.U)(w1))}}function wM(n){return null!=n?I1(C1(n)):null}function T1(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function S1(n){return n._rawValidators}function A1(n){return n._rawAsyncValidators}function EM(n){return n?Array.isArray(n)?n:[n]:[]}function qD(n,e){return Array.isArray(n)?n.includes(e):n===e}function x1(n,e){const t=EM(e);return EM(n).forEach(r=>{qD(t,r)||t.push(r)}),t}function M1(n,e){return EM(e).filter(t=>!qD(n,t))}class k1{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=bM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=wM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ls extends k1{get formDirective(){return null}get path(){return null}}class gd extends k1{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let CM=(()=>{class n extends class R1{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(gd,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&h.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[h.qOj]}),n})();const Kb="VALID",KD="INVALID",S_="PENDING",Yb="DISABLED";function SM(n){return(YD(n)?n.validators:n)||null}function O1(n){return Array.isArray(n)?bM(n):n||null}function AM(n,e){return(YD(e)?e.asyncValidators:n)||null}function N1(n){return Array.isArray(n)?wM(n):n||null}function YD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class B1{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=O1(this._rawValidators),this._composedAsyncValidatorFn=N1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Kb}get invalid(){return this.status===KD}get pending(){return this.status==S_}get disabled(){return this.status===Yb}get enabled(){return this.status!==Yb}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=O1(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=N1(e)}addValidators(e){this.setValidators(x1(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(x1(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(M1(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(M1(e,this._rawAsyncValidators))}hasValidator(e){return qD(this._rawValidators,e)}hasAsyncValidator(e){return qD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=S_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Yb,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Kb,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Kb||this.status===S_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Yb:Kb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=S_,this._hasOwnPendingAsyncValidator=!0;const t=b1(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?Yb:this.errors?KD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(S_)?S_:this._anyControlsHaveStatus(KD)?KD:Kb}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){YD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class xM extends B1{constructor(e,t,i){super(SM(t),AM(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function F1(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new h.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(i=>{(function L1(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new h.vHH(1e3,"");if(!i[t])throw new h.vHH(1001,"")})(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function Qb(n,e){MM(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function zG(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&V1(n,e)})}(n,e),function WG(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function GG(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&V1(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function jG(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function XD(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),eI(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function JD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function MM(n,e){const t=S1(n);null!==e.validator?n.setValidators(T1(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=A1(n);null!==e.asyncValidator?n.setAsyncValidators(T1(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();JD(e._rawValidators,r),JD(e._rawAsyncValidators,r)}function eI(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=S1(n);if(Array.isArray(r)&&r.length>0){const o=r.filter(u=>u!==e.validator);o.length!==r.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const r=A1(n);if(Array.isArray(r)&&r.length>0){const o=r.filter(u=>u!==e.asyncValidator);o.length!==r.length&&(t=!0,n.setAsyncValidators(o))}}}const i=()=>{};return JD(e._rawValidators,i),JD(e._rawAsyncValidators,i),t}function V1(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function U1(n,e){MM(n,e)}function j1(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}const YG={provide:Ls,useExisting:(0,h.Gpc)(()=>tI)},Xb=(()=>Promise.resolve())();let tI=(()=>{class n extends Ls{constructor(t,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new xM({},bM(t),wM(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Xb.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),Qb(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Xb.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Xb.then(()=>{const i=this._findContainer(t.path),r=new xM({});U1(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Xb.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Xb.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,j1(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(us,10),h.Y36(Zh,10))},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&h.NdJ("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([YG]),h.qOj]}),n})();function z1(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function G1(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const W1=class extends B1{constructor(e=null,t,i){super(SM(t),AM(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),YD(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=G1(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){z1(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){z1(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){G1(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},JG={provide:gd,useExisting:(0,h.Gpc)(()=>nI)},Z1=(()=>Promise.resolve())();let nI=(()=>{class n extends gd{constructor(t,i,r,o,u){super(),this._changeDetectorRef=u,this.control=new W1,this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function RM(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(o=>{o.constructor===WD?t=o:function ZG(n){return Object.getPrototypeOf(n.constructor)===Zp}(o)?i=o:r=o}),r||i||t||null}(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function kM(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Qb(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Z1.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&(0,h.D6c)(i);Z1.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function QD(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ls,9),h.Y36(us,10),h.Y36(Zh,10),h.Y36(xl,10),h.Y36(h.sBO,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([JG]),h.qOj,h.TTD]}),n})(),Y1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const oW={provide:Ls,useExisting:(0,h.Gpc)(()=>iI)};let iI=(()=>{class n extends Ls{constructor(t,i){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(eI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return Qb(i,t),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){XD(t.control||null,t,!1),function KG(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,j1(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(XD(i||null,t),(n=>n instanceof W1)(r)&&(Qb(r,t),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);U1(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function $G(n,e){return eI(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){MM(this.form,this),this._oldForm&&eI(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(us,10),h.Y36(Zh,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&h.NdJ("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([oW]),h.qOj,h.TTD]}),n})(),DW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Y1]}),n})(),IW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[DW]}),n})();const SW=new h.OlP("MAT_INPUT_VALUE_ACCESSOR"),AW=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let xW=0;const MW=Cz(class{constructor(n,e,t,i){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=i,this.stateChanges=new xn.x}});let kW=(()=>{class n extends MW{constructor(t,i,r,o,u,f,y,E,S,R){super(f,o,u,r),this._elementRef=t,this._platform=i,this._autofillMonitor=E,this._formField=R,this._uid="mat-input-"+xW++,this.focused=!1,this.stateChanges=new xn.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(J=>Tb().has(J)),this._iOSKeyupListener=J=>{const le=J.target;!le.value&&0===le.selectionStart&&0===le.selectionEnd&&(le.setSelectionRange(1,1),le.setSelectionRange(0,0))};const H=this._elementRef.nativeElement,K=H.nodeName.toLowerCase();this._inputValueAccessor=y||H,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&S.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===K,this._isTextarea="textarea"===K,this._isInFormField=!!R,this._isNativeSelect&&(this.controlType=H.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Ko(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(RG.required)??!1}set required(t){this._required=Ko(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&Tb().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Ko(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const t=this._formField,i=t&&"legacy"===t.appearance&&!t._hasLabel?.()?null:this.placeholder;if(i!==this._previousPlaceholder){const r=this._elementRef.nativeElement;this._previousPlaceholder=i,i?r.setAttribute("placeholder",i):r.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){AW.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(Os),h.Y36(gd,10),h.Y36(tI,8),h.Y36(iI,8),h.Y36(FL),h.Y36(SW,10),h.Y36(DG),h.Y36(h.R0b),h.Y36(r1,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,i){1&t&&h.NdJ("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&t&&(h.Ikx("disabled",i.disabled)("required",i.required),h.uIk("id",i.id)("data-placeholder",i.placeholder)("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required),h.ekj("mat-input-server",i._isServer)("mat-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[h._Bn([{provide:yM,useExisting:n}]),h.qOj,h.TTD]}),n})(),RW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[FL],imports:[a1,s1,Al,a1,s1]}),n})(),PW=(()=>{class n{constructor(t,i){this.dialogRef=t,this.data=i,this.isEdit=!1}ngOnInit(){"New User Name"!==this.data.name&&(this.isEdit=!0)}close(){this.dialogRef.close()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(zD),h.Y36(QL))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-marker-edit-popup"]],decls:20,vars:6,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["appearance","outline",2,"width","100%"],["matInput","","autocomplete","off",3,"ngModel","ngModelChange"],["mat-dialog-actions","",2,"justify-content","flex-end"],["mat-button","","color","primary",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","",3,"click"]],template:function(t,i){1&t&&(h.TgZ(0,"h1",0),h._uU(1),h.qZA(),h.TgZ(2,"div",1)(3,"mat-form-field",2)(4,"mat-label"),h._uU(5,"User Name"),h.qZA(),h.TgZ(6,"input",3),h.NdJ("ngModelChange",function(o){return i.data.name=o}),h.qZA()(),h.TgZ(7,"mat-form-field",2)(8,"mat-label"),h._uU(9,"Longitude"),h.qZA(),h.TgZ(10,"input",3),h.NdJ("ngModelChange",function(o){return i.data.lon=o}),h.qZA()(),h.TgZ(11,"mat-form-field",2)(12,"mat-label"),h._uU(13,"Latitude"),h.qZA(),h.TgZ(14,"input",3),h.NdJ("ngModelChange",function(o){return i.data.lat=o}),h.qZA()()(),h.TgZ(15,"div",4)(16,"button",5),h._uU(17),h.qZA(),h.TgZ(18,"button",6),h.NdJ("click",function(){return i.close()}),h._uU(19,"Cancel"),h.qZA()()),2&t&&(h.xp6(1),h.Oqu(i.isEdit?"Edit Marker":"Add Marker"),h.xp6(5),h.Q6J("ngModel",i.data.name),h.xp6(4),h.Q6J("ngModel",i.data.lon),h.xp6(4),h.Q6J("ngModel",i.data.lat),h.xp6(2),h.Q6J("mat-dialog-close",i.data),h.xp6(1),h.Oqu(i.isEdit?"Edit":"Add"))},dependencies:[e1,Hz,jz,zz,Gz,CG,vM,kW,WD,CM,nI],encapsulation:2}),n})(),pF=(()=>{class n{constructor(){this.data="/assets/data/test-data.geojson"}makeUserLocationMarkers(t,i,r){const o=i.lon,u=i.lat,f=i.name,y=ii.marker([u,o]);return y.addTo(t).bindPopup(`<div class="marker-popup">\n                            <div class="marker-popup__title">\n                                ${f}\n                            </div>\n                            <div>Lon: ${o}, Lat: ${u}</div>\n                            <div markerId="${r}" class="marker-popup__actions">\n                              <span id="edit-marker" class="marker-popup__action-ed">Edit</span>\n                              <span id="del-marker" class="marker-popup__action-del">Remove</span>\n                            </div>\n                           </div>`),y}removeUserLocationMarkers(t,i){t?.removeLayer(i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class OW{constructor(e=!1,t,i=!0,r){this._multiple=e,this._emitChanges=i,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new xn.x,t&&t.length&&(e?t.forEach(o=>this._markSelected(o)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(i=>this._markSelected(i));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...e){this._verifyValueAssignment(e),e.forEach(i=>this._unmarkSelected(i));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...e){this._verifyValueAssignment(e);const t=this.selected,i=new Set(e);e.forEach(o=>this._markSelected(o)),t.filter(o=>!i.has(o)).forEach(o=>this._unmarkSelected(o));const r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(e){return this.isSelected(e)?this.deselect(e):this.select(e)}clear(e=!0){this._unmarkAll();const t=this._hasQueuedChanges();return e&&this._emitChangeEvent(),t}isSelected(e){if(this.compareWith){for(const t of this._selection)if(this.compareWith(t,e))return!0;return!1}return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this.isSelected(e)||this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}const NW=["button"],LW=["*"],mF=new h.OlP("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),gF=new h.OlP("MatButtonToggleGroup"),FW={provide:xl,useExisting:(0,h.Gpc)(()=>vF),multi:!0};let _F=0;class yF{constructor(e,t){this.source=e,this.value=t}}let vF=(()=>{class n{constructor(t,i){this._changeDetector=t,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+_F++,this.valueChange=new h.vpe,this.change=new h.vpe,this.appearance=i&&i.appearance?i.appearance:"standard"}get name(){return this._name}set name(t){this._name=t,this._markButtonsForCheck()}get vertical(){return this._vertical}set vertical(t){this._vertical=Ko(t)}get value(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t.map(i=>i.value):t[0]?t[0].value:void 0}set value(t){this._setSelectionByValue(t),this.valueChange.emit(this.value)}get selected(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t:t[0]||null}get multiple(){return this._multiple}set multiple(t){this._multiple=Ko(t),this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(t){this._disabled=Ko(t),this._markButtonsForCheck()}ngOnInit(){this._selectionModel=new OW(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(t=>t.checked))}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_emitChangeEvent(t){const i=new yF(t,this.value);this._controlValueAccessorChangeFn(i.value),this.change.emit(i)}_syncButtonToggle(t,i,r=!1,o=!1){!this.multiple&&this.selected&&!t.checked&&(this.selected.checked=!1),this._selectionModel?i?this._selectionModel.select(t):this._selectionModel.deselect(t):o=!0,o?Promise.resolve().then(()=>this._updateModelValue(t,r)):this._updateModelValue(t,r)}_isSelected(t){return this._selectionModel&&this._selectionModel.isSelected(t)}_isPrechecked(t){return!(typeof this._rawValue>"u")&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(i=>null!=t.value&&i===t.value):t.value===this._rawValue)}_setSelectionByValue(t){this._rawValue=t,this._buttonToggles&&(this.multiple&&t?(Array.isArray(t),this._clearSelection(),t.forEach(i=>this._selectValue(i))):(this._clearSelection(),this._selectValue(t)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(t=>t.checked=!1)}_selectValue(t){const i=this._buttonToggles.find(r=>null!=r.value&&r.value===t);i&&(i.checked=!0,this._selectionModel.select(i))}_updateModelValue(t,i){i&&this._emitChangeEvent(t),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(t=>t._markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.sBO),h.Y36(mF,8))},n.\u0275dir=h.lG2({type:n,selectors:[["mat-button-toggle-group"]],contentQueries:function(t,i,r){if(1&t&&h.Suo(r,bF,5),2&t){let o;h.iGM(o=h.CRH())&&(i._buttonToggles=o)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(t,i){2&t&&(h.uIk("aria-disabled",i.disabled),h.ekj("mat-button-toggle-vertical",i.vertical)("mat-button-toggle-group-appearance-standard","standard"===i.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[h._Bn([FW,{provide:gF,useExisting:n}])]}),n})();const BW=LL(class{});let bF=(()=>{class n extends BW{constructor(t,i,r,o,u,f){super(),this._changeDetectorRef=i,this._elementRef=r,this._focusMonitor=o,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new h.vpe;const y=Number(u);this.tabIndex=y||0===y?y:null,this.buttonToggleGroup=t,this.appearance=f&&f.appearance?f.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(t){this._appearance=t}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(t){const i=Ko(t);i!==this._checked&&(this._checked=i,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(t){this._disabled=Ko(t)}ngOnInit(){const t=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+_F++,t&&(t._isPrechecked(this)?this.checked=!0:t._isSelected(this)!==this._checked&&t._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const t=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),t&&t._isSelected(this)&&t._syncButtonToggle(this,!1,!1,!0)}focus(t){this._buttonElement.nativeElement.focus(t)}_onButtonClick(){const t=!!this._isSingleSelector()||!this._checked;t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new yF(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this._isSingleSelector()?this.buttonToggleGroup.name:this.name||null}_isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(gF,8),h.Y36(h.sBO),h.Y36(h.SBq),h.Y36(Gh),h.$8M("tabindex"),h.Y36(mF,8))},n.\u0275cmp=h.Xpm({type:n,selectors:[["mat-button-toggle"]],viewQuery:function(t,i){if(1&t&&h.Gf(NW,5),2&t){let r;h.iGM(r=h.CRH())&&(i._buttonElement=r.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(t,i){1&t&&h.NdJ("focus",function(){return i.focus()}),2&t&&(h.uIk("aria-label",null)("aria-labelledby",null)("id",i.id)("name",null),h.ekj("mat-button-toggle-standalone",!i.buttonToggleGroup)("mat-button-toggle-checked",i.checked)("mat-button-toggle-disabled",i.disabled)("mat-button-toggle-appearance-standard","standard"===i.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[h.qOj],ngContentSelectors:LW,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(t,i){if(1&t&&(h.F$t(),h.TgZ(0,"button",0,1),h.NdJ("click",function(){return i._onButtonClick()}),h.TgZ(2,"span",2),h.Hsn(3),h.qZA()(),h._UZ(4,"span",3)(5,"span",4)),2&t){const r=h.MAs(1);h.Q6J("id",i.buttonId)("disabled",i.disabled||null),h.uIk("tabindex",i.disabled?-1:i.tabIndex)("aria-pressed",i.checked)("name",i._getButtonName())("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby),h.xp6(5),h.Q6J("matRippleTrigger",r)("matRippleDisabled",i.disableRipple||i.disabled)}},dependencies:[fM],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0}),n})(),VW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Al,HL,Al]}),n})();const UW=function(n){return{"map-container--new-loc":n}},GW=ii.icon({iconRetinaUrl:"assets/marker-icon-2x.png",iconUrl:"assets/marker-icon.png",shadowUrl:"assets/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});ii.Marker.prototype.options.icon=GW;var rI=(()=>{return(n=rI||(rI={})).CAR="car",n.FOOT="foot",rI;var n})();let WW=(()=>{class n{constructor(t,i,r){this.markerService=t,this.db=i,this.dialog=r,this.newLocationTriggerActive=!1,this.newCheckpointTriggerActive=!1,this.markers=[],this.paths=[],this.myCurrentKey="",this.myCurrentName="",this.myCheckpoints=[],this.myCheckpointMarkersList=[],this.currentVehicleType=rI.FOOT,this.locationChanged=o=>{this.myCurrentKey&&this.myCurrentLocation&&(Math.abs(o.coords.latitude-this.myCurrentLocation.lat)>1e-4||Math.abs(o.coords.longitude-this.myCurrentLocation.lon)>1e-4)&&this.saveEditedMarkerPosition(this.myCurrentKey,this.myCurrentName,o.coords.latitude,o.coords.longitude)},this.locationChangeError=o=>{console.log(`ERROR(${o.code}): ${o.message}`)}}ngOnInit(){navigator.geolocation.getCurrentPosition(t=>{this.openMarkerEditPopup("New User Name",t.coords.latitude,t.coords.longitude,"",i=>{this.myCurrentKey=i.key,this.myCurrentLocation={lat:t.coords.latitude,lon:t.coords.longitude},this.afterViewInit()})}),window.onbeforeunload=()=>this.ngOnDestroy()}ngOnDestroy(){this.db.database.ref("people/"+this.myCurrentKey).remove().then(()=>{console.log("Marker deleted")})}initMap(t){this.map=ii.map("map",{center:[t.lat,t.lon],zoom:14}),ii.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,minZoom:3}).addTo(this.map)}clickout(t){"edit-marker"===t.target.id&&this.editMarker(t.target.parentElement.getAttribute("markerId")),"del-marker"===t.target.id&&this.delMarker(t.target.parentElement.getAttribute("markerId"))}afterViewInit(){this.initMap(this.myCurrentLocation),this.db.database.ref("people").on("value",t=>{let i=t.val();if(i){this.userData=i;for(let r=0;r<this.markers.length;r++)this.markerService.removeUserLocationMarkers(this.map,this.markers[r]);for(const[r,o]of Object.entries(i)){let u=this.markerService.makeUserLocationMarkers(this.map,o,r);this.markers.push(u)}}}),navigator.geolocation.watchPosition(this.locationChanged,this.locationChangeError,{enableHighAccuracy:!1,timeout:3e3,maximumAge:0}),this.map?.on("click",t=>{this.newLocationTriggerActive&&(this.openMarkerEditPopup("New User Name",t.latlng.lat,t.latlng.lng),this.newLocationTriggerActive=!1),this.newCheckpointTriggerActive&&this.addNewCheckpoint(t)})}editMarker(t){this.openMarkerEditPopup(this.userData[t].name,this.userData[t].lat,this.userData[t].lon,t)}delMarker(t){this.db.database.ref("people/"+t).remove().then(()=>{console.log("Marker deleted")})}addNewLocationTrigger(){this.newLocationTriggerActive=!0}addNewCheckpointTrigger(){this.newCheckpointTriggerActive=!0}clearCheckpoints(){this.myCheckpoints=[],this.myCheckpointMarkersList.forEach(t=>{this.map?.removeLayer(t)}),this.myCheckpointMarkersList=[]}addNewCheckpoint(t){const i=ii.latLng(t.latlng.lat,t.latlng.lng);this.myCheckpoints.push(i);const r=ii.icon({iconUrl:"assets/point.png",iconSize:[36,36],iconAnchor:[18,35]}),o=ii.marker(i,{icon:r});this.myCheckpointMarkersList.push(o),o.addTo(this.map),this.newCheckpointTriggerActive=!1}openMarkerEditPopup(t,i,r,o,u){this.dialog.open(PW,{width:"360px",data:{name:t,lon:r,lat:i}}).afterClosed().subscribe(y=>{y&&(o?this.saveEditedMarkerPosition(o,y.name,y.lat,y.lon):(u&&(this.myCurrentName=y.name),this.saveNewMarkerPosition(y.name,y.lat,y.lon,u||(()=>{}))))})}calculateMeetingPoint(t){let i=0,r=0;for(const[,o]of Object.entries(this.userData))i+=+o.lat,r+=+o.lon;return[+i/t,+r/t]}calculatePath(){const t=Object.keys(this.userData).length,[i,r]=this.calculateMeetingPoint(t);this.paths.length>0?(this.cleanPaths(),setTimeout(()=>{this.addThePaths(i,r,t)},1e3)):this.addThePaths(i,r,t);const o=ii.icon({iconUrl:"assets/finish.png",iconSize:[36,36],iconAnchor:[6,35]});this.currentMeetingPointMarker=ii.marker([i,r],{icon:o}),this.currentMeetingPointMarker.addTo(this.map)}static getRandomColor(){let i="";for(let r=0;r<6;r++)i+="0123456789ABCDEF"[Math.floor(16*Math.random())];return"#"+i}addThePaths(t,i,r){const o=[];for(let f=0;f<r;f++)o.push(n.getRandomColor());let u=0;for(const[,f]of Object.entries(this.userData)){let y;y=ii.Routing.control(f.name==this.myCurrentName?{router:ii.Routing.GraphHopper("54733eee-84a4-4e19-b06a-58d46e6468ce",{urlParameters:{vehicle:this.currentVehicleType}}),lineOptions:{styles:[{color:o[u],weight:7}]},showAlternatives:!1,createMarker:()=>null,fitSelectedRoutes:!1,waypoints:[ii.latLng(f.lat,f.lon),...this.myCheckpoints,ii.latLng(t,i)]}:{router:ii.Routing.GraphHopper("54733eee-84a4-4e19-b06a-58d46e6468ce",{urlParameters:{vehicle:this.currentVehicleType}}),lineOptions:{styles:[{color:o[u],weight:7}]},showAlternatives:!1,createMarker:()=>null,fitSelectedRoutes:!1,waypoints:[ii.latLng(f.lat,f.lon),ii.latLng(t,i)]}),y.addTo(this.map),this.paths.push(y),u++}}cleanPaths(){this.currentMeetingPointMarker&&(this.map?.removeLayer(this.currentMeetingPointMarker),this.currentMeetingPointMarker=null);for(let t=0;t<this.paths.length;t++)this.map?.removeControl(this.paths[t]),this.paths[t]=null;this.paths=[]}saveEditedMarkerPosition(t,i,r,o){this.db.database.ref("people/"+t).update({name:i,lat:r,lon:o}).then(()=>{console.log("Marker updated")})}saveNewMarkerPosition(t,i,r,o){this.db.database.ref("people").push({name:t,lat:i,lon:r}).then(u=>{o&&o(u),console.log("Marker saved")})}refreshPaths(){this.currentMeetingPointMarker&&(this.cleanPaths(),this.calculatePath())}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(pF),h.Y36(Op),h.Y36(GD))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-map"]],hostBindings:function(t,i){1&t&&h.NdJ("click",function(o){return i.clickout(o)},!1,h.evT)},decls:29,vars:5,consts:[[1,"map-header"],["mat-raised-button","","color","primary",3,"click"],[1,"material-symbols-outlined"],[1,"map-header__btn-text"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"map-container",3,"ngClass"],[1,"map-frame"],["name","vehicleType","aria-label","Font Style",1,"map-frame__vehicle-toggle",3,"ngModel","ngModelChange"],["value","foot"],["value","car"],["id","map"]],template:function(t,i){1&t&&(h.TgZ(0,"div",0)(1,"button",1),h.NdJ("click",function(){return i.addNewLocationTrigger()}),h.TgZ(2,"span",2),h._uU(3,"add_location"),h.qZA(),h.TgZ(4,"span",3),h._uU(5,"Add Location"),h.qZA()(),h.TgZ(6,"button",1),h.NdJ("click",function(){return i.addNewCheckpointTrigger()}),h.TgZ(7,"span",2),h._uU(8,"push_pin"),h.qZA(),h.TgZ(9,"span",3),h._uU(10,"Add Checkpoint For Me"),h.qZA()(),h.TgZ(11,"button",4),h.NdJ("click",function(){return i.clearCheckpoints()}),h.TgZ(12,"span",2),h._uU(13,"wrong_location"),h.qZA(),h.TgZ(14,"span",3),h._uU(15,"Clear My Checkpoints"),h.qZA()(),h.TgZ(16,"button",1),h.NdJ("click",function(){return i.calculatePath()}),h.TgZ(17,"span",2),h._uU(18,"calculate"),h.qZA(),h.TgZ(19,"span",3),h._uU(20,"Calculate Meeting Point"),h.qZA()()(),h.TgZ(21,"div",5)(22,"div",6)(23,"mat-button-toggle-group",7),h.NdJ("ngModelChange",function(o){return i.currentVehicleType=o})("ngModelChange",function(){return i.refreshPaths()}),h.TgZ(24,"mat-button-toggle",8),h._uU(25,"Foot"),h.qZA(),h.TgZ(26,"mat-button-toggle",9),h._uU(27,"Car"),h.qZA()(),h._UZ(28,"div",10),h.qZA()()),2&t&&(h.xp6(11),h.Q6J("disabled",!i.myCheckpointMarkersList.length),h.xp6(10),h.Q6J("ngClass",h.VKq(3,UW,i.newLocationTriggerActive||i.newCheckpointTriggerActive)),h.xp6(2),h.Q6J("ngModel",i.currentVehicleType))},dependencies:[_n,e1,vF,bF,CM,nI],styles:["app-map{display:flex;flex-direction:column;width:100%;height:calc(100vh - 16px)}.map-container{position:relative;flex-grow:1;width:100%}.map-container.map-container--new-loc #map{cursor:pointer}.map-frame{border:2px solid black;height:100%}.map-frame .map-frame__vehicle-toggle{position:absolute;z-index:99;top:28px;right:28px;box-shadow:#0000003d 0 3px 8px}#map{height:100%}.marker-popup{display:flex;flex-direction:column;align-items:center;justify-content:center}.marker-popup .marker-popup__title{font-size:20px;font-weight:700}.marker-popup .marker-popup__actions{display:flex;width:100%;justify-content:flex-end;margin-top:8px}.marker-popup .marker-popup__actions span{margin-left:8px;transition:.2s linear;cursor:pointer}.marker-popup .marker-popup__action-ed:hover{color:#4141d2}.marker-popup .marker-popup__action-del:hover{color:#d24141}.map-header{display:flex;justify-content:space-between;align-items:center;padding:8px;height:60px;background-color:#f5f5f5}@media (max-width: 480px){.map-header .map-header__btn-text{display:none}}\n"],encapsulation:2}),n})(),$W=(()=>{class n{constructor(t,i){this.db=t,this.http=i,this.title="map-tracker"}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Op),h.Y36(Xi))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,i){1&t&&h._UZ(0,"app-map")},dependencies:[WW],encapsulation:2}),n})();const wF="firebasestorage.googleapis.com",EF="storageBucket";class Ai extends Q.ZR{constructor(e,t,i=0){super(BM(e),`Firebase Storage: ${t} (${BM(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ai.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return BM(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function BM(n){return"storage/"+n}function VM(){return new Ai("unknown","An unknown error occurred, please check the error payload for server response.")}function CF(){return new Ai("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function DF(){return new Ai("canceled","User canceled the upload/download.")}function IF(){return new Ai("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function A_(n){return new Ai("invalid-argument",n)}function TF(){return new Ai("app-deleted","The Firebase app was deleted.")}function SF(n){return new Ai("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Jb(n,e){return new Ai("invalid-format","String does not match format '"+n+"': "+e)}function ew(n){throw new Ai("internal-error","Internal error: "+n)}class cs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=cs.makeFromUrl(e,t)}catch{return new cs(e,"")}if(""===i.path)return i;throw function n$(n){return new Ai("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+r+"(/(.*))?$","i");function E(Xe){Xe.path_=decodeURIComponent(Xe.path)}const R=t.replace(/[.]/g,"\\."),Qe=[{regex:f,indices:{bucket:1,path:3},postModify:function o(Xe){"/"===Xe.path.charAt(Xe.path.length-1)&&(Xe.path_=Xe.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${R}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:E},{regex:new RegExp(`^https?://${t===wF?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:E}];for(let Xe=0;Xe<Qe.length;Xe++){const wt=Qe[Xe],It=wt.regex.exec(e);if(It){let zi=It[wt.indices.path];zi||(zi=""),i=new cs(It[wt.indices.bucket],zi),wt.postModify(i);break}}if(null==i)throw function t$(n){return new Ai("invalid-url","Invalid URL '"+n+"'.")}(e);return i}}class o${constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function sI(n){return"string"==typeof n||n instanceof String}function AF(n){return UM()&&n instanceof Blob}function UM(){return typeof Blob<"u"}function HM(n,e,t,i){if(i<e)throw A_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw A_(`Invalid value for '${n}'. Expected ${t} or less.`)}function _d(n,e,t){let i=e;return null==t&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function xF(n){const e=encodeURIComponent;let t="?";for(const i in n)n.hasOwnProperty(i)&&(t=t+(e(i)+"=")+e(n[i])+"&");return t=t.slice(0,-1),t}var Kh=(()=>{return(n=Kh||(Kh={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Kh;var n})();function MF(n,e){const t=n>=500&&n<600,r=-1!==[408,429].indexOf(n),o=-1!==e.indexOf(n);return t||r||o}class h${constructor(e,t,i,r,o,u,f,y,E,S,R,H=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=u,this.callback_=f,this.errorCallback_=y,this.timeout_=E,this.progressCallback_=S,this.connectionFactory_=R,this.retry=H,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((K,J)=>{this.resolve_=K,this.reject_=J,this.start_()})}start_(){const t=(i,r)=>{const o=this.resolve_,u=this.reject_,f=r.connection;if(r.wasSuccessCode)try{const y=this.callback_(f,f.getResponse());!function u$(n){return void 0!==n}(y)?o():o(y)}catch(y){u(y)}else if(null!==f){const y=VM();y.serverResponse=f.getErrorText(),u(this.errorCallback_?this.errorCallback_(f,y):y)}else u(r.canceled?this.appDelete_?TF():DF():CF())};this.canceled_?t(0,new oI(!1,null,!0)):this.backoffId_=function a$(n,e,t){let i=1,r=null,o=null,u=!1,f=0;function y(){return 2===f}let E=!1;function S(...ve){E||(E=!0,e.apply(null,ve))}function R(ve){r=setTimeout(()=>{r=null,n(K,y())},ve)}function H(){o&&clearTimeout(o)}function K(ve,...Ve){if(E)return void H();if(ve)return H(),void S.call(null,ve,...Ve);if(y()||u)return H(),void S.call(null,ve,...Ve);let Qe;i<64&&(i*=2),1===f?(f=2,Qe=0):Qe=1e3*(i+Math.random()),R(Qe)}let J=!1;function le(ve){J||(J=!0,H(),!E&&(null!==r?(ve||(f=2),clearTimeout(r),R(0)):ve||(f=1)))}return R(0),o=setTimeout(()=>{u=!0,le(!0)},t),le}((i,r)=>{if(r)return void i(!1,new oI(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const u=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(u),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(u),this.pendingConnection_=null;const f=o.getErrorCode()===Kh.NO_ERROR,y=o.getStatus();if((!f||MF(y,this.additionalRetryCodes_))&&this.retry){const S=o.getErrorCode()===Kh.ABORT;return void i(!1,new oI(!1,null,S))}const E=-1!==this.successCodes_.indexOf(y);i(!0,new oI(E,o))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function l$(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class oI{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function v$(...n){const e=function y$(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}if(UM())return new Blob(n);throw new Ai("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Yo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class jM{constructor(e,t){this.data=e,this.contentType=t||null}}function zM(n,e){switch(n){case Yo.RAW:return new jM(kF(e));case Yo.BASE64:case Yo.BASE64URL:return new jM(RF(n,e));case Yo.DATA_URL:return new jM(function C$(n){const e=new PF(n);return e.base64?RF(Yo.BASE64,e.rest):function E$(n){let e;try{e=decodeURIComponent(n)}catch{throw Jb(Yo.DATA_URL,"Malformed data URL.")}return kF(e)}(e.rest)}(e),function D$(n){return new PF(n).contentType}(e))}throw VM()}function kF(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);i<=127?e.push(i):i<=2047?e.push(192|i>>6,128|63&i):55296==(64512&i)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++t),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):e.push(239,191,189):56320==(64512&i)?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(e)}function RF(n,e){switch(n){case Yo.BASE64:{const r=-1!==e.indexOf("-"),o=-1!==e.indexOf("_");if(r||o)throw Jb(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Yo.BASE64URL:{const r=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(r||o)throw Jb(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function w$(n){return atob(n)}(e)}catch{throw Jb(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}class PF{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Jb(Yo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;null!=i&&(this.base64=function I$(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}class $u{constructor(e,t){let i=0,r="";AF(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(AF(this.data_)){const r=function b$(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===r?null:new $u(r)}{const i=new Uint8Array(this.data_.buffer,e,t-e);return new $u(i,!0)}}static getBlob(...e){if(UM()){const t=e.map(i=>i instanceof $u?i.data_:i);return new $u(v$.apply(null,t))}{const t=e.map(u=>sI(u)?zM(Yo.RAW,u).data:u.data_);let i=0;t.forEach(u=>{i+=u.byteLength});const r=new Uint8Array(i);let o=0;return t.forEach(u=>{for(let f=0;f<u.length;f++)r[o++]=u[f]}),new $u(r,!0)}}uploadData(){return this.data_}}function GM(n){let e;try{e=JSON.parse(n)}catch{return null}return function d$(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function OF(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function A$(n,e){return e}class Fs{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||A$}}let aI=null;function tw(){if(aI)return aI;const n=[];n.push(new Fs("bucket")),n.push(new Fs("generation")),n.push(new Fs("metageneration")),n.push(new Fs("name","fullPath",!0));const t=new Fs("name");t.xform=function e(o,u){return function x$(n){return!sI(n)||n.length<2?n:OF(n)}(u)},n.push(t);const r=new Fs("size");return r.xform=function i(o,u){return void 0!==u?Number(u):u},n.push(r),n.push(new Fs("timeCreated")),n.push(new Fs("updated")),n.push(new Fs("md5Hash",null,!0)),n.push(new Fs("cacheControl",null,!0)),n.push(new Fs("contentDisposition",null,!0)),n.push(new Fs("contentEncoding",null,!0)),n.push(new Fs("contentLanguage",null,!0)),n.push(new Fs("contentType",null,!0)),n.push(new Fs("metadata","customMetadata",!0)),aI=n,aI}function NF(n,e,t){const i=GM(e);return null===i?null:function k$(n,e,t){const i={type:"file"},r=t.length;for(let o=0;o<r;o++){const u=t[o];i[u.local]=u.xform(i,e[u.server])}return function M$(n,e){Object.defineProperty(n,"ref",{get:function t(){const o=new cs(n.bucket,n.fullPath);return e._makeStorageReference(o)}})}(i,n),i}(n,i,t)}function WM(n,e){const t={},i=e.length;for(let r=0;r<i;r++){const o=e[r];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}const LF="prefixes";class qu{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Zu(n){if(!n)throw VM()}function lI(n,e){return function t(i,r){const o=NF(n,r,e);return Zu(null!==o),o}}function x_(n){return function e(t,i){let r;return r=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function JW(){return new Ai("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function XW(){return new Ai("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function QW(n){return new Ai("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function e$(n){return new Ai("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):i,r.status=t.getStatus(),r.serverResponse=i.serverResponse,r}}function nw(n){const e=x_(n);return function t(i,r){let o=e(i,r);return 404===i.getStatus()&&(o=function YW(n){return new Ai("object-not-found","Object '"+n+"' does not exist.")}(n.path)),o.serverResponse=r.serverResponse,o}}function BF(n,e,t){const r=_d(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,f=new qu(r,"GET",lI(n,t),u);return f.errorHandler=nw(e),f}function F$(n,e,t,i,r){const o={};o.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(o.delimiter=t),i&&(o.pageToken=i),r&&(o.maxResults=r);const f=_d(e.bucketOnlyServerUrl(),n.host,n._protocol),E=n.maxOperationRetryTime,S=new qu(f,"GET",function N$(n,e){return function t(i,r){const o=function O$(n,e,t){const i=GM(t);return null===i?null:function P$(n,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[LF])for(const r of t[LF]){const o=r.replace(/\/$/,""),u=n._makeStorageReference(new cs(e,o));i.prefixes.push(u)}if(t.items)for(const r of t.items){const o=n._makeStorageReference(new cs(e,r.name));i.items.push(o)}return i}(n,e,i)}(n,e,r);return Zu(null!==o),o}}(n,e.bucket),E);return S.urlParams=o,S.errorHandler=x_(e),S}function UF(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=function H$(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),i}class uI{constructor(e,t,i,r){this.current=e,this.total=t,this.finalized=!!i,this.metadata=r||null}}function $M(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Zu(!1)}return Zu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const W$={STATE_CHANGED:"state_changed"},Bs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function qM(n){switch(n){case"running":case"pausing":case"canceling":return Bs.RUNNING;case"paused":return Bs.PAUSED;case"success":return Bs.SUCCESS;case"canceled":return Bs.CANCELED;default:return Bs.ERROR}}class $${constructor(e,t,i){if(function c$(n){return"function"==typeof n}(e)||null!=t||null!=i)this.next=e,this.error=t??void 0,this.complete=i??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function M_(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class Z$ extends class q${constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Kh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Kh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Kh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r){if(this.sent_)throw ew("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const o in r)r.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,r[o].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ew("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ew("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ew("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ew("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Ml(){return new Z$}class GF{constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=tw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(MF(r.status,[])){if(!o)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();r=CF()}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals("canceled")?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,o)=>{this._resolve=r,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const i=function j$(n,e,t,i,r){const o=e.bucketOnlyServerUrl(),u=UF(e,i,r),f={name:u.fullPath},y=_d(o,n.host,n._protocol),S={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},R=WM(u,t),J=new qu(y,"POST",function K(le){let ve;$M(le);try{ve=le.getResponseHeader("X-Goog-Upload-URL")}catch{Zu(!1)}return Zu(sI(ve)),ve},n.maxUploadRetryTime);return J.urlParams=f,J.headers=S,J.body=R,J.errorHandler=x_(e),J}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Ml,e,t);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const r=function z$(n,e,t,i){const y=new qu(t,"POST",function o(E){const S=$M(E,["active","final"]);let R=null;try{R=E.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Zu(!1)}R||Zu(!1);const H=Number(R);return Zu(!isNaN(H)),new uI(H,i.size(),"final"===S)},n.maxUploadRetryTime);return y.headers={"X-Goog-Upload-Command":"query"},y.errorHandler=x_(e),y}(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(r,Ml,t,i);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new uI(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,o)=>{let u;try{u=function G$(n,e,t,i,r,o,u,f){const y=new uI(0,0);if(u?(y.current=u.current,y.total=u.total):(y.current=0,y.total=i.size()),i.size()!==y.total)throw function r$(){return new Ai("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const E=y.total-y.current;let S=E;r>0&&(S=Math.min(S,r));const R=y.current;let K="";K=0===S?"finalize":E===S?"upload, finalize":"upload";const J={"X-Goog-Upload-Command":K,"X-Goog-Upload-Offset":`${y.current}`},le=i.slice(R,R+S);if(null===le)throw IF();const Qe=new qu(t,"POST",function ve(Xe,wt){const It=$M(Xe,["active","final"]),tn=y.current+S,zi=i.size();let na;return na="final"===It?lI(e,o)(Xe,wt):null,new uI(tn,zi,"final"===It,na)},e.maxUploadRetryTime);return Qe.headers=J,Qe.body=le.uploadData(),Qe.progressCallback=f||null,Qe.errorHandler=x_(n),Qe}(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(y){return this._error=y,void this._transition("error")}const f=this._ref.storage._makeRequest(u,Ml,r,o,!1);this._request=f,f.getPromise().then(y=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(y.current),y.finalized?(this._metadata=y.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=BF(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,Ml,e,t);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=function HF(n,e,t,i,r){const o=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},y=function f(){let Qe="";for(let Xe=0;Xe<2;Xe++)Qe+=Math.random().toString().slice(2);return Qe}();u["Content-Type"]="multipart/related; boundary="+y;const E=UF(e,i,r),S=WM(E,t),K=$u.getBlob("--"+y+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+S+"\r\n--"+y+"\r\nContent-Type: "+E.contentType+"\r\n\r\n",i,"\r\n--"+y+"--");if(null===K)throw IF();const J={name:E.fullPath},le=_d(o,n.host,n._protocol),Ve=n.maxUploadRetryTime,Ye=new qu(le,"POST",lI(n,t),Ve);return Ye.urlParams=J,Ye.headers=u,Ye.body=K.uploadData(),Ye.errorHandler=x_(e),Ye}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Ml,e,t);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=DF(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=qM(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,r){const o=new $$(t||void 0,i||void 0,r||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(qM(this._state)){case Bs.SUCCESS:M_(this._resolve.bind(null,this.snapshot))();break;case Bs.CANCELED:case Bs.ERROR:M_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(qM(this._state)){case Bs.RUNNING:case Bs.PAUSED:e.next&&M_(e.next.bind(e,this.snapshot))();break;case Bs.SUCCESS:e.complete&&M_(e.complete.bind(e))();break;default:e.error&&M_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Yp{constructor(e,t){this._service=e,this._location=t instanceof cs?t:cs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Yp(e,t)}get root(){const e=new cs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return OF(this._location.path)}get storage(){return this._service}get parent(){const e=function T$(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new cs(this._location.bucket,e);return new Yp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw SF(e)}}function $F(n,e,t){return ZM.apply(this,arguments)}function ZM(){return(ZM=(0,ke.Z)(function*(n,e,t){const r=yield qF(n,{pageToken:t});e.prefixes.push(...r.prefixes),e.items.push(...r.items),null!=r.nextPageToken&&(yield $F(n,e,r.nextPageToken))})).apply(this,arguments)}function qF(n,e){null!=e&&"number"==typeof e.maxResults&&HM("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=F$(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(i,Ml)}function a3(n){n._throwIfRoot("getDownloadURL");const e=function B$(n,e,t){const r=_d(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,f=new qu(r,"GET",function L$(n,e){return function t(i,r){const o=NF(n,r,e);return Zu(null!==o),function R$(n,e,t,i){const r=GM(e);if(null===r||!sI(r.downloadTokens))return null;const o=r.downloadTokens;if(0===o.length)return null;const u=encodeURIComponent;return o.split(",").map(E=>{const R=n.fullPath;return _d("/b/"+u(n.bucket)+"/o/"+u(R),t,i)+xF({alt:"media",token:E})})[0]}(o,r,n.host,n._protocol)}}(n,t),u);return f.errorHandler=nw(e),f}(n.storage,n._location,tw());return n.storage.makeRequestWithTokens(e,Ml).then(t=>{if(null===t)throw function s$(){return new Ai("no-download-url","The given file does not have any download URLs.")}();return t})}function ZF(n,e){const t=function S$(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),i=new cs(n._location.bucket,t);return new Yp(n.storage,i)}function KF(n,e){if(n instanceof KM){const t=n;if(null==t._bucket)throw function i$(){return new Ai("no-default-bucket","No default bucket found. Did you set the '"+EF+"' property when initializing the app?")}();const i=new Yp(t,t._bucket);return null!=e?KF(i,e):i}return void 0!==e?ZF(n,e):n}function d3(n,e){if(e&&function u3(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof KM)return function c3(n,e){return new Yp(n,e)}(n,e);throw A_("To use ref(service, url), the first argument must be a Storage instance.")}return KF(n,e)}function YF(n,e){const t=e?.[EF];return null==t?null:cs.makeFromBucketSpec(t,n)}class KM{constructor(e,t,i,r,o){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=wF,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?cs.makeFromBucketSpec(r,this._host):YF(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?cs.makeFromBucketSpec(this._url,e):YF(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){HM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){HM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ke.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const i=yield t.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ke.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Yp(this,e)}_makeRequest(e,t,i,r,o=!0){if(this._deleted)return new o$(TF());{const u=function _$(n,e,t,i,r,o,u=!0){const f=xF(n.urlParams),y=n.url+f,E=Object.assign({},n.headers);return function m$(n,e){e&&(n["X-Firebase-GMPID"]=e)}(E,e),function f$(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(E,t),function p$(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(E,o),function g$(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(E,i),new h$(y,n.method,E,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,u)}(e,this._appId,i,r,t,this._firebaseVersion,o);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var i=this;return(0,ke.Z)(function*(){const[r,o]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(e,t,r,o).getPromise()})()}}const QF="@firebase/storage";function eB(n,e){return d3(n=(0,Q.m9)(n),e)}function w3(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new KM(t,i,r,e,Dr.SDK_VERSION)}!function E3(){(0,Dr._registerComponent)(new Ss.wA("storage",w3,"PUBLIC").setMultipleInstances(!0)),(0,Dr.registerVersion)(QF,"0.9.12",""),(0,Dr.registerVersion)(QF,"0.9.12","esm2017")}();class cI{constructor(e,t,i){this._delegate=e,this.task=t,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class nB{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new cI(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(i=>{if(e)return e(new cI(i,this,this._ref))},t)}on(e,t,i,r){let o;return t&&(o="function"==typeof t?u=>t(new cI(u,this,this._ref)):{next:t.next?u=>t.next(new cI(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,i||void 0,r||void 0)}}class iB{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new yd(e,this._service))}get items(){return this._delegate.items.map(e=>new yd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class yd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function b3(n,e){return ZF(n,e)}(this._delegate,e);return new yd(t,this.storage)}get root(){return new yd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new yd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new nB(function f3(n,e,t){return function t3(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new GF(n,new $u(e),t)}(n=(0,Q.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Yo.RAW,i){this._throwIfRoot("putString");const r=zM(t,e),o=Object.assign({},i);return null==o.contentType&&null!=r.contentType&&(o.contentType=r.contentType),new nB(new GF(this._delegate,new $u(r.data,!0),o),this)}listAll(){return function _3(n){return function r3(n){const e={prefixes:[],items:[]};return $F(n,e).then(()=>e)}(n=(0,Q.m9)(n))}(this._delegate).then(e=>new iB(e,this.storage))}list(e){return function g3(n,e){return qF(n=(0,Q.m9)(n),e)}(this._delegate,e||void 0).then(t=>new iB(t,this.storage))}getMetadata(){return function p3(n){return function s3(n){n._throwIfRoot("getMetadata");const e=BF(n.storage,n._location,tw());return n.storage.makeRequestWithTokens(e,Ml)}(n=(0,Q.m9)(n))}(this._delegate)}updateMetadata(e){return function m3(n,e){return function o3(n,e){n._throwIfRoot("updateMetadata");const t=function V$(n,e,t,i){const o=_d(e.fullServerUrl(),n.host,n._protocol),f=WM(t,i),E=n.maxOperationRetryTime,S=new qu(o,"PATCH",lI(n,i),E);return S.headers={"Content-Type":"application/json; charset=utf-8"},S.body=f,S.errorHandler=nw(e),S}(n.storage,n._location,e,tw());return n.storage.makeRequestWithTokens(t,Ml)}(n=(0,Q.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function y3(n){return a3(n=(0,Q.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function v3(n){return function l3(n){n._throwIfRoot("deleteObject");const e=function U$(n,e){const i=_d(e.fullServerUrl(),n.host,n._protocol),f=new qu(i,"DELETE",function u(y,E){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=nw(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ml)}(n=(0,Q.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw SF(e)}}class rB{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(sB(e))throw A_("ref() expected a child path but got a URL, use refFromURL instead.");return new yd(eB(this._delegate,e),this)}refFromURL(e){if(!sB(e))throw A_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{cs.makeFromUrl(e,this._delegate.host)}catch{throw A_("refFromUrl() expected a valid full URL but got an invalid one.")}return new yd(eB(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,i={}){!function tB(n,e,t,i={}){!function h3(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,Q.Sg)(r,n.app.options.projectId))}(n,e,t,i)}(this._delegate,e,t,i)}}function sB(n){return/^[A-Za-z]+:\/\//.test(n)}function T3(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:e});return new rB(t,i)}function oB(n){const e=function A3(n){return new Ei.y(e=>{const t=u=>e.next(u);t(n.snapshot);const o=n.on("state_changed",t);return n.then(u=>{t(u),e.complete()},u=>{t(n.snapshot),(u=>{e.error(u)})(u)}),function(){o()}}).pipe(iD(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,bn.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function dI(n){return{getDownloadURL:()=>ur(void 0).pipe(un.fc,Cr(()=>n.getDownloadURL()),un.iC),getMetadata:()=>ur(void 0).pipe(un.fc,Cr(()=>n.getMetadata()),un.iC),delete:()=>(0,qn.D)(n.delete()),child:e=>dI(n.child(e)),updateMetadata:e=>(0,qn.D)(n.updateMetadata(e)),put:(e,t)=>oB(n.put(e,t)),putString:(e,t,i)=>oB(n.putString(e,t,i)),list:e=>(0,qn.D)(n.list(e)),listAll:()=>(0,qn.D)(n.listAll())}}!function S3(n){const e={TaskState:Bs,TaskEvent:W$,StringFormat:Yo,Storage:rB,Reference:yd};n.INTERNAL.registerComponent(new Ss.wA("storage-compat",T3,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.20")}(Ea.Z);const x3=new h.OlP("angularfire2.storageBucket"),M3=new h.OlP("angularfire2.storage.maxUploadRetryTime"),k3=new h.OlP("angularfire2.storage.maxOperationRetryTime"),R3=new h.OlP("angularfire2.storage.use-emulator");let P3=(()=>{class n{constructor(t,i,r,o,u,f,y,E,S,R){const H=(0,Pn.on)(t,u,i);this.storage=(0,Pn.cc)(`${H.name}.storage.${r}`,"AngularFireStorage",H.name,()=>{const K=u.runOutsideAngular(()=>H.storage(r||void 0)),J=S;return J&&K.useEmulator(...J),y&&K.setMaxUploadRetryTime(y),E&&K.setMaxOperationRetryTime(E),K},[y,E])}ref(t){return dI(this.storage.ref(t))}refFromURL(t){return dI(this.storage.refFromURL(t))}upload(t,i,r){return dI(this.storage.ref(t)).put(i,r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Pn.Dh),h.LFG(Pn.xv,8),h.LFG(x3,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(un.HU),h.LFG(M3,8),h.LFG(k3,8),h.LFG(R3,8),h.LFG(kp,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),O3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),N3=(()=>{class n{constructor(){a_.Z.registerVersion("angularfire",un.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[P3],imports:[O3]}),n})();function YM(){return(0,ti.e)((n,e)=>{let t,i=!1;n.subscribe((0,In.x)(e,r=>{const o=t;t=r,i&&e.next([o,r]),i=!0}))})}var bt,L3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vd={},QM=QM||{},$t=L3||self;function hI(){}function fI(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function iw(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var XM="closure_uid_"+(1e9*Math.random()>>>0),B3=0;function V3(n,e,t){return n.call.apply(n.bind,arguments)}function U3(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function ds(n,e,t){return(ds=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?V3:U3).apply(null,arguments)}function pI(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function qr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(i,r,o){for(var u=Array(arguments.length-2),f=2;f<arguments.length;f++)u[f-2]=arguments[f];return e.prototype[r].apply(i,u)}}function Yh(){this.s=this.s,this.o=this.o}var j3={};Yh.prototype.s=!1,Yh.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function F3(n){return Object.prototype.hasOwnProperty.call(n,XM)&&n[XM]||(n[XM]=++B3)}(this);delete j3[n]}},Yh.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const aB=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function JM(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function lB(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(fI(i)){const r=n.length||0,o=i.length||0;n.length=r+o;for(let u=0;u<o;u++)n[r+u]=i[u]}else n.push(i)}}function hs(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}hs.prototype.h=function(){this.defaultPrevented=!0};var z3=function(){if(!$t.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{$t.addEventListener("test",hI,e),$t.removeEventListener("test",hI,e)}catch{}return n}();function mI(n){return/^[\s\xa0]*$/.test(n)}var uB=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ek(n,e){return n<e?-1:n>e?1:0}function gI(){var n=$t.navigator;return n&&(n=n.userAgent)?n:""}function Ku(n){return-1!=gI().indexOf(n)}function tk(n){return tk[" "](n),n}tk[" "]=hI;var _I,n,W3=Ku("Opera"),k_=Ku("Trident")||Ku("MSIE"),cB=Ku("Edge"),nk=cB||k_,dB=Ku("Gecko")&&!(-1!=gI().toLowerCase().indexOf("webkit")&&!Ku("Edge"))&&!(Ku("Trident")||Ku("MSIE"))&&!Ku("Edge"),$3=-1!=gI().toLowerCase().indexOf("webkit")&&!Ku("Edge");function hB(){var n=$t.document;return n?n.documentMode:void 0}e:{var ik="",rk=(n=gI(),dB?/rv:([^\);]+)(\)|;)/.exec(n):cB?/Edge\/([\d\.]+)/.exec(n):k_?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):$3?/WebKit\/(\S+)/.exec(n):W3?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(rk&&(ik=rk?rk[1]:""),k_){var sk=hB();if(null!=sk&&sk>parseFloat(ik)){_I=String(sk);break e}}_I=ik}var q3={};var K3=$t.document&&k_&&(hB()||parseInt(_I,10))||void 0;function rw(n,e){if(hs.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(dB){e:{try{tk(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Y3[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&rw.X.h.call(this)}}qr(rw,hs);var Y3={2:"touch",3:"pen",4:"mouse"};rw.prototype.h=function(){rw.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var sw="closure_listenable_"+(1e6*Math.random()|0),Q3=0;function X3(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ha=r,this.key=++Q3,this.ba=this.ea=!1}function yI(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function ak(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function pB(n){const e={};for(const t in n)e[t]=n[t];return e}const mB="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gB(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let o=0;o<mB.length;o++)t=mB[o],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function vI(n){this.src=n,this.g={},this.h=0}function lk(n,e){var t=e.type;if(t in n.g){var o,i=n.g[t],r=aB(i,e);(o=0<=r)&&Array.prototype.splice.call(i,r,1),o&&(yI(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function uk(n,e,t,i){for(var r=0;r<n.length;++r){var o=n[r];if(!o.ba&&o.listener==e&&o.capture==!!t&&o.ha==i)return r}return-1}vI.prototype.add=function(n,e,t,i,r){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var u=uk(n,e,i,r);return-1<u?(e=n[u],t||(e.ea=!1)):((e=new X3(e,this.src,o,!!i,r)).ea=t,n.push(e)),e};var ck="closure_lm_"+(1e6*Math.random()|0),dk={};function _B(n,e,t,i,r){if(i&&i.once)return vB(n,e,t,i,r);if(Array.isArray(e)){for(var o=0;o<e.length;o++)_B(n,e[o],t,i,r);return null}return t=mk(t),n&&n[sw]?n.N(e,t,iw(i)?!!i.capture:!!i,r):yB(n,e,t,!1,i,r)}function yB(n,e,t,i,r,o){if(!e)throw Error("Invalid event type");var u=iw(r)?!!r.capture:!!r,f=fk(n);if(f||(n[ck]=f=new vI(n)),(t=f.add(e,t,i,u,o)).proxy)return t;if(i=function J3(){const e=eq;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)z3||(r=u),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(wB(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function vB(n,e,t,i,r){if(Array.isArray(e)){for(var o=0;o<e.length;o++)vB(n,e[o],t,i,r);return null}return t=mk(t),n&&n[sw]?n.O(e,t,iw(i)?!!i.capture:!!i,r):yB(n,e,t,!0,i,r)}function bB(n,e,t,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)bB(n,e[o],t,i,r);else i=iw(i)?!!i.capture:!!i,t=mk(t),n&&n[sw]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=uk(o=n.g[e],t,i,r))&&(yI(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=fk(n))&&(e=n.g[e.toString()],n=-1,e&&(n=uk(e,t,i,r)),(t=-1<n?e[n]:null)&&hk(t))}function hk(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[sw])lk(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(wB(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=fk(e))?(lk(t,n),0==t.h&&(t.src=null,e[ck]=null)):yI(n)}}}function wB(n){return n in dk?dk[n]:dk[n]="on"+n}function eq(n,e){if(n.ba)n=!0;else{e=new rw(e,this);var t=n.listener,i=n.ha||n.src;n.ea&&hk(n),n=t.call(i,e)}return n}function fk(n){return(n=n[ck])instanceof vI?n:null}var pk="__closure_events_fn_"+(1e9*Math.random()>>>0);function mk(n){return"function"==typeof n?n:(n[pk]||(n[pk]=function(e){return n.handleEvent(e)}),n[pk])}function kr(){Yh.call(this),this.i=new vI(this),this.P=this,this.I=null}function Zr(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,"string"==typeof e)e=new hs(e,n);else if(e instanceof hs)e.target=e.target||n;else{var r=e;gB(e=new hs(i,n),r)}if(r=!0,t)for(var o=t.length-1;0<=o;o--){var u=e.g=t[o];r=bI(u,i,!0,e)&&r}if(r=bI(u=e.g=n,i,!0,e)&&r,r=bI(u,i,!1,e)&&r,t)for(o=0;o<t.length;o++)r=bI(u=e.g=t[o],i,!1,e)&&r}function bI(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var u=e[o];if(u&&!u.ba&&u.capture==t){var f=u.listener,y=u.ha||u.src;u.ea&&lk(n.i,u),r=!1!==f.call(y,i)&&r}}return r&&!i.defaultPrevented}qr(kr,Yh),kr.prototype[sw]=!0,kr.prototype.removeEventListener=function(n,e,t,i){bB(this,n,e,t,i)},kr.prototype.M=function(){if(kr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)yI(t[i]);delete n.g[e],n.h--}}this.I=null},kr.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},kr.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var gk=$t.JSON.stringify;function tq(){var n=DB;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var _k,EB=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new iq,n=>n.reset());class iq{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function rq(n){$t.setTimeout(()=>{throw n},0)}function CB(n,e){_k||function sq(){var n=$t.Promise.resolve(void 0);_k=function(){n.then(oq)}}(),yk||(_k(),yk=!0),DB.add(n,e)}var yk=!1,DB=new class nq{constructor(){this.h=this.g=null}add(e,t){const i=EB.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function oq(){for(var n;n=tq();){try{n.h.call(n.g)}catch(t){rq(t)}var e=EB;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}yk=!1}function wI(n,e){kr.call(this),this.h=n||1,this.g=e||$t,this.j=ds(this.lb,this),this.l=Date.now()}function vk(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function bk(n,e,t){if("function"==typeof n)t&&(n=ds(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ds(n.handleEvent,n)}return 2147483647<Number(e)?-1:$t.setTimeout(n,e||0)}function IB(n){n.g=bk(()=>{n.g=null,n.i&&(n.i=!1,IB(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}qr(wI,kr),(bt=wI.prototype).ca=!1,bt.R=null,bt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Zr(this,"tick"),this.ca&&(vk(this),this.start()))}},bt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},bt.M=function(){wI.X.M.call(this),vk(this),delete this.g};class aq extends Yh{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:IB(this)}M(){super.M(),this.g&&($t.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ow(n){Yh.call(this),this.h=n,this.g={}}qr(ow,Yh);var TB=[];function SB(n,e,t,i){Array.isArray(t)||(t&&(TB[0]=t.toString()),t=TB);for(var r=0;r<t.length;r++){var o=_B(e,t[r],i||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function AB(n){ak(n.g,function(e,t){this.g.hasOwnProperty(t)&&hk(e)},n),n.g={}}function EI(){this.g=!0}function R_(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function dq(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var u=1;u<r.length;u++)r[u]=""}}}return gk(t)}catch{return e}}(n,t)+(i?" "+i:"")})}ow.prototype.M=function(){ow.X.M.call(this),AB(this)},ow.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},EI.prototype.Aa=function(){this.g=!1},EI.prototype.info=function(){};var Qp={},xB=null;function CI(){return xB=xB||new kr}function MB(n){hs.call(this,Qp.Pa,n)}function aw(n){const e=CI();Zr(e,new MB(e,n))}function kB(n,e){hs.call(this,Qp.STAT_EVENT,n),this.stat=e}function Vs(n){const e=CI();Zr(e,new kB(e,n))}function RB(n,e){hs.call(this,Qp.Qa,n),this.size=e}function lw(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return $t.setTimeout(function(){n()},e)}Qp.Pa="serverreachability",qr(MB,hs),Qp.STAT_EVENT="statevent",qr(kB,hs),Qp.Qa="timingevent",qr(RB,hs);var DI={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},PB={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function wk(){}function NB(){}wk.prototype.h=null;var Dk,uw={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Ek(){hs.call(this,"d")}function Ck(){hs.call(this,"c")}function II(){}function cw(n,e,t,i){this.l=n,this.j=e,this.m=t,this.U=i||1,this.S=new ow(this),this.O=hq,this.T=new wI(n=nk?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new LB}function LB(){this.i=null,this.g="",this.h=!1}qr(Ek,hs),qr(Ck,hs),qr(II,wk),II.prototype.g=function(){return new XMLHttpRequest},II.prototype.i=function(){return{}},Dk=new II;var hq=45e3,Ik={},TI={};function Tk(n,e,t){n.K=1,n.v=MI(bd(e)),n.s=t,n.P=!0,FB(n,null)}function FB(n,e){n.F=Date.now(),dw(n),n.A=bd(n.v);var t=n.A,i=n.U;Array.isArray(i)||(i=[String(i)]),qB(t.i,"t",i),n.C=0,t=n.l.H,n.h=new LB,n.g=_V(n.l,t?e:null,!n.s),0<n.N&&(n.L=new aq(ds(n.La,n,n.g),n.N)),SB(n.S,n.g,"readystatechange",n.ib),e=n.H?pB(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),aw(1),function lq(n,e,t,i,r,o){n.info(function(){if(n.g)if(o)for(var u="",f=o.split("&"),y=0;y<f.length;y++){var E=f[y].split("=");if(1<E.length){var S=E[0];E=E[1];var R=S.split("_");u=2<=R.length&&"type"==R[1]?u+(S+"=")+E+"&":u+(S+"=redacted&")}}else u=null;else u=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.U,n.s)}function BB(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function VB(n,e,t){let r,i=!0;for(;!n.I&&n.C<t.length;){if(r=fq(n,t),r==TI){4==e&&(n.o=4,Vs(14),i=!1),R_(n.j,n.m,null,"[Incomplete Response]");break}if(r==Ik){n.o=4,Vs(15),R_(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}R_(n.j,n.m,r,null),Sk(n,r)}BB(n)&&r!=TI&&r!=Ik&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Vs(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Nk(e),e.K=!0,Vs(11))):(R_(n.j,n.m,t,"[Invalid Chunked Response]"),Xp(n),hw(n))}function fq(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?TI:(t=Number(e.substring(t,i)),isNaN(t)?Ik:(i+=1)+t>e.length?TI:(e=e.substr(i,t),n.C=i+t,e))}function dw(n){n.V=Date.now()+n.O,UB(n,n.O)}function UB(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=lw(ds(n.gb,n),e)}function SI(n){n.B&&($t.clearTimeout(n.B),n.B=null)}function hw(n){0==n.l.G||n.I||fV(n.l,n)}function Xp(n){SI(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,vk(n.T),AB(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Sk(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Ak(t.h,n)))if(!n.J&&Ak(t.h,n)&&3==t.G){try{var i=t.Fa.g.parse(e)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;LI(t),OI(t)}Ok(t),Vs(18)}}else t.Ba=r[1],0<t.Ba-t.T&&37500>r[2]&&t.L&&0==t.A&&!t.v&&(t.v=lw(ds(t.cb,t),6e3));if(1>=YB(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else em(t,11)}else if((n.J||t.g==n)&&LI(t),!mI(e))for(r=t.Fa.g.parse(e),e=0;e<r.length;e++){let E=r[e];if(t.T=E[0],E=E[1],2==t.G)if("c"==E[0]){t.I=E[1],t.ka=E[2];const S=E[3];null!=S&&(t.ma=S,t.j.info("VER="+t.ma));const R=E[4];null!=R&&(t.Ca=R,t.j.info("SVER="+t.Ca));const H=E[5];null!=H&&"number"==typeof H&&0<H&&(t.J=i=1.5*H,t.j.info("backChannelRequestTimeoutMs_="+i)),i=t;const K=n.g;if(K){const J=K.g?K.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(J){var o=i.h;o.g||-1==J.indexOf("spdy")&&-1==J.indexOf("quic")&&-1==J.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(xk(o,o.h),o.h=null))}if(i.D){const le=K.g?K.g.getResponseHeader("X-HTTP-Session-Id"):null;le&&(i.za=le,fi(i.F,i.D,le))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var u=n;if((i=t).sa=gV(i,i.H?i.ka:null,i.V),u.J){QB(i.h,u);var f=u,y=i.J;y&&f.setTimeout(y),f.B&&(SI(f),dw(f)),i.g=u}else dV(i);0<t.i.length&&NI(t)}else"stop"!=E[0]&&"close"!=E[0]||em(t,7);else 3==t.G&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?em(t,7):Pk(t):"noop"!=E[0]&&t.l&&t.l.wa(E),t.A=0)}aw(4)}catch{}}function HB(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(fI(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function mq(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(fI(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function pq(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(fI(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],t&&t[o],n)}(bt=cw.prototype).setTimeout=function(n){this.O=n},bt.ib=function(n){n=n.target;const e=this.L;e&&3==wd(n)?e.l():this.La(n)},bt.La=function(n){try{if(n==this.g)e:{const S=wd(this.g);var e=this.g.Ea();const R=this.g.aa();if(!(3>S)&&(3!=S||nk||this.g&&(this.h.h||this.g.fa()||sV(this.g)))){this.I||4!=S||7==e||aw(8==e||0>=R?3:2),SI(this);var t=this.g.aa();this.Y=t;t:if(BB(this)){var i=sV(this.g);n="";var r=i.length,o=4==wd(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Xp(this),hw(this);var u="";break t}this.h.i=new $t.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:o&&e==r-1});i.splice(0,r),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==t,function uq(n,e,t,i,r,o,u){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+o+" "+u})}(this.j,this.u,this.A,this.m,this.U,S,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var f,y=this.g;if((f=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mI(f)){var E=f;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,Vs(12),Xp(this),hw(this);break e}R_(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Sk(this,t)}this.P?(VB(this,S,u),nk&&this.i&&3==S&&(SB(this.S,this.T,"tick",this.hb),this.T.start())):(R_(this.j,this.m,u,null),Sk(this,u)),4==S&&Xp(this),this.i&&!this.I&&(4==S?fV(this.l,this):(this.i=!1,dw(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Vs(12)):(this.o=0,Vs(13)),Xp(this),hw(this)}}}catch{}},bt.hb=function(){if(this.g){var n=wd(this.g),e=this.g.fa();this.C<e.length&&(SI(this),VB(this,n,e),this.i&&4!=n&&dw(this))}},bt.cancel=function(){this.I=!0,Xp(this)},bt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function cq(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(aw(3),Vs(17)),Xp(this),this.o=2,hw(this)):UB(this,this.V-n)};var jB=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jp(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Jp){this.h=void 0!==e?e:n.h,AI(this,n.j),this.s=n.s,this.g=n.g,xI(this,n.m),this.l=n.l,e=n.i;var t=new mw;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),zB(this,t),this.o=n.o}else n&&(t=String(n).match(jB))?(this.h=!!e,AI(this,t[1]||"",!0),this.s=fw(t[2]||""),this.g=fw(t[3]||"",!0),xI(this,t[4]),this.l=fw(t[5]||"",!0),zB(this,t[6]||"",!0),this.o=fw(t[7]||"")):(this.h=!!e,this.i=new mw(null,this.h))}function bd(n){return new Jp(n)}function AI(n,e,t){n.j=t?fw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function xI(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function zB(n,e,t){e instanceof mw?(n.i=e,function Eq(n,e){e&&!n.j&&(Qh(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(WB(this,i),qB(this,r,t))},n)),n.j=e}(n.i,n.h)):(t||(e=pw(e,bq)),n.i=new mw(e,n.h))}function fi(n,e,t){n.i.set(e,t)}function MI(n){return fi(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function fw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function pw(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,_q),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function _q(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Jp.prototype.toString=function(){var n=[],e=this.j;e&&n.push(pw(e,GB,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(pw(e,GB,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(pw(t,"/"==t.charAt(0)?vq:yq,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",pw(t,wq)),n.join("")};var GB=/[#\/\?@]/g,yq=/[#\?:]/g,vq=/[#\?]/g,bq=/[#\?@]/g,wq=/#/g;function mw(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Qh(n){n.g||(n.g=new Map,n.h=0,n.i&&function gq(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var o=n[t].substring(0,i);r=n[t].substring(i+1)}else o=n[t];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function WB(n,e){Qh(n),e=P_(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function $B(n,e){return Qh(n),e=P_(n,e),n.g.has(e)}function qB(n,e,t){WB(n,e),0<t.length&&(n.i=null,n.g.set(P_(n,e),JM(t)),n.h+=t.length)}function P_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function ZB(n){this.l=n||Dq,n=$t.PerformanceNavigationTiming?0<(n=$t.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!($t.g&&$t.g.Ga&&$t.g.Ga()&&$t.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(bt=mw.prototype).add=function(n,e){Qh(this),this.i=null,n=P_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},bt.forEach=function(n,e){Qh(this),this.g.forEach(function(t,i){t.forEach(function(r){n.call(e,r,i,this)},this)},this)},bt.oa=function(){Qh(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const r=n[i];for(let o=0;o<r.length;o++)t.push(e[i])}return t},bt.W=function(n){Qh(this);let e=[];if("string"==typeof n)$B(this,n)&&(e=e.concat(this.g.get(P_(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},bt.set=function(n,e){return Qh(this),this.i=null,$B(this,n=P_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},bt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},bt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const o=encodeURIComponent(String(i)),u=this.W(i);for(i=0;i<u.length;i++){var r=o;""!==u[i]&&(r+="="+encodeURIComponent(String(u[i]))),n.push(r)}}return this.i=n.join("&")};var Dq=10;function KB(n){return!!n.h||!!n.g&&n.g.size>=n.j}function YB(n){return n.h?1:n.g?n.g.size:0}function Ak(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function xk(n,e){n.g?n.g.add(e):n.h=e}function QB(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function XB(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return JM(n.i)}function Mk(){}function Iq(){this.g=new Mk}function Tq(n,e,t){const i=t||"";try{HB(n,function(r,o){let u=r;iw(r)&&(u=gk(r)),e.push(i+o+"="+encodeURIComponent(u))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function kI(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function gw(n){this.l=n.ac||null,this.j=n.jb||!1}function RI(n,e){kr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=kk,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ZB.prototype.cancel=function(){if(this.i=XB(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Mk.prototype.stringify=function(n){return $t.JSON.stringify(n,void 0)},Mk.prototype.parse=function(n){return $t.JSON.parse(n,void 0)},qr(gw,wk),gw.prototype.g=function(){return new RI(this.l,this.j)},gw.prototype.i=function(n){return function(){return n}}({}),qr(RI,kr);var kk=0;function JB(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function _w(n){n.readyState=4,n.l=null,n.j=null,n.A=null,yw(n)}function yw(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(bt=RI.prototype).open=function(n,e){if(this.readyState!=kk)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,yw(this)},bt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||$t).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},bt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,_w(this)),this.readyState=kk},bt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,yw(this)),this.g&&(this.readyState=3,yw(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof $t.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;JB(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},bt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?_w(this):yw(this),3==this.readyState&&JB(this)}},bt.Va=function(n){this.g&&(this.response=this.responseText=n,_w(this))},bt.Ua=function(n){this.g&&(this.response=n,_w(this))},bt.ga=function(){this.g&&_w(this)},bt.setRequestHeader=function(n,e){this.v.append(n,e)},bt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},bt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(RI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Aq=$t.JSON.parse;function xi(n){kr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=eV,this.K=this.L=!1}qr(xi,kr);var eV="",xq=/^https?$/i,Mq=["POST","PUT"];function tV(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,nV(n),PI(n)}function nV(n){n.D||(n.D=!0,Zr(n,"complete"),Zr(n,"error"))}function iV(n){if(n.h&&typeof QM<"u"&&(!n.C[1]||4!=wd(n)||2!=n.aa()))if(n.v&&4==wd(n))bk(n.Ha,0,n);else if(Zr(n,"readystatechange"),4==wd(n)){n.h=!1;try{const f=n.aa();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===f){var r=String(n.H).match(jB)[1]||null;if(!r&&$t.self&&$t.self.location){var o=$t.self.location.protocol;r=o.substr(0,o.length-1)}i=!xq.test(r?r.toLowerCase():"")}t=i}if(t)Zr(n,"complete"),Zr(n,"success");else{n.m=6;try{var u=2<wd(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.aa()+"]",nV(n)}}finally{PI(n)}}}function PI(n,e){if(n.g){rV(n);const t=n.g,i=n.C[0]?hI:null;n.g=null,n.C=null,e||Zr(n,"ready");try{t.onreadystatechange=i}catch{}}}function rV(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&($t.clearTimeout(n.A),n.A=null)}function wd(n){return n.g?n.g.readyState:0}function sV(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case eV:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function oV(n){let e="";return ak(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function Rk(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=oV(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):fi(n,e,t))}function vw(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function aV(n){this.Ca=0,this.i=[],this.j=new EI,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=vw("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=vw("baseRetryDelayMs",5e3,n),this.bb=vw("retryDelaySeedMs",1e4,n),this.$a=vw("forwardChannelMaxRetries",2,n),this.ta=vw("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new ZB(n&&n.concurrentRequestLimit),this.Fa=new Iq,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Pk(n){if(lV(n),3==n.G){var e=n.U++,t=bd(n.F);fi(t,"SID",n.I),fi(t,"RID",e),fi(t,"TYPE","terminate"),bw(n,t),(e=new cw(n,n.j,e,void 0)).K=2,e.v=MI(bd(t)),t=!1,$t.navigator&&$t.navigator.sendBeacon&&(t=$t.navigator.sendBeacon(e.v.toString(),"")),!t&&$t.Image&&((new Image).src=e.v,t=!0),t||(e.g=_V(e.l,null),e.g.da(e.v)),e.F=Date.now(),dw(e)}mV(n)}function OI(n){n.g&&(Nk(n),n.g.cancel(),n.g=null)}function lV(n){OI(n),n.u&&($t.clearTimeout(n.u),n.u=null),LI(n),n.h.cancel(),n.m&&("number"==typeof n.m&&$t.clearTimeout(n.m),n.m=null)}function NI(n){KB(n.h)||n.m||(n.m=!0,CB(n.Ja,n),n.C=0)}function uV(n,e){var t;t=e?e.m:n.U++;const i=bd(n.F);fi(i,"SID",n.I),fi(i,"RID",t),fi(i,"AID",n.T),bw(n,i),n.o&&n.s&&Rk(i,n.o,n.s),t=new cw(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=cV(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),xk(n.h,t),Tk(t,i,e)}function bw(n,e){n.ia&&ak(n.ia,function(t,i){fi(e,i,t)}),n.l&&HB({},function(t,i){fi(e,i,t)})}function cV(n,e,t){t=Math.min(n.i.length,t);var i=n.l?ds(n.l.Ra,n.l,n):null;e:{var r=n.i;let o=-1;for(;;){const u=["count="+t];-1==o?0<t?(o=r[0].h,u.push("ofs="+o)):o=0:u.push("ofs="+o);let f=!0;for(let y=0;y<t;y++){let E=r[y].h;const S=r[y].g;if(E-=o,0>E)o=Math.max(0,r[y].h-100),f=!1;else try{Tq(S,u,"req"+E+"_")}catch{i&&i(S)}}if(f){i=u.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,i}function dV(n){n.g||n.u||(n.Z=1,CB(n.Ia,n),n.A=0)}function Ok(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=lw(ds(n.Ia,n),pV(n,n.A)),n.A++,0))}function Nk(n){null!=n.B&&($t.clearTimeout(n.B),n.B=null)}function hV(n){n.g=new cw(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=bd(n.sa);fi(e,"RID","rpc"),fi(e,"SID",n.I),fi(e,"CI",n.L?"0":"1"),fi(e,"AID",n.T),fi(e,"TYPE","xmlhttp"),bw(n,e),n.o&&n.s&&Rk(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=MI(bd(e)),t.s=null,t.P=!0,FB(t,n)}function LI(n){null!=n.v&&($t.clearTimeout(n.v),n.v=null)}function fV(n,e){var t=null;if(n.g==e){LI(n),Nk(n),n.g=null;var i=2}else{if(!Ak(n.h,e))return;t=e.D,QB(n.h,e),i=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.F;var r=n.C;Zr(i=CI(),new RB(i,t,e,r)),NI(n)}else dV(n);else if(3==(r=e.o)||0==r&&0<n.pa||!(1==i&&function Rq(n,e){return!(YB(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=lw(ds(n.Ja,n,e),pV(n,n.C)),n.C++,0)))}(n,e)||2==i&&Ok(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),r){case 1:em(n,5);break;case 4:em(n,10);break;case 3:em(n,6);break;default:em(n,2)}}function pV(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function em(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var i=ds(n.kb,n);t||(t=new Jp("//www.google.com/images/cleardot.gif"),$t.location&&"http"==$t.location.protocol||AI(t,"https"),MI(t)),function Sq(n,e){const t=new EI;if($t.Image){const i=new Image;i.onload=pI(kI,t,i,"TestLoadImage: loaded",!0,e),i.onerror=pI(kI,t,i,"TestLoadImage: error",!1,e),i.onabort=pI(kI,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=pI(kI,t,i,"TestLoadImage: timeout",!1,e),$t.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else Vs(2);n.G=0,n.l&&n.l.va(e),mV(n),lV(n)}function mV(n){if(n.G=0,n.la=[],n.l){const e=XB(n.h);(0!=e.length||0!=n.i.length)&&(lB(n.la,e),lB(n.la,n.i),n.h.i.length=0,JM(n.i),n.i.length=0),n.l.ua()}}function gV(n,e,t){var i=t instanceof Jp?bd(t):new Jp(t,void 0);if(""!=i.g)e&&(i.g=e+"."+i.g),xI(i,i.m);else{var r=$t.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var o=new Jp(null,void 0);i&&AI(o,i),e&&(o.g=e),r&&xI(o,r),t&&(o.l=t),i=o}return e=n.za,(t=n.D)&&e&&fi(i,t,e),fi(i,"VER",n.ma),bw(n,i),i}function _V(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new xi(t&&n.Da&&!n.ra?new gw({jb:!0}):n.ra)).Ka(n.H),e}function yV(){}function FI(){if(k_&&!(10<=Number(K3)))throw Error("Environmental error: no available transport.")}function Qo(n,e){kr.call(this),this.g=new aV(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!mI(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!mI(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new O_(this)}function vV(n){Ek.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function bV(){Ck.call(this),this.status=1}function O_(n){this.g=n}(bt=xi.prototype).Ka=function(n){this.L=n},bt.da=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Dk.g(),this.C=function OB(n){return n.h||(n.h=n.i())}(this.u?this.u:Dk),this.g.onreadystatechange=ds(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(o){return void tV(this,o)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)t.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const o of i.keys())t.set(o,i.get(o))}i=Array.from(t.keys()).find(o=>"content-type"==o.toLowerCase()),r=$t.FormData&&n instanceof $t.FormData,!(0<=aB(Mq,e))||i||r||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,u]of t)this.g.setRequestHeader(o,u);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{rV(this),0<this.B&&((this.K=function kq(n){return k_&&function Z3(){return function G3(n){var e=q3;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=uB(String(_I)).split("."),t=uB("9").split("."),i=Math.max(e.length,t.length);for(let u=0;0==n&&u<i;u++){var r=e[u]||"",o=t[u]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==r[0].length&&0==o[0].length)break;n=ek(0==r[1].length?0:parseInt(r[1],10),0==o[1].length?0:parseInt(o[1],10))||ek(0==r[2].length,0==o[2].length)||ek(r[2],o[2]),r=r[3],o=o[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ds(this.qa,this)):this.A=bk(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){tV(this,o)}},bt.qa=function(){typeof QM<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Zr(this,"timeout"),this.abort(8))},bt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Zr(this,"complete"),Zr(this,"abort"),PI(this))},bt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),PI(this,!0)),xi.X.M.call(this)},bt.Ha=function(){this.s||(this.F||this.v||this.l?iV(this):this.fb())},bt.fb=function(){iV(this)},bt.aa=function(){try{return 2<wd(this)?this.g.status:-1}catch{return-1}},bt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},bt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Aq(e)}},bt.Ea=function(){return this.m},bt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(bt=aV.prototype).ma=8,bt.G=1,bt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const r=new cw(this,this.j,n,void 0);let o=this.s;if(this.S&&(o?(o=pB(o),gB(o,this.S)):o=this.S),null!==this.o||this.N||(r.H=o,o=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var i=this.i[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=cV(this,r,e),fi(t=bd(this.F),"RID",n),fi(t,"CVER",22),this.D&&fi(t,"X-HTTP-Session-Id",this.D),bw(this,t),o&&(this.N?e="headers="+encodeURIComponent(String(oV(o)))+"&"+e:this.o&&Rk(t,this.o,o)),xk(this.h,r),this.Ya&&fi(t,"TYPE","init"),this.O?(fi(t,"$req",e),fi(t,"SID","null"),r.Z=!0,Tk(r,t,null)):Tk(r,t,e),this.G=2}}else 3==this.G&&(n?uV(this,n):0==this.i.length||KB(this.h)||uV(this))},bt.Ia=function(){if(this.u=null,hV(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=lw(ds(this.eb,this),n)}},bt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Vs(10),OI(this),hV(this))},bt.cb=function(){null!=this.v&&(this.v=null,OI(this),Ok(this),Vs(19))},bt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Vs(2)):(this.j.info("Failed to ping google.com"),Vs(1))},(bt=yV.prototype).xa=function(){},bt.wa=function(){},bt.va=function(){},bt.ua=function(){},bt.Ra=function(){},FI.prototype.g=function(n,e){return new Qo(n,e)},qr(Qo,kr),Qo.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Vs(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=gV(n,null,n.V),NI(n)},Qo.prototype.close=function(){Pk(this.g)},Qo.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=gk(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&NI(e)},Qo.prototype.M=function(){this.g.l=null,delete this.j,Pk(this.g),delete this.g,Qo.X.M.call(this)},qr(vV,Ek),qr(bV,Ck),qr(O_,yV),O_.prototype.xa=function(){Zr(this.g,"a")},O_.prototype.wa=function(n){Zr(this.g,new vV(n))},O_.prototype.va=function(n){Zr(this.g,new bV(n))},O_.prototype.ua=function(){Zr(this.g,"b")},FI.prototype.createWebChannel=FI.prototype.g,Qo.prototype.send=Qo.prototype.u,Qo.prototype.open=Qo.prototype.m,Qo.prototype.close=Qo.prototype.close,DI.NO_ERROR=0,DI.TIMEOUT=8,DI.HTTP_ERROR=6,PB.COMPLETE="complete",NB.EventType=uw,uw.OPEN="a",uw.CLOSE="b",uw.ERROR="c",uw.MESSAGE="d",kr.prototype.listen=kr.prototype.N,xi.prototype.listenOnce=xi.prototype.O,xi.prototype.getLastError=xi.prototype.Oa,xi.prototype.getLastErrorCode=xi.prototype.Ea,xi.prototype.getStatus=xi.prototype.aa,xi.prototype.getResponseJson=xi.prototype.Sa,xi.prototype.getResponseText=xi.prototype.fa,xi.prototype.send=xi.prototype.da,xi.prototype.setWithCredentials=xi.prototype.Ka;var Pq=vd.createWebChannelTransport=function(){return new FI},Oq=vd.getStatEventTarget=function(){return CI()},Lk=vd.ErrorCode=DI,Nq=vd.EventType=PB,Lq=vd.Event=Qp,wV=vd.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Fq=vd.FetchXmlHttpFactory=gw,BI=vd.WebChannel=NB,Bq=vd.XhrIo=xi;const EV="@firebase/firestore";class Rr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rr.UNAUTHENTICATED=new Rr(null),Rr.GOOGLE_CREDENTIALS=new Rr("google-credentials-uid"),Rr.FIRST_PARTY=new Rr("first-party-uid"),Rr.MOCK_USER=new Rr("mock-user");let N_="9.12.1";const Xh=new zr.Yd("@firebase/firestore");function Fk(){return Xh.logLevel}function Ge(n,...e){if(Xh.logLevel<=zr.in.DEBUG){const t=e.map(Bk);Xh.debug(`Firestore (${N_}): ${n}`,...t)}}function Hi(n,...e){if(Xh.logLevel<=zr.in.ERROR){const t=e.map(Bk);Xh.error(`Firestore (${N_}): ${n}`,...t)}}function tm(n,...e){if(Xh.logLevel<=zr.in.WARN){const t=e.map(Bk);Xh.warn(`Firestore (${N_}): ${n}`,...t)}}function Bk(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ht(n="Unexpected state"){const e=`FIRESTORE (${N_}) INTERNAL ASSERTION FAILED: `+n;throw Hi(e),new Error(e)}function Ot(n,e){n||ht()}function st(n,e){return n}const xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends Q.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class pr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class CV{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Hq{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Rr.UNAUTHENTICATED))}shutdown(){}}class jq{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class zq{constructor(e){this.t=e,this.currentUser=Rr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const o=E=>this.i!==r?(r=this.i,t(E)):Promise.resolve();let u=new pr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new pr,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const E=u;e.enqueueRetryable((0,ke.Z)(function*(){yield E.promise,yield o(i.currentUser)}))},y=E=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(E=>y(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?y(E):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new pr)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ot("string"==typeof i.accessToken),new CV(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ot(null===e||"string"==typeof e),new Rr(e)}}class Gq{constructor(e,t,i,r){this.h=e,this.l=t,this.m=i,this.g=r,this.type="FirstParty",this.user=Rr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ot(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Wq{constructor(e,t,i,r){this.h=e,this.l=t,this.m=i,this.g=r}getToken(){return Promise.resolve(new Gq(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Rr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class DV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $q{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const i=o=>{null!=o.error&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.A;return this.A=o.token,Ge("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.T.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.T.getImmediate({optional:!0});o?r(o):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ot("string"==typeof t.token),this.A=t.token,new DV(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function qq(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class IV{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=qq(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<t&&(i+=e.charAt(r[o]%e.length))}return i}}function qt(n,e){return n<e?-1:n>e?1:0}function L_(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function TV(n){return n+"\0"}class pi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ue(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ue(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ue(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pi.fromMillis(Date.now())}static fromDate(e){return pi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new pi(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qt(this.nanoseconds,e.nanoseconds):qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Nt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Nt(e)}static min(){return new Nt(new pi(0,0))}static max(){return new Nt(new pi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ww{constructor(e,t,i){void 0===t?t=0:t>e.length&&ht(),void 0===i?i=e.length-t:i>e.length-t&&ht(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===ww.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ww?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const o=e.get(r),u=t.get(r);if(o<u)return-1;if(o>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class yn extends ww{construct(e,t,i){return new yn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ue(xe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new yn(t)}static emptyPath(){return new yn([])}}const Zq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mi extends ww{construct(e,t,i){return new Mi(e,t,i)}static isValidIdentifier(e){return Zq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Mi(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const o=()=>{if(0===i.length)throw new Ue(xe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;r<e.length;){const f=e[r];if("\\"===f){if(r+1===e.length)throw new Ue(xe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[r+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Ue(xe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=y,r+=2}else"`"===f?(u=!u,r++):"."!==f||u?(i+=f,r++):(o(),r++)}if(o(),u)throw new Ue(xe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mi(t)}static emptyPath(){return new Mi([])}}class it{constructor(e){this.path=e}static fromPath(e){return new it(yn.fromString(e))}static fromName(e){return new it(yn.fromString(e).popFirst(5))}static empty(){return new it(yn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===yn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return yn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new it(new yn(e.slice()))}}class VI{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function Vk(n){return n.fields.find(e=>2===e.kind)}function nm(n){return n.fields.filter(e=>2!==e.kind)}VI.UNKNOWN_ID=-1;class UI{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ew{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ew(0,Xo.min())}}function SV(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Nt.fromTimestamp(1e9===i?new pi(t+1,0):new pi(t,i));return new Xo(r,it.empty(),e)}function AV(n){return new Xo(n.readTime,n.key,-1)}class Xo{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Xo(Nt.min(),it.empty(),-1)}static max(){return new Xo(Nt.max(),it.empty(),-1)}}function Uk(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=it.comparator(n.documentKey,e.documentKey),0!==t?t:qt(n.largestBatchId,e.largestBatchId))}const xV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Jh(n){return Hk.apply(this,arguments)}function Hk(){return Hk=(0,ke.Z)(function*(n){if(n.code!==xe.FAILED_PRECONDITION||n.message!==xV)throw n;Ge("LocalStore","Unexpectedly lost primary lease")}),Hk.apply(this,arguments)}class Te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Te((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Te?t:Te.resolve(t)}catch(t){return Te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.reject(t)}static resolve(e){return new Te((t,i)=>{t(e)})}static reject(e){return new Te((t,i)=>{i(e)})}static waitFor(e){return new Te((t,i)=>{let r=0,o=0,u=!1;e.forEach(f=>{++r,f.next(()=>{++o,u&&o===r&&t()},y=>i(y))}),u=!0,o===r&&t()})}static or(e){let t=Te.resolve(!1);for(const i of e)t=t.next(r=>r?Te.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,o)=>{i.push(t.call(this,r,o))}),this.waitFor(i)}static mapArray(e,t){return new Te((i,r)=>{const o=e.length,u=new Array(o);let f=0;for(let y=0;y<o;y++){const E=y;t(e[E]).next(S=>{u[E]=S,++f,f===o&&i(u)},S=>r(S))}})}static doWhile(e,t){return new Te((i,r)=>{const o=()=>{!0===e()?t().next(()=>{o()},r):i()};o()})}}class HI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new pr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Cw(e,t.error)):this.P.resolve()},this.transaction.onerror=i=>{const r=jk(i.target.error);this.P.reject(new Cw(e,r))}}static open(e,t,i,r){try{return new HI(t,e.transaction(r,i))}catch(o){throw new Cw(t,o)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ge("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Xq(t)}}class kl{constructor(e,t,i){this.name=e,this.version=t,this.S=i,12.2===kl.D((0,Q.z$)())&&Hi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ge("SimpleDb","Removing database:",e),im(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Q.hl)())return!1;if(kl.N())return!0;const e=(0,Q.z$)(),t=kl.D(e),i=0<t&&t<10,r=kl.k(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static k(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}F(e){var t=this;return(0,ke.Z)(function*(){return t.db||(Ge("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=u=>{i(u.target.result)},o.onblocked=()=>{r(new Cw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const f=u.target.error;r("VersionError"===f.name?new Ue(xe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Ue(xe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new Cw(e,f))},o.onupgradeneeded=u=>{Ge("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.S.$(u.target.result,o.transaction,u.oldVersion,t.version).next(()=>{Ge("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=i=>t.B(i)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var o=this;return(0,ke.Z)(function*(){const u="readonly"===t;let f=0;for(;;){++f;try{o.db=yield o.F(e);const y=HI.open(o.db,e,u?"readonly":"readwrite",i),E=r(y).next(S=>(y.V(),S)).catch(S=>(y.abort(S),Te.reject(S))).toPromise();return E.catch(()=>{}),yield y.v,E}catch(y){const E=y,S="FirebaseError"!==E.name&&f<3;if(Ge("SimpleDb","Transaction failed with error:",E.message,"Retrying:",S),o.close(),!S)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Qq{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return im(this.U.delete())}}class Cw extends Ue{constructor(e,t){super(xe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ef(n){return"IndexedDbTransactionError"===n.name}class Xq{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(Ge("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(Ge("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),im(i)}add(e){return Ge("SimpleDb","ADD",this.store.name,e,e),im(this.store.add(e))}get(e){return im(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ge("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ge("SimpleDb","DELETE",this.store.name,e),im(this.store.delete(e))}count(){return Ge("SimpleDb","COUNT",this.store.name),im(this.store.count())}W(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),o=[];return this.H(r,(u,f)=>{o.push(f)}).next(()=>o)}{const r=this.store.getAll(i.range);return new Te((o,u)=>{r.onerror=f=>{u(f.target.error)},r.onsuccess=f=>{o(f.target.result)}})}}J(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new Te((r,o)=>{i.onerror=u=>{o(u.target.error)},i.onsuccess=u=>{r(u.target.result)}})}Y(e,t){Ge("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const r=this.cursor(i);return this.H(r,(o,u,f)=>f.delete())}Z(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.H(r,t)}tt(e){const t=this.cursor({});return new Te((i,r)=>{t.onerror=o=>{const u=jk(o.target.error);r(u)},t.onsuccess=o=>{const u=o.target.result;u?e(u.primaryKey,u.value).next(f=>{f?u.continue():i()}):i()}})}H(e,t){const i=[];return new Te((r,o)=>{e.onerror=u=>{o(u.target.error)},e.onsuccess=u=>{const f=u.target.result;if(!f)return void r();const y=new Qq(f),E=t(f.primaryKey,f.value,y);if(E instanceof Te){const S=E.catch(R=>(y.done(),Te.reject(R)));i.push(S)}y.isDone?r():null===y.G?f.continue():f.continue(y.G)}}).next(()=>Te.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function im(n){return new Te((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=jk(i.target.error);t(r)}})}let kV=!1;function jk(n){const e=kl.D((0,Q.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new Ue("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return kV||(kV=!0,setTimeout(()=>{throw i},0)),i}}return n}class Jq{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ge("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ke.Z)(function*(){t.task=null;try{Ge("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(i){ef(i)?Ge("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Jh(i)}yield t.nt(6e4)}))}}class e6{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ke.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.it(i,e))})()}it(e,t){const i=new Set;let r=t,o=!0;return Te.doWhile(()=>!0===o&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!i.has(u))return Ge("IndexBackiller",`Processing collection: ${u}`),this.rt(e,u,r).next(f=>{r-=f,i.add(u)});o=!1})).next(()=>t-r)}rt(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(o=>{const u=o.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.ot(r,o)).next(f=>(Ge("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>u.size)}))}ot(e,t){let i=e;return t.changes.forEach((r,o)=>{const u=AV(o);Uk(u,i)>0&&(i=u)}),new Xo(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}class mo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>t.writeSequenceNumber(i))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function RV(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function rm(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function PV(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}mo.at=-1;class ki{constructor(e,t){this.comparator=e,this.root=t||Kr.EMPTY}insert(e,t){return new ki(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Kr.BLACK,null,null))}remove(e){return new ki(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jI(this.root,e,this.comparator,!1)}getReverseIterator(){return new jI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jI(this.root,e,this.comparator,!0)}}class jI{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kr{constructor(e,t,i,r,o){this.key=e,this.value=t,this.color=i??Kr.RED,this.left=r??Kr.EMPTY,this.right=o??Kr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,o){return new Kr(e??this.key,t??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===o?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Kr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Kr.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ht();const e=this.left.check();if(e!==this.right.check())throw ht();return e+(this.isRed()?0:1)}}Kr.EMPTY=null,Kr.RED=!0,Kr.BLACK=!1,Kr.EMPTY=new class{constructor(){this.size=0}get key(){throw ht()}get value(){throw ht()}get color(){throw ht()}get left(){throw ht()}get right(){throw ht()}copy(n,e,t,i,r){return this}insert(n,e,t){return new Kr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Fn{constructor(e){this.comparator=e,this.data=new ki(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new OV(this.data.getIterator())}getIteratorFrom(e){return new OV(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Fn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=i.getNext().key;if(0!==this.comparator(r,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Fn(this.comparator);return t.data=e,t}}class OV{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function F_(n){return n.hasNext()?n.getNext():void 0}class Jo{constructor(e){this.fields=e,e.sort(Mi.comparator)}static empty(){return new Jo([])}unionWith(e){let t=new Fn(Mi.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Jo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return L_(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class mr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new mr(t)}static fromUint8Array(e){const t=function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r}(e);return new mr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mr.EMPTY_BYTE_STRING=new mr("");const n6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tf(n){if(Ot(!!n),"string"==typeof n){let e=0;const t=n6.exec(n);if(Ot(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ri(n.seconds),nanos:Ri(n.nanos)}}function Ri(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function sm(n){return"string"==typeof n?mr.fromBase64String(n):mr.fromUint8Array(n)}function zk(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function NV(n){const e=n.mapValue.fields.__previous_value__;return zk(e)?NV(e):e}function Dw(n){const e=tf(n.mapValue.fields.__local_write_time__.timestampValue);return new pi(e.seconds,e.nanos)}class i6{constructor(e,t,i,r,o,u,f,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.useFetchStreams=y}}class nf{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new nf("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof nf&&e.projectId===this.projectId&&e.database===this.database}}function Iw(n){return null==n}function Tw(n){return 0===n&&1/n==-1/0}function LV(n){return"number"==typeof n&&Number.isInteger(n)&&!Tw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const rf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zI={nullValue:"NULL_VALUE"};function om(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?zk(n)?4:UV(n)?9007199254740991:10:ht()}function Yu(n,e){if(n===e)return!0;const t=om(n);if(t!==om(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Dw(n).isEqual(Dw(e));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=tf(i.timestampValue),u=tf(r.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return r=e,sm(n.bytesValue).isEqual(sm(r.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return Ri(i.geoPointValue.latitude)===Ri(r.geoPointValue.latitude)&&Ri(i.geoPointValue.longitude)===Ri(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Ri(i.integerValue)===Ri(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=Ri(i.doubleValue),u=Ri(r.doubleValue);return o===u?Tw(o)===Tw(u):isNaN(o)&&isNaN(u)}return!1}(n,e);case 9:return L_(n.arrayValue.values||[],e.arrayValue.values||[],Yu);case 10:return function(i,r){const o=i.mapValue.fields||{},u=r.mapValue.fields||{};if(RV(o)!==RV(u))return!1;for(const f in o)if(o.hasOwnProperty(f)&&(void 0===u[f]||!Yu(o[f],u[f])))return!1;return!0}(n,e);default:return ht()}var r}function Sw(n,e){return void 0!==(n.values||[]).find(t=>Yu(t,e))}function sf(n,e){if(n===e)return 0;const t=om(n),i=om(e);if(t!==i)return qt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return qt(n.booleanValue,e.booleanValue);case 2:return function(r,o){const u=Ri(r.integerValue||r.doubleValue),f=Ri(o.integerValue||o.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1}(n,e);case 3:return FV(n.timestampValue,e.timestampValue);case 4:return FV(Dw(n),Dw(e));case 5:return qt(n.stringValue,e.stringValue);case 6:return function(r,o){const u=sm(r),f=sm(o);return u.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(r,o){const u=r.split("/"),f=o.split("/");for(let y=0;y<u.length&&y<f.length;y++){const E=qt(u[y],f[y]);if(0!==E)return E}return qt(u.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,o){const u=qt(Ri(r.latitude),Ri(o.latitude));return 0!==u?u:qt(Ri(r.longitude),Ri(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,o){const u=r.values||[],f=o.values||[];for(let y=0;y<u.length&&y<f.length;++y){const E=sf(u[y],f[y]);if(E)return E}return qt(u.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,o){if(r===rf.mapValue&&o===rf.mapValue)return 0;if(r===rf.mapValue)return 1;if(o===rf.mapValue)return-1;const u=r.fields||{},f=Object.keys(u),y=o.fields||{},E=Object.keys(y);f.sort(),E.sort();for(let S=0;S<f.length&&S<E.length;++S){const R=qt(f[S],E[S]);if(0!==R)return R;const H=sf(u[f[S]],y[E[S]]);if(0!==H)return H}return qt(f.length,E.length)}(n.mapValue,e.mapValue);default:throw ht()}}function FV(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return qt(n,e);const t=tf(n),i=tf(e),r=qt(t.seconds,i.seconds);return 0!==r?r:qt(t.nanos,i.nanos)}function B_(n){return Gk(n)}function Gk(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=tf(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?sm(n.bytesValue).toBase64():"referenceValue"in n?it.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let r="[",o=!0;for(const u of i.values||[])o?o=!1:r+=",",r+=Gk(u);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let o="{",u=!0;for(const f of r)u?u=!1:o+=",",o+=`${f}:${Gk(i.fields[f])}`;return o+"}"}(n.mapValue):ht();var e}function am(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Wk(n){return!!n&&"integerValue"in n}function Aw(n){return!!n&&"arrayValue"in n}function BV(n){return!!n&&"nullValue"in n}function VV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function GI(n){return!!n&&"mapValue"in n}function xw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return rm(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=xw(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=xw(n.arrayValue.values[t]);return e}return Object.assign({},n)}function UV(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function r6(n){return"nullValue"in n?zI:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?am(nf.empty(),it.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ht()}function s6(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?am(nf.empty(),it.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?rf:ht()}function HV(n,e){const t=sf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function jV(n,e){const t=sf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Yr{constructor(e){this.value=e}static empty(){return new Yr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!GI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=xw(t)}setAll(e){let t=Mi.emptyPath(),i={},r=[];e.forEach((u,f)=>{if(!t.isImmediateParentOf(f)){const y=this.getFieldsMap(t);this.applyChanges(y,i,r),i={},r=[],t=f.popLast()}u?i[f.lastSegment()]=xw(u):r.push(f.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,i,r)}delete(e){const t=this.field(e.popLast());GI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];GI(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){rm(t,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Yr(xw(this.value))}}function zV(n){const e=[];return rm(n.fields,(t,i)=>{const r=new Mi([t]);if(GI(i)){const o=zV(i.mapValue).fields;if(0===o.length)e.push(r);else for(const u of o)e.push(r.child(u))}else e.push(r)}),new Jo(e)}class Yn{constructor(e,t,i,r,o,u){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.data=o,this.documentState=u}static newInvalidDocument(e){return new Yn(e,0,Nt.min(),Nt.min(),Yr.empty(),0)}static newFoundDocument(e,t,i){return new Yn(e,1,t,Nt.min(),i,0)}static newNoDocument(e,t){return new Yn(e,2,t,Nt.min(),Yr.empty(),0)}static newUnknownDocument(e,t){return new Yn(e,3,t,Nt.min(),Yr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class o6{constructor(e,t=null,i=[],r=[],o=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=u,this.endAt=f,this.ht=null}}function GV(n,e=null,t=[],i=[],r=null,o=null,u=null){return new o6(n,e,t,i,r,o,u)}function lm(n){const e=st(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+B_(r.value);var r}).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),Iw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>B_(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>B_(i)).join(",")),e.ht=t}return e.ht}function Mw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!m6(n.orderBy[r],e.orderBy[r]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((t=n.filters[r]).op!==(i=e.filters[r]).op||!t.field.isEqual(i.field)||!Yu(t.value,i.value))return!1;var t,i;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!KV(n.startAt,e.startAt)&&KV(n.endAt,e.endAt)}function WI(n){return it.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function $I(n,e){return n.filters.filter(t=>t instanceof Qr&&t.field.isEqual(e))}function WV(n,e,t){let i=zI,r=!0;for(const o of $I(n,e)){let u=zI,f=!0;switch(o.op){case"<":case"<=":u=r6(o.value);break;case"==":case"in":case">=":u=o.value;break;case">":u=o.value,f=!1;break;case"!=":case"not-in":u=zI}HV({value:i,inclusive:r},{value:u,inclusive:f})<0&&(i=u,r=f)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];HV({value:i,inclusive:r},{value:u,inclusive:t.inclusive})<0&&(i=u,r=t.inclusive);break}return{value:i,inclusive:r}}function $V(n,e,t){let i=rf,r=!0;for(const o of $I(n,e)){let u=rf,f=!0;switch(o.op){case">=":case">":u=s6(o.value),f=!1;break;case"==":case"in":case"<=":u=o.value;break;case"<":u=o.value,f=!1;break;case"!=":case"not-in":u=rf}jV({value:i,inclusive:r},{value:u,inclusive:f})>0&&(i=u,r=f)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];jV({value:i,inclusive:r},{value:u,inclusive:t.inclusive})>0&&(i=u,r=t.inclusive);break}return{value:i,inclusive:r}}class Qr extends class{}{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,i):new l6(e,t,i):"array-contains"===t?new d6(e,i):"in"===t?new h6(e,i):"not-in"===t?new f6(e,i):"array-contains-any"===t?new p6(e,i):new Qr(e,t,i)}static lt(e,t,i){return"in"===t?new u6(e,i):new c6(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(sf(t,this.value)):null!==t&&om(this.value)===om(t)&&this.ft(sf(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ht()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class l6 extends Qr{constructor(e,t,i){super(e,t,i),this.key=it.fromName(i.referenceValue)}matches(e){const t=it.comparator(e.key,this.key);return this.ft(t)}}class u6 extends Qr{constructor(e,t){super(e,"in",t),this.keys=qV(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class c6 extends Qr{constructor(e,t){super(e,"not-in",t),this.keys=qV(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function qV(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>it.fromName(i.referenceValue))}class d6 extends Qr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Aw(t)&&Sw(t.arrayValue,this.value)}}class h6 extends Qr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Sw(this.value.arrayValue,t)}}class f6 extends Qr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Sw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Sw(this.value.arrayValue,t)}}class p6 extends Qr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Aw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Sw(this.value.arrayValue,i))}}class af{constructor(e,t){this.position=e,this.inclusive=t}}class V_{constructor(e,t="asc"){this.field=e,this.dir=t}}function m6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function ZV(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const o=e[r],u=n.position[r];if(i=o.field.isKeyField()?it.comparator(it.fromName(u.referenceValue),t.key):sf(u,t.data.field(o.field)),"desc"===o.dir&&(i*=-1),0!==i)break}return i}function KV(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Yu(n.position[t],e.position[t]))return!1;return!0}class Ed{constructor(e,t=null,i=[],r=[],o=null,u="F",f=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=u,this.startAt=f,this.endAt=y,this._t=null,this.wt=null}}function YV(n,e,t,i,r,o,u,f){return new Ed(n,e,t,i,r,o,u,f)}function U_(n){return new Ed(n)}function QV(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function $k(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function qk(n){for(const e of n.filters)if(e.dt())return e.field;return null}function Zk(n){return null!==n.collectionGroup}function H_(n){const e=st(n);if(null===e._t){e._t=[];const t=qk(e),i=$k(e);if(null!==t&&null===i)t.isKeyField()||e._t.push(new V_(t)),e._t.push(new V_(Mi.keyField(),"asc"));else{let r=!1;for(const o of e.explicitOrderBy)e._t.push(o),o.field.isKeyField()&&(r=!0);if(!r){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new V_(Mi.keyField(),o))}}}return e._t}function Us(n){const e=st(n);if(!e.wt)if("F"===e.limitType)e.wt=GV(e.path,e.collectionGroup,H_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of H_(e))t.push(new V_(o.field,"desc"===o.dir?"asc":"desc"));const i=e.endAt?new af(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new af(e.startAt.position,e.startAt.inclusive):null;e.wt=GV(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}return e.wt}function qI(n,e,t){return new Ed(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function kw(n,e){return Mw(Us(n),Us(e))&&n.limitType===e.limitType}function XV(n){return`${lm(Us(n))}|lt:${n.limitType}`}function Kk(n){return`Query(target=${function a6(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(i=t).field.canonicalString()} ${i.op} ${B_(i.value)}`;var i}).join(", ")}]`),Iw(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(i=t).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>B_(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>B_(t)).join(",")),`Target(${e})`}(Us(n))}; limitType=${n.limitType})`}function Yk(n,e){return e.isFoundDocument()&&function(t,i){const r=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):it.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(n,e)&&function(t,i){for(const r of t.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,e)&&function(t,i){for(const r of t.filters)if(!r.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(r,o,u){const f=ZV(r,o,u);return r.inclusive?f<=0:f<0}(t.startAt,H_(t),i)||t.endAt&&!function(r,o,u){const f=ZV(r,o,u);return r.inclusive?f>=0:f>0}(t.endAt,H_(t),i)));var t,i}function JV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function eU(n){return(e,t)=>{let i=!1;for(const r of H_(n)){const o=g6(r,e,t);if(0!==o)return o;i=i||r.field.isKeyField()}return 0}}function g6(n,e,t){const i=n.field.isKeyField()?it.comparator(e.key,t.key):function(r,o,u){const f=o.data.field(r),y=u.data.field(r);return null!==f&&null!==y?sf(f,y):ht()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ht()}}function tU(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tw(e)?"-0":e}}function nU(n){return{integerValue:""+n}}function iU(n,e){return LV(e)?nU(e):tU(n,e)}class ZI{constructor(){this._=void 0}}function _6(n,e,t){return n instanceof j_?function(i,r){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(o.fields.__previous_value__=r),{mapValue:o}}(t,e):n instanceof um?sU(n,e):n instanceof cm?oU(n,e):function(i,r){const o=rU(i,r),u=aU(o)+aU(i.yt);return Wk(o)&&Wk(i.yt)?nU(u):tU(i.It,u)}(n,e)}function y6(n,e,t){return n instanceof um?sU(n,e):n instanceof cm?oU(n,e):t}function rU(n,e){return n instanceof z_?Wk(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class j_ extends ZI{}class um extends ZI{constructor(e){super(),this.elements=e}}function sU(n,e){const t=lU(e);for(const i of n.elements)t.some(r=>Yu(r,i))||t.push(i);return{arrayValue:{values:t}}}class cm extends ZI{constructor(e){super(),this.elements=e}}function oU(n,e){let t=lU(e);for(const i of n.elements)t=t.filter(r=>!Yu(r,i));return{arrayValue:{values:t}}}class z_ extends ZI{constructor(e,t){super(),this.It=e,this.yt=t}}function aU(n){return Ri(n.integerValue||n.doubleValue)}function lU(n){return Aw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Rw{constructor(e,t){this.field=e,this.transform=t}}class b6{constructor(e,t){this.version=e,this.transformResults=t}}class mi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mi}static exists(e){return new mi(void 0,e)}static updateTime(e){return new mi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function KI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class YI{}function uU(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new W_(n.key,mi.none()):new G_(n.key,n.data,mi.none());{const t=n.data,i=Yr.empty();let r=new Fn(Mi.comparator);for(let o of e.fields)if(!r.has(o)){let u=t.field(o);null===u&&o.length>1&&(o=o.popLast(),u=t.field(o)),null===u?i.delete(o):i.set(o,u),r=r.add(o)}return new Cd(n.key,i,new Jo(r.toArray()),mi.none())}}function w6(n,e,t){n instanceof G_?function(i,r,o){const u=i.value.clone(),f=hU(i.fieldTransforms,r,o.transformResults);u.setAll(f),r.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Cd?function(i,r,o){if(!KI(i.precondition,r))return void r.convertToUnknownDocument(o.version);const u=hU(i.fieldTransforms,r,o.transformResults),f=r.data;f.setAll(dU(i)),f.setAll(u),r.convertToFoundDocument(o.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Pw(n,e,t,i){return n instanceof G_?function(r,o,u,f){if(!KI(r.precondition,o))return u;const y=r.value.clone(),E=fU(r.fieldTransforms,f,o);return y.setAll(E),o.convertToFoundDocument(o.version,y).setHasLocalMutations(),null}(n,e,t,i):n instanceof Cd?function(r,o,u,f){if(!KI(r.precondition,o))return u;const y=fU(r.fieldTransforms,f,o),E=o.data;return E.setAll(dU(r)),E.setAll(y),o.convertToFoundDocument(o.version,E).setHasLocalMutations(),null===u?null:u.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(S=>S.field))}(n,e,t,i):(u=t,KI(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u);var o,u}function E6(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),o=rU(i.transform,r||null);null!=o&&(null===t&&(t=Yr.empty()),t.set(i.field,o))}return t||null}function cU(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&L_(t,i,(r,o)=>function v6(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof um&&i instanceof um||t instanceof cm&&i instanceof cm?L_(t.elements,i.elements,Yu):t instanceof z_&&i instanceof z_?Yu(t.yt,i.yt):t instanceof j_&&i instanceof j_);var t,i}(r,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}class G_ extends YI{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Cd extends YI{constructor(e,t,i,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function dU(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function hU(n,e,t){const i=new Map;Ot(n.length===t.length);for(let r=0;r<t.length;r++){const o=n[r],u=o.transform,f=e.data.field(o.field);i.set(o.field,y6(u,f,t[r]))}return i}function fU(n,e,t){const i=new Map;for(const r of n){const o=r.transform,u=t.data.field(r.field);i.set(r.field,_6(o,u,e))}return i}class W_ extends YI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Qk extends YI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class C6{constructor(e){this.count=e}}var nr,vn;function pU(n){switch(n){default:return ht();case xe.CANCELLED:case xe.UNKNOWN:case xe.DEADLINE_EXCEEDED:case xe.RESOURCE_EXHAUSTED:case xe.INTERNAL:case xe.UNAVAILABLE:case xe.UNAUTHENTICATED:return!1;case xe.INVALID_ARGUMENT:case xe.NOT_FOUND:case xe.ALREADY_EXISTS:case xe.PERMISSION_DENIED:case xe.FAILED_PRECONDITION:case xe.ABORTED:case xe.OUT_OF_RANGE:case xe.UNIMPLEMENTED:case xe.DATA_LOSS:return!0}}function mU(n){if(void 0===n)return Hi("GRPC error has no .code"),xe.UNKNOWN;switch(n){case nr.OK:return xe.OK;case nr.CANCELLED:return xe.CANCELLED;case nr.UNKNOWN:return xe.UNKNOWN;case nr.DEADLINE_EXCEEDED:return xe.DEADLINE_EXCEEDED;case nr.RESOURCE_EXHAUSTED:return xe.RESOURCE_EXHAUSTED;case nr.INTERNAL:return xe.INTERNAL;case nr.UNAVAILABLE:return xe.UNAVAILABLE;case nr.UNAUTHENTICATED:return xe.UNAUTHENTICATED;case nr.INVALID_ARGUMENT:return xe.INVALID_ARGUMENT;case nr.NOT_FOUND:return xe.NOT_FOUND;case nr.ALREADY_EXISTS:return xe.ALREADY_EXISTS;case nr.PERMISSION_DENIED:return xe.PERMISSION_DENIED;case nr.FAILED_PRECONDITION:return xe.FAILED_PRECONDITION;case nr.ABORTED:return xe.ABORTED;case nr.OUT_OF_RANGE:return xe.OUT_OF_RANGE;case nr.UNIMPLEMENTED:return xe.UNIMPLEMENTED;case nr.DATA_LOSS:return xe.DATA_LOSS;default:return ht()}}(vn=nr||(nr={}))[vn.OK=0]="OK",vn[vn.CANCELLED=1]="CANCELLED",vn[vn.UNKNOWN=2]="UNKNOWN",vn[vn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vn[vn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vn[vn.NOT_FOUND=5]="NOT_FOUND",vn[vn.ALREADY_EXISTS=6]="ALREADY_EXISTS",vn[vn.PERMISSION_DENIED=7]="PERMISSION_DENIED",vn[vn.UNAUTHENTICATED=16]="UNAUTHENTICATED",vn[vn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vn[vn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vn[vn.ABORTED=10]="ABORTED",vn[vn.OUT_OF_RANGE=11]="OUT_OF_RANGE",vn[vn.UNIMPLEMENTED=12]="UNIMPLEMENTED",vn[vn.INTERNAL=13]="INTERNAL",vn[vn.UNAVAILABLE=14]="UNAVAILABLE",vn[vn.DATA_LOSS=15]="DATA_LOSS";class lf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,o]of i)if(this.equalsFn(r,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){rm(this.inner,(t,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return PV(this.inner)}size(){return this.innerSize}}const D6=new ki(it.comparator);function go(){return D6}const gU=new ki(it.comparator);function Ow(...n){let e=gU;for(const t of n)e=e.insert(t.key,t);return e}function _U(n){let e=gU;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Qu(){return Nw()}function yU(){return Nw()}function Nw(){return new lf(n=>n.toString(),(n,e)=>n.isEqual(e))}const I6=new ki(it.comparator),T6=new Fn(it.comparator);function Qt(...n){let e=T6;for(const t of n)e=e.add(t);return e}const S6=new Fn(qt);function QI(){return S6}class Lw{constructor(e,t,i,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Fw.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Lw(Nt.min(),r,QI(),go(),Qt())}}class Fw{constructor(e,t,i,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Fw(i,t,Qt(),Qt(),Qt())}}class XI{constructor(e,t,i,r){this.Tt=e,this.removedTargetIds=t,this.key=i,this.Et=r}}class vU{constructor(e,t){this.targetId=e,this.At=t}}class bU{constructor(e,t,i=mr.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class wU{constructor(){this.Rt=0,this.bt=CU(),this.Pt=mr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Qt(),t=Qt(),i=Qt();return this.bt.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:ht()}}),new Fw(this.Pt,this.vt,e,t,i)}Nt(){this.Vt=!1,this.bt=CU()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class A6{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=go(),this.qt=EU(),this.Kt=new Fn(qt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const i=this.zt(t);switch(e.state){case 0:this.Ht(t)&&i.Ct(e.resumeToken);break;case 1:i.Ft(),i.St||i.Nt(),i.Ct(e.resumeToken);break;case 2:i.Ft(),i.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(i.$t(),i.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),i.Ct(e.resumeToken));break;default:ht()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((i,r)=>{this.Ht(r)&&t(r)})}Yt(e){const t=e.targetId,i=e.At.count,r=this.Xt(t);if(r){const o=r.target;if(WI(o))if(0===i){const u=new it(o.path);this.jt(t,u,Yn.newNoDocument(u,Nt.min()))}else Ot(1===i);else this.Zt(t)!==i&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((o,u)=>{const f=this.Xt(u);if(f){if(o.current&&WI(f.target)){const y=new it(f.target.path);null!==this.Ut.get(y)||this.ee(u,y)||this.jt(u,y,Yn.newNoDocument(y,e))}o.Dt&&(t.set(u,o.xt()),o.Nt())}});let i=Qt();this.qt.forEach((o,u)=>{let f=!0;u.forEachWhile(y=>{const E=this.Xt(y);return!E||2===E.purpose||(f=!1,!1)}),f&&(i=i.add(o))}),this.Ut.forEach((o,u)=>u.setReadTime(e));const r=new Lw(e,t,this.Kt,this.Ut,i);return this.Ut=go(),this.qt=EU(),this.Kt=new Fn(qt),r}Qt(e,t){if(!this.Ht(e))return;const i=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,i),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,i){if(!this.Ht(e))return;const r=this.zt(e);this.ee(e,t)?r.kt(t,1):r.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),i&&(this.Ut=this.Ut.insert(t,i))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new wU,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Fn(qt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Ge("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new wU),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function EU(){return new ki(it.comparator)}function CU(){return new ki(it.comparator)}const x6={asc:"ASCENDING",desc:"DESCENDING"},M6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class k6{constructor(e,t){this.databaseId=e,this.gt=t}}function Bw(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DU(n,e){return n.gt?e.toBase64():e.toUint8Array()}function R6(n,e){return Bw(n,e.toTimestamp())}function Pr(n){return Ot(!!n),Nt.fromTimestamp(function(e){const t=tf(e);return new pi(t.seconds,t.nanos)}(n))}function Xk(n,e){return(t=n,new yn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function IU(n){const e=yn.fromString(n);return Ot(PU(e)),e}function Vw(n,e){return Xk(n.databaseId,e.path)}function Xu(n,e){const t=IU(e);if(t.get(1)!==n.databaseId.projectId)throw new Ue(xe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ue(xe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new it(SU(t))}function Jk(n,e){return Xk(n.databaseId,e)}function TU(n){const e=IU(n);return 4===e.length?yn.emptyPath():SU(e)}function Uw(n){return new yn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function SU(n){return Ot(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function AU(n,e,t){return{name:Vw(n,e),fields:t.value.mapValue.fields}}function xU(n,e,t){const i=Xu(n,e.name),r=Pr(e.updateTime),o=new Yr({mapValue:{fields:e.fields}}),u=Yn.newFoundDocument(i,r,o);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function Hw(n,e){let t;if(e instanceof G_)t={update:AU(n,e.key,e.value)};else if(e instanceof W_)t={delete:Vw(n,e.key)};else if(e instanceof Cd)t={update:AU(n,e.key,e.data),updateMask:H6(e.fieldMask)};else{if(!(e instanceof Qk))return ht();t={verify:Vw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,o){const u=o.transform;if(u instanceof j_)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof um)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof cm)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof z_)return{fieldPath:o.field.canonicalString(),increment:u.yt};throw ht()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(r=e.precondition).updateTime?{updateTime:R6(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:ht()),t;var r}function eR(n,e){const t=e.currentDocument?void 0!==(r=e.currentDocument).updateTime?mi.updateTime(Pr(r.updateTime)):void 0!==r.exists?mi.exists(r.exists):mi.none():mi.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(o,u){let f=null;"setToServerValue"in u?(Ot("REQUEST_TIME"===u.setToServerValue),f=new j_):"appendMissingElements"in u?f=new um(u.appendMissingElements.values||[]):"removeAllFromArray"in u?f=new cm(u.removeAllFromArray.values||[]):"increment"in u?f=new z_(o,u.increment):ht();const y=Mi.fromServerFormat(u.fieldPath);return new Rw(y,f)}(n,r)):[];var r;if(e.update){const r=Xu(n,e.update.name),o=new Yr({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new Jo((e.updateMask.fieldPaths||[]).map(E=>Mi.fromServerFormat(E)));return new Cd(r,o,u,t,i)}return new G_(r,o,t,i)}if(e.delete){const r=Xu(n,e.delete);return new W_(r,t)}if(e.verify){const r=Xu(n,e.verify);return new Qk(r,t)}return ht()}function MU(n,e){return{documents:[Jk(n,e.path)]}}function tR(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=Jk(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Jk(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(y){if(0===y.length)return;const E=y.map(S=>function(R){if("=="===R.op){if(VV(R.value))return{unaryFilter:{field:$_(R.field),op:"IS_NAN"}};if(BV(R.value))return{unaryFilter:{field:$_(R.field),op:"IS_NULL"}}}else if("!="===R.op){if(VV(R.value))return{unaryFilter:{field:$_(R.field),op:"IS_NOT_NAN"}};if(BV(R.value))return{unaryFilter:{field:$_(R.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$_(R.field),op:B6(R.op),value:R.value}}}(S));return 1===E.length?E[0]:{compositeFilter:{op:"AND",filters:E}}}(e.filters);r&&(t.structuredQuery.where=r);const o=function(y){if(0!==y.length)return y.map(E=>{return{field:$_((S=E).field),direction:F6(S.dir)};var S})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const u=(E=e.limit,n.gt||Iw(E)?E:{value:E});var E,f,y;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function kU(n){let e=TU(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Ot(1===i);const S=t.from[0];S.allDescendants?r=S.collectionId:e=e.child(S.collectionId)}let o=[];t.where&&(o=RU(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(S=>{return new V_(q_((R=S).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let f=null;t.limit&&(f=function(S){let R;return R="object"==typeof S?S.value:S,Iw(R)?null:R}(t.limit));let y=null;var S;t.startAt&&(y=new af((S=t.startAt).values||[],!!S.before));let E=null;return t.endAt&&(E=function(S){return new af(S.values||[],!S.before)}(t.endAt)),YV(e,r,u,o,f,"F",y,E)}function RU(n){return n?void 0!==n.unaryFilter?[U6(n)]:void 0!==n.fieldFilter?[V6(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>RU(e)).reduce((e,t)=>e.concat(t)):ht():[]}function F6(n){return x6[n]}function B6(n){return M6[n]}function $_(n){return{fieldPath:n.canonicalString()}}function q_(n){return Mi.fromServerFormat(n.fieldPath)}function V6(n){return Qr.create(q_(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ht()}}(n.fieldFilter.op),n.fieldFilter.value)}function U6(n){switch(n.unaryFilter.op){case"IS_NAN":const e=q_(n.unaryFilter.field);return Qr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=q_(n.unaryFilter.field);return Qr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=q_(n.unaryFilter.field);return Qr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=q_(n.unaryFilter.field);return Qr.create(r,"!=",{nullValue:"NULL_VALUE"});default:return ht()}}function H6(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function PU(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Hs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=OU(e)),e=j6(n.get(t),e);return OU(e)}function j6(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const o=n.charAt(r);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function OU(n){return n+"\x01\x01"}function Ju(n){const e=n.length;if(Ot(e>=2),2===e)return Ot("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),yn.emptyPath();const t=e-2,i=[];let r="";for(let o=0;o<e;){const u=n.indexOf("\x01",o);switch((u<0||u>t)&&ht(),n.charAt(u+1)){case"\x01":const f=n.substring(o,u);let y;0===r.length?y=f:(r+=f,y=r,r=""),i.push(y);break;case"\x10":r+=n.substring(o,u),r+="\0";break;case"\x11":r+=n.substring(o,u+1);break;default:ht()}o=u+2}return new yn(i)}const NU=["userId","batchId"];function JI(n,e){return[n,Hs(e)]}function LU(n,e,t){return[n,Hs(e),t]}const z6={},G6=["prefixPath","collectionGroup","readTime","documentId"],W6=["prefixPath","collectionGroup","documentId"],$6=["collectionGroup","readTime","prefixPath","documentId"],q6=["canonicalId","targetId"],Z6=["targetId","path"],K6=["path","targetId"],Y6=["collectionId","parent"],Q6=["indexId","uid"],X6=["uid","sequenceNumber"],J6=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],eZ=["indexId","uid","orderedDocumentKey"],tZ=["userId","collectionPath","documentId"],nZ=["userId","collectionPath","largestBatchId"],iZ=["userId","collectionGroup","largestBatchId"],FU=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],rZ=[...FU,"documentOverlays"],BU=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],VU=BU,sZ=[...VU,"indexConfiguration","indexState","indexEntries"];class nR extends MV{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Or(n,e){const t=st(n);return kl.M(t.ie,e)}class iR{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&w6(o,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Pw(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Pw(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=yU();return this.mutations.forEach(r=>{const o=e.get(r.key),u=o.overlayedDocument;let f=this.applyToLocalView(u,o.mutatedFields);f=t.has(r.key)?null:f;const y=uU(u,f);null!==y&&i.set(r.key,y),u.isValidDocument()||u.convertToNoDocument(Nt.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Qt())}isEqual(e){return this.batchId===e.batchId&&L_(this.mutations,e.mutations,(t,i)=>cU(t,i))&&L_(this.baseMutations,e.baseMutations,(t,i)=>cU(t,i))}}class rR{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Ot(e.mutations.length===i.length);let r=I6;const o=e.mutations;for(let u=0;u<o.length;u++)r=r.insert(o[u].key,i[u].version);return new rR(e,t,i,r)}}class sR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class uf{constructor(e,t,i,r,o=Nt.min(),u=Nt.min(),f=mr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f}withSequenceNumber(e){return new uf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new uf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new uf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class UU{constructor(e){this.re=e}}function HU(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:eT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:Vw(r=n.re,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Bw(r,o.version.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:dm(e.version)};else{if(!e.isUnknownDocument())return ht();i.unknownDocument={path:t.path.toArray(),version:dm(e.version)}}var r,o;return i}function eT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function dm(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function hm(n){const e=new pi(n.seconds,n.nanoseconds);return Nt.fromTimestamp(e)}function fm(n,e){const t=(e.baseMutations||[]).map(o=>eR(n.re,o));for(let o=0;o<e.mutations.length-1;++o){const u=e.mutations[o];o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(u.updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o)}const i=e.mutations.map(o=>eR(n.re,o)),r=pi.fromMillis(e.localWriteTimeMs);return new iR(e.batchId,r,t,i)}function jw(n){const e=hm(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?hm(n.lastLimboFreeSnapshotVersion):Nt.min();let i;var r;return void 0!==n.query.documents?(Ot(1===(r=n.query).documents.length),i=Us(U_(TU(r.documents[0])))):i=Us(kU(n.query)),new uf(i,n.targetId,0,n.lastListenSequenceNumber,e,t,mr.fromBase64String(n.resumeToken))}function jU(n,e){const t=dm(e.snapshotVersion),i=dm(e.lastLimboFreeSnapshotVersion);let r;r=WI(e.target)?MU(n.re,e.target):tR(n.re,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:lm(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function oR(n){const e=kU({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?qI(e,e.limit,"L"):e}function aR(n,e){return new sR(e.largestBatchId,eR(n.re,e.overlayMutation))}function zU(n,e){const t=e.path.lastSegment();return[n,Hs(e.path.popLast()),t]}function GU(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:dm(i.readTime),documentKey:Hs(i.documentKey.path),largestBatchId:i.largestBatchId}}class aZ{getBundleMetadata(e,t){return WU(e).get(t).next(i=>{if(i)return{id:(r=i).bundleId,createTime:hm(r.createTime),version:r.version};var r})}saveBundleMetadata(e,t){return WU(e).put({bundleId:(i=t).id,createTime:dm(Pr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return $U(e).get(t).next(i=>{if(i)return{name:(r=i).name,query:oR(r.bundledQuery),readTime:hm(r.readTime)};var r})}saveNamedQuery(e,t){return $U(e).put({name:(i=t).name,readTime:dm(Pr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function WU(n){return Or(n,"bundles")}function $U(n){return Or(n,"namedQueries")}class tT{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new tT(e,t.uid||"")}getOverlay(e,t){return zw(e).get(zU(this.userId,t)).next(i=>i?aR(this.It,i):null)}getOverlays(e,t){const i=Qu();return Te.forEach(t,r=>this.getOverlay(e,r).next(o=>{null!==o&&i.set(r,o)})).next(()=>i)}saveOverlays(e,t,i){const r=[];return i.forEach((o,u)=>{const f=new sR(t,u);r.push(this.ue(e,f))}),Te.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(u=>r.add(Hs(u.getCollectionPath())));const o=[];return r.forEach(u=>{const f=IDBKeyRange.bound([this.userId,u,i],[this.userId,u,i+1],!1,!0);o.push(zw(e).Y("collectionPathOverlayIndex",f))}),Te.waitFor(o)}getOverlaysForCollection(e,t,i){const r=Qu(),o=Hs(t),u=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return zw(e).W("collectionPathOverlayIndex",u).next(f=>{for(const y of f){const E=aR(this.It,y);r.set(E.getKey(),E)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const o=Qu();let u;const f=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return zw(e).Z({index:"collectionGroupOverlayIndex",range:f},(y,E,S)=>{const R=aR(this.It,E);o.size()<r||R.largestBatchId===u?(o.set(R.getKey(),R),u=R.largestBatchId):S.done()}).next(()=>o)}ue(e,t){return zw(e).put(function(i,r,o){const[u,f,y]=zU(r,o.mutation.key);return{userId:r,collectionPath:f,documentId:y,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Hw(i.re,o.mutation)}}(this.It,this.userId,t))}}function zw(n){return Or(n,"documentOverlays")}class pm{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Ri(e.integerValue));else if("doubleValue"in e){const i=Ri(e.doubleValue);isNaN(i)?this.le(t,13):(this.le(t,15),Tw(i)?t.fe(0):t.fe(i))}else if("timestampValue"in e){const i=e.timestampValue;this.le(t,20),"string"==typeof i?t.de(i):(t.de(`${i.seconds||""}`),t.fe(i.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(sm(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.le(t,45),t.fe(i.latitude||0),t.fe(i.longitude||0)}else"mapValue"in e?UV(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):ht()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const i=e.fields||{};this.le(t,55);for(const r of Object.keys(i))this._e(r,t),this.ae(i[r],t)}pe(e,t){const i=e.values||[];this.le(t,50);for(const r of i)this.ae(r,t)}ge(e,t){this.le(t,37),it.fromName(e).path.forEach(i=>{this.le(t,60),this.Ie(i,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function lZ(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function qU(n){const e=64-function(t){let i=0;for(let r=0;r<8;++r){const o=lZ(255&t[r]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}pm.Te=new pm;class uZ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ae(i.value),i=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Pe(i.value),i=t.next();this.ve()}Ve(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{const r=t.codePointAt(0);this.Ae(240|r>>>18),this.Ae(128|63&r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r)}}this.Re()}Se(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{const r=t.codePointAt(0);this.Pe(240|r>>>18),this.Pe(128|63&r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r)}}this.ve()}De(e){const t=this.Ce(e),i=qU(t);this.xe(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Ne(e){const t=this.Ce(e),i=qU(t);this.xe(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(r){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,r,!1),new Uint8Array(o.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class cZ{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class dZ{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Gw{constructor(){this.Be=new uZ,this.Le=new cZ(this.Be),this.Ue=new dZ(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class mm{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new mm(this.indexId,this.documentKey,this.arrayValue,i)}}function gm(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=ZU(n.arrayValue,e.arrayValue),0!==t?t:(t=ZU(n.directionalValue,e.directionalValue),0!==t?t:it.comparator(n.documentKey,e.documentKey)))}function ZU(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class hZ{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const i=t;i.dt()?this.je=i:this.Qe.push(i)}}We(e){const t=Vk(e);if(void 0!==t&&!this.ze(t))return!1;const i=nm(e);let r=0,o=0;for(;r<i.length&&this.ze(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.je){const u=i[r];if(!this.He(this.je,u)||!this.Je(this.Ge[o++],u))return!1;++r}for(;r<i.length;++r){const u=i[r];if(o>=this.Ge.length||!this.Je(this.Ge[o++],u))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class fZ{constructor(){this.Ye=new lR}addToCollectionParentIndex(e,t){return this.Ye.add(t),Te.resolve()}getCollectionParents(e,t){return Te.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return Te.resolve()}deleteFieldIndex(e,t){return Te.resolve()}getDocumentsMatchingTarget(e,t){return Te.resolve(null)}getIndexType(e,t){return Te.resolve(0)}getFieldIndexes(e,t){return Te.resolve([])}getNextCollectionGroupToUpdate(e){return Te.resolve(null)}getMinOffset(e,t){return Te.resolve(Xo.min())}getMinOffsetFromCollectionGroup(e,t){return Te.resolve(Xo.min())}updateCollectionGroup(e,t,i){return Te.resolve()}updateIndexEntries(e,t){return Te.resolve()}}class lR{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Fn(yn.comparator),o=!r.has(i);return this.index[t]=r.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Fn(yn.comparator)).toArray()}}const nT=new Uint8Array(0);class pZ{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new lR,this.Ze=new lf(i=>lm(i),(i,r)=>Mw(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const o={collectionId:i,parent:Hs(r)};return KU(e).put(o)}return Te.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[TV(t),""],!1,!0);return KU(e).W(r).next(o=>{for(const u of o){if(u.collectionId!==t)break;i.push(Ju(u.parent))}return i})}addFieldIndex(e,t){const i=iT(e),r={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var u;delete r.indexId;const o=i.add(r);if(t.indexState){const u=$w(e);return o.next(f=>{u.put(GU(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const i=iT(e),r=$w(e),o=Ww(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=Ww(e);let r=!0;const o=new Map;return Te.forEach(this.tn(t),u=>this.en(e,u).next(f=>{r&&(r=!!f),o.set(u,f)})).next(()=>{if(r){let u=Qt();const f=[];return Te.forEach(o,(y,E)=>{var S;Ge("IndexedDbIndexManager",`Using index ${S=y,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(Qe=>`${Qe.fieldPath}:${Qe.kind}`).join(",")}`} to execute ${lm(t)}`);const R=function(Qe,Xe){const wt=Vk(Xe);if(void 0===wt)return null;for(const It of $I(Qe,wt.fieldPath))switch(It.op){case"array-contains-any":return It.value.arrayValue.values||[];case"array-contains":return[It.value]}return null}(E,y),H=function(Qe,Xe){const wt=new Map;for(const It of nm(Xe))for(const tn of $I(Qe,It.fieldPath))switch(tn.op){case"==":case"in":wt.set(It.fieldPath.canonicalString(),tn.value);break;case"not-in":case"!=":return wt.set(It.fieldPath.canonicalString(),tn.value),Array.from(wt.values())}return null}(E,y),K=function(Qe,Xe){const wt=[];let It=!0;for(const tn of nm(Xe)){const zi=0===tn.kind?WV(Qe,tn.fieldPath,Qe.startAt):$V(Qe,tn.fieldPath,Qe.startAt);wt.push(zi.value),It&&(It=zi.inclusive)}return new af(wt,It)}(E,y),J=function(Qe,Xe){const wt=[];let It=!0;for(const tn of nm(Xe)){const zi=0===tn.kind?$V(Qe,tn.fieldPath,Qe.endAt):WV(Qe,tn.fieldPath,Qe.endAt);wt.push(zi.value),It&&(It=zi.inclusive)}return new af(wt,It)}(E,y),le=this.nn(y,E,K),ve=this.nn(y,E,J),Ve=this.sn(y,E,H),Ye=this.rn(y.indexId,R,le,K.inclusive,ve,J.inclusive,Ve);return Te.forEach(Ye,Qe=>i.J(Qe,t.limit).next(Xe=>{Xe.forEach(wt=>{const It=it.fromSegments(wt.documentKey);u.has(It)||(u=u.add(It),f.push(It))})}))}).next(()=>f)}return Te.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,i,r,o,u,f){const y=(null!=t?t.length:1)*Math.max(i.length,o.length),E=y/(null!=t?t.length:1),S=[];for(let R=0;R<y;++R){const H=t?this.on(t[R/E]):nT,K=this.un(e,H,i[R%E],r),J=this.cn(e,H,o[R%E],u),le=f.map(ve=>this.un(e,H,ve,!0));S.push(...this.createRange(K,J,le))}return S}un(e,t,i,r){const o=new mm(e,it.empty(),t,i);return r?o:o.Ke()}cn(e,t,i,r){const o=new mm(e,it.empty(),t,i);return r?o.Ke():o}en(e,t){const i=new hZ(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(o=>{let u=null;for(const f of o)i.We(f)&&(!u||f.fields.length>u.fields.length)&&(u=f);return u})}getIndexType(e,t){let i=2;return Te.forEach(this.tn(t),r=>this.en(e,r).next(o=>{o?0!==i&&o.fields.length<function(u){let f=new Fn(Mi.comparator),y=!1;for(const E of u.filters){const S=E;S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?y=!0:f=f.add(S.field))}for(const E of u.orderBy)E.field.isKeyField()||(f=f.add(E.field));return f.size+(y?1:0)}(r)&&(i=1):i=0})).next(()=>i)}an(e,t){const i=new Gw;for(const r of nm(e)){const o=t.data.field(r.fieldPath);if(null==o)return null;const u=i.qe(r.kind);pm.Te.ce(o,u)}return i.$e()}on(e){const t=new Gw;return pm.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const i=new Gw;return pm.Te.ce(am(this.databaseId,t),i.qe(function(r){const o=nm(r);return 0===o.length?0:o[o.length-1].kind}(e))),i.$e()}sn(e,t,i){if(null===i)return[];let r=[];r.push(new Gw);let o=0;for(const u of nm(e)){const f=i[o++];for(const y of r)if(this.ln(t,u.fieldPath)&&Aw(f))r=this.fn(r,u,f);else{const E=y.qe(u.kind);pm.Te.ce(f,E)}}return this.dn(r)}nn(e,t,i){return this.sn(e,t,i.position)}dn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].$e();return t}fn(e,t,i){const r=[...e],o=[];for(const u of i.arrayValue.values||[])for(const f of r){const y=new Gw;y.seed(f.$e()),pm.Te.ce(u,y.qe(t.kind)),o.push(y)}return o}ln(e,t){return!!e.filters.find(i=>i instanceof Qr&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=iT(e),r=$w(e);return(t?i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.W()).next(o=>{const u=[];return Te.forEach(o,f=>r.get([f.indexId,this.uid]).next(y=>{u.push(function(E,S){const R=S?new Ew(S.sequenceNumber,new Xo(hm(S.readTime),new it(Ju(S.documentKey)),S.largestBatchId)):Ew.empty(),H=E.fields.map(([K,J])=>new UI(Mi.fromServerFormat(K),J));return new VI(E.indexId,E.collectionGroup,H,R)}(f,y))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>{const o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==o?o:qt(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=iT(e),o=$w(e);return this._n(e).next(u=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>Te.forEach(f,y=>o.put(GU(y.indexId,this.user,u,i)))))}updateIndexEntries(e,t){const i=new Map;return Te.forEach(t,(r,o)=>{const u=i.get(r.collectionGroup);return(u?Te.resolve(u):this.getFieldIndexes(e,r.collectionGroup)).next(f=>(i.set(r.collectionGroup,f),Te.forEach(f,y=>this.wn(e,r,y).next(E=>{const S=this.mn(o,y);return E.isEqual(S)?Te.resolve():this.gn(e,o,y,E,S)}))))})}yn(e,t,i,r){return Ww(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.hn(i,t.key),documentKey:t.key.path.toArray()})}pn(e,t,i,r){return Ww(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.hn(i,t.key),t.key.path.toArray()])}wn(e,t,i){const r=Ww(e);let o=new Fn(gm);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.hn(i,t)])},(u,f)=>{o=o.add(new mm(i.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>o)}mn(e,t){let i=new Fn(gm);const r=this.an(t,e);if(null==r)return i;const o=Vk(t);if(null!=o){const u=e.data.field(o.fieldPath);if(Aw(u))for(const f of u.arrayValue.values||[])i=i.add(new mm(t.indexId,e.key,this.on(f),r))}else i=i.add(new mm(t.indexId,e.key,nT,r));return i}gn(e,t,i,r,o){Ge("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(f,y,E,S,R){const H=f.getIterator(),K=y.getIterator();let J=F_(H),le=F_(K);for(;J||le;){let ve=!1,Ve=!1;if(J&&le){const Ye=E(J,le);Ye<0?Ve=!0:Ye>0&&(ve=!0)}else null!=J?Ve=!0:ve=!0;ve?(S(le),le=F_(K)):Ve?(R(J),J=F_(H)):(J=F_(H),le=F_(K))}}(r,o,gm,f=>{u.push(this.yn(e,t,i,f))},f=>{u.push(this.pn(e,t,i,f))}),Te.waitFor(u)}_n(e){let t=1;return $w(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((u,f)=>gm(u,f)).filter((u,f,y)=>!f||0!==gm(u,y[f-1]));const r=[];r.push(e);for(const u of i){const f=gm(u,e),y=gm(u,t);if(0===f)r[0]=e.Ke();else if(f>0&&y<0)r.push(u),r.push(u.Ke());else if(y>0)break}r.push(t);const o=[];for(let u=0;u<r.length;u+=2)o.push(IDBKeyRange.bound([r[u].indexId,this.uid,r[u].arrayValue,r[u].directionalValue,nT,[]],[r[u+1].indexId,this.uid,r[u+1].arrayValue,r[u+1].directionalValue,nT,[]]));return o}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(YU)}getMinOffset(e,t){return Te.mapArray(this.tn(t),i=>this.en(e,i).next(r=>r||ht())).next(YU)}}function KU(n){return Or(n,"collectionParents")}function Ww(n){return Or(n,"indexEntries")}function iT(n){return Or(n,"indexConfiguration")}function $w(n){return Or(n,"indexState")}function YU(n){Ot(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;Uk(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new Xo(e.readTime,e.documentKey,t)}const QU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class _o{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new _o(e,_o.DEFAULT_COLLECTION_PERCENTILE,_o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function XU(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),o=[],u=IDBKeyRange.only(t.batchId);let f=0;const y=i.Z({range:u},(S,R,H)=>(f++,H.delete()));o.push(y.next(()=>{Ot(1===f)}));const E=[];for(const S of t.mutations){const R=LU(e,S.key.path,t.batchId);o.push(r.delete(R)),E.push(S.key)}return Te.waitFor(o).next(()=>E)}function rT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ht();e=n.noDocument}return JSON.stringify(e).length}_o.DEFAULT_COLLECTION_PERCENTILE=10,_o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_o.DEFAULT=new _o(41943040,_o.DEFAULT_COLLECTION_PERCENTILE,_o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_o.DISABLED=new _o(-1,0,0);class sT{constructor(e,t,i,r){this.userId=e,this.It=t,this.indexManager=i,this.referenceDelegate=r,this.In={}}static oe(e,t,i,r){Ot(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new sT(o,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cf(e).Z({index:"userMutationsIndex",range:i},(r,o,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const o=Z_(e),u=cf(e);return u.add({}).next(f=>{Ot("number"==typeof f);const y=new iR(f,t,i,r),E=function(H,K,J){const le=J.baseMutations.map(Ve=>Hw(H.re,Ve)),ve=J.mutations.map(Ve=>Hw(H.re,Ve));return{userId:K,batchId:J.batchId,localWriteTimeMs:J.localWriteTime.toMillis(),baseMutations:le,mutations:ve}}(this.It,this.userId,y),S=[];let R=new Fn((H,K)=>qt(H.canonicalString(),K.canonicalString()));for(const H of r){const K=LU(this.userId,H.key.path,f);R=R.add(H.key.path.popLast()),S.push(u.put(E)),S.push(o.put(K,z6))}return R.forEach(H=>{S.push(this.indexManager.addToCollectionParentIndex(e,H))}),e.addOnCommittedListener(()=>{this.In[f]=y.keys()}),Te.waitFor(S).next(()=>y)})}lookupMutationBatch(e,t){return cf(e).get(t).next(i=>i?(Ot(i.userId===this.userId),fm(this.It,i)):null)}Tn(e,t){return this.In[t]?Te.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.In[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return cf(e).Z({index:"userMutationsIndex",range:r},(u,f,y)=>{f.userId===this.userId&&(Ot(f.batchId>=i),o=fm(this.It,f)),y.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return cf(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(r,o,u)=>{i=o.batchId,u.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return cf(e).W("userMutationsIndex",t).next(i=>i.map(r=>fm(this.It,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=JI(this.userId,t.path),r=IDBKeyRange.lowerBound(i),o=[];return Z_(e).Z({range:r},(u,f,y)=>{const[E,S,R]=u,H=Ju(S);if(E===this.userId&&t.path.isEqual(H))return cf(e).get(R).next(K=>{if(!K)throw ht();Ot(K.userId===this.userId),o.push(fm(this.It,K))});y.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Fn(qt);const r=[];return t.forEach(o=>{const u=JI(this.userId,o.path),f=IDBKeyRange.lowerBound(u),y=Z_(e).Z({range:f},(E,S,R)=>{const[H,K,J]=E,le=Ju(K);H===this.userId&&o.path.isEqual(le)?i=i.add(J):R.done()});r.push(y)}),Te.waitFor(r).next(()=>this.En(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,o=JI(this.userId,i),u=IDBKeyRange.lowerBound(o);let f=new Fn(qt);return Z_(e).Z({range:u},(y,E,S)=>{const[R,H,K]=y,J=Ju(H);R===this.userId&&i.isPrefixOf(J)?J.length===r&&(f=f.add(K)):S.done()}).next(()=>this.En(e,f))}En(e,t){const i=[],r=[];return t.forEach(o=>{r.push(cf(e).get(o).next(u=>{if(null===u)throw ht();Ot(u.userId===this.userId),i.push(fm(this.It,u))}))}),Te.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return XU(e.ie,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),Te.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Te.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return Z_(e).Z({range:i},(o,u,f)=>{if(o[0]===this.userId){const y=Ju(o[1]);r.push(y)}else f.done()}).next(()=>{Ot(0===r.length)})})}containsKey(e,t){return JU(e,this.userId,t)}Rn(e){return e2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function JU(n,e,t){const i=JI(e,t.path),r=i[1],o=IDBKeyRange.lowerBound(i);let u=!1;return Z_(n).Z({range:o,X:!0},(f,y,E)=>{const[S,R,H]=f;S===e&&R===r&&(u=!0),E.done()}).next(()=>u)}function cf(n){return Or(n,"mutations")}function Z_(n){return Or(n,"documentMutations")}function e2(n){return Or(n,"mutationQueues")}class _m{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new _m(0)}static vn(){return new _m(-1)}}class mZ{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const i=new _m(t.highestTargetId);return t.highestTargetId=i.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Nt.fromTimestamp(new pi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Vn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Sn(e,r)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(i=>(i.targetCount+=1,this.Cn(t,i),this.Sn(e,i))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>K_(e).delete(t.targetId)).next(()=>this.Vn(e)).next(i=>(Ot(i.targetCount>0),i.targetCount-=1,this.Sn(e,i)))}removeTargets(e,t,i){let r=0;const o=[];return K_(e).Z((u,f)=>{const y=jw(f);y.sequenceNumber<=t&&null===i.get(y.targetId)&&(r++,o.push(this.removeTargetData(e,y)))}).next(()=>Te.waitFor(o)).next(()=>r)}forEachTarget(e,t){return K_(e).Z((i,r)=>{const o=jw(r);t(o)})}Vn(e){return t2(e).get("targetGlobalKey").next(t=>(Ot(null!==t),t))}Sn(e,t){return t2(e).put("targetGlobalKey",t)}Dn(e,t){return K_(e).put(jU(this.It,t))}Cn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=lm(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return K_(e).Z({range:r,index:"queryTargetsIndex"},(u,f,y)=>{const E=jw(f);Mw(t,E.target)&&(o=E,y.done())}).next(()=>o)}addMatchingKeys(e,t,i){const r=[],o=df(e);return t.forEach(u=>{const f=Hs(u.path);r.push(o.put({targetId:i,path:f})),r.push(this.referenceDelegate.addReference(e,i,u))}),Te.waitFor(r)}removeMatchingKeys(e,t,i){const r=df(e);return Te.forEach(t,o=>{const u=Hs(o.path);return Te.waitFor([r.delete([i,u]),this.referenceDelegate.removeReference(e,i,o)])})}removeMatchingKeysForTargetId(e,t){const i=df(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=df(e);let o=Qt();return r.Z({range:i,X:!0},(u,f,y)=>{const E=Ju(u[1]),S=new it(E);o=o.add(S)}).next(()=>o)}containsKey(e,t){const i=Hs(t.path),r=IDBKeyRange.bound([i],[TV(i)],!1,!0);let o=0;return df(e).Z({index:"documentTargetsIndex",X:!0,range:r},([u,f],y,E)=>{0!==u&&(o++,E.done())}).next(()=>o>0)}se(e,t){return K_(e).get(t).next(i=>i?jw(i):null)}}function K_(n){return Or(n,"targets")}function t2(n){return Or(n,"targetGlobal")}function df(n){return Or(n,"targetDocuments")}function n2([n,e],[t,i]){const r=qt(n,t);return 0===r?qt(e,i):r}class gZ{constructor(e){this.xn=e,this.buffer=new Fn(n2),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();n2(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _Z{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Ge("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ke.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){ef(i)?Ge("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Jh(i)}yield t.Fn(3e5)}))}}class yZ{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return Te.resolve(mo.at);const i=new gZ(t);return this.$n.forEachTarget(e,r=>i.On(r.sequenceNumber)).next(()=>this.$n.Ln(e,r=>i.On(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.$n.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector","Garbage collection skipped; disabled"),Te.resolve(QU)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),QU):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let i,r,o,u,f,y,E;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(Ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),r=this.params.maximumSequenceNumbersToCollect):r=R,u=Date.now(),this.nthSequenceNumber(e,r))).next(R=>(i=R,f=Date.now(),this.removeTargets(e,i,t))).next(R=>(o=R,y=Date.now(),this.removeOrphanedDocuments(e,i))).next(R=>(E=Date.now(),Fk()<=zr.in.DEBUG&&Ge("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-S}ms\n\tDetermined least recently used ${r} in `+(f-u)+`ms\n\tRemoved ${o} targets in `+(y-f)+`ms\n\tRemoved ${R} documents in `+(E-y)+`ms\nTotal Duration: ${E-S}ms`),Te.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:R})))}}class vZ{constructor(e,t){this.db=e,this.garbageCollector=new yZ(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}qn(e){let t=0;return this.Ln(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(i,r)=>t(r))}addReference(e,t,i){return oT(e,i)}removeReference(e,t,i){return oT(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return oT(e,t)}Gn(e,t){return function(i,r){let o=!1;return e2(i).tt(u=>JU(i,u,r).next(f=>(f&&(o=!0),Te.resolve(!f)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let o=0;return this.Kn(e,(u,f)=>{if(f<=t){const y=this.Gn(e,u).next(E=>{if(!E)return o++,i.getEntry(e,u).next(()=>(i.removeEntry(u,Nt.min()),df(e).delete([0,Hs(u.path)])))});r.push(y)}}).next(()=>Te.waitFor(r)).next(()=>i.apply(e)).next(()=>o)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return oT(e,t)}Kn(e,t){const i=df(e);let r,o=mo.at;return i.Z({index:"documentTargetsIndex"},([u,f],{path:y,sequenceNumber:E})=>{0===u?(o!==mo.at&&t(new it(Ju(r)),o),o=E,r=y):o=mo.at}).next(()=>{o!==mo.at&&t(new it(Ju(r)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function oT(n,e){return df(n).put((i=n.currentSequenceNumber,{targetId:0,path:Hs(e.path),sequenceNumber:i}));var i}class r2{constructor(){this.changes=new lf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?Te.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class bZ{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return ym(e).put(i)}removeEntry(e,t,i){return ym(e).delete(function(r,o){const u=r.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],eT(o),u[u.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.Qn(e,i)))}getEntry(e,t){let i=Yn.newInvalidDocument(t);return ym(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(qw(t))},(r,o)=>{i=this.jn(t,o)}).next(()=>i)}Wn(e,t){let i={size:0,document:Yn.newInvalidDocument(t)};return ym(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(qw(t))},(r,o)=>{i={document:this.jn(t,o),size:rT(o)}}).next(()=>i)}getEntries(e,t){let i=go();return this.zn(e,t,(r,o)=>{const u=this.jn(r,o);i=i.insert(r,u)}).next(()=>i)}Hn(e,t){let i=go(),r=new ki(it.comparator);return this.zn(e,t,(o,u)=>{const f=this.jn(o,u);i=i.insert(o,f),r=r.insert(o,rT(u))}).next(()=>({documents:i,Jn:r}))}zn(e,t,i){if(t.isEmpty())return Te.resolve();let r=new Fn(l2);t.forEach(y=>r=r.add(y));const o=IDBKeyRange.bound(qw(r.first()),qw(r.last())),u=r.getIterator();let f=u.getNext();return ym(e).Z({index:"documentKeyIndex",range:o},(y,E,S)=>{const R=it.fromSegments([...E.prefixPath,E.collectionGroup,E.documentId]);for(;f&&l2(f,R)<0;)i(f,null),f=u.getNext();f&&f.isEqual(R)&&(i(f,E),f=u.hasNext()?u.getNext():null),f?S.j(qw(f)):S.done()}).next(()=>{for(;f;)i(f,null),f=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,i){const r=[t.popLast().toArray(),t.lastSegment(),eT(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],o=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ym(e).W(IDBKeyRange.bound(r,o,!0)).next(u=>{let f=go();for(const y of u){const E=this.jn(it.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);f=f.insert(E.key,E)}return f})}getAllFromCollectionGroup(e,t,i,r){let o=go();const u=a2(t,i),f=a2(t,Xo.max());return ym(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,f,!0)},(y,E,S)=>{const R=this.jn(it.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);o=o.insert(R.key,R),o.size===r&&S.done()}).next(()=>o)}newChangeBuffer(e){return new wZ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return o2(e).get("remoteDocumentGlobalKey").next(t=>(Ot(!!t),t))}Qn(e,t){return o2(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const i=function oZ(n,e){let t;if(e.document)t=xU(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=it.fromSegments(e.noDocument.path),r=hm(e.noDocument.readTime);t=Yn.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ht();{const i=it.fromSegments(e.unknownDocument.path),r=hm(e.unknownDocument.version);t=Yn.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(i){const r=new pi(i[0],i[1]);return Nt.fromTimestamp(r)}(e.readTime)),t}(this.It,t);if(!i.isNoDocument()||!i.version.isEqual(Nt.min()))return i}return Yn.newInvalidDocument(e)}}function s2(n){return new bZ(n)}class wZ extends r2{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new lf(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new Fn((o,u)=>qt(o.canonicalString(),u.canonicalString()));return this.changes.forEach((o,u)=>{const f=this.Xn.get(o);if(t.push(this.Yn.removeEntry(e,o,f.readTime)),u.isValidDocument()){const y=HU(this.Yn.It,u);r=r.add(o.path.popLast()),i+=rT(y)-f.size,t.push(this.Yn.addEntry(e,o,y))}else if(i-=f.size,this.trackRemovals){const y=HU(this.Yn.It,u.convertToNoDocument(Nt.min()));t.push(this.Yn.addEntry(e,o,y))}}),r.forEach(o=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Yn.updateMetadata(e,i)),Te.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(i=>(this.Xn.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:i,Jn:r})=>(r.forEach((o,u)=>{this.Xn.set(o,{size:u,readTime:i.get(o).readTime})}),i))}}function o2(n){return Or(n,"remoteDocumentGlobal")}function ym(n){return Or(n,"remoteDocumentsV14")}function qw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function a2(n,e){const t=e.documentKey.path.toArray();return[n,eT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function l2(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let o=0;o<t.length-2&&o<i.length-2;++o)if(r=qt(t[o],i[o]),r)return r;return r=qt(t.length,i.length),r||(r=qt(t[t.length-2],i[i.length-2]),r||qt(t[t.length-1],i[i.length-1]))}class EZ{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class u2{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.getBaseDocument(e,t,i))).next(r=>(null!==i&&Pw(i.mutation,r,Jo.empty(),pi.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Qt()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Qt()){const r=Qu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(o=>{let u=Ow();return o.forEach((f,y)=>{u=u.insert(f,y.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const i=Qu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Qt()))}populateOverlays(e,t,i){const r=[];return i.forEach(o=>{t.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((u,f)=>{t.set(u,f)})})}computeViews(e,t,i,r){let o=go();const u=Nw(),f=Nw();return t.forEach((y,E)=>{const S=i.get(E.key);r.has(E.key)&&(void 0===S||S.mutation instanceof Cd)?o=o.insert(E.key,E):void 0!==S&&(u.set(E.key,S.mutation.getFieldMask()),Pw(S.mutation,E,S.mutation.getFieldMask(),pi.now()))}),this.recalculateAndSaveOverlays(e,o).next(y=>(y.forEach((E,S)=>u.set(E,S)),t.forEach((E,S)=>{var R;return f.set(E,new EZ(S,null!==(R=u.get(E))&&void 0!==R?R:null))}),f))}recalculateAndSaveOverlays(e,t){const i=Nw();let r=new ki((u,f)=>u-f),o=Qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const f of u)f.keys().forEach(y=>{const E=t.get(y);if(null===E)return;let S=i.get(y)||Jo.empty();S=f.applyToLocalView(E,S),i.set(y,S);const R=(r.get(f.batchId)||Qt()).add(y);r=r.insert(f.batchId,R)})}).next(()=>{const u=[],f=r.getReverseIterator();for(;f.hasNext();){const y=f.getNext(),E=y.key,S=y.value,R=yU();S.forEach(H=>{if(!o.has(H)){const K=uU(t.get(H),i.get(H));null!==K&&R.set(H,K),o=o.add(H)}}),u.push(this.documentOverlayCache.saveOverlays(e,E,R))}return Te.waitFor(u)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return it.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Zk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var r}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(o=>{const u=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-o.size):Te.resolve(Qu());let f=-1,y=o;return u.next(E=>Te.forEach(E,(S,R)=>(f<R.largestBatchId&&(f=R.largestBatchId),o.get(S)?Te.resolve():this.getBaseDocument(e,S,R).next(H=>{y=y.insert(S,H)}))).next(()=>this.populateOverlays(e,E,o)).next(()=>this.computeViews(e,y,E,Qt())).next(S=>({batchId:f,changes:_U(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new it(t)).next(i=>{let r=Ow();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const r=t.collectionGroup;let o=Ow();return this.indexManager.getCollectionParents(e,r).next(u=>Te.forEach(u,f=>{const y=(E=t,S=f.child(r),new Ed(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,S;return this.getDocumentsMatchingCollectionQuery(e,y,i).next(E=>{E.forEach((S,R)=>{o=o.insert(S,R)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i){let r;return this.remoteDocumentCache.getAllFromCollection(e,t.path,i).next(o=>(r=o,this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId))).next(o=>{o.forEach((f,y)=>{const E=y.getKey();null===r.get(E)&&(r=r.insert(E,Yn.newInvalidDocument(E)))});let u=Ow();return r.forEach((f,y)=>{const E=o.get(f);void 0!==E&&Pw(E.mutation,y,Jo.empty(),pi.now()),Yk(t,y)&&(u=u.insert(f,y))}),u})}getBaseDocument(e,t,i){return null===i||1===i.mutation.type?this.remoteDocumentCache.getEntry(e,t):Te.resolve(Yn.newInvalidDocument(t))}}class CZ{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return Te.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var i;return this.Zn.set(t.id,{id:(i=t).id,version:i.version,createTime:Pr(i.createTime)}),Te.resolve()}getNamedQuery(e,t){return Te.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(i=t).name,query:oR(i.bundledQuery),readTime:Pr(i.readTime)}),Te.resolve();var i}}class DZ{constructor(){this.overlays=new ki(it.comparator),this.es=new Map}getOverlay(e,t){return Te.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Qu();return Te.forEach(t,r=>this.getOverlay(e,r).next(o=>{null!==o&&i.set(r,o)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,o)=>{this.ue(e,t,o)}),Te.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.es.get(i);return void 0!==r&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.es.delete(i)),Te.resolve()}getOverlaysForCollection(e,t,i){const r=Qu(),o=t.length+1,u=new it(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const y=f.getNext().value,E=y.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===o&&y.largestBatchId>i&&r.set(y.getKey(),y)}return Te.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let o=new ki((E,S)=>E-S);const u=this.overlays.getIterator();for(;u.hasNext();){const E=u.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>i){let S=o.get(E.largestBatchId);null===S&&(S=Qu(),o=o.insert(E.largestBatchId,S)),S.set(E.getKey(),E)}}const f=Qu(),y=o.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((E,S)=>f.set(E,S)),!(f.size()>=r)););return Te.resolve(f)}ue(e,t,i){const r=this.overlays.get(i.key);if(null!==r){const u=this.es.get(r.largestBatchId).delete(i.key);this.es.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new sR(t,i));let o=this.es.get(t);void 0===o&&(o=Qt(),this.es.set(t,o)),this.es.set(t,o.add(i.key))}}class uR{constructor(){this.ns=new Fn(Nr.ss),this.rs=new Fn(Nr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const i=new Nr(e,t);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.cs(new Nr(e,t))}hs(e,t){e.forEach(i=>this.removeReference(i,t))}ls(e){const t=new it(new yn([])),i=new Nr(t,e),r=new Nr(t,e+1),o=[];return this.rs.forEachInRange([i,r],u=>{this.cs(u),o.push(u.key)}),o}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new it(new yn([])),i=new Nr(t,e),r=new Nr(t,e+1);let o=Qt();return this.rs.forEachInRange([i,r],u=>{o=o.add(u.key)}),o}containsKey(e){const t=new Nr(e,0),i=this.ns.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class Nr{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return it.comparator(e.key,t.key)||qt(e._s,t._s)}static os(e,t){return qt(e._s,t._s)||it.comparator(e.key,t.key)}}class IZ{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Fn(Nr.ss)}checkEmpty(e){return Te.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){const o=this.ws;this.ws++;const u=new iR(o,t,i,r);this.mutationQueue.push(u);for(const f of r)this.gs=this.gs.add(new Nr(f.key,o)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Te.resolve(u)}lookupMutationBatch(e,t){return Te.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.ps(t+1),o=r<0?0:r;return Te.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return Te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Nr(t,0),r=new Nr(t,Number.POSITIVE_INFINITY),o=[];return this.gs.forEachInRange([i,r],u=>{const f=this.ys(u._s);o.push(f)}),Te.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Fn(qt);return t.forEach(r=>{const o=new Nr(r,0),u=new Nr(r,Number.POSITIVE_INFINITY);this.gs.forEachInRange([o,u],f=>{i=i.add(f._s)})}),Te.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let o=i;it.isDocumentKey(o)||(o=o.child(""));const u=new Nr(new it(o),0);let f=new Fn(qt);return this.gs.forEachWhile(y=>{const E=y.key.path;return!!i.isPrefixOf(E)&&(E.length===r&&(f=f.add(y._s)),!0)},u),Te.resolve(this.Is(f))}Is(e){const t=[];return e.forEach(i=>{const r=this.ys(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){Ot(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let i=this.gs;return Te.forEach(t.mutations,r=>{const o=new Nr(r.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.gs=i})}An(e){}containsKey(e,t){const i=new Nr(t,0),r=this.gs.firstAfterOrEqual(i);return Te.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return Te.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class TZ{constructor(e){this.Es=e,this.docs=new ki(it.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),o=r?r.size:0,u=this.Es(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Te.resolve(i?i.document.mutableCopy():Yn.newInvalidDocument(t))}getEntries(e,t){let i=go();return t.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Yn.newInvalidDocument(r))}),Te.resolve(i)}getAllFromCollection(e,t,i){let r=go();const o=new it(t.child("")),u=this.docs.getIteratorFrom(o);for(;u.hasNext();){const{key:f,value:{document:y}}=u.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||Uk(AV(y),i)<=0||(r=r.insert(y.key,y.mutableCopy()))}return Te.resolve(r)}getAllFromCollectionGroup(e,t,i,r){ht()}As(e,t){return Te.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new SZ(this)}getSize(e){return Te.resolve(this.size)}}class SZ extends r2{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Yn.addEntry(e,r)):this.Yn.removeEntry(i)}),Te.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class AZ{constructor(e){this.persistence=e,this.Rs=new lf(t=>lm(t),Mw),this.lastRemoteSnapshotVersion=Nt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new uR,this.targetCount=0,this.vs=_m.Pn()}forEachTarget(e,t){return this.Rs.forEach((i,r)=>t(r)),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.bs&&(this.bs=t),Te.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new _m(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,Te.resolve()}updateTargetData(e,t){return this.Dn(t),Te.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,t,i){let r=0;const o=[];return this.Rs.forEach((u,f)=>{f.sequenceNumber<=t&&null===i.get(f.targetId)&&(this.Rs.delete(u),o.push(this.removeMatchingKeysForTargetId(e,f.targetId)),r++)}),Te.waitFor(o).next(()=>r)}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,t){const i=this.Rs.get(t)||null;return Te.resolve(i)}addMatchingKeys(e,t,i){return this.Ps.us(t,i),Te.resolve()}removeMatchingKeys(e,t,i){this.Ps.hs(t,i);const r=this.persistence.referenceDelegate,o=[];return r&&t.forEach(u=>{o.push(r.markPotentiallyOrphaned(e,u))}),Te.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),Te.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Ps.ds(t);return Te.resolve(i)}containsKey(e,t){return Te.resolve(this.Ps.containsKey(t))}}class c2{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new mo(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new AZ(this),this.indexManager=new fZ,this.remoteDocumentCache=new TZ(i=>this.referenceDelegate.xs(i)),this.It=new UU(t),this.Ns=new CZ(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new DZ,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Vs[e.toKey()];return i||(i=new IZ(t,this.referenceDelegate),this.Vs[e.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,i){Ge("MemoryPersistence","Starting transaction:",e);const r=new xZ(this.Ss.next());return this.referenceDelegate.ks(),i(r).next(o=>this.referenceDelegate.Os(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ms(e,t){return Te.or(Object.values(this.Vs).map(i=>()=>i.containsKey(e,t)))}}class xZ extends MV{constructor(e){super(),this.currentSequenceNumber=e}}class aT{constructor(e){this.persistence=e,this.Fs=new uR,this.$s=null}static Bs(e){return new aT(e)}get Ls(){if(this.$s)return this.$s;throw ht()}addReference(e,t,i){return this.Fs.addReference(i,t),this.Ls.delete(i.toString()),Te.resolve()}removeReference(e,t,i){return this.Fs.removeReference(i,t),this.Ls.add(i.toString()),Te.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),Te.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(r=>this.Ls.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(o=>this.Ls.add(o.toString()))}).next(()=>i.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.Ls,i=>{const r=it.fromPath(i);return this.Us(e,r).next(o=>{o||t.removeEntry(r,Nt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(i=>{i?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return Te.or([()=>Te.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class MZ{constructor(e){this.It=e}$(e,t,i,r){const o=new HI("createOrUpgrade",t);var f;i<1&&r>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",NU,{unique:!0}),f.createObjectStore("documentMutations"),d2(e),function(f){f.createObjectStore("remoteDocuments")}(e));let u=Te.resolve();return i<3&&r>=3&&(0!==i&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),d2(e)),u=u.next(()=>function(f){const y=f.store("targetGlobal"),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Nt.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",E)}(o))),i<4&&r>=4&&(0!==i&&(u=u.next(()=>function(f,y){return y.store("mutations").W().next(E=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",NU,{unique:!0});const S=y.store("mutations"),R=E.map(H=>S.put(H));return Te.waitFor(R)})}(e,o))),u=u.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(u=u.next(()=>this.qs(o))),i<6&&r>=6&&(u=u.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(o)))),i<7&&r>=7&&(u=u.next(()=>this.Gs(o))),i<8&&r>=8&&(u=u.next(()=>this.Qs(e,o))),i<9&&r>=9&&(u=u.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(u=u.next(()=>this.js(o))),i<11&&r>=11&&(u=u.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(u=u.next(()=>{!function(f){const y=f.createObjectStore("documentOverlays",{keyPath:tZ});y.createIndex("collectionPathOverlayIndex",nZ,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",iZ,{unique:!1})}(e)})),i<13&&r>=13&&(u=u.next(()=>function(f){const y=f.createObjectStore("remoteDocumentsV14",{keyPath:G6});y.createIndex("documentKeyIndex",W6),y.createIndex("collectionGroupIndex",$6)}(e)).next(()=>this.Ws(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(u=u.next(()=>this.zs(e,o))),i<15&&r>=15&&(u=u.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:Q6}).createIndex("sequenceNumberIndex",X6,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:J6}).createIndex("documentKeyIndex",eZ,{unique:!1})}(e))),u}Ks(e){let t=0;return e.store("remoteDocuments").Z((i,r)=>{t+=rT(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}qs(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.W().next(r=>Te.forEach(r,o=>{const u=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",u).next(f=>Te.forEach(f,y=>{Ot(y.userId===o.userId);const E=fm(this.It,y);return XU(e,o.userId,E).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const o=[];return i.Z((u,f)=>{const y=new yn(u),E=[0,Hs(y)];o.push(t.get(E).next(S=>S?Te.resolve():t.put({targetId:0,path:Hs(y),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>Te.waitFor(o))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Y6});const i=t.store("collectionParents"),r=new lR,o=u=>{if(r.add(u)){const f=u.lastSegment(),y=u.popLast();return i.put({collectionId:f,parent:Hs(y)})}};return t.store("remoteDocuments").Z({X:!0},(u,f)=>{const y=new yn(u);return o(y.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([u,f,y],E)=>{const S=Ju(f);return o(S.popLast())}))}js(e){const t=e.store("targets");return t.Z((i,r)=>{const o=jw(r),u=jU(this.It,o);return t.put(u)})}Ws(e,t){const i=t.store("remoteDocuments"),r=[];return i.Z((o,u)=>{const f=t.store("remoteDocumentsV14"),y=(E=u,E.document?new it(yn.fromString(E.document.name).popFirst(5)):E.noDocument?it.fromSegments(E.noDocument.path):E.unknownDocument?it.fromSegments(E.unknownDocument.path):ht()).path.toArray();var E;const S={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};r.push(f.put(S))}).next(()=>Te.waitFor(r))}zs(e,t){const i=t.store("mutations"),r=s2(this.It),o=new c2(aT.Bs,this.It.re);return i.W().next(u=>{const f=new Map;return u.forEach(y=>{var E;let S=null!==(E=f.get(y.userId))&&void 0!==E?E:Qt();fm(this.It,y).keys().forEach(R=>S=S.add(R)),f.set(y.userId,S)}),Te.forEach(f,(y,E)=>{const S=new Rr(E),R=tT.oe(this.It,S),H=o.getIndexManager(S),K=sT.oe(S,this.It,H,o.referenceDelegate);return new u2(r,K,R,H).recalculateAndSaveOverlaysForDocumentKeys(new nR(t,mo.at),y).next()})})}}function d2(n){n.createObjectStore("targetDocuments",{keyPath:Z6}).createIndex("documentTargetsIndex",K6,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",q6,{unique:!0}),n.createObjectStore("targetGlobal")}const cR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class dR{constructor(e,t,i,r,o,u,f,y,E,S,R=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Hs=o,this.window=u,this.document=f,this.Js=E,this.Ys=S,this.Xs=R,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=H=>Promise.resolve(),!dR.C())throw new Ue(xe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vZ(this,r),this.ii=t+"main",this.It=new UU(y),this.ri=new kl(this.ii,this.Xs,new MZ(this.It)),this.Cs=new mZ(this.referenceDelegate,this.It),this.remoteDocumentCache=s2(this.It),this.Ns=new aZ,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===S&&Hi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ue(xe.FAILED_PRECONDITION,cR);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new mo(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var i=(0,ke.Z)(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ke.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ke.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>lT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(ef(e))return Ge("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ge("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Zw(e).get("owner").next(t=>Te.resolve(this.mi(t)))}gi(e){return lT(e).delete(this.clientId)}yi(){var e=this;return(0,ke.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Or(i,"clientMetadata");return r.W().next(o=>{const u=e.Ii(o,18e5),f=o.filter(y=>-1===u.indexOf(y));return Te.forEach(f,y=>r.delete(y.clientId)).next(()=>f)})}).catch(()=>[]);if(e.oi)for(const i of t)e.oi.removeItem(e.Ti(i.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?Te.resolve(!0):Zw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ue(xe.FAILED_PRECONDITION,cR);return!1}}return!(!this.networkEnabled||!this.inForeground)||lT(e).W().next(i=>void 0===this.Ii(i,5e3).find(r=>{if(this.clientId!==r.clientId){const u=!this.inForeground&&r.inForeground,f=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||u&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ge("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ke.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new nR(t,mo.at);return e._i(i).next(()=>e.gi(i))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(i=>this.pi(i.updateTimeMs,t)&&!this.Ei(i.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>lT(e).W().next(t=>this.Ii(t,18e5).map(i=>i.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return sT.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new pZ(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return tT.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,i){Ge("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",o=15===(u=this.Xs)?sZ:14===u?VU:13===u?BU:12===u?rZ:11===u?FU:void ht();var u;let f;return this.ri.runTransaction(e,r,o,y=>(f=new nR(y,this.Ss?this.Ss.next():mo.at),"readwrite-primary"===t?this.fi(f).next(E=>!!E||this.di(f)).next(E=>{if(!E)throw Hi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ue(xe.FAILED_PRECONDITION,xV);return i(f)}).next(E=>this.wi(f).next(()=>E)):this.Vi(f).next(()=>i(f)))).then(y=>(f.raiseOnCommittedEvent(),y))}Vi(e){return Zw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ue(xe.FAILED_PRECONDITION,cR)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zw(e).put("owner",t)}static C(){return kl.C()}_i(e){const t=Zw(e);return t.get("owner").next(i=>this.mi(i)?(Ge("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Te.resolve())}pi(e,t){const i=Date.now();return!(e<i-t||e>i&&(Hi(`Detected an update time that is in the future: ${e} > ${i}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Q.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const i=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ge("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Hi("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Hi("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Zw(n){return Or(n,"owner")}function lT(n){return Or(n,"clientMetadata")}function hR(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class fR{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Si=i,this.Di=r}static Ci(e,t){let i=Qt(),r=Qt();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new fR(e,t.fromCache,i,r)}}class h2{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,i,r){return this.ki(e,t).next(o=>o||this.Oi(e,t,r,i)).next(o=>o||this.Mi(e,t))}ki(e,t){if(QV(t))return Te.resolve(null);let i=Us(t);return this.indexManager.getIndexType(e,i).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=qI(t,null,"F"),i=Us(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const u=Qt(...o);return this.Ni.getDocuments(e,u).next(f=>this.indexManager.getMinOffset(e,i).next(y=>{const E=this.Fi(t,f);return this.$i(t,E,u,y.readTime)?this.ki(e,qI(t,null,"F")):this.Bi(e,E,t,y)}))})))}Oi(e,t,i,r){return QV(t)||r.isEqual(Nt.min())?this.Mi(e,t):this.Ni.getDocuments(e,i).next(o=>{const u=this.Fi(t,o);return this.$i(t,u,i,r)?this.Mi(e,t):(Fk()<=zr.in.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Kk(t)),this.Bi(e,u,t,SV(r,-1)))})}Fi(e,t){let i=new Fn(eU(e));return t.forEach((r,o)=>{Yk(e,o)&&(i=i.add(o))}),i}$i(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Mi(e,t){return Fk()<=zr.in.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",Kk(t)),this.Ni.getDocumentsMatchingQuery(e,t,Xo.min())}Bi(e,t,i,r){return this.Ni.getDocumentsMatchingQuery(e,i,r).next(o=>(t.forEach(u=>{o=o.insert(u.key,u)}),o))}}class kZ{constructor(e,t,i,r){this.persistence=e,this.Li=t,this.It=r,this.Ui=new ki(qt),this.qi=new lf(o=>lm(o),Mw),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(i)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new u2(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function f2(n,e,t,i){return new kZ(n,e,t,i)}function p2(n,e){return pR.apply(this,arguments)}function pR(){return pR=(0,ke.Z)(function*(n,e){const t=st(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,t.Qi(e),t.mutationQueue.getAllMutationBatches(i))).next(o=>{const u=[],f=[];let y=Qt();for(const E of r){u.push(E.batchId);for(const S of E.mutations)y=y.add(S.key)}for(const E of o){f.push(E.batchId);for(const S of E.mutations)y=y.add(S.key)}return t.localDocuments.getDocuments(i,y).next(E=>({ji:E,removedBatchIds:u,addedBatchIds:f}))})})}),pR.apply(this,arguments)}function RZ(n,e){const t=st(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=t.Gi.newChangeBuffer({trackRemovals:!0});return function(u,f,y,E){const S=y.batch,R=S.keys();let H=Te.resolve();return R.forEach(K=>{H=H.next(()=>E.getEntry(f,K)).next(J=>{const le=y.docVersions.get(K);Ot(null!==le),J.version.compareTo(le)<0&&(S.applyToRemoteDocument(J,y),J.isValidDocument()&&(J.setReadTime(y.commitVersion),E.addEntry(J)))})}),H.next(()=>u.mutationQueue.removeMutationBatch(f,S))}(t,i,e,o).next(()=>o.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let f=Qt();for(let y=0;y<u.mutationResults.length;++y)u.mutationResults[y].transformResults.length>0&&(f=f.add(u.batch.mutations[y].key));return f}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function m2(n){const e=st(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function PZ(n,e){const t=st(n),i=e.snapshotVersion;let r=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=t.Gi.newChangeBuffer({trackRemovals:!0});r=t.Ui;const f=[];e.targetChanges.forEach((S,R)=>{const H=r.get(R);if(!H)return;f.push(t.Cs.removeMatchingKeys(o,S.removedDocuments,R).next(()=>t.Cs.addMatchingKeys(o,S.addedDocuments,R)));let K=H.withSequenceNumber(o.currentSequenceNumber);var J,le,ve;e.targetMismatches.has(R)?K=K.withResumeToken(mr.EMPTY_BYTE_STRING,Nt.min()).withLastLimboFreeSnapshotVersion(Nt.min()):S.resumeToken.approximateByteSize()>0&&(K=K.withResumeToken(S.resumeToken,i)),r=r.insert(R,K),le=K,ve=S,(0===(J=H).resumeToken.approximateByteSize()||le.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=3e8||ve.addedDocuments.size+ve.modifiedDocuments.size+ve.removedDocuments.size>0)&&f.push(t.Cs.updateTargetData(o,K))});let y=go(),E=Qt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(o,S))}),f.push(g2(o,u,e.documentUpdates).next(S=>{y=S.Wi,E=S.zi})),!i.isEqual(Nt.min())){const S=t.Cs.getLastRemoteSnapshotVersion(o).next(R=>t.Cs.setTargetsMetadata(o,o.currentSequenceNumber,i));f.push(S)}return Te.waitFor(f).next(()=>u.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,y,E)).next(()=>y)}).then(o=>(t.Ui=r,o))}function g2(n,e,t){let i=Qt(),r=Qt();return t.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let u=go();return t.forEach((f,y)=>{const E=o.get(f);y.isFoundDocument()!==E.isFoundDocument()&&(r=r.add(f)),y.isNoDocument()&&y.version.isEqual(Nt.min())?(e.removeEntry(f,y.readTime),u=u.insert(f,y)):!E.isValidDocument()||y.version.compareTo(E.version)>0||0===y.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(y),u=u.insert(f,y)):Ge("LocalStore","Ignoring outdated watch update for ",f,". Current version:",E.version," Watch version:",y.version)}),{Wi:u,zi:r}})}function OZ(n,e){const t=st(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Y_(n,e){const t=st(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Cs.getTargetData(i,e).next(o=>o?(r=o,Te.resolve(r)):t.Cs.allocateTargetId(i).next(u=>(r=new uf(e,u,0,i.currentSequenceNumber),t.Cs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.Ui.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(i.targetId,i),t.qi.set(e,i.targetId)),i})}function Q_(n,e,t){return mR.apply(this,arguments)}function mR(){return mR=(0,ke.Z)(function*(n,e,t){const i=st(n),r=i.Ui.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",o,u=>i.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!ef(u))throw u;Ge("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ui=i.Ui.remove(e),i.qi.delete(r.target)}),mR.apply(this,arguments)}function uT(n,e,t){const i=st(n);let r=Nt.min(),o=Qt();return i.persistence.runTransaction("Execute query","readonly",u=>function(f,y,E){const S=st(f),R=S.qi.get(E);return void 0!==R?Te.resolve(S.Ui.get(R)):S.Cs.getTargetData(y,E)}(i,u,Us(e)).next(f=>{if(f)return r=f.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(u,f.targetId).next(y=>{o=y})}).next(()=>i.Li.getDocumentsMatchingQuery(u,e,t?r:Nt.min(),t?o:Qt())).next(f=>(v2(i,JV(e),f),{documents:f,Hi:o})))}function _2(n,e){const t=st(n),i=st(t.Cs),r=t.Ui.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",o=>i.se(o,e).next(u=>u?u.target:null))}function y2(n,e){const t=st(n),i=t.Ki.get(e)||Nt.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.Gi.getAllFromCollectionGroup(r,e,SV(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(v2(t,e,r),r))}function v2(n,e,t){let i=n.Ki.get(e)||Nt.min();t.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.Ki.set(e,i)}function gR(){return gR=(0,ke.Z)(function*(n,e,t,i){const r=st(n);let o=Qt(),u=go();for(const E of t){const S=e.Ji(E.metadata.name);E.document&&(o=o.add(S));const R=e.Yi(E);R.setReadTime(e.Xi(E.metadata.readTime)),u=u.insert(S,R)}const f=r.Gi.newChangeBuffer({trackRemovals:!0}),y=yield Y_(r,(E=i,Us(U_(yn.fromString(`__bundle__/docs/${E}`)))));var E;return r.persistence.runTransaction("Apply bundle documents","readwrite",E=>g2(E,f,u).next(S=>(f.apply(E),S)).next(S=>r.Cs.removeMatchingKeysForTargetId(E,y.targetId).next(()=>r.Cs.addMatchingKeys(E,o,y.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(E,S.Wi,S.zi)).next(()=>S.Wi)))}),gR.apply(this,arguments)}function LZ(n,e){return _R.apply(this,arguments)}function _R(){return _R=(0,ke.Z)(function*(n,e,t=Qt()){const i=yield Y_(n,Us(oR(e.bundledQuery))),r=st(n);return r.persistence.runTransaction("Save named query","readwrite",o=>{const u=Pr(e.readTime);if(i.snapshotVersion.compareTo(u)>=0)return r.Ns.saveNamedQuery(o,e);const f=i.withResumeToken(mr.EMPTY_BYTE_STRING,u);return r.Ui=r.Ui.insert(f.targetId,f),r.Cs.updateTargetData(o,f).next(()=>r.Cs.removeMatchingKeysForTargetId(o,i.targetId)).next(()=>r.Cs.addMatchingKeys(o,t,i.targetId)).next(()=>r.Ns.saveNamedQuery(o,e))})}),_R.apply(this,arguments)}function b2(n,e){return`firestore_clients_${n}_${e}`}function w2(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function yR(n,e){return`firestore_targets_${n}_${e}`}class cT{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Zi(e,t,i){const r=JSON.parse(i);let o,u="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Ue(r.error.code,r.error.message))),u?new cT(e,t,r.state,o):(Hi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kw{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Zi(e,t){const i=JSON.parse(t);let r,o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(r=new Ue(i.error.code,i.error.message))),o?new Kw(e,i.state,r):(Hi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,o=QI();for(let u=0;r&&u<i.activeTargetIds.length;++u)r=LV(i.activeTargetIds[u]),o=o.add(i.activeTargetIds[u]);return r?new dT(e,o):(Hi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class vR{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new vR(t.clientId,t.onlineState):(Hi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class bR{constructor(){this.activeTargetIds=QI()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wR{constructor(e,t,i,r,o){this.window=e,this.Hs=t,this.persistenceKey=i,this.sr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new ki(qt),this.started=!1,this.cr=[];const u=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ar=b2(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new bR),this.lr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ke.Z)(function*(){const t=yield e.syncEngine.vi();for(const r of t){if(r===e.sr)continue;const o=e.getItem(b2(e.persistenceKey,r));if(o){const u=dT.Zi(r,o);u&&(e.ur=e.ur.insert(u.clientId,u))}}e.gr();const i=e.storage.getItem(e.wr);if(i){const r=e.yr(i);r&&e.pr(r)}for(const r of e.cr)e.rr(r);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,i){this.Tr(e,t,i),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(yR(this.persistenceKey,e));if(i){const r=Kw.Zi(e,i);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(yR(this.persistenceKey,e))}updateQueryState(e,t,i){this.Rr(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Er(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ge("SharedClientState","READ",e,t),t}setItem(e,t){Ge("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ge("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const i=e;if(i.storageArea===this.storage){if(Ge("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ar)return void Hi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ke.Z)(function*(){if(t.started){if(null!==i.key)if(t.lr.test(i.key)){if(null==i.newValue){const r=t.vr(i.key);return t.Vr(r,null)}{const r=t.Sr(i.key,i.newValue);if(r)return t.Vr(r.clientId,r)}}else if(t.dr.test(i.key)){if(null!==i.newValue){const r=t.Dr(i.key,i.newValue);if(r)return t.Cr(r)}}else if(t._r.test(i.key)){if(null!==i.newValue){const r=t.Nr(i.key,i.newValue);if(r)return t.kr(r)}}else if(i.key===t.wr){if(null!==i.newValue){const r=t.yr(i.newValue);if(r)return t.pr(r)}}else if(i.key===t.hr){const r=function(o){let u=mo.at;if(null!=o)try{const f=JSON.parse(o);Ot("number"==typeof f),u=f}catch(f){Hi("SharedClientState","Failed to read sequence number from WebStorage",f)}return u}(i.newValue);r!==mo.at&&t.sequenceNumberHandler(r)}else if(i.key===t.mr){const r=t.Or(i.newValue);yield Promise.all(r.map(o=>t.syncEngine.Mr(o)))}}else t.cr.push(i)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,i){const r=new cT(this.currentUser,e,t,i),o=w2(this.persistenceKey,this.currentUser,e);this.setItem(o,r.tr())}Er(e){const t=w2(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,i){const r=yR(this.persistenceKey,e),o=new Kw(e,t,i);this.setItem(r,o.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const i=this.vr(e);return dT.Zi(i,t)}Dr(e,t){const i=this.dr.exec(e),r=Number(i[1]);return cT.Zi(new Rr(void 0!==i[2]?i[2]:null),r,t)}Nr(e,t){const i=this._r.exec(e),r=Number(i[1]);return Kw.Zi(r,t)}yr(e){return vR.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ke.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ge("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const i=t?this.ur.insert(e,t):this.ur.remove(e),r=this.Ir(this.ur),o=this.Ir(i),u=[],f=[];return o.forEach(y=>{r.has(y)||u.push(y)}),r.forEach(y=>{o.has(y)||f.push(y)}),this.syncEngine.Br(u,f).then(()=>{this.ur=i})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=QI();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class E2{constructor(){this.Lr=new bR,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,i){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new bR,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class FZ{qr(e){}shutdown(){}}class C2{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const BZ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class VZ{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class UZ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,i,r,o){const u=this.ho(e,t);Ge("RestConnection","Sending: ",u,i);const f={};return this.lo(f,r,o),this.fo(e,u,f,i).then(y=>(Ge("RestConnection","Received: ",y),y),y=>{throw tm("RestConnection",`${e} failed with error: `,y,"url: ",u,"request:",i),y})}_o(e,t,i,r,o,u){return this.ao(e,t,i,r,o)}lo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+N_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}ho(e,t){return`${this.oo}/v1/${t}:${BZ[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,i,r){return new Promise((o,u)=>{const f=new Bq;f.setWithCredentials(!0),f.listenOnce(Nq.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Lk.NO_ERROR:const E=f.getResponseJson();Ge("Connection","XHR received:",JSON.stringify(E)),o(E);break;case Lk.TIMEOUT:Ge("Connection",'RPC "'+e+'" timed out'),u(new Ue(xe.DEADLINE_EXCEEDED,"Request time out"));break;case Lk.HTTP_ERROR:const S=f.getStatus();if(Ge("Connection",'RPC "'+e+'" failed with status:',S,"response text:",f.getResponseText()),S>0){const R=f.getResponseJson().error;if(R&&R.status&&R.message){const H=function(K){const J=K.toLowerCase().replace(/_/g,"-");return Object.values(xe).indexOf(J)>=0?J:xe.UNKNOWN}(R.status);u(new Ue(H,R.message))}else u(new Ue(xe.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new Ue(xe.UNAVAILABLE,"Connection failed."));break;default:ht()}}finally{Ge("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(r);f.send(t,"POST",y,i,15)})}wo(e,t,i){const r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Pq(),u=Oq(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new Fq({})),this.lo(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const y=r.join("");Ge("Connection","Creating WebChannel: "+y,f);const E=o.createWebChannel(y,f);let S=!1,R=!1;const H=new VZ({Hr:J=>{R?Ge("Connection","Not sending because WebChannel is closed:",J):(S||(Ge("Connection","Opening WebChannel transport."),E.open(),S=!0),Ge("Connection","WebChannel sending:",J),E.send(J))},Jr:()=>E.close()}),K=(J,le,ve)=>{J.listen(le,Ve=>{try{ve(Ve)}catch(Ye){setTimeout(()=>{throw Ye},0)}})};return K(E,BI.EventType.OPEN,()=>{R||Ge("Connection","WebChannel transport opened.")}),K(E,BI.EventType.CLOSE,()=>{R||(R=!0,Ge("Connection","WebChannel transport closed"),H.io())}),K(E,BI.EventType.ERROR,J=>{R||(R=!0,tm("Connection","WebChannel transport errored:",J),H.io(new Ue(xe.UNAVAILABLE,"The operation could not be completed")))}),K(E,BI.EventType.MESSAGE,J=>{var le;if(!R){const ve=J.data[0];Ot(!!ve);const Ve=ve,Ye=Ve.error||(null===(le=Ve[0])||void 0===le?void 0:le.error);if(Ye){Ge("Connection","WebChannel received error:",Ye);const Qe=Ye.status;let Xe=function(It){const tn=nr[It];if(void 0!==tn)return mU(tn)}(Qe),wt=Ye.message;void 0===Xe&&(Xe=xe.INTERNAL,wt="Unknown error status: "+Qe+" with message "+Ye.message),R=!0,H.io(new Ue(Xe,wt)),E.close()}else Ge("Connection","WebChannel received:",ve),H.ro(ve)}}),K(u,Lq.STAT_EVENT,J=>{J.stat===wV.PROXY?Ge("Connection","Detected buffering proxy"):J.stat===wV.NOPROXY&&Ge("Connection","Detected no buffering proxy")}),setTimeout(()=>{H.so()},0),H}}function D2(){return typeof window<"u"?window:null}function hT(){return typeof document<"u"?document:null}function Yw(n){return new k6(n,!0)}class ER{constructor(e,t,i=1e3,r=1.5,o=6e4){this.Hs=e,this.timerId=t,this.mo=i,this.yo=r,this.po=o,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),r=Math.max(0,t-i);r>0&&Ge("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class I2{constructor(e,t,i,r,o,u,f,y){this.Hs=e,this.vo=i,this.Vo=r,this.So=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=y,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new ER(e,t)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,ke.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,ke.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var i=this;return(0,ke.Z)(function*(){i.Uo(),i.qo(),i.No.cancel(),i.Do++,4!==e?i.No.reset():t&&t.code===xe.RESOURCE_EXHAUSTED?(Hi(t.toString()),Hi("Using maximum backoff delay to prevent overloading the backend."),i.No.Ao()):t&&t.code===xe.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Ko(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.Zr(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Do===t&&this.Qo(i,r)},i=>{e(()=>{const r=new Ue(xe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.jo(r)})})}Qo(e,t){const i=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr(()=>{i(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(r=>{i(()=>this.jo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Mo(){var e=this;this.state=5,this.No.Ro((0,ke.Z)(function*(){e.state=0,e.start()}))}jo(e){return Ge("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Hs.enqueueAndForget(()=>this.Do===e?t():(Ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class HZ extends I2{constructor(e,t,i,r,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,u),this.It=o}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function O6(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:ht(),r=e.targetChange.targetIds||[],o=function(y,E){return y.gt?(Ot(void 0===E||"string"==typeof E),mr.fromBase64String(E||"")):(Ot(void 0===E||E instanceof Uint8Array),mr.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&function(y){const E=void 0===y.code?xe.UNKNOWN:mU(y.code);return new Ue(E,y.message||"")}(u);t=new bU(i,r,o,f||null)}else if("documentChange"in e){const i=e.documentChange,r=Xu(n,i.document.name),o=Pr(i.document.updateTime),u=new Yr({mapValue:{fields:i.document.fields}}),f=Yn.newFoundDocument(r,o,u);t=new XI(i.targetIds||[],i.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const i=e.documentDelete,r=Xu(n,i.document),o=i.readTime?Pr(i.readTime):Nt.min(),u=Yn.newNoDocument(r,o);t=new XI([],i.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const i=e.documentRemove,r=Xu(n,i.document);t=new XI([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return ht();{const i=e.filter,o=new C6(i.count||0);t=new vU(i.targetId,o)}}var y;return t}(this.It,e),i=function(r){if(!("targetChange"in r))return Nt.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?Nt.min():o.readTime?Pr(o.readTime):Nt.min()}(e);return this.listener.zo(t,i)}Ho(e){const t={};t.database=Uw(this.It),t.addTarget=function(r,o){let u;const f=o.target;return u=WI(f)?{documents:MU(r,f)}:{query:tR(r,f)},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0?u.resumeToken=DU(r,o.resumeToken):o.snapshotVersion.compareTo(Nt.min())>0&&(u.readTime=Bw(r,o.snapshotVersion.toTimestamp())),u}(this.It,e);const i=function L6(n,e){const t=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ht()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Lo(t)}Jo(e){const t={};t.database=Uw(this.It),t.removeTarget=e,this.Lo(t)}}class jZ extends I2{constructor(e,t,i,r,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,u),this.It=o,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Ot(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function N6(n,e){return n&&n.length>0?(Ot(void 0!==e),n.map(t=>function(i,r){let o=Pr(i.updateTime?i.updateTime:r);return o.isEqual(Nt.min())&&(o=Pr(r)),new b6(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=Pr(e.commitTime);return this.listener.tu(i,t)}return Ot(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Uw(this.It),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Hw(this.It,i))};this.Lo(t)}}class zZ extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=i,this.It=r,this.su=!1}iu(){if(this.su)throw new Ue(xe.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,i){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.So.ao(e,t,i,r,o)).catch(r=>{throw"FirebaseError"===r.name?(r.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Ue(xe.UNKNOWN,r.toString())})}_o(e,t,i,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So._o(e,t,i,o,u,r)).catch(o=>{throw"FirebaseError"===o.name?(o.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ue(xe.UNKNOWN,o.toString())})}terminate(){this.su=!0}}class WZ{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Hi(t),this.uu=!1):Ge("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class $Z{constructor(e,t,i,r,o){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=o,this.gu.qr(f=>{i.enqueueAndForget((0,ke.Z)(function*(){var y;Dd(u)&&(Ge("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,ke.Z)(function*(E){const S=st(E);S.wu.add(4),yield X_(S),S.yu.set("Unknown"),S.wu.delete(4),yield Qw(S)}),function(E){return y.apply(this,arguments)})(u))}))}),this.yu=new WZ(i,r)}}function Qw(n){return DR.apply(this,arguments)}function DR(){return DR=(0,ke.Z)(function*(n){if(Dd(n))for(const e of n.mu)yield e(!0)}),DR.apply(this,arguments)}function X_(n){return IR.apply(this,arguments)}function IR(){return IR=(0,ke.Z)(function*(n){for(const e of n.mu)yield e(!1)}),IR.apply(this,arguments)}function fT(n,e){const t=st(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),AR(t)?SR(t):ey(t).Oo()&&TR(t,e))}function Xw(n,e){const t=st(n),i=ey(t);t._u.delete(e),i.Oo()&&T2(t,e),0===t._u.size&&(i.Oo()?i.$o():Dd(t)&&t.yu.set("Unknown"))}function TR(n,e){n.pu.Mt(e.targetId),ey(n).Ho(e)}function T2(n,e){n.pu.Mt(e),ey(n).Jo(e)}function SR(n){n.pu=new A6({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n._u.get(e)||null}),ey(n).start(),n.yu.cu()}function AR(n){return Dd(n)&&!ey(n).ko()&&n._u.size>0}function Dd(n){return 0===st(n).wu.size}function S2(n){n.pu=void 0}function qZ(n){return xR.apply(this,arguments)}function xR(){return xR=(0,ke.Z)(function*(n){n._u.forEach((e,t)=>{TR(n,e)})}),xR.apply(this,arguments)}function ZZ(n,e){return MR.apply(this,arguments)}function MR(){return MR=(0,ke.Z)(function*(n,e){S2(n),AR(n)?(n.yu.lu(e),SR(n)):n.yu.set("Unknown")}),MR.apply(this,arguments)}function KZ(n,e,t){return kR.apply(this,arguments)}function kR(){return kR=(0,ke.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof bU&&2===e.state&&e.cause)try{yield(i=(0,ke.Z)(function*(r,o){const u=o.cause;for(const f of o.targetIds)r._u.has(f)&&(yield r.remoteSyncer.rejectListen(f,u),r._u.delete(f),r.pu.removeTarget(f))}),function(r,o){return i.apply(this,arguments)})(n,e)}catch(i){Ge("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield pT(n,i)}else if(e instanceof XI?n.pu.Gt(e):e instanceof vU?n.pu.Yt(e):n.pu.Wt(e),!t.isEqual(Nt.min()))try{const i=yield m2(n.localStore);t.compareTo(i)>=0&&(yield function(r,o){const u=r.pu.te(o);return u.targetChanges.forEach((f,y)=>{if(f.resumeToken.approximateByteSize()>0){const E=r._u.get(y);E&&r._u.set(y,E.withResumeToken(f.resumeToken,o))}}),u.targetMismatches.forEach(f=>{const y=r._u.get(f);if(!y)return;r._u.set(f,y.withResumeToken(mr.EMPTY_BYTE_STRING,y.snapshotVersion)),T2(r,f);const E=new uf(y.target,f,1,y.sequenceNumber);TR(r,E)}),r.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(i){Ge("RemoteStore","Failed to raise snapshot:",i),yield pT(n,i)}var i}),kR.apply(this,arguments)}function pT(n,e,t){return RR.apply(this,arguments)}function RR(){return RR=(0,ke.Z)(function*(n,e,t){if(!ef(e))throw e;n.wu.add(1),yield X_(n),n.yu.set("Offline"),t||(t=()=>m2(n.localStore)),n.asyncQueue.enqueueRetryable((0,ke.Z)(function*(){Ge("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Qw(n)}))}),RR.apply(this,arguments)}function A2(n,e){return e().catch(t=>pT(n,t,e))}function J_(n){return PR.apply(this,arguments)}function PR(){return PR=(0,ke.Z)(function*(n){const e=st(n),t=hf(e);let i=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;YZ(e);)try{const r=yield OZ(e.localStore,i);if(null===r){0===e.du.length&&t.$o();break}i=r.batchId,QZ(e,r)}catch(r){yield pT(e,r)}x2(e)&&M2(e)}),PR.apply(this,arguments)}function YZ(n){return Dd(n)&&n.du.length<10}function QZ(n,e){n.du.push(e);const t=hf(n);t.Oo()&&t.Xo&&t.Zo(e.mutations)}function x2(n){return Dd(n)&&!hf(n).ko()&&n.du.length>0}function M2(n){hf(n).start()}function XZ(n){return OR.apply(this,arguments)}function OR(){return OR=(0,ke.Z)(function*(n){hf(n).nu()}),OR.apply(this,arguments)}function JZ(n){return NR.apply(this,arguments)}function NR(){return NR=(0,ke.Z)(function*(n){const e=hf(n);for(const t of n.du)e.Zo(t.mutations)}),NR.apply(this,arguments)}function e4(n,e,t){return LR.apply(this,arguments)}function LR(){return LR=(0,ke.Z)(function*(n,e,t){const i=n.du.shift(),r=rR.from(i,e,t);yield A2(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield J_(n)}),LR.apply(this,arguments)}function t4(n,e){return FR.apply(this,arguments)}function FR(){return FR=(0,ke.Z)(function*(n,e){var t;e&&hf(n).Xo&&(yield(t=(0,ke.Z)(function*(i,r){if(pU(o=r.code)&&o!==xe.ABORTED){const u=i.du.shift();hf(i).Fo(),yield A2(i,()=>i.remoteSyncer.rejectFailedWrite(u.batchId,r)),yield J_(i)}var o}),function(i,r){return t.apply(this,arguments)})(n,e)),x2(n)&&M2(n)}),FR.apply(this,arguments)}function k2(n,e){return BR.apply(this,arguments)}function BR(){return BR=(0,ke.Z)(function*(n,e){const t=st(n);t.asyncQueue.verifyOperationInProgress(),Ge("RemoteStore","RemoteStore received new credentials");const i=Dd(t);t.wu.add(3),yield X_(t),i&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Qw(t)}),BR.apply(this,arguments)}function VR(n,e){return UR.apply(this,arguments)}function UR(){return UR=(0,ke.Z)(function*(n,e){const t=st(n);e?(t.wu.delete(2),yield Qw(t)):e||(t.wu.add(2),yield X_(t),t.yu.set("Unknown"))}),UR.apply(this,arguments)}function ey(n){return n.Iu||(n.Iu=function(e,t,i){const r=st(e);return r.iu(),new HZ(t,r.So,r.authCredentials,r.appCheckCredentials,r.It,i)}(n.datastore,n.asyncQueue,{Yr:qZ.bind(null,n),Zr:ZZ.bind(null,n),zo:KZ.bind(null,n)}),n.mu.push(function(){var e=(0,ke.Z)(function*(t){t?(n.Iu.Fo(),AR(n)?SR(n):n.yu.set("Unknown")):(yield n.Iu.stop(),S2(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function hf(n){return n.Tu||(n.Tu=function(e,t,i){const r=st(e);return r.iu(),new jZ(t,r.So,r.authCredentials,r.appCheckCredentials,r.It,i)}(n.datastore,n.asyncQueue,{Yr:XZ.bind(null,n),Zr:t4.bind(null,n),eu:JZ.bind(null,n),tu:e4.bind(null,n)}),n.mu.push(function(){var e=(0,ke.Z)(function*(t){t?(n.Tu.Fo(),yield J_(n)):(yield n.Tu.stop(),n.du.length>0&&(Ge("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class HR{constructor(e,t,i,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,i,r,o){const u=Date.now()+i,f=new HR(e,t,u,r,o);return f.start(i),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ue(xe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ty(n,e){if(Hi("AsyncQueue",`${e}: ${n}`),ef(n))return new Ue(xe.UNAVAILABLE,`${e}: ${n}`);throw n}class ny{constructor(e){this.comparator=e?(t,i)=>e(t,i)||it.comparator(t.key,i.key):(t,i)=>it.comparator(t.key,i.key),this.keyedMap=Ow(),this.sortedSet=new ki(this.comparator)}static emptySet(e){return new ny(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ny)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new ny;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class R2{constructor(){this.Eu=new ki(it.comparator)}track(e){const t=e.doc.key,i=this.Eu.get(t);i?0!==e.type&&3===i.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==i.type?this.Eu=this.Eu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Eu=this.Eu.remove(t):1===e.type&&2===i.type?this.Eu=this.Eu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):ht():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,i)=>{e.push(i)}),e}}class iy{constructor(e,t,i,r,o,u,f,y,E){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=y,this.hasCachedResults=E}static fromInitialDocuments(e,t,i,r,o){const u=[];return t.forEach(f=>{u.push({type:0,doc:f})}),new iy(e,t,ny.emptySet(t),u,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class n4{constructor(){this.Ru=void 0,this.listeners=[]}}class i4{constructor(){this.queries=new lf(e=>XV(e),kw),this.onlineState="Unknown",this.bu=new Set}}function jR(n,e){return zR.apply(this,arguments)}function zR(){return zR=(0,ke.Z)(function*(n,e){const t=st(n),i=e.query;let r=!1,o=t.queries.get(i);if(o||(r=!0,o=new n4),r)try{o.Ru=yield t.onListen(i)}catch(u){const f=ty(u,`Initialization of query '${Kk(e.query)}' failed`);return void e.onError(f)}t.queries.set(i,o),o.listeners.push(e),e.Pu(t.onlineState),o.Ru&&e.vu(o.Ru)&&$R(t)}),zR.apply(this,arguments)}function GR(n,e){return WR.apply(this,arguments)}function WR(){return WR=(0,ke.Z)(function*(n,e){const t=st(n),i=e.query;let r=!1;const o=t.queries.get(i);if(o){const u=o.listeners.indexOf(e);u>=0&&(o.listeners.splice(u,1),r=0===o.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),WR.apply(this,arguments)}function r4(n,e){const t=st(n);let i=!1;for(const r of e){const u=t.queries.get(r.query);if(u){for(const f of u.listeners)f.vu(r)&&(i=!0);u.Ru=r}}i&&$R(t)}function s4(n,e,t){const i=st(n),r=i.queries.get(e);if(r)for(const o of r.listeners)o.onError(t);i.queries.delete(e)}function $R(n){n.bu.forEach(e=>{e.next()})}class qR{constructor(e,t,i){this.query=e,this.Vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=i||{}}vu(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new iy(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||(!this.options.ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=iy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class o4{constructor(e,t){this.payload=e,this.byteLength=t}Ou(){return"metadata"in this.payload}}class P2{constructor(e){this.It=e}Ji(e){return Xu(this.It,e)}Yi(e){return e.metadata.exists?xU(this.It,e.document,!1):Yn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Pr(e)}}class a4{constructor(e,t,i){this.Mu=e,this.localStore=t,this.It=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=O2(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const i=yn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,i=new P2(this.It);for(const r of e)if(r.metadata.queries){const o=i.Ji(r.metadata.name);for(const u of r.metadata.queries){const f=(t.get(u)||Qt()).add(o);t.set(u,f)}}return t}complete(){var e=this;return(0,ke.Z)(function*(){const t=yield function NZ(n,e,t,i){return gR.apply(this,arguments)}(e.localStore,new P2(e.It),e.documents,e.Mu.id),i=e.$u(e.documents);for(const r of e.queries)yield LZ(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function O2(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class N2{constructor(e){this.key=e}}class L2{constructor(e){this.key=e}}class F2{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Qt(),this.mutatedKeys=Qt(),this.Gu=eU(e),this.Qu=new ny(this.Gu)}get ju(){return this.Uu}Wu(e,t){const i=t?t.zu:new R2,r=t?t.Qu:this.Qu;let o=t?t.mutatedKeys:this.mutatedKeys,u=r,f=!1;const y="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,E="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((S,R)=>{const H=r.get(S),K=Yk(this.query,R)?R:null,J=!!H&&this.mutatedKeys.has(H.key),le=!!K&&(K.hasLocalMutations||this.mutatedKeys.has(K.key)&&K.hasCommittedMutations);let ve=!1;H&&K?H.data.isEqual(K.data)?J!==le&&(i.track({type:3,doc:K}),ve=!0):this.Hu(H,K)||(i.track({type:2,doc:K}),ve=!0,(y&&this.Gu(K,y)>0||E&&this.Gu(K,E)<0)&&(f=!0)):!H&&K?(i.track({type:0,doc:K}),ve=!0):H&&!K&&(i.track({type:1,doc:H}),ve=!0,(y||E)&&(f=!0)),ve&&(K?(u=u.add(K),o=le?o.add(S):o.delete(S)):(u=u.delete(S),o=o.delete(S)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const S="F"===this.query.limitType?u.last():u.first();u=u.delete(S.key),o=o.delete(S.key),i.track({type:1,doc:S})}return{Qu:u,zu:i,$i:f,mutatedKeys:o}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const r=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const o=e.zu.Au();o.sort((E,S)=>function(R,H){const K=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht()}};return K(R)-K(H)}(E.type,S.type)||this.Gu(E.doc,S.doc)),this.Ju(i);const u=t?this.Yu():[],f=0===this.Ku.size&&this.current?1:0,y=f!==this.qu;return this.qu=f,0!==o.length||y?{snapshot:new iy(this.query,e.Qu,r,o,e.mutatedKeys,0===f,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),Xu:u}:{Xu:u}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new R2,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Qt(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const t=[];return e.forEach(i=>{this.Ku.has(i)||t.push(new L2(i))}),this.Ku.forEach(i=>{e.has(i)||t.push(new N2(i))}),t}tc(e){this.Uu=e.Hi,this.Ku=Qt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return iy.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class l4{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class u4{constructor(e){this.key=e,this.nc=!1}}class c4{constructor(e,t,i,r,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.sc={},this.ic=new lf(f=>XV(f),kw),this.rc=new Map,this.oc=new Set,this.uc=new ki(it.comparator),this.cc=new Map,this.ac=new uR,this.hc={},this.lc=new Map,this.fc=_m.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function d4(n,e){return ZR.apply(this,arguments)}function ZR(){return ZR=(0,ke.Z)(function*(n,e){const t=_P(n);let i,r;const o=t.ic.get(e);if(o)i=o.targetId,t.sharedClientState.addLocalQueryTarget(i),r=o.view.ec();else{const u=yield Y_(t.localStore,Us(e));t.isPrimaryClient&&fT(t.remoteStore,u);const f=t.sharedClientState.addLocalQueryTarget(u.targetId);i=u.targetId,r=yield KR(t,e,i,"current"===f,u.resumeToken)}return r}),ZR.apply(this,arguments)}function KR(n,e,t,i,r){return YR.apply(this,arguments)}function YR(){return YR=(0,ke.Z)(function*(n,e,t,i,r){n._c=(R,H,K)=>{return(J=(0,ke.Z)(function*(le,ve,Ve,Ye){let Qe=ve.view.Wu(Ve);Qe.$i&&(Qe=yield uT(le.localStore,ve.query,!1).then(({documents:It})=>ve.view.Wu(It,Qe)));const Xe=Ye&&Ye.targetChanges.get(ve.targetId),wt=ve.view.applyChanges(Qe,le.isPrimaryClient,Xe);return oP(le,ve.targetId,wt.Xu),wt.snapshot}),function(le,ve,Ve,Ye){return J.apply(this,arguments)})(n,R,H,K);var J};const o=yield uT(n.localStore,e,!0),u=new F2(e,o.Hi),f=u.Wu(o.documents),y=Fw.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,r),E=u.applyChanges(f,n.isPrimaryClient,y);oP(n,t,E.Xu);const S=new l4(e,t,u);return n.ic.set(e,S),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),E.snapshot}),YR.apply(this,arguments)}function h4(n,e){return QR.apply(this,arguments)}function QR(){return QR=(0,ke.Z)(function*(n,e){const t=st(n),i=t.ic.get(e),r=t.rc.get(i.targetId);if(r.length>1)return t.rc.set(i.targetId,r.filter(o=>!kw(o,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Q_(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),Xw(t.remoteStore,i.targetId),ry(t,i.targetId)}).catch(Jh))):(ry(t,i.targetId),yield Q_(t.localStore,i.targetId,!0))}),QR.apply(this,arguments)}function XR(){return XR=(0,ke.Z)(function*(n,e,t){const i=yP(n);try{const r=yield function(o,u){const f=st(o),y=pi.now(),E=u.reduce((H,K)=>H.add(K.key),Qt());let S,R;return f.persistence.runTransaction("Locally write mutations","readwrite",H=>{let K=go(),J=Qt();return f.Gi.getEntries(H,E).next(le=>{K=le,K.forEach((ve,Ve)=>{Ve.isValidDocument()||(J=J.add(ve))})}).next(()=>f.localDocuments.getOverlayedDocuments(H,K)).next(le=>{S=le;const ve=[];for(const Ve of u){const Ye=E6(Ve,S.get(Ve.key).overlayedDocument);null!=Ye&&ve.push(new Cd(Ve.key,Ye,zV(Ye.value.mapValue),mi.exists(!0)))}return f.mutationQueue.addMutationBatch(H,y,ve,u)}).next(le=>{R=le;const ve=le.applyToLocalDocumentSet(S,J);return f.documentOverlayCache.saveOverlays(H,le.batchId,ve)})}).then(()=>({batchId:R.batchId,changes:_U(S)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,u,f){let y=o.hc[o.currentUser.toKey()];y||(y=new ki(qt)),y=y.insert(u,f),o.hc[o.currentUser.toKey()]=y}(i,r.batchId,t),yield Id(i,r.changes),yield J_(i.remoteStore)}catch(r){const o=ty(r,"Failed to persist write");t.reject(o)}}),XR.apply(this,arguments)}function B2(n,e){return JR.apply(this,arguments)}function JR(){return JR=(0,ke.Z)(function*(n,e){const t=st(n);try{const i=yield PZ(t.localStore,e);e.targetChanges.forEach((r,o)=>{const u=t.cc.get(o);u&&(Ot(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?u.nc=!0:r.modifiedDocuments.size>0?Ot(u.nc):r.removedDocuments.size>0&&(Ot(u.nc),u.nc=!1))}),yield Id(t,i,e)}catch(i){yield Jh(i)}}),JR.apply(this,arguments)}function V2(n,e,t){const i=st(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.ic.forEach((o,u)=>{const f=u.view.Pu(e);f.snapshot&&r.push(f.snapshot)}),function(o,u){const f=st(o);f.onlineState=u;let y=!1;f.queries.forEach((E,S)=>{for(const R of S.listeners)R.Pu(u)&&(y=!0)}),y&&$R(f)}(i.eventManager,e),r.length&&i.sc.zo(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function p4(n,e,t){return eP.apply(this,arguments)}function eP(){return eP=(0,ke.Z)(function*(n,e,t){const i=st(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.cc.get(e),o=r&&r.key;if(o){let u=new ki(it.comparator);u=u.insert(o,Yn.newNoDocument(o,Nt.min()));const f=Qt().add(o),y=new Lw(Nt.min(),new Map,new Fn(qt),u,f);yield B2(i,y),i.uc=i.uc.remove(o),i.cc.delete(e),aP(i)}else yield Q_(i.localStore,e,!1).then(()=>ry(i,e,t)).catch(Jh)}),eP.apply(this,arguments)}function m4(n,e){return tP.apply(this,arguments)}function tP(){return tP=(0,ke.Z)(function*(n,e){const t=st(n),i=e.batch.batchId;try{const r=yield RZ(t.localStore,e);sP(t,i,null),rP(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Id(t,r)}catch(r){yield Jh(r)}}),tP.apply(this,arguments)}function g4(n,e,t){return nP.apply(this,arguments)}function nP(){return nP=(0,ke.Z)(function*(n,e,t){const i=st(n);try{const r=yield function(o,u){const f=st(o);return f.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let E;return f.mutationQueue.lookupMutationBatch(y,u).next(S=>(Ot(null!==S),E=S.keys(),f.mutationQueue.removeMutationBatch(y,S))).next(()=>f.mutationQueue.performConsistencyCheck(y)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(y,E,u)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E)).next(()=>f.localDocuments.getDocuments(y,E))})}(i.localStore,e);sP(i,e,t),rP(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Id(i,r)}catch(r){yield Jh(r)}}),nP.apply(this,arguments)}function iP(){return iP=(0,ke.Z)(function*(n,e){const t=st(n);Dd(t.remoteStore)||Ge("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(o){const u=st(o);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>u.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===i)return void e.resolve();const r=t.lc.get(i)||[];r.push(e),t.lc.set(i,r)}catch(i){const r=ty(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}),iP.apply(this,arguments)}function rP(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function sP(n,e,t){const i=st(n);let r=i.hc[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),i.hc[i.currentUser.toKey()]=r}}function ry(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.rc.get(e))n.ic.delete(i),t&&n.sc.wc(i,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(i=>{n.ac.containsKey(i)||U2(n,i)})}function U2(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(Xw(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),aP(n))}function oP(n,e,t){for(const i of t)i instanceof N2?(n.ac.addReference(i.key,e),y4(n,i)):i instanceof L2?(Ge("SyncEngine","Document no longer in limbo: "+i.key),n.ac.removeReference(i.key,e),n.ac.containsKey(i.key)||U2(n,i.key)):ht()}function y4(n,e){const t=e.key,i=t.path.canonicalString();n.uc.get(t)||n.oc.has(i)||(Ge("SyncEngine","New document in limbo: "+t),n.oc.add(i),aP(n))}function aP(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new it(yn.fromString(e)),i=n.fc.next();n.cc.set(i,new u4(t)),n.uc=n.uc.insert(t,i),fT(n.remoteStore,new uf(Us(U_(t.path)),i,2,mo.at))}}function Id(n,e,t){return lP.apply(this,arguments)}function lP(){return lP=(0,ke.Z)(function*(n,e,t){const i=st(n),r=[],o=[],u=[];var f;i.ic.isEmpty()||(i.ic.forEach((f,y)=>{u.push(i._c(y,e,t).then(E=>{if((E||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(y.targetId,E?.fromCache?"not-current":"current"),E){r.push(E);const S=fR.Ci(y.targetId,E);o.push(S)}}))}),yield Promise.all(u),i.sc.zo(r),yield(f=(0,ke.Z)(function*(y,E){const S=st(y);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>Te.forEach(E,H=>Te.forEach(H.Si,K=>S.persistence.referenceDelegate.addReference(R,H.targetId,K)).next(()=>Te.forEach(H.Di,K=>S.persistence.referenceDelegate.removeReference(R,H.targetId,K)))))}catch(R){if(!ef(R))throw R;Ge("LocalStore","Failed to update sequence numbers: "+R)}for(const R of E){const H=R.targetId;if(!R.fromCache){const K=S.Ui.get(H),le=K.withLastLimboFreeSnapshotVersion(K.snapshotVersion);S.Ui=S.Ui.insert(H,le)}}}),function(y,E){return f.apply(this,arguments)})(i.localStore,o))}),lP.apply(this,arguments)}function v4(n,e){return uP.apply(this,arguments)}function uP(){return uP=(0,ke.Z)(function*(n,e){const t=st(n);if(!t.currentUser.isEqual(e)){Ge("SyncEngine","User change. New user:",e.toKey());const i=yield p2(t.localStore,e);t.currentUser=e,(r=t).lc.forEach(u=>{u.forEach(f=>{f.reject(new Ue(xe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.lc.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Id(t,i.ji)}var r}),uP.apply(this,arguments)}function b4(n,e){const t=st(n),i=t.cc.get(e);if(i&&i.nc)return Qt().add(i.key);{let r=Qt();const o=t.rc.get(e);if(!o)return r;for(const u of o){const f=t.ic.get(u);r=r.unionWith(f.view.ju)}return r}}function w4(n,e){return cP.apply(this,arguments)}function cP(){return cP=(0,ke.Z)(function*(n,e){const t=st(n),i=yield uT(t.localStore,e.query,!0),r=e.view.tc(i);return t.isPrimaryClient&&oP(t,e.targetId,r.Xu),r}),cP.apply(this,arguments)}function E4(n,e){return dP.apply(this,arguments)}function dP(){return dP=(0,ke.Z)(function*(n,e){const t=st(n);return y2(t.localStore,e).then(i=>Id(t,i))}),dP.apply(this,arguments)}function C4(n,e,t,i){return hP.apply(this,arguments)}function hP(){return hP=(0,ke.Z)(function*(n,e,t,i){const r=st(n),o=yield function(u,f){const y=st(u),E=st(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",S=>E.Tn(S,f).next(R=>R?y.localDocuments.getDocuments(S,R):Te.resolve(null)))}(r.localStore,e);var f;null!==o?("pending"===t?yield J_(r.remoteStore):"acknowledged"===t||"rejected"===t?(sP(r,e,i||null),rP(r,e),f=e,st(st(r.localStore).mutationQueue).An(f)):ht(),yield Id(r,o)):Ge("SyncEngine","Cannot apply mutation batch with id: "+e)}),hP.apply(this,arguments)}function fP(){return fP=(0,ke.Z)(function*(n,e){const t=st(n);if(_P(t),yP(t),!0===e&&!0!==t.dc){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield H2(t,i.toArray());t.dc=!0,yield VR(t.remoteStore,!0);for(const o of r)fT(t.remoteStore,o)}else if(!1===e&&!1!==t.dc){const i=[];let r=Promise.resolve();t.rc.forEach((o,u)=>{t.sharedClientState.isLocalQueryTarget(u)?i.push(u):r=r.then(()=>(ry(t,u),Q_(t.localStore,u,!0))),Xw(t.remoteStore,u)}),yield r,yield H2(t,i),function(o){const u=st(o);u.cc.forEach((f,y)=>{Xw(u.remoteStore,y)}),u.ac.fs(),u.cc=new Map,u.uc=new ki(it.comparator)}(t),t.dc=!1,yield VR(t.remoteStore,!1)}}),fP.apply(this,arguments)}function H2(n,e,t){return pP.apply(this,arguments)}function pP(){return pP=(0,ke.Z)(function*(n,e,t){const i=st(n),r=[],o=[];for(const u of e){let f;const y=i.rc.get(u);if(y&&0!==y.length){f=yield Y_(i.localStore,Us(y[0]));for(const E of y){const S=i.ic.get(E),R=yield w4(i,S);R.snapshot&&o.push(R.snapshot)}}else{const E=yield _2(i.localStore,u);f=yield Y_(i.localStore,E),yield KR(i,j2(E),u,!1,f.resumeToken)}r.push(f)}return i.sc.zo(o),r}),pP.apply(this,arguments)}function j2(n){return YV(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function I4(n){const e=st(n);return st(st(e.localStore).persistence).vi()}function T4(n,e,t,i){return mP.apply(this,arguments)}function mP(){return mP=(0,ke.Z)(function*(n,e,t,i){const r=st(n);if(r.dc)return void Ge("SyncEngine","Ignoring unexpected query state notification.");const o=r.rc.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const u=yield y2(r.localStore,JV(o[0])),f=Lw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,mr.EMPTY_BYTE_STRING);yield Id(r,u,f);break}case"rejected":yield Q_(r.localStore,e,!0),ry(r,e,i);break;default:ht()}}),mP.apply(this,arguments)}function S4(n,e,t){return gP.apply(this,arguments)}function gP(){return gP=(0,ke.Z)(function*(n,e,t){const i=_P(n);if(i.dc){for(const r of e){if(i.rc.has(r)){Ge("SyncEngine","Adding an already active target "+r);continue}const o=yield _2(i.localStore,r),u=yield Y_(i.localStore,o);yield KR(i,j2(o),u.targetId,!1,u.resumeToken),fT(i.remoteStore,u)}for(const r of t)i.rc.has(r)&&(yield Q_(i.localStore,r,!1).then(()=>{Xw(i.remoteStore,r),ry(i,r)}).catch(Jh))}}),gP.apply(this,arguments)}function _P(n){const e=st(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=B2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=b4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=p4.bind(null,e),e.sc.zo=r4.bind(null,e.eventManager),e.sc.wc=s4.bind(null,e.eventManager),e}function yP(n){const e=st(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=m4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=g4.bind(null,e),e}class z2{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ke.Z)(function*(){t.It=Yw(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return f2(this.persistence,new h2,e.initialUser,this.It)}yc(e){return new c2(aT.Bs,this.It)}gc(e){return new E2}terminate(){var e=this;return(0,ke.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class G2 extends z2{constructor(e,t,i){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,ke.Z)(function*(){yield t().call(i,e),yield i.Ac.initialize(i,e),yield yP(i.Ac.syncEngine),yield J_(i.Ac.remoteStore),yield i.persistence.li(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return f2(this.persistence,new h2,e.initialUser,this.It)}Tc(e,t){return new _Z(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const i=new e6(t,this.persistence);return new Jq(e.asyncQueue,i)}yc(e){const t=hR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?_o.withCacheSize(this.cacheSizeBytes):_o.DEFAULT;return new dR(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,D2(),hT(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new E2}}class x4 extends G2{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,ke.Z)(function*(){yield t().call(i,e);const r=i.Ac.syncEngine;i.sharedClientState instanceof wR&&(i.sharedClientState.syncEngine={Fr:C4.bind(null,r),$r:T4.bind(null,r),Br:S4.bind(null,r),vi:I4.bind(null,r),Mr:E4.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.li(function(){var o=(0,ke.Z)(function*(u){yield function D4(n,e){return fP.apply(this,arguments)}(i.Ac.syncEngine,u),i.gcScheduler&&(u&&!i.gcScheduler.started?i.gcScheduler.start():u||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(u&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():u||i.indexBackfillerScheduler.stop())});return function(u){return o.apply(this,arguments)}}())})()}gc(e){const t=D2();if(!wR.C(t))throw new Ue(xe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=hR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wR(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class vP{initialize(e,t){var i=this;return(0,ke.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>V2(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=v4.bind(null,i.syncEngine),yield VR(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new i4}createDatastore(e){const t=Yw(e.databaseInfo.databaseId),i=new UZ(e.databaseInfo);return new zZ(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,r=e.asyncQueue,o=f=>V2(this.syncEngine,f,0),u=C2.C()?new C2:new FZ,new $Z(t,i,r,o,u);var t,i,r,o,u}createSyncEngine(e,t){return function(i,r,o,u,f,y,E){const S=new c4(i,r,o,u,f,y);return E&&(S.dc=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ke.Z)(function*(t){const i=st(t);Ge("RemoteStore","RemoteStore shutting down."),i.wu.add(5),yield X_(i),i.gu.shutdown(),i.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function bP(n,e,t){if(!t)throw new Ue(xe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function W2(n,e,t,i){if(!0===e&&!0===i)throw new Ue(xe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function $2(n){if(!it.isDocumentKey(n))throw new Ue(xe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function q2(n){if(it.isDocumentKey(n))throw new Ue(xe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function mT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ht()}function dn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ue(xe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=mT(n);throw new Ue(xe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Z2(n,e){if(e<=0)throw new Ue(xe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const K2=new Map;class Y2{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ue(xe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ue(xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,W2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jw{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Y2({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ue(xe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ue(xe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Y2(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Hq;switch(t.type){case"gapi":return new Wq(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ue(xe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=K2.get(e);t&&(Ge("ComponentProvider","Removing Datastore"),K2.delete(e),t.terminate())}(this),Promise.resolve()}}class si{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ec(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new si(this.firestore,e,this._key)}}class fs{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new fs(this.firestore,e,this._query)}}class ec extends fs{constructor(e,t,i){super(e,t,U_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new si(this.firestore,null,new it(e))}withConverter(e){return new ec(this.firestore,e,this._path)}}function X2(n,e,...t){if(n=(0,Q.m9)(n),bP("collection","path",e),n instanceof Jw){const i=yn.fromString(e,...t);return q2(i),new ec(n,null,i)}{if(!(n instanceof si||n instanceof ec))throw new Ue(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(yn.fromString(e,...t));return q2(i),new ec(n.firestore,null,i)}}function gT(n,e,...t){if(n=(0,Q.m9)(n),1===arguments.length&&(e=IV.R()),bP("doc","path",e),n instanceof Jw){const i=yn.fromString(e,...t);return $2(i),new si(n,null,new it(i))}{if(!(n instanceof si||n instanceof ec))throw new Ue(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(yn.fromString(e,...t));return $2(i),new si(n.firestore,n instanceof ec?n.converter:null,new it(i))}}function J2(n,e){return n=(0,Q.m9)(n),e=(0,Q.m9)(e),(n instanceof si||n instanceof ec)&&(e instanceof si||e instanceof ec)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function wP(n,e){return n=(0,Q.m9)(n),e=(0,Q.m9)(e),n instanceof fs&&e instanceof fs&&n.firestore===e.firestore&&kw(n._query,e._query)&&n.converter===e.converter}function eH(n,e=10240){let t=0;return{read:()=>(0,ke.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,ke.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class _T{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Hi("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class k4{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new pr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(i=>{i&&i.Ou()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.payload)}`))},i=>this.metadata.reject(i))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,ke.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,ke.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,ke.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const i=e.vc.decode(t),r=Number(i);isNaN(r)&&e.Dc(`length string (${i}) is not valid number`);const o=yield e.Cc(r);return new o4(JSON.parse(o),t.length+r)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,ke.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}Cc(e){var t=this;return(0,ke.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const i=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,ke.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class O4{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ke.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ue(xe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,ke.Z)(function*(o,u){const f=st(o),y=Uw(f.It)+"/documents",E={documents:u.map(K=>Vw(f.It,K))},S=yield f._o("BatchGetDocuments",y,E,u.length),R=new Map;S.forEach(K=>{const J=function P6(n,e){return"found"in e?function(t,i){Ot(!!i.found);const r=Xu(t,i.found.name),o=Pr(i.found.updateTime),u=new Yr({mapValue:{fields:i.found.fields}});return Yn.newFoundDocument(r,o,u)}(n,e):"missing"in e?function(t,i){Ot(!!i.missing),Ot(!!i.readTime);const r=Xu(t,i.missing),o=Pr(i.readTime);return Yn.newNoDocument(r,o)}(n,e):ht()}(f.It,K);R.set(J.key.toString(),J)});const H=[];return u.forEach(K=>{const J=R.get(K.toString());Ot(!!J),H.push(J)}),H}),function(o,u){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new W_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ke.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const o=it.fromPath(r);e.mutations.push(new Qk(o,e.precondition(o)))}),yield(i=(0,ke.Z)(function*(r,o){const u=st(r),f=Uw(u.It)+"/documents",y={writes:o.map(E=>Hw(u.It,E))};yield u.ao("Commit",f,y)}),function(r,o){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ht();t=Nt.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new Ue(xe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Nt.min())?mi.exists(!1):mi.updateTime(t):mi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Nt.min()))throw new Ue(xe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return mi.updateTime(t)}return mi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class N4{constructor(e,t,i,r,o){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=o,this.kc=i.maxAttempts,this.No=new ER(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,ke.Z)(function*(){const t=new O4(e.datastore),i=e.Mc(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(o=>{e.Fc(o)}))}).catch(r=>{e.Fc(r)})}))}Mc(e){try{const t=this.updateFunction(e);return!Iw(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!pU(t)}return!1}}class L4{constructor(e,t,i,r){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Rr.UNAUTHENTICATED,this.clientId=IV.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var u=(0,ke.Z)(function*(f){Ge("FirestoreClient","Received user=",f.uid),yield o.authCredentialListener(f),o.user=f});return function(f){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(i,u=>(Ge("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,ke.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ue(xe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ke.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=ty(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function tH(n,e){return EP.apply(this,arguments)}function EP(){return EP=(0,ke.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ge("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=(0,ke.Z)(function*(o){i.isEqual(o)||(yield p2(e.localStore,o),i=o)});return function(o){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),EP.apply(this,arguments)}function nH(n,e){return CP.apply(this,arguments)}function CP(){return CP=(0,ke.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield DP(n);Ge("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>k2(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,o)=>k2(e.remoteStore,o)),n.onlineComponents=e}),CP.apply(this,arguments)}function DP(n){return IP.apply(this,arguments)}function IP(){return IP=(0,ke.Z)(function*(n){return n.offlineComponents||(Ge("FirestoreClient","Using default OfflineComponentProvider"),yield tH(n,new z2)),n.offlineComponents}),IP.apply(this,arguments)}function yT(n){return TP.apply(this,arguments)}function TP(){return TP=(0,ke.Z)(function*(n){return n.onlineComponents||(Ge("FirestoreClient","Using default OnlineComponentProvider"),yield nH(n,new vP)),n.onlineComponents}),TP.apply(this,arguments)}function iH(n){return DP(n).then(e=>e.persistence)}function vT(n){return DP(n).then(e=>e.localStore)}function SP(n){return yT(n).then(e=>e.remoteStore)}function AP(n){return yT(n).then(e=>e.syncEngine)}function sy(n){return xP.apply(this,arguments)}function xP(){return xP=(0,ke.Z)(function*(n){const e=yield yT(n),t=e.eventManager;return t.onListen=d4.bind(null,e.syncEngine),t.onUnlisten=h4.bind(null,e.syncEngine),t}),xP.apply(this,arguments)}function sH(n,e,t={}){const i=new pr;return n.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return function(r,o,u,f,y){const E=new _T({next:R=>{o.enqueueAndForget(()=>GR(r,S));const H=R.docs.has(u);!H&&R.fromCache?y.reject(new Ue(xe.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&R.fromCache&&f&&"server"===f.source?y.reject(new Ue(xe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(R)},error:R=>y.reject(R)}),S=new qR(U_(u.path),E,{includeMetadataChanges:!0,ku:!0});return jR(r,S)}(yield sy(n),n.asyncQueue,e,t,i)})),i.promise}function oH(n,e,t={}){const i=new pr;return n.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return function(r,o,u,f,y){const E=new _T({next:R=>{o.enqueueAndForget(()=>GR(r,S)),R.fromCache&&"server"===f.source?y.reject(new Ue(xe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(R)},error:R=>y.reject(R)}),S=new qR(u,E,{includeMetadataChanges:!0,ku:!0});return jR(r,S)}(yield sy(n),n.asyncQueue,e,t,i)})),i.promise}class G4{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new ER(this,"async_queue_retry"),this.Wc=()=>{const t=hT();t&&Ge("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=hT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=hT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new pr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,ke.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(t){if(!ef(t))throw t;Ge("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(i=>{throw this.Kc=i,this.Gc=!1,Hi("INTERNAL UNHANDLED ERROR: ",function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),u}(i)),i}).then(i=>(this.Gc=!1,i))));return this.Bc=t,t}enqueueAfterDelay(e,t,i){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const r=HR.createAndSchedule(this,e,t,i,o=>this.Yc(o));return this.qc.push(r),r}zc(){this.Kc&&ht()}verifyOperationInProgress(){}Xc(){var e=this;return(0,ke.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function MP(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class W4{constructor(){this._progressObserver={},this._taskCompletionResolver=new pr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class oi extends Jw{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new G4,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||aH(this),this._firestoreClient.terminate()}}function ji(n){return n._firestoreClient||aH(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function aH(n){var e;const t=n._freezeSettings(),i=(o=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new i6(n._databaseId,o,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var o,f;n._firestoreClient=new L4(n._authCredentials,n._appCheckCredentials,n._queue,i)}function lH(n,e,t){const i=new pr;return n.asyncQueue.enqueue((0,ke.Z)(function*(){try{yield tH(n,t),yield nH(n,e),i.resolve()}catch(r){const o=r;if(!("FirebaseError"===(u=o).name?u.code===xe.FAILED_PRECONDITION||u.code===xe.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;tm("Error enabling offline persistence. Falling back to persistence disabled: "+o),i.reject(o)}var u})).then(()=>i.promise)}function uH(n){if(n._initialized||n._terminated)throw new Ue(xe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class tc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new tc(mr.fromBase64String(e))}catch(t){throw new Ue(xe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new tc(mr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Td{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ue(xe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class vm{constructor(e){this._methodName=e}}class bT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ue(xe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ue(xe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qt(this._lat,e._lat)||qt(this._long,e._long)}}const t8=/^__.*__$/;class n8{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new Cd(e,this.data,this.fieldMask,t,this.fieldTransforms):new G_(e,this.data,t,this.fieldTransforms)}}class cH{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Cd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dH(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht()}}class wT{constructor(e,t,i,r,o,u){this.settings=e,this.databaseId=t,this.It=i,this.ignoreUndefinedProperties=r,void 0===o&&this.na(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new wT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:i,oa:!1});return r.ua(e),r}ca(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:i,oa:!1});return r.na(),r}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return DT(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(dH(this.sa)&&t8.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class i8{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=i||Yw(e)}da(e,t,i,r=!1){return new wT({sa:e,methodName:t,fa:i,path:Mi.emptyPath(),oa:!1,la:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function bm(n){const e=n._freezeSettings(),t=Yw(n._databaseId);return new i8(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ET(n,e,t,i,r,o={}){const u=n.da(o.merge||o.mergeFields?2:0,e,t,r);OP("Data must be an object, but it was:",u,i);const f=pH(i,u);let y,E;if(o.merge)y=new Jo(u.fieldMask),E=u.fieldTransforms;else if(o.mergeFields){const S=[];for(const R of o.mergeFields){const H=NP(e,R,t);if(!u.contains(H))throw new Ue(xe.INVALID_ARGUMENT,`Field '${H}' is specified in your field mask but missing from your input data.`);gH(S,H)||S.push(H)}y=new Jo(S),E=u.fieldTransforms.filter(R=>y.covers(R.field))}else y=null,E=u.fieldTransforms;return new n8(new Yr(f),y,E)}class eE extends vm{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof eE}}function hH(n,e,t){return new wT({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class kP extends vm{_toFieldTransform(e){return new Rw(e.path,new j_)}isEqual(e){return e instanceof kP}}class r8 extends vm{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=hH(this,e,!0),i=this._a.map(o=>wm(o,t)),r=new um(i);return new Rw(e.path,r)}isEqual(e){return this===e}}class s8 extends vm{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=hH(this,e,!0),i=this._a.map(o=>wm(o,t)),r=new cm(i);return new Rw(e.path,r)}isEqual(e){return this===e}}class o8 extends vm{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new z_(e.It,iU(e.It,this.wa));return new Rw(e.path,t)}isEqual(e){return this===e}}function RP(n,e,t,i){const r=n.da(1,e,t);OP("Data must be an object, but it was:",r,i);const o=[],u=Yr.empty();rm(i,(y,E)=>{const S=CT(e,y,t);E=(0,Q.m9)(E);const R=r.ca(S);if(E instanceof eE)o.push(S);else{const H=wm(E,R);null!=H&&(o.push(S),u.set(S,H))}});const f=new Jo(o);return new cH(u,f,r.fieldTransforms)}function PP(n,e,t,i,r,o){const u=n.da(1,e,t),f=[NP(e,i,t)],y=[r];if(o.length%2!=0)throw new Ue(xe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let H=0;H<o.length;H+=2)f.push(NP(e,o[H])),y.push(o[H+1]);const E=[],S=Yr.empty();for(let H=f.length-1;H>=0;--H)if(!gH(E,f[H])){const K=f[H];let J=y[H];J=(0,Q.m9)(J);const le=u.ca(K);if(J instanceof eE)E.push(K);else{const ve=wm(J,le);null!=ve&&(E.push(K),S.set(K,ve))}}const R=new Jo(E);return new cH(S,R,u.fieldTransforms)}function fH(n,e,t,i=!1){return wm(t,n.da(i?4:3,e))}function wm(n,e){if(mH(n=(0,Q.m9)(n)))return OP("Unsupported field value:",e,n),pH(n,e);if(n instanceof vm)return function(t,i){if(!dH(i.sa))throw i.ha(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ha(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,i){const r=[];let o=0;for(const u of t){let f=wm(u,i.aa(o));null==f&&(f={nullValue:"NULL_VALUE"}),r.push(f),o++}return{arrayValue:{values:r}}}(n,e)}return function(t,i){if(null===(t=(0,Q.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return iU(i.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const r=pi.fromDate(t);return{timestampValue:Bw(i.It,r)}}if(t instanceof pi){const r=new pi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Bw(i.It,r)}}if(t instanceof bT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof tc)return{bytesValue:DU(i.It,t._byteString)};if(t instanceof si){const r=i.databaseId,o=t.firestore._databaseId;if(!o.isEqual(r))throw i.ha(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Xk(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.ha(`Unsupported field value: ${mT(t)}`)}(n,e)}function pH(n,e){const t={};return PV(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rm(n,(i,r)=>{const o=wm(r,e.ra(i));null!=o&&(t[i]=o)}),{mapValue:{fields:t}}}function mH(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof pi||n instanceof bT||n instanceof tc||n instanceof si||n instanceof vm)}function OP(n,e,t){if(!mH(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=mT(t);throw e.ha("an object"===i?n+" a custom object":n+" "+i)}var i}function NP(n,e,t){if((e=(0,Q.m9)(e))instanceof Td)return e._internalPath;if("string"==typeof e)return CT(n,e);throw DT("Field path arguments must be of type string or ",n,!1,void 0,t)}const a8=new RegExp("[~\\*/\\[\\]]");function CT(n,e,t){if(e.search(a8)>=0)throw DT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Td(...e.split("."))._internalPath}catch{throw DT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function DT(n,e,t,i,r){const o=i&&!i.isEmpty(),u=void 0!==r;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let y="";return(o||u)&&(y+=" (found",o&&(y+=` in field ${i}`),u&&(y+=` in document ${r}`),y+=")"),new Ue(xe.INVALID_ARGUMENT,f+n+y)}function gH(n,e){return n.some(t=>t.isEqual(e))}class tE{constructor(e,t,i,r,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new si(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new l8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(IT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class l8 extends tE{data(){return super.data()}}function IT(n,e){return"string"==typeof e?CT(n,e):e instanceof Td?e._internalPath:e._delegate._internalPath}function _H(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ue(xe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nE{}function ff(n,...e){for(const t of e)n=t._apply(n);return n}class u8 extends nE{constructor(e,t,i){super(),this.ma=e,this.ga=t,this.ya=i,this.type="where"}_apply(e){const t=bm(e.firestore),i=function(r,o,u,f,y,E,S){let R;if(y.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new Ue(xe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if("in"===E||"not-in"===E){CH(S,E);const K=[];for(const J of S)K.push(EH(f,r,J));R={arrayValue:{values:K}}}else R=EH(f,r,S)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||CH(S,E),R=fH(u,"where",S,"in"===E||"not-in"===E);const H=Qr.create(y,E,R);return function(K,J){if(J.dt()){const ve=qk(K);if(null!==ve&&!ve.isEqual(J.field))throw new Ue(xe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ve.toString()}' and '${J.field.toString()}'`);const Ve=$k(K);null!==Ve&&DH(0,J.field,Ve)}const le=function(ve,Ve){for(const Ye of ve.filters)if(Ve.indexOf(Ye.op)>=0)return Ye.op;return null}(K,function(ve){switch(ve){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(J.op));if(null!==le)throw new Ue(xe.INVALID_ARGUMENT,le===J.op?`Invalid query. You cannot use more than one '${J.op.toString()}' filter.`:`Invalid query. You cannot use '${J.op.toString()}' filters with '${le.toString()}' filters.`)}(r,H),H}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new fs(e.firestore,e.converter,function(r,o){const u=r.filters.concat([o]);return new Ed(r.path,r.collectionGroup,r.explicitOrderBy.slice(),u,r.limit,r.limitType,r.startAt,r.endAt)}(e._query,i))}}class d8 extends nE{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(i,r,o){if(null!==i.startAt)throw new Ue(xe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Ue(xe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new V_(r,o);return function(f,y){if(null===$k(f)){const E=qk(f);null!==E&&DH(0,E,y.field)}}(i,u),u}(e._query,this.ma,this.pa);return new fs(e.firestore,e.converter,function(i,r){const o=i.explicitOrderBy.concat([r]);return new Ed(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class yH extends nE{constructor(e,t,i){super(),this.type=e,this.Ia=t,this.Ta=i}_apply(e){return new fs(e.firestore,e.converter,qI(e._query,this.Ia,this.Ta))}}class vH extends nE{constructor(e,t,i){super(),this.type=e,this.Ea=t,this.Aa=i}_apply(e){const t=wH(e,this.type,this.Ea,this.Aa);return new fs(e.firestore,e.converter,(r=t,new Ed((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class bH extends nE{constructor(e,t,i){super(),this.type=e,this.Ea=t,this.Aa=i}_apply(e){const t=wH(e,this.type,this.Ea,this.Aa);return new fs(e.firestore,e.converter,(r=t,new Ed((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function wH(n,e,t,i){if(t[0]=(0,Q.m9)(t[0]),t[0]instanceof tE)return function(r,o,u,f,y){if(!f)throw new Ue(xe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const E=[];for(const S of H_(r))if(S.field.isKeyField())E.push(am(o,f.key));else{const R=f.data.field(S.field);if(zk(R))throw new Ue(xe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const H=S.field.canonicalString();throw new Ue(xe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${H}' (used as the orderBy) does not exist.`)}E.push(R)}return new af(E,y)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=bm(n.firestore);return function(o,u,f,y,E,S){const R=o.explicitOrderBy;if(E.length>R.length)throw new Ue(xe.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const H=[];for(let K=0;K<E.length;K++){const J=E[K];if(R[K].field.isKeyField()){if("string"!=typeof J)throw new Ue(xe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof J}`);if(!Zk(o)&&-1!==J.indexOf("/"))throw new Ue(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${J}' contains a slash.`);const le=o.path.child(yn.fromString(J));if(!it.isDocumentKey(le))throw new Ue(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${le}' is not because it contains an odd number of segments.`);const ve=new it(le);H.push(am(u,ve))}else{const le=fH(f,y,J);H.push(le)}}return new af(H,S)}(n._query,n.firestore._databaseId,r,e,t,i)}}function EH(n,e,t){if("string"==typeof(t=(0,Q.m9)(t))){if(""===t)throw new Ue(xe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zk(e)&&-1!==t.indexOf("/"))throw new Ue(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(yn.fromString(t));if(!it.isDocumentKey(i))throw new Ue(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return am(n,new it(i))}if(t instanceof si)return am(n,t._key);throw new Ue(xe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mT(t)}.`)}function CH(n,e){if(!Array.isArray(n)||0===n.length)throw new Ue(xe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ue(xe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function DH(n,e,t){if(!t.isEqual(e))throw new Ue(xe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class LP{convertValue(e,t="none"){switch(om(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ri(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(sm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ht()}}convertObject(e,t){const i={};return rm(e.fields,(r,o)=>{i[r]=this.convertValue(o,t)}),i}convertGeoPoint(e){return new bT(Ri(e.latitude),Ri(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=NV(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Dw(e));default:return null}}convertTimestamp(e){const t=tf(e);return new pi(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=yn.fromString(e);Ot(PU(i));const r=new nf(i.get(1),i.get(3)),o=new it(i.popFirst(5));return r.isEqual(t)||Hi(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function TT(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class v8 extends LP{constructor(e){super(),this.firestore=e}convertBytes(e){return new tc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new si(this.firestore,null,t)}}class Em{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Sd extends tE{constructor(e,t,i,r,o,u){super(e,t,i,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new iE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(IT("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class iE extends Sd{data(e={}){return super.data(e)}}class pf{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Em(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new iE(this._firestore,this._userDataWriter,i.key,i,new Em(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ue(xe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(u=>({type:"added",doc:new iE(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Em(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>r||3!==u.type).map(u=>{const f=new iE(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Em(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let y=-1,E=-1;return 0!==u.type&&(y=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),1!==u.type&&(o=o.add(u.doc),E=o.indexOf(u.doc.key)),{type:b8(u.type),doc:f,oldIndex:y,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function b8(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht()}}function IH(n,e){return n instanceof Sd&&e instanceof Sd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof pf&&e instanceof pf&&n._firestore===e._firestore&&wP(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class mf extends LP{constructor(e){super(),this.firestore=e}convertBytes(e){return new tc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new si(this.firestore,null,t)}}function TH(n,e,t){n=dn(n,si);const i=dn(n.firestore,oi),r=TT(n.converter,e,t);return oy(i,[ET(bm(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,mi.none())])}function SH(n,e,t,...i){n=dn(n,si);const r=dn(n.firestore,oi),o=bm(r);let u;return u="string"==typeof(e=(0,Q.m9)(e))||e instanceof Td?PP(o,"updateDoc",n._key,e,t,i):RP(o,"updateDoc",n._key,e),oy(r,[u.toMutation(n._key,mi.exists(!0))])}function AH(n,...e){var t,i,r;n=(0,Q.m9)(n);let o={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||MP(e[u])||(o=e[u],u++);const f={includeMetadataChanges:o.includeMetadataChanges};if(MP(e[u])){const R=e[u];e[u]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[u+1]=null===(i=R.error)||void 0===i?void 0:i.bind(R),e[u+2]=null===(r=R.complete)||void 0===r?void 0:r.bind(R)}let y,E,S;if(n instanceof si)E=dn(n.firestore,oi),S=U_(n._key.path),y={next:R=>{e[u]&&e[u](FP(E,n,R))},error:e[u+1],complete:e[u+2]};else{const R=dn(n,fs);E=dn(R.firestore,oi),S=R._query;const H=new mf(E);y={next:K=>{e[u]&&e[u](new pf(E,H,R,K))},error:e[u+1],complete:e[u+2]},_H(n._query)}return function(R,H,K,J){const le=new _T(J),ve=new qR(H,le,K);return R.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return jR(yield sy(R),ve)})),()=>{le.bc(),R.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return GR(yield sy(R),ve)}))}}(ji(E),S,f,y)}function oy(n,e){return function(t,i){const r=new pr;return t.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return function f4(n,e,t){return XR.apply(this,arguments)}(yield AP(t),i,r)})),r.promise}(ji(n),e)}function FP(n,e,t){const i=t.docs.get(e._key),r=new mf(n);return new Sd(n,r,e._key,i,new Em(t.hasPendingWrites,t.fromCache),e.converter)}const M8={maxAttempts:5};class xH{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=bm(e)}set(e,t,i){this._verifyNotCommitted();const r=gf(e,this._firestore),o=TT(r.converter,t,i),u=ET(this._dataReader,"WriteBatch.set",r._key,o,null!==r.converter,i);return this._mutations.push(u.toMutation(r._key,mi.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const o=gf(e,this._firestore);let u;return u="string"==typeof(t=(0,Q.m9)(t))||t instanceof Td?PP(this._dataReader,"WriteBatch.update",o._key,t,i,r):RP(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(u.toMutation(o._key,mi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=gf(e,this._firestore);return this._mutations=this._mutations.concat(new W_(t._key,mi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ue(xe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gf(n,e){if((n=(0,Q.m9)(n)).firestore!==e)throw new Ue(xe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class k8 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=bm(e)}get(e){const t=gf(e,this._firestore),i=new v8(this._firestore);return this._transaction.lookup([t._key]).then(r=>{if(!r||1!==r.length)return ht();const o=r[0];if(o.isFoundDocument())return new tE(this._firestore,i,o.key,o,t.converter);if(o.isNoDocument())return new tE(this._firestore,i,t._key,null,t.converter);throw ht()})}set(e,t,i){const r=gf(e,this._firestore),o=TT(r.converter,t,i),u=ET(this._dataReader,"Transaction.set",r._key,o,null!==r.converter,i);return this._transaction.set(r._key,u),this}update(e,t,i,...r){const o=gf(e,this._firestore);let u;return u="string"==typeof(t=(0,Q.m9)(t))||t instanceof Td?PP(this._dataReader,"Transaction.update",o._key,t,i,r):RP(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,u),this}delete(e){const t=gf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=gf(e,this._firestore),i=new mf(this._firestore);return super.get(e).then(r=>new Sd(this._firestore,i,t._key,r._document,new Em(!1,!1),t.converter))}}function BP(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ue("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function kH(){if(typeof Uint8Array>"u")throw new Ue("unimplemented","Uint8Arrays are not available in this environment.")}function RH(){if(!function t6(){return typeof atob<"u"}())throw new Ue("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){N_=Dr.SDK_VERSION,(0,Dr._registerComponent)(new Ss.wA("firestore",(t,{instanceIdentifier:i,options:r})=>{const o=t.getProvider("app").getImmediate(),u=new oi(new zq(t.getProvider("auth-internal")),new $q(t.getProvider("app-check-internal")),function(f,y){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ue(xe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nf(f.options.projectId,y)}(o,i),o);return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC").setMultipleInstances(!0)),(0,Dr.registerVersion)(EV,"3.7.1",n),(0,Dr.registerVersion)(EV,"3.7.1","esm2017")}();class rE{constructor(e){this._delegate=e}static fromBase64String(e){return RH(),new rE(tc.fromBase64String(e))}static fromUint8Array(e){return kH(),new rE(tc.fromUint8Array(e))}toBase64(){return RH(),this._delegate.toBase64()}toUint8Array(){return kH(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function VP(n){return function U8(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class H8{enableIndexedDbPersistence(e,t){return function q4(n,e){uH(n=dn(n,oi));const t=ji(n),i=n._freezeSettings(),r=new vP;return lH(t,r,new G2(r,i.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Z4(n){uH(n=dn(n,oi));const e=ji(n),t=n._freezeSettings(),i=new vP;return lH(e,i,new x4(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function K4(n){if(n._initialized&&!n._terminated)throw new Ue(xe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new pr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ke.Z)(function*(){try{yield(t=(0,ke.Z)(function*(i){if(!kl.C())return Promise.resolve();const r=i+"main";yield kl.delete(r)}),function(i){return t.apply(this,arguments)})(hR(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class PH{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof nf||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&tm("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function Q2(n,e,t,i={}){var r;const o=(n=dn(n,Jw))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&tm("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},o),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let u,f;if("string"==typeof i.mockUserToken)u=i.mockUserToken,f=Rr.MOCK_USER;else{u=(0,Q.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new Ue(xe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Rr(y)}n._authCredentials=new jq(new CV(u,f))}}(this._delegate,e,t,i)}enableNetwork(){return function Q4(n){return function F4(n){return n.asyncQueue.enqueue((0,ke.Z)(function*(){const e=yield iH(n),t=yield SP(n);return e.setNetworkEnabled(!0),function(i){const r=st(i);return r.wu.delete(0),Qw(r)}(t)}))}(ji(n=dn(n,oi)))}(this._delegate)}disableNetwork(){return function X4(n){return function B4(n){return n.asyncQueue.enqueue((0,ke.Z)(function*(){const e=yield iH(n),t=yield SP(n);return e.setNetworkEnabled(!1),(i=(0,ke.Z)(function*(r){const o=st(r);o.wu.add(0),yield X_(o),o.yu.set("Offline")}),function(r){return i.apply(this,arguments)})(t);var i}))}(ji(n=dn(n,oi)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,W2("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Y4(n){return function(e){const t=new pr;return e.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return function _4(n,e){return iP.apply(this,arguments)}(yield AP(e),t)})),t.promise}(ji(n=dn(n,oi)))}(this._delegate)}onSnapshotsInSync(e){return function x8(n,e){return function H4(n,e){const t=new _T(e);return n.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return i=yield sy(n),r=t,st(i).bu.add(r),void r.next();var i,r})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return i=yield sy(n),r=t,void st(i).bu.delete(r);var i,r}))}}(ji(n=dn(n,oi)),MP(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ue("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ay(this,X2(this._delegate,e))}catch(t){throw js(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ba(this,gT(this._delegate,e))}catch(t){throw js(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new zs(this,function M4(n,e){if(n=dn(n,Jw),bP("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ue(xe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new fs(n,null,(t=e,new Ed(yn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw js(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function R8(n,e,t){n=dn(n,oi);const i=Object.assign(Object.assign({},M8),t);return function(r){if(r.maxAttempts<1)throw new Ue(xe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,o,u){const f=new pr;return r.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){const y=yield function rH(n){return yT(n).then(e=>e.datastore)}(r);new N4(r.asyncQueue,y,u,o,f).run()})),f.promise}(ji(n),r=>e(new k8(n,r)),i)}(this._delegate,t=>e(new OH(this,t)))}batch(){return ji(this._delegate),new NH(new xH(this._delegate,e=>oy(this._delegate,e)))}loadBundle(e){return function J4(n,e){const t=ji(n=dn(n,oi)),i=new W4;return function j4(n,e,t,i){const r=function(o,u){let f;return f="string"==typeof o?(new TextEncoder).encode(o):o,y=function(y,E){if(y instanceof Uint8Array)return eH(y,E);if(y instanceof ArrayBuffer)return eH(new Uint8Array(y),E);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new k4(y,u);var y}(t,Yw(e));n.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){!function A4(n,e,t){const i=st(n);var r;(r=(0,ke.Z)(function*(o,u,f){try{const y=yield u.getMetadata();if(yield function(H,K){const J=st(H),le=Pr(K.createTime);return J.persistence.runTransaction("hasNewerBundle","readonly",ve=>J.Ns.getBundleMetadata(ve,K.id)).then(ve=>!!ve&&ve.createTime.compareTo(le)>=0)}(o.localStore,y))return yield u.close(),f._completeWith({taskState:"Success",documentsLoaded:(H=y).totalDocuments,bytesLoaded:H.totalBytes,totalDocuments:H.totalDocuments,totalBytes:H.totalBytes}),Promise.resolve(new Set);f._updateProgress(O2(y));const E=new a4(y,o.localStore,u.It);let S=yield u.mc();for(;S;){const H=yield E.Fu(S);H&&f._updateProgress(H),S=yield u.mc()}const R=yield E.complete();return yield Id(o,R.Lu,void 0),yield function(H,K){const J=st(H);return J.persistence.runTransaction("Save bundle","readwrite",le=>J.Ns.saveBundleMetadata(le,K))}(o.localStore,y),f._completeWith(R.progress),Promise.resolve(R.Bu)}catch(y){return tm("SyncEngine",`Loading bundle failed with ${y}`),f._failWith(y),Promise.resolve(new Set)}var H}),function(o,u,f){return r.apply(this,arguments)})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield AP(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function e8(n,e){return function z4(n,e){return n.asyncQueue.enqueue((0,ke.Z)(function*(){return function(t,i){const r=st(t);return r.persistence.runTransaction("Get named query","readonly",o=>r.Ns.getNamedQuery(o,i))}(yield vT(n),e)}))}(ji(n=dn(n,oi)),e).then(t=>t?new fs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new zs(this,t):null)}}class ST extends LP{constructor(e){super(),this.firestore=e}convertBytes(e){return new rE(new tc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ba.forKey(t,this.firestore,null)}}class OH{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ST(e)}get(e){const t=Dm(e);return this._delegate.get(t).then(i=>new sE(this._firestore,new Sd(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=Dm(e);return i?(BP("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const o=Dm(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,i,...r),this}delete(e){const t=Dm(e);return this._delegate.delete(t),this}}class NH{constructor(e){this._delegate=e}set(e,t,i){const r=Dm(e);return i?(BP("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const o=Dm(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,i,...r),this}delete(e){const t=Dm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Cm{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new iE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new oE(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=Cm.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let o=r.get(t);return o||(o=new Cm(e,new ST(e),t),r.set(t,o)),o}}Cm.INSTANCES=new WeakMap;class Ba{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ST(e)}static forPath(e,t,i){if(e.length%2!=0)throw new Ue("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ba(t,new si(t._delegate,i,new it(e)))}static forKey(e,t,i){return new Ba(t,new si(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new ay(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ay(this.firestore,X2(this._delegate,e))}catch(t){throw js(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Q.m9)(e))instanceof si&&J2(this._delegate,e)}set(e,t){t=BP("DocumentReference.set",t);try{return t?TH(this._delegate,e,t):TH(this._delegate,e)}catch(i){throw js(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?SH(this._delegate,e):SH(this._delegate,e,t,...i)}catch(r){throw js(r,"updateDoc()","DocumentReference.update()")}}delete(){return function S8(n){return oy(dn(n.firestore,oi),[new W_(n._key,mi.none())])}(this._delegate)}onSnapshot(...e){const t=LH(e),i=FH(e,r=>new sE(this.firestore,new Sd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return AH(this._delegate,t,i)}get(e){let t;return t="cache"===e?.source?function E8(n){n=dn(n,si);const e=dn(n.firestore,oi),t=ji(e),i=new mf(e);return function V4(n,e){const t=new pr;return n.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return(i=(0,ke.Z)(function*(r,o,u){try{const f=yield function(y,E){const S=st(y);return S.persistence.runTransaction("read document","readonly",R=>S.localDocuments.getDocument(R,E))}(r,o);f.isFoundDocument()?u.resolve(f):f.isNoDocument()?u.resolve(null):u.reject(new Ue(xe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const y=ty(f,`Failed to get document '${o} from cache`);u.reject(y)}}),function(r,o,u){return i.apply(this,arguments)})(yield vT(n),e,t);var i})),t.promise}(t,n._key).then(r=>new Sd(e,i,n._key,r,new Em(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function C8(n){n=dn(n,si);const e=dn(n.firestore,oi);return sH(ji(e),n._key,{source:"server"}).then(t=>FP(e,n,t))}(this._delegate):function w8(n){n=dn(n,si);const e=dn(n.firestore,oi);return sH(ji(e),n._key).then(t=>FP(e,n,t))}(this._delegate),t.then(i=>new sE(this.firestore,new Sd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Ba(this.firestore,this._delegate.withConverter(e?Cm.getInstance(this.firestore,e):null))}}function js(n,e,t){return n.message=n.message.replace(e,t),n}function LH(n){for(const e of n)if("object"==typeof e&&!VP(e))return e;return{}}function FH(n,e){var t,i;let r;return r=VP(n[0])?n[0]:VP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{r.next&&r.next(e(o))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class sE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ba(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return IH(this._delegate,e._delegate)}}class oE extends sE{data(e){const t=this._delegate.data(e);return function Uq(n,e){n||ht()}(void 0!==t),t}}class zs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ST(e)}where(e,t,i){try{return new zs(this.firestore,ff(this._delegate,function c8(n,e,t){const i=e,r=IT("where",n);return new u8(r,i,t)}(e,t,i)))}catch(r){throw js(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new zs(this.firestore,ff(this._delegate,function h8(n,e="asc"){const t=e,i=IT("orderBy",n);return new d8(i,t)}(e,t)))}catch(i){throw js(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new zs(this.firestore,ff(this._delegate,function f8(n){return Z2("limit",n),new yH("limit",n,"F")}(e)))}catch(t){throw js(t,"limit()","Query.limit()")}}limitToLast(e){try{return new zs(this.firestore,ff(this._delegate,function p8(n){return Z2("limitToLast",n),new yH("limitToLast",n,"L")}(e)))}catch(t){throw js(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new zs(this.firestore,ff(this._delegate,function m8(...n){return new vH("startAt",n,!0)}(...e)))}catch(t){throw js(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new zs(this.firestore,ff(this._delegate,function g8(...n){return new vH("startAfter",n,!1)}(...e)))}catch(t){throw js(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new zs(this.firestore,ff(this._delegate,function _8(...n){return new bH("endBefore",n,!1)}(...e)))}catch(t){throw js(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new zs(this.firestore,ff(this._delegate,function y8(...n){return new bH("endAt",n,!0)}(...e)))}catch(t){throw js(t,"endAt()","Query.endAt()")}}isEqual(e){return wP(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function I8(n){n=dn(n,fs);const e=dn(n.firestore,oi),t=ji(e),i=new mf(e);return function U4(n,e){const t=new pr;return n.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return(i=(0,ke.Z)(function*(r,o,u){try{const f=yield uT(r,o,!0),y=new F2(o,f.Hi),E=y.Wu(f.documents),S=y.applyChanges(E,!1);u.resolve(S.snapshot)}catch(f){const y=ty(f,`Failed to execute query '${o} against cache`);u.reject(y)}}),function(r,o,u){return i.apply(this,arguments)})(yield vT(n),e,t);var i})),t.promise}(t,n._query).then(r=>new pf(e,i,n,r))}(this._delegate):"server"===e?.source?function T8(n){n=dn(n,fs);const e=dn(n.firestore,oi),t=ji(e),i=new mf(e);return oH(t,n._query,{source:"server"}).then(r=>new pf(e,i,n,r))}(this._delegate):function D8(n){n=dn(n,fs);const e=dn(n.firestore,oi),t=ji(e),i=new mf(e);return _H(n._query),oH(t,n._query).then(r=>new pf(e,i,n,r))}(this._delegate),t.then(i=>new UP(this.firestore,new pf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=LH(e),i=FH(e,r=>new UP(this.firestore,new pf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return AH(this._delegate,t,i)}withConverter(e){return new zs(this.firestore,this._delegate.withConverter(e?Cm.getInstance(this.firestore,e):null))}}class z8{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new oE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class UP{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new zs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new oE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new z8(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new oE(this._firestore,i))})}isEqual(e){return IH(this._delegate,e._delegate)}}class ay extends zs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ba(this.firestore,e):null}doc(e){try{return new Ba(this.firestore,void 0===e?gT(this._delegate):gT(this._delegate,e))}catch(t){throw js(t,"doc()","CollectionReference.doc()")}}add(e){return function A8(n,e){const t=dn(n.firestore,oi),i=gT(n),r=TT(n.converter,e);return oy(t,[ET(bm(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,mi.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new Ba(this.firestore,t))}isEqual(e){return J2(this._delegate,e._delegate)}withConverter(e){return new ay(this.firestore,this._delegate.withConverter(e?Cm.getInstance(this.firestore,e):null))}}function Dm(n){return dn(n,si)}class HP{constructor(...e){this._delegate=new Td(...e)}static documentId(){return new HP(Mi.keyField().canonicalString())}isEqual(e){return(e=(0,Q.m9)(e))instanceof Td&&this._delegate._internalPath.isEqual(e._internalPath)}}class Im{constructor(e){this._delegate=e}static serverTimestamp(){const e=function O8(){return new kP("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Im(e)}static delete(){const e=function P8(){return new eE("deleteField")}();return e._methodName="FieldValue.delete",new Im(e)}static arrayUnion(...e){const t=function N8(...n){return new r8("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Im(t)}static arrayRemove(...e){const t=function L8(...n){return new s8("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Im(t)}static increment(e){const t=function F8(n){return new o8("increment",n)}(e);return t._methodName="FieldValue.increment",new Im(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const G8={Firestore:PH,GeoPoint:bT,Timestamp:pi,Blob:rE,Transaction:OH,WriteBatch:NH,DocumentReference:Ba,DocumentSnapshot:sE,Query:zs,QueryDocumentSnapshot:oE,QuerySnapshot:UP,CollectionReference:ay,FieldPath:HP,FieldValue:Im,setLogLevel:function j8(n){!function Vq(n){Xh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function BH(n,e){return function q8(n,e=ss.z){return new Ei.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}(n,e)}function jP(n,e){return BH(n,e).pipe((0,bn.U)(t=>({payload:t,type:"query"})))}function AT(n,e){return jP(n,e).pipe(Gu(void 0),YM(),(0,bn.U)(([t,i])=>{const r=i.payload.docChanges(),o=r.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((u,f)=>{const y=r.find(S=>S.doc.ref.isEqual(u.ref)),E=t?.payload.docs.find(S=>S.ref.isEqual(u.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(u.metadata)||!y&&E&&JSON.stringify(E.metadata)===JSON.stringify(u.metadata)||o.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:u}})}),o}))}function VH(n,e,t){return AT(n,t).pipe(Nc((i,r)=>function K8(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function Y8(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return zP(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return zP(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return zP(n,e.oldIndex,1)}return n}(n,i))}),n}(i,r.map(o=>o.payload),e),[]),jm(),(0,bn.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function zP(n,e,t,...i){const r=n.slice();return r.splice(e,t,...i),r}function UH(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function $8(n){(function W8(n,e){n.INTERNAL.registerComponent(new Ss.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},G8)))})(n,(e,t)=>new PH(e,t,new H8)),n.registerVersion("@firebase/firestore-compat","0.2.1")}(Ea.Z);class HH{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=AT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,bn.U)(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(Gu(void 0),YM(),Yi(([i,r])=>r.length>0||!i),(0,bn.U)(([i,r])=>r),un.iC)}auditTrail(e){return this.stateChanges(e).pipe(Nc((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=UH(e);return VH(this.query,t,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return jP(this.query,this.afs.schedulers.outsideAngular).pipe((0,bn.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),un.iC)}get(e){return(0,qn.D)(this.query.get(e)).pipe(un.iC)}add(e){return this.ref.add(e)}doc(e){return new jH(this.ref.doc(e),this.afs)}}class jH{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:r,query:o}=WH(i,t);return new HH(r,o,this.afs)}snapshotChanges(){return function Z8(n,e){return BH(n,e).pipe(Gu(void 0),YM(),(0,bn.U)(([t,i])=>i.exists?t?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,bn.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,qn.D)(this.ref.get(e)).pipe(un.iC)}}class Q8{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?AT(this.query,this.afs.schedulers.outsideAngular).pipe((0,bn.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),Yi(t=>t.length>0),un.iC):AT(this.query,this.afs.schedulers.outsideAngular).pipe(un.iC)}auditTrail(e){return this.stateChanges(e).pipe(Nc((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=UH(e);return VH(this.query,t,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return jP(this.query,this.afs.schedulers.outsideAngular).pipe((0,bn.U)(i=>i.payload.docs.map(r=>e.idField?Object.assign({[e.idField]:r.id},r.data()):r.data())),un.iC)}get(e){return(0,qn.D)(this.query.get(e)).pipe(un.iC)}}const zH=new h.OlP("angularfire2.enableFirestorePersistence"),GH=new h.OlP("angularfire2.firestore.persistenceSettings"),X8=new h.OlP("angularfire2.firestore.settings"),J8=new h.OlP("angularfire2.firestore.use-emulator");function WH(n,e=(t=>t)){return{query:e(n),ref:n}}let eK=(()=>{class n{constructor(t,i,r,o,u,f,y,E,S,R,H,K,J,le,ve,Ve,Ye){this.schedulers=y;const Qe=(0,Pn.on)(t,f,i),Xe=S;R&&yb(Qe,f,H,J,le,ve,K,Ve),[this.firestore,this.persistenceEnabled$]=(0,Pn.cc)(`${Qe.name}.firestore`,"AngularFirestore",Qe.name,()=>{const wt=f.runOutsideAngular(()=>Qe.firestore());if(o&&wt.settings(o),Xe&&wt.useEmulator(...Xe),r&&!Si(u)){const It=()=>{try{return(0,qn.D)(wt.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(tn){return typeof console<"u"&&console.warn(tn),ur(!1)}};return[wt,f.runOutsideAngular(It)]}return[wt,ur(!1)]},[o,Xe,r])}collection(t,i){let r;r="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:u}=WH(r,i),f=this.schedulers.ngZone.run(()=>o);return new HH(f,u,this)}collectionGroup(t,i){const r=i||(u=>u),o=this.firestore.collectionGroup(t);return new Q8(r(o),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const r=this.schedulers.ngZone.run(()=>i);return new jH(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Pn.Dh),h.LFG(Pn.xv,8),h.LFG(zH,8),h.LFG(X8,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(un.HU),h.LFG(GH,8),h.LFG(J8,8),h.LFG(c_,8),h.LFG(mb,8),h.LFG(Rp,8),h.LFG(gb,8),h.LFG(l_,8),h.LFG(u_,8),h.LFG(_b,8),h.LFG(kp,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),tK=(()=>{class n{constructor(){a_.Z.registerVersion("angularfire",un.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:zH,useValue:!0},{provide:GH,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[eK]}),n})();const $H_firebase={apiKey:"AIzaSyAKLCXCTJs0pkj9or7aguRljD81lZS0BDI",authDomain:"map-tracker-1646f.firebaseapp.com",databaseURL:"https://map-tracker-1646f-default-rtdb.europe-west1.firebasedatabase.app",projectId:"map-tracker-1646f",storageBucket:"map-tracker-1646f.appspot.com",messagingSenderId:"82239181578",appId:"1:82239181578:web:8bdf53b15973afb481a0f3",measurementId:"G-1B12E2VX49"};function qH(n){return new h.vHH(3e3,!1)}function LK(){return typeof window<"u"&&typeof window.document<"u"}function GP(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function _f(n){switch(n.length){case 0:return new Zb;case 1:return n[0];default:return new KL(n)}}function ZH(n,e,t,i,r=new Map,o=new Map){const u=[],f=[];let y=-1,E=null;if(i.forEach(S=>{const R=S.get("offset"),H=R==y,K=H&&E||new Map;S.forEach((J,le)=>{let ve=le,Ve=J;if("offset"!==le)switch(ve=e.normalizePropertyName(ve,u),Ve){case"!":Ve=r.get(le);break;case md:Ve=o.get(le);break;default:Ve=e.normalizeStyleValue(le,ve,Ve,u)}K.set(ve,Ve)}),H||f.push(K),E=K,y=R}),u.length)throw function DK(n){return new h.vHH(3502,!1)}();return f}function WP(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&$P(t,"start",n)));break;case"done":n.onDone(()=>i(t&&$P(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&$P(t,"destroy",n)))}}function $P(n,e,t){const o=qP(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),u=n._data;return null!=u&&(o._data=u),o}function qP(n,e,t,i,r="",o=0,u){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:o,disabled:!!u}}function ea(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function KH(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let ZP=(n,e)=>!1,YH=(n,e,t)=>[],QH=null;function KP(n){const e=n.parentNode||n.host;return e===QH?null:e}(GP()||typeof Element<"u")&&(LK()?(QH=(()=>document.documentElement)(),ZP=(n,e)=>{for(;e;){if(e===n)return!0;e=KP(e)}return!1}):ZP=(n,e)=>n.contains(e),YH=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let Tm=null,XH=!1;const JH=ZP,ej=YH;let tj=(()=>{class n{validateStyleProperty(t){return function BK(n){Tm||(Tm=function VK(){return typeof document<"u"?document.body:null}()||{},XH=!!Tm.style&&"WebkitAppearance"in Tm.style);let e=!0;return Tm.style&&!function FK(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Tm.style,!e&&XH&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Tm.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return JH(t,i)}getParentElement(t){return KP(t)}query(t,i,r){return ej(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,o,u,f=[],y){return new Zb(r,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),YP=(()=>{class n{}return n.NOOP=new tj,n})();const QP="ng-enter",xT="ng-leave",MT="ng-trigger",kT=".ng-trigger",ij="ng-animating",XP=".ng-animating";function Ad(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:JP(parseFloat(e[1]),e[2])}function JP(n,e){return"s"===e?1e3*n:n}function RT(n,e,t){return n.hasOwnProperty("duration")?n:function jK(n,e,t){let r,o=0,u="";if("string"==typeof n){const f=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return e.push(qH()),{duration:0,delay:0,easing:""};r=JP(parseFloat(f[1]),f[2]);const y=f[3];null!=y&&(o=JP(parseFloat(y),f[4]));const E=f[5];E&&(u=E)}else r=n;if(!t){let f=!1,y=e.length;r<0&&(e.push(function nK(){return new h.vHH(3100,!1)}()),f=!0),o<0&&(e.push(function iK(){return new h.vHH(3101,!1)}()),f=!0),f&&e.splice(y,0,qH())}return{duration:r,delay:o,easing:u}}(n,e,t)}function aE(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function rj(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function yf(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function oj(n,e,t){return t?e+":"+t+";":""}function aj(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=oj(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=oj(0,$K(t),n.style[t]));n.setAttribute("style",e)}function nc(n,e,t){n.style&&(e.forEach((i,r)=>{const o=tO(r);t&&!t.has(r)&&t.set(r,n.style[o]),n.style[o]=i}),GP()&&aj(n))}function Sm(n,e){n.style&&(e.forEach((t,i)=>{const r=tO(i);n.style[r]=""}),GP()&&aj(n))}function lE(n){return Array.isArray(n)?1==n.length?n[0]:WL(n):n}const eO=new RegExp("{{\\s*(.+?)\\s*}}","g");function lj(n){let e=[];if("string"==typeof n){let t;for(;t=eO.exec(n);)e.push(t[1]);eO.lastIndex=0}return e}function uE(n,e,t){const i=n.toString(),r=i.replace(eO,(o,u)=>{let f=e[u];return null==f&&(t.push(function sK(n){return new h.vHH(3003,!1)}()),f=""),f.toString()});return r==i?n:r}function PT(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const WK=/-+([a-z0-9])/g;function tO(n){return n.replace(WK,(...e)=>e[1].toUpperCase())}function $K(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ta(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function oK(n){return new h.vHH(3004,!1)}()}}function uj(n,e){return window.getComputedStyle(n)[e]}function XK(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function JK(n,e,t){if(":"==n[0]){const y=function e5(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function bK(n){return new h.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof y)return void e.push(y);n=y}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function vK(n){return new h.vHH(3015,!1)}()),e;const r=i[1],o=i[2],u=i[3];e.push(cj(r,u));"<"==o[0]&&!("*"==r&&"*"==u)&&e.push(cj(u,r))}(i,t,e)):t.push(n),t}const FT=new Set(["true","1"]),BT=new Set(["false","0"]);function cj(n,e){const t=FT.has(n)||BT.has(n),i=FT.has(e)||BT.has(e);return(r,o)=>{let u="*"==n||n==r,f="*"==e||e==o;return!u&&t&&"boolean"==typeof r&&(u=r?FT.has(n):BT.has(n)),!f&&i&&"boolean"==typeof o&&(f=o?FT.has(e):BT.has(e)),u&&f}}const t5=new RegExp("s*:selfs*,?","g");function nO(n,e,t,i){return new n5(n).build(e,t,i)}class n5{constructor(e){this._driver=e}build(e,t,i){const r=new o5(t);return this._resetContextStyleTimingState(r),ta(this,lE(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const o=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push(function lK(){return new h.vHH(3006,!1)}()),e.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),0==f.type){const y=f,E=y.name;E.toString().split(/\s*,\s*/).forEach(S=>{y.name=S,o.push(this.visitState(y,t))}),y.name=E}else if(1==f.type){const y=this.visitTransition(f,t);i+=y.queryCount,r+=y.depCount,u.push(y)}else t.errors.push(function uK(){return new h.vHH(3007,!1)}())}),{type:7,name:e.name,states:o,transitions:u,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const o=new Set,u=r||{};i.styles.forEach(f=>{f instanceof Map&&f.forEach(y=>{lj(y).forEach(E=>{u.hasOwnProperty(E)||o.add(E)})})}),o.size&&(PT(o.values()),t.errors.push(function cK(n,e){return new h.vHH(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=ta(this,lE(e.animation),t);return{type:1,matchers:XK(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Am(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>ta(this,i,t)),options:Am(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const o=e.steps.map(u=>{t.currentTime=i;const f=ta(this,u,t);return r=Math.max(r,t.currentTime),f});return t.currentTime=r,{type:3,steps:o,options:Am(e.options)}}visitAnimate(e,t){const i=function l5(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return iO(RT(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=iO(0,0,"");return o.dynamic=!0,o.strValue=t,o}const r=RT(t,e);return iO(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,o=e.styles?e.styles:$h({});if(5==o.type)r=this.visitKeyframes(o,t);else{let u=e.styles,f=!1;if(!u){f=!0;const E={};i.easing&&(E.easing=i.easing),u=$h(E)}t.currentTime+=i.duration+i.delay;const y=this.visitStyle(u,t);y.isEmptyStep=f,r=y}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let f of r)"string"==typeof f?f===md?i.push(f):t.errors.push(new h.vHH(3002,!1)):i.push(rj(f));let o=!1,u=null;return i.forEach(f=>{if(f instanceof Map&&(f.has("easing")&&(u=f.get("easing"),f.delete("easing")),!o))for(let y of f.values())if(y.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:i,easing:u,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(u=>{"string"!=typeof u&&u.forEach((f,y)=>{const E=t.collectedStyles.get(t.currentQuerySelector),S=E.get(y);let R=!0;S&&(o!=r&&o>=S.startTime&&r<=S.endTime&&(t.errors.push(function hK(n,e,t,i,r){return new h.vHH(3010,!1)}()),R=!1),o=S.startTime),R&&E.set(y,{startTime:o,endTime:r}),t.options&&function GK(n,e,t){const i=e.params||{},r=lj(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||t.push(function rK(n){return new h.vHH(3001,!1)}())})}(f,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function fK(){return new h.vHH(3011,!1)}()),i;let o=0;const u=[];let f=!1,y=!1,E=0;const S=e.steps.map(Ve=>{const Ye=this._makeStyleAst(Ve,t);let Qe=null!=Ye.offset?Ye.offset:function a5(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Ye.styles),Xe=0;return null!=Qe&&(o++,Xe=Ye.offset=Qe),y=y||Xe<0||Xe>1,f=f||Xe<E,E=Xe,u.push(Xe),Ye});y&&t.errors.push(function pK(){return new h.vHH(3012,!1)}()),f&&t.errors.push(function mK(){return new h.vHH(3200,!1)}());const R=e.steps.length;let H=0;o>0&&o<R?t.errors.push(function gK(){return new h.vHH(3202,!1)}()):0==o&&(H=1/(R-1));const K=R-1,J=t.currentTime,le=t.currentAnimateTimings,ve=le.duration;return S.forEach((Ve,Ye)=>{const Qe=H>0?Ye==K?1:H*Ye:u[Ye],Xe=Qe*ve;t.currentTime=J+le.delay+Xe,le.duration=Xe,this._validateStyleAst(Ve,t),Ve.offset=Qe,i.styles.push(Ve)}),i}visitReference(e,t){return{type:8,animation:ta(this,lE(e.animation),t),options:Am(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Am(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Am(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[o,u]=function r5(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(t5,"")),n=n.replace(/@\*/g,kT).replace(/@\w+/g,t=>kT+"-"+t.slice(1)).replace(/:animating/g,XP),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+o:o,ea(t.collectedStyles,t.currentQuerySelector,new Map);const f=ta(this,lE(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:u,animation:f,originalSelector:e.selector,options:Am(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function _K(){return new h.vHH(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:RT(e.timings,t.errors,!0);return{type:12,animation:ta(this,lE(e.animation),t),timings:i,options:null}}}class o5{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Am(n){return n?(n=aE(n)).params&&(n.params=function s5(n){return n?aE(n):null}(n.params)):n={},n}function iO(n,e,t){return{duration:n,delay:e,easing:t}}function rO(n,e,t,i,r,o,u=null,f=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:u,subTimeline:f}}class VT{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const d5=new RegExp(":enter","g"),f5=new RegExp(":leave","g");function sO(n,e,t,i,r,o=new Map,u=new Map,f,y,E=[]){return(new p5).buildKeyframes(n,e,t,i,r,o,u,f,y,E)}class p5{buildKeyframes(e,t,i,r,o,u,f,y,E,S=[]){E=E||new VT;const R=new oO(e,t,E,r,o,S,[]);R.options=y;const H=y.delay?Ad(y.delay):0;R.currentTimeline.delayNextStep(H),R.currentTimeline.setStyles([u],null,R.errors,y),ta(this,i,R);const K=R.timelines.filter(J=>J.containsAnimation());if(K.length&&f.size){let J;for(let le=K.length-1;le>=0;le--){const ve=K[le];if(ve.element===t){J=ve;break}}J&&!J.allowOnlyTimelineStyles()&&J.setStyles([f],null,R.errors,y)}return K.length?K.map(J=>J.buildKeyframes()):[rO(t,[],[],[],0,H,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),o=t.currentTimeline.currentTime,u=this._visitSubInstructions(i,r,r.options);o!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(const r of e){const o=r?.delay;if(o){const u="number"==typeof o?o:Ad(uE(o,r?.params??{},t.errors));i.delayNextStep(u)}}}_visitSubInstructions(e,t,i){let o=t.currentTimeline.currentTime;const u=null!=i.duration?Ad(i.duration):null,f=null!=i.delay?Ad(i.delay):null;return 0!==u&&e.forEach(y=>{const E=t.appendInstructionToTimeline(y,u,f);o=Math.max(o,E.duration+E.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),ta(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const o=e.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=UT);const u=Ad(o.delay);r.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>ta(this,u,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?Ad(e.options.delay):0;e.steps.forEach(u=>{const f=t.createSubContext(e.options);o&&f.delayNextStep(o),ta(this,u,f),r=Math.max(r,f.currentTimeline.currentTime),i.push(f.currentTimeline)}),i.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return RT(t.params?uE(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(i.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const o=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,o=i.duration,f=t.createSubContext().currentTimeline;f.easing=i.easing,e.styles.forEach(y=>{f.forwardTime((y.offset||0)*o),f.setStyles(y.styles,y.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(r+o),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?Ad(r.delay):0;o&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=UT);let u=i;const f=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=f.length;let y=null;f.forEach((E,S)=>{t.currentQueryIndex=S;const R=t.createSubContext(e.options,E);o&&R.delayNextStep(o),E===t.element&&(y=R.currentTimeline),ta(this,e.animation,R),R.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,R.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),y&&(t.currentTimeline.mergeTimelineCollectedStyles(y),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,o=e.timings,u=Math.abs(o.duration),f=u*(t.currentQueryTotal-1);let y=u*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":y=f-y;break;case"full":y=i.currentStaggerTime}const S=t.currentTimeline;y&&S.delayNextStep(y);const R=S.currentTime;ta(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-R+(r.startTime-i.currentTimeline.startTime)}}const UT={};class oO{constructor(e,t,i,r,o,u,f,y){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=u,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=UT,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=y||new HT(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Ad(i.duration)),null!=i.delay&&(r.delay=Ad(i.delay));const o=i.params;if(o){let u=r.params;u||(u=this.options.params={}),Object.keys(o).forEach(f=>{(!t||!u.hasOwnProperty(f))&&(u[f]=uE(o[f],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,o=new oO(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=UT,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new m5(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,o,u){let f=[];if(r&&f.push(this.element),e.length>0){e=(e=e.replace(d5,"."+this._enterClassName)).replace(f5,"."+this._leaveClassName);let E=this._driver.query(this.element,e,1!=i);0!==i&&(E=i<0?E.slice(E.length+i,E.length):E.slice(0,i)),f.push(...E)}return!o&&0==f.length&&u.push(function yK(n){return new h.vHH(3014,!1)}()),f}}class HT{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new HT(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||md),this._currentKeyframe.set(t,md);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const o=r&&r.params||{},u=function g5(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let o of i)t.set(o,md)}else yf(r,t)}),t}(e,this._globalTimelineStyles);for(let[f,y]of u){const E=uE(y,o,i);this._pendingStyles.set(f,E),this._localTimelineStyles.has(f)||this._backFill.set(f,this._globalTimelineStyles.get(f)??md),this._updateStyle(f,E)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((f,y)=>{const E=yf(f,new Map,this._backFill);E.forEach((S,R)=>{"!"===S?e.add(R):S===md&&t.add(R)}),i||E.set("offset",y/this.duration),r.push(E)});const o=e.size?PT(e.values()):[],u=t.size?PT(t.values()):[];if(i){const f=r[0],y=new Map(f);f.set("offset",0),y.set("offset",1),r=[f,y]}return rO(this.element,r,o,u,this.duration,this.startTime,this.easing,!1)}}class m5 extends HT{constructor(e,t,i,r,o,u,f=!1){super(e,t,u.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=f,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],u=i+t,f=t/u,y=yf(e[0]);y.set("offset",0),o.push(y);const E=yf(e[0]);E.set("offset",fj(f)),o.push(E);const S=e.length-1;for(let R=1;R<=S;R++){let H=yf(e[R]);const K=H.get("offset");H.set("offset",fj((t+K*i)/u)),o.push(H)}i=u,t=0,r="",e=o}return rO(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function fj(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class aO{}const _5=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class y5 extends aO{normalizePropertyName(e,t){return tO(e)}normalizeStyleValue(e,t,i,r){let o="";const u=i.toString().trim();if(_5.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)o="px";else{const f=i.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&r.push(function aK(n,e){return new h.vHH(3005,!1)}())}return u+o}}function pj(n,e,t,i,r,o,u,f,y,E,S,R,H){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:o,toState:i,toStyles:u,timelines:f,queriedElements:y,preStyleProps:E,postStyleProps:S,totalTime:R,errors:H}}const lO={};class mj{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function v5(n,e,t,i,r){return n.some(o=>o(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,o,u,f,y,E,S){const R=[],H=this.ast.options&&this.ast.options.params||lO,J=this.buildStyles(i,f&&f.params||lO,R),le=y&&y.params||lO,ve=this.buildStyles(r,le,R),Ve=new Set,Ye=new Map,Qe=new Map,Xe="void"===r,wt={params:b5(le,H),delay:this.ast.options?.delay},It=S?[]:sO(e,t,this.ast.animation,o,u,J,ve,wt,E,R);let tn=0;if(It.forEach(na=>{tn=Math.max(na.duration+na.delay,tn)}),R.length)return pj(t,this._triggerName,i,r,Xe,J,ve,[],[],Ye,Qe,tn,R);It.forEach(na=>{const xd=na.element,Mj=ea(Ye,xd,new Set);na.preStyleProps.forEach(xm=>Mj.add(xm));const dE=ea(Qe,xd,new Set);na.postStyleProps.forEach(xm=>dE.add(xm)),xd!==t&&Ve.add(xd)});const zi=PT(Ve.values());return pj(t,this._triggerName,i,r,Xe,J,ve,It,zi,Ye,Qe,tn)}}function b5(n,e){const t=aE(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class w5{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=aE(this.defaultParams);return Object.keys(e).forEach(o=>{const u=e[o];null!==u&&(r[o]=u)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((u,f)=>{u&&(u=uE(u,r,t));const y=this.normalizer.normalizePropertyName(f,t);u=this.normalizer.normalizeStyleValue(f,y,u,t),i.set(y,u)})}),i}}class C5{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new w5(r.style,r.options&&r.options.params||{},i))}),gj(this.states,"true","1"),gj(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new mj(e,r,this.states))}),this.fallbackTransition=function D5(n,e,t){return new mj(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,f)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(u=>u.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function gj(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const I5=new VT;class T5{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],o=nO(this._driver,t,i,[]);if(i.length)throw function IK(n){return new h.vHH(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,i){const r=e.element,o=ZH(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],o=this._animations.get(e);let u;const f=new Map;if(o?(u=sO(this._driver,t,o,QP,xT,new Map,new Map,i,I5,r),u.forEach(S=>{const R=ea(f,S.element,new Map);S.postStyleProps.forEach(H=>R.set(H,null))})):(r.push(function TK(){return new h.vHH(3300,!1)}()),u=[]),r.length)throw function SK(n){return new h.vHH(3504,!1)}();f.forEach((S,R)=>{S.forEach((H,K)=>{S.set(K,this._driver.computeStyle(R,K,md))})});const E=_f(u.map(S=>{const R=f.get(S.element);return this._buildPlayer(S,new Map,R)}));return this._playersById.set(e,E),E.onDestroy(()=>this.destroy(e)),this.players.push(E),E}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function AK(n){return new h.vHH(3301,!1)}();return t}listen(e,t,i,r){const o=qP(t,"","","");return WP(this._getPlayer(e),i,o,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const _j="ng-animate-queued",uO="ng-animate-disabled",k5=[],yj={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},R5={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Va="__ng_removed";class cO{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function L5(n){return n??null}(i?e.value:e),i){const o=aE(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const cE="void",dO=new cO(cE);class P5{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ua(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function xK(n,e){return new h.vHH(3302,!1)}();if(null==i||0==i.length)throw function MK(n){return new h.vHH(3303,!1)}();if(!function F5(n){return"start"==n||"done"==n}(i))throw function kK(n,e){return new h.vHH(3400,!1)}();const o=ea(this._elementListeners,e,[]),u={name:t,phase:i,callback:r};o.push(u);const f=ea(this._engine.statesByElement,e,new Map);return f.has(t)||(Ua(e,MT),Ua(e,MT+"-"+t),f.set(t,dO)),()=>{this._engine.afterFlush(()=>{const y=o.indexOf(u);y>=0&&o.splice(y,1),this._triggers.has(t)||f.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function RK(n){return new h.vHH(3401,!1)}();return t}trigger(e,t,i,r=!0){const o=this._getTrigger(t),u=new hO(this.id,t,e);let f=this._engine.statesByElement.get(e);f||(Ua(e,MT),Ua(e,MT+"-"+t),this._engine.statesByElement.set(e,f=new Map));let y=f.get(t);const E=new cO(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&y&&E.absorbOptions(y.options),f.set(t,E),y||(y=dO),E.value!==cE&&y.value===E.value){if(!function U5(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const o=t[r];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(y.params,E.params)){const le=[],ve=o.matchStyles(y.value,y.params,le),Ve=o.matchStyles(E.value,E.params,le);le.length?this._engine.reportError(le):this._engine.afterFlush(()=>{Sm(e,ve),nc(e,Ve)})}return}const H=ea(this._engine.playersByElement,e,[]);H.forEach(le=>{le.namespaceId==this.id&&le.triggerName==t&&le.queued&&le.destroy()});let K=o.matchTransition(y.value,E.value,e,E.params),J=!1;if(!K){if(!r)return;K=o.fallbackTransition,J=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:K,fromState:y,toState:E,player:u,isFallbackTransition:J}),J||(Ua(e,_j),u.onStart(()=>{ly(e,_j)})),u.onDone(()=>{let le=this.players.indexOf(u);le>=0&&this.players.splice(le,1);const ve=this._engine.playersByElement.get(e);if(ve){let Ve=ve.indexOf(u);Ve>=0&&ve.splice(Ve,1)}}),this.players.push(u),H.push(u),u}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,kT,!0);i.forEach(r=>{if(r[Va])return;const o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(u=>u.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const o=this._engine.statesByElement.get(e),u=new Map;if(o){const f=[];if(o.forEach((y,E)=>{if(u.set(E,y.value),this._triggers.has(E)){const S=this.trigger(e,E,cE,r);S&&f.push(S)}}),f.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,u),i&&_f(f).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(o=>{const u=o.name;if(r.has(u))return;r.add(u);const y=this._triggers.get(u).fallbackTransition,E=i.get(u)||dO,S=new cO(cE),R=new hO(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:y,fromState:E,toState:S,player:R,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let u=e;for(;u=u.parentNode;)if(i.statesByElement.get(u)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const o=e[Va];(!o||o===yj)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Ua(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const o=i.element,u=this._elementListeners.get(o);u&&u.forEach(f=>{if(f.name==i.triggerName){const y=qP(o,i.triggerName,i.fromState.value,i.toState.value);y._data=e,WP(i.player,f.phase,y,f.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const o=i.transition.ast.depCount,u=r.transition.ast.depCount;return 0==o||0==u?o-u:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class O5{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new P5(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let u=!1,f=this.driver.getParentElement(t);for(;f;){const y=r.get(f);if(y){const E=i.indexOf(y);i.splice(E+1,0,e),u=!0;break}f=this.driver.getParentElement(f)}u||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}return t}trigger(e,t,i,r){if(jT(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!jT(t))return;const o=t[Va];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ua(e,uO)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),ly(e,uO))}removeNode(e,t,i,r){if(jT(t)){const o=e?this._fetchNamespace(e):null;if(o?o.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,o){this.collectedLeaveElements.push(t),t[Va]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,i,r,o){return jT(t)?this._fetchNamespace(e).listen(t,i,r,o):()=>{}}_buildInstruction(e,t,i,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,kT,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,XP,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return _f(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Va];if(t&&t.setForRemoval){if(e[Va]=yj,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(uO)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Ua(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?_f(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function PK(n){return new h.vHH(3402,!1)}()}_flushAnimations(e,t){const i=new VT,r=[],o=new Map,u=[],f=new Map,y=new Map,E=new Map,S=new Set;this.disabledNodes.forEach(gt=>{S.add(gt);const xt=this.driver.query(gt,".ng-animate-queued",!0);for(let Lt=0;Lt<xt.length;Lt++)S.add(xt[Lt])});const R=this.bodyNode,H=Array.from(this.statesByElement.keys()),K=wj(H,this.collectedEnterElements),J=new Map;let le=0;K.forEach((gt,xt)=>{const Lt=QP+le++;J.set(xt,Lt),gt.forEach(wn=>Ua(wn,Lt))});const ve=[],Ve=new Set,Ye=new Set;for(let gt=0;gt<this.collectedLeaveElements.length;gt++){const xt=this.collectedLeaveElements[gt],Lt=xt[Va];Lt&&Lt.setForRemoval&&(ve.push(xt),Ve.add(xt),Lt.hasAnimation?this.driver.query(xt,".ng-star-inserted",!0).forEach(wn=>Ve.add(wn)):Ye.add(xt))}const Qe=new Map,Xe=wj(H,Array.from(Ve));Xe.forEach((gt,xt)=>{const Lt=xT+le++;Qe.set(xt,Lt),gt.forEach(wn=>Ua(wn,Lt))}),e.push(()=>{K.forEach((gt,xt)=>{const Lt=J.get(xt);gt.forEach(wn=>ly(wn,Lt))}),Xe.forEach((gt,xt)=>{const Lt=Qe.get(xt);gt.forEach(wn=>ly(wn,Lt))}),ve.forEach(gt=>{this.processLeaveNode(gt)})});const wt=[],It=[];for(let gt=this._namespaceList.length-1;gt>=0;gt--)this._namespaceList[gt].drainQueuedTransitions(t).forEach(Lt=>{const wn=Lt.player,Lr=Lt.element;if(wt.push(wn),this.collectedEnterElements.length){const ps=Lr[Va];if(ps&&ps.setForMove){if(ps.previousTriggersValues&&ps.previousTriggersValues.has(Lt.triggerName)){const Mm=ps.previousTriggersValues.get(Lt.triggerName),Ha=this.statesByElement.get(Lt.element);if(Ha&&Ha.has(Lt.triggerName)){const WT=Ha.get(Lt.triggerName);WT.value=Mm,Ha.set(Lt.triggerName,WT)}}return void wn.destroy()}}const ic=!R||!this.driver.containsElement(R,Lr),ia=Qe.get(Lr),vf=J.get(Lr),Ii=this._buildInstruction(Lt,i,vf,ia,ic);if(Ii.errors&&Ii.errors.length)return void It.push(Ii);if(ic)return wn.onStart(()=>Sm(Lr,Ii.fromStyles)),wn.onDestroy(()=>nc(Lr,Ii.toStyles)),void r.push(wn);if(Lt.isFallbackTransition)return wn.onStart(()=>Sm(Lr,Ii.fromStyles)),wn.onDestroy(()=>nc(Lr,Ii.toStyles)),void r.push(wn);const Pj=[];Ii.timelines.forEach(ps=>{ps.stretchStartingKeyframe=!0,this.disabledNodes.has(ps.element)||Pj.push(ps)}),Ii.timelines=Pj,i.append(Lr,Ii.timelines),u.push({instruction:Ii,player:wn,element:Lr}),Ii.queriedElements.forEach(ps=>ea(f,ps,[]).push(wn)),Ii.preStyleProps.forEach((ps,Mm)=>{if(ps.size){let Ha=y.get(Mm);Ha||y.set(Mm,Ha=new Set),ps.forEach((WT,mO)=>Ha.add(mO))}}),Ii.postStyleProps.forEach((ps,Mm)=>{let Ha=E.get(Mm);Ha||E.set(Mm,Ha=new Set),ps.forEach((WT,mO)=>Ha.add(mO))})});if(It.length){const gt=[];It.forEach(xt=>{gt.push(function OK(n,e){return new h.vHH(3505,!1)}())}),wt.forEach(xt=>xt.destroy()),this.reportError(gt)}const tn=new Map,zi=new Map;u.forEach(gt=>{const xt=gt.element;i.has(xt)&&(zi.set(xt,xt),this._beforeAnimationBuild(gt.player.namespaceId,gt.instruction,tn))}),r.forEach(gt=>{const xt=gt.element;this._getPreviousPlayers(xt,!1,gt.namespaceId,gt.triggerName,null).forEach(wn=>{ea(tn,xt,[]).push(wn),wn.destroy()})});const na=ve.filter(gt=>Cj(gt,y,E)),xd=new Map;bj(xd,this.driver,Ye,E,md).forEach(gt=>{Cj(gt,y,E)&&na.push(gt)});const dE=new Map;K.forEach((gt,xt)=>{bj(dE,this.driver,new Set(gt),y,"!")}),na.forEach(gt=>{const xt=xd.get(gt),Lt=dE.get(gt);xd.set(gt,new Map([...Array.from(xt?.entries()??[]),...Array.from(Lt?.entries()??[])]))});const xm=[],kj=[],Rj={};u.forEach(gt=>{const{element:xt,player:Lt,instruction:wn}=gt;if(i.has(xt)){if(S.has(xt))return Lt.onDestroy(()=>nc(xt,wn.toStyles)),Lt.disabled=!0,Lt.overrideTotalTime(wn.totalTime),void r.push(Lt);let Lr=Rj;if(zi.size>1){let ia=xt;const vf=[];for(;ia=ia.parentNode;){const Ii=zi.get(ia);if(Ii){Lr=Ii;break}vf.push(ia)}vf.forEach(Ii=>zi.set(Ii,Lr))}const ic=this._buildAnimation(Lt.namespaceId,wn,tn,o,dE,xd);if(Lt.setRealPlayer(ic),Lr===Rj)xm.push(Lt);else{const ia=this.playersByElement.get(Lr);ia&&ia.length&&(Lt.parentPlayer=_f(ia)),r.push(Lt)}}else Sm(xt,wn.fromStyles),Lt.onDestroy(()=>nc(xt,wn.toStyles)),kj.push(Lt),S.has(xt)&&r.push(Lt)}),kj.forEach(gt=>{const xt=o.get(gt.element);if(xt&&xt.length){const Lt=_f(xt);gt.setRealPlayer(Lt)}}),r.forEach(gt=>{gt.parentPlayer?gt.syncPlayerEvents(gt.parentPlayer):gt.destroy()});for(let gt=0;gt<ve.length;gt++){const xt=ve[gt],Lt=xt[Va];if(ly(xt,xT),Lt&&Lt.hasAnimation)continue;let wn=[];if(f.size){let ic=f.get(xt);ic&&ic.length&&wn.push(...ic);let ia=this.driver.query(xt,XP,!0);for(let vf=0;vf<ia.length;vf++){let Ii=f.get(ia[vf]);Ii&&Ii.length&&wn.push(...Ii)}}const Lr=wn.filter(ic=>!ic.destroyed);Lr.length?B5(this,xt,Lr):this.processLeaveNode(xt)}return ve.length=0,xm.forEach(gt=>{this.players.push(gt),gt.onDone(()=>{gt.destroy();const xt=this.players.indexOf(gt);this.players.splice(xt,1)}),gt.play()}),xm}elementContainsData(e,t){let i=!1;const r=t[Va];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,o){let u=[];if(t){const f=this.playersByQueriedElement.get(e);f&&(u=f)}else{const f=this.playersByElement.get(e);if(f){const y=!o||o==cE;f.forEach(E=>{E.queued||!y&&E.triggerName!=r||u.push(E)})}}return(i||r)&&(u=u.filter(f=>!(i&&i!=f.namespaceId||r&&r!=f.triggerName))),u}_beforeAnimationBuild(e,t,i){const o=t.element,u=t.isRemovalTransition?void 0:e,f=t.isRemovalTransition?void 0:t.triggerName;for(const y of t.timelines){const E=y.element,S=E!==o,R=ea(i,E,[]);this._getPreviousPlayers(E,S,u,f,t.toState).forEach(K=>{const J=K.getRealPlayer();J.beforeDestroy&&J.beforeDestroy(),K.destroy(),R.push(K)})}Sm(o,t.fromStyles)}_buildAnimation(e,t,i,r,o,u){const f=t.triggerName,y=t.element,E=[],S=new Set,R=new Set,H=t.timelines.map(J=>{const le=J.element;S.add(le);const ve=le[Va];if(ve&&ve.removedBeforeQueried)return new Zb(J.duration,J.delay);const Ve=le!==y,Ye=function V5(n){const e=[];return Ej(n,e),e}((i.get(le)||k5).map(tn=>tn.getRealPlayer())).filter(tn=>!!tn.element&&tn.element===le),Qe=o.get(le),Xe=u.get(le),wt=ZH(0,this._normalizer,0,J.keyframes,Qe,Xe),It=this._buildPlayer(J,wt,Ye);if(J.subTimeline&&r&&R.add(le),Ve){const tn=new hO(e,f,le);tn.setRealPlayer(It),E.push(tn)}return It});E.forEach(J=>{ea(this.playersByQueriedElement,J.element,[]).push(J),J.onDone(()=>function N5(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,J.element,J))}),S.forEach(J=>Ua(J,ij));const K=_f(H);return K.onDestroy(()=>{S.forEach(J=>ly(J,ij)),nc(y,t.toStyles)}),R.forEach(J=>{ea(r,J,[]).push(K)}),K}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new Zb(e.duration,e.delay)}}class hO{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new Zb,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>WP(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ea(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function jT(n){return n&&1===n.nodeType}function vj(n,e){const t=n.style.display;return n.style.display=e??"none",t}function bj(n,e,t,i,r){const o=[];t.forEach(y=>o.push(vj(y)));const u=[];i.forEach((y,E)=>{const S=new Map;y.forEach(R=>{const H=e.computeStyle(E,R,r);S.set(R,H),(!H||0==H.length)&&(E[Va]=R5,u.push(E))}),n.set(E,S)});let f=0;return t.forEach(y=>vj(y,o[f++])),u}function wj(n,e){const t=new Map;if(n.forEach(f=>t.set(f,[])),0==e.length)return t;const r=new Set(e),o=new Map;function u(f){if(!f)return 1;let y=o.get(f);if(y)return y;const E=f.parentNode;return y=t.has(E)?E:r.has(E)?1:u(E),o.set(f,y),y}return e.forEach(f=>{const y=u(f);1!==y&&t.get(y).push(f)}),t}function Ua(n,e){n.classList?.add(e)}function ly(n,e){n.classList?.remove(e)}function B5(n,e,t){_f(t).onDone(()=>n.processLeaveNode(e))}function Ej(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof KL?Ej(i.players,e):e.push(i)}}function Cj(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(o=>r.add(o)):e.set(n,i),t.delete(n),!0}class zT{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new O5(e,t,i),this._timelineEngine=new T5(e,t,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,t,i,r,o){const u=e+"-"+r;let f=this._triggerCache[u];if(!f){const y=[],S=nO(this._driver,o,y,[]);if(y.length)throw function CK(n,e){return new h.vHH(3404,!1)}();f=function E5(n,e,t){return new C5(n,e,t)}(r,S,this._normalizer),this._triggerCache[u]=f}this._transitionEngine.registerTrigger(t,r,f)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[o,u]=KH(i);this._timelineEngine.command(o,t,u,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,o){if("@"==i.charAt(0)){const[u,f]=KH(i);return this._timelineEngine.listen(u,t,f,o)}return this._transitionEngine.listen(e,t,i,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let j5=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&nc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(nc(this._element,this._initialStyles),this._endStyles&&(nc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Sm(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Sm(this._element,this._endStyles),this._endStyles=null),nc(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function fO(n){let e=null;return n.forEach((t,i)=>{(function z5(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class Dj{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:uj(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class G5{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return JH(e,t)}getParentElement(e){return KP(e)}query(e,t,i){return ej(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,o,u=[]){const y={duration:i,delay:r,fill:0==r?"both":"forwards"};o&&(y.easing=o);const E=new Map,S=u.filter(K=>K instanceof Dj);(function qK(n,e){return 0===n||0===e})(i,r)&&S.forEach(K=>{K.currentSnapshot.forEach((J,le)=>E.set(le,J))});let R=function zK(n){return n.length?n[0]instanceof Map?n:n.map(e=>rj(e)):[]}(t).map(K=>yf(K));R=function ZK(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((o,u)=>{i.has(u)||r.push(u),i.set(u,o)}),r.length)for(let o=1;o<e.length;o++){let u=e[o];r.forEach(f=>u.set(f,uj(n,f)))}}return e}(e,R,E);const H=function H5(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=fO(e[0]),e.length>1&&(i=fO(e[e.length-1]))):e instanceof Map&&(t=fO(e)),t||i?new j5(n,t,i):null}(e,R);return new Dj(e,R,y,H)}}let W5=(()=>{class n extends jL{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:h.ifc.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?WL(t):t;return Ij(this._renderer,null,i,"register",[r]),new $5(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(g))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class $5 extends class Mz{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new q5(this._id,e,t||{},this._renderer)}}class q5{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Ij(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Ij(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const Tj="@.disabled";let Z5=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(o,u)=>{const f=u?.parentNode(o);f&&u.removeChild(f,o)}}createRenderer(t,i){const o=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let S=this._rendererCache.get(o);return S||(S=new Sj("",o,this.engine),this._rendererCache.set(o,S)),S}const u=i.id,f=i.id+"-"+this._currentId;this._currentId++,this.engine.register(f,t);const y=S=>{Array.isArray(S)?S.forEach(y):this.engine.registerTrigger(u,f,t,S.name,S)};return i.data.animation.forEach(y),new K5(this,f,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[u,f]=o;u(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(zT),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Sj{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==Tj?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class K5 extends Sj{constructor(e,t,i,r){super(t,i,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Tj?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function Y5(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),u="";return"@"!=o.charAt(0)&&([o,u]=function Q5(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,r,o,u,f=>{this.factory.scheduleListenerCallback(f._data||-1,i,f)})}return this.delegate.listen(e,t,i)}}let X5=(()=>{class n extends zT{constructor(t,i,r,o){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(g),h.LFG(YP),h.LFG(aO),h.LFG(h.z2F))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Aj=[{provide:jL,useClass:W5},{provide:aO,useFactory:function J5(){return new y5}},{provide:zT,useClass:X5},{provide:h.FYo,useFactory:function eY(n,e,t){return new Z5(n,e,t)},deps:[xo,zT,h.R0b]}],pO=[{provide:YP,useFactory:()=>new G5},{provide:h.QbO,useValue:"BrowserAnimations"},...Aj],xj=[{provide:YP,useClass:tj},{provide:h.QbO,useValue:"NoopAnimations"},...Aj];let tY=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?xj:pO}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:pO,imports:[ru]}),n})(),nY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[$W]}),n.\u0275inj=h.cJS({providers:[pF],imports:[Pn.hO.initializeApp($H_firebase),vb,tK,N3,jA,ru,dl,Qz,Wz,RW,VW,IW,tY]}),n})();(0,h.G48)(),iu().bootstrapModule(nY).catch(n=>console.error(n))},5530:lt=>{lt.exports=function Re(ee,h,ue){var z=!1;if(typeof window.XMLHttpRequest>"u")return h(Error("Browser not supported"));if(typeof ue>"u"){var re=ee.match(/^\s*https?:\/\/[^\/]*/);ue=re&&re[0]!==location.protocol+"//"+location.domain+(location.port?":"+location.port:"")}var Y=new window.XMLHttpRequest;if(ue&&!("withCredentials"in Y)){Y=new window.XDomainRequest;var g=h;h=function(){if(z)g.apply(this,arguments);else{var j=this,c=arguments;setTimeout(function(){g.apply(j,c)},0)}}}function F(){void 0===Y.status||function V(j){return j>=200&&j<300||304===j}(Y.status)?h.call(Y,null,Y):h.call(Y,Y,null)}return"onload"in Y?Y.onload=F:Y.onreadystatechange=function(){4===Y.readyState&&F()},Y.onerror=function(c){h.call(this,c||!0,null),h=function(){}},Y.onprogress=function(){},Y.ontimeout=function(j){h.call(this,j,null),h=function(){}},Y.onabort=function(j){h.call(this,j,null),h=function(){}},Y.open("GET",ee,!0),Y.send(null),z=!0,Y}},5867:(lt,Re,ee)=>{"use strict";ee.d(Re,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=ee(9681);(0,h.registerVersion)("firebase","9.12.1","app")},127:(lt,Re,ee)=>{"use strict";ee.d(Re,{Z:()=>h.Z});var h=ee(3942);h.Z.registerVersion("firebase","9.12.1","app-compat")},9545:(lt,Re,ee)=>{"use strict";ee.r(Re);var h=ee(5861),ue=ee(3942),z=ee(2090),re=ee(9681),Y=ee(1877),V=ee(655),g=ee(4859);const U=function x(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},q=function P(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},X=new z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),me=new Y.Yd("@firebase/auth");function Me(C,..._){me.logLevel<=Y.in.ERROR&&me.error(`Auth (${re.SDK_VERSION}): ${C}`,..._)}function De(C,..._){throw ze(C,..._)}function Ee(C,..._){return ze(C,..._)}function Ie(C,_,b){const I=Object.assign(Object.assign({},q()),{[_]:b});return new z.LL("auth","Firebase",I).create(_,{appName:C.name})}function He(C,_,b){if(!(_ instanceof b))throw b.name!==_.constructor.name&&De(C,"argument-error"),Ie(C,"argument-error",`Type of ${_.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ze(C,..._){if("string"!=typeof C){const b=_[0],I=[..._.slice(1)];return I[0]&&(I[0].appName=C.name),C._errorFactory.create(b,...I)}return X.create(C,..._)}function oe(C,_,...b){if(!C)throw ze(_,...b)}function Ae(C){const _="INTERNAL ASSERTION FAILED: "+C;throw Me(_),new Error(_)}function he(C,_){C||Ae(_)}const _e=new Map;function Ce(C){he(C instanceof Function,"Expected a class definition");let _=_e.get(C);return _?(he(_ instanceof C,"Instance stored in cache mismatched with class"),_):(_=new C,_e.set(C,_),_)}function je(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.href)||""}function _t(){return"http:"===sn()||"https:"===sn()}function sn(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.protocol)||null}class mn{constructor(_,b){this.shortDelay=_,this.longDelay=b,he(b>_,"Short delay should be less than long delay!"),this.isMobile=(0,z.uI)()||(0,z.b$)()}get(){return function Zt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(_t()||(0,z.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Tn(C,_){he(C.emulator,"Emulator should always be set here");const{url:b}=C.emulator;return _?`${b}${_.startsWith("/")?_.slice(1):_}`:b}class nn{static initialize(_,b,I){this.fetchImpl=_,b&&(this.headersImpl=b),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ae("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ae("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ae("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const on={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Gi=new mn(3e4,6e4);function Ft(C,_){return C.tenantId&&!_.tenantId?Object.assign(Object.assign({},_),{tenantId:C.tenantId}):_}function gn(C,_,b,I){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,h.Z)(function*(C,_,b,I,B={}){return Fr(C,B,(0,h.Z)(function*(){let $={},de={};I&&("GET"===_?de=I:$={body:JSON.stringify(I)});const Se=(0,z.xO)(Object.assign({key:C.config.apiKey},de)).slice(1),$e=yield C._getAdditionalHeaders();return $e["Content-Type"]="application/json",C.languageCode&&($e["X-Firebase-Locale"]=C.languageCode),nn.fetch()(Br(C,C.config.apiHost,b,Se),Object.assign({method:_,headers:$e,referrerPolicy:"no-referrer"},$))}))})).apply(this,arguments)}function Fr(C,_,b){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,h.Z)(function*(C,_,b){C._canInitEmulator=!1;const I=Object.assign(Object.assign({},on),_);try{const B=new ir(C),$=yield Promise.race([b(),B.promise]);B.clearNetworkTimeout();const de=yield $.json();if("needConfirmation"in de)throw gr(C,"account-exists-with-different-credential",de);if($.ok&&!("errorMessage"in de))return de;{const Se=$.ok?de.errorMessage:de.error.message,[$e,at]=Se.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===$e)throw gr(C,"credential-already-in-use",de);if("EMAIL_EXISTS"===$e)throw gr(C,"email-already-in-use",de);if("USER_DISABLED"===$e)throw gr(C,"user-disabled",de);const Ct=I[$e]||$e.toLowerCase().replace(/[_\s]+/g,"-");if(at)throw Ie(C,Ct,at);De(C,Ct)}}catch(B){if(B instanceof z.ZR)throw B;De(C,"network-request-failed")}})).apply(this,arguments)}function $i(C,_,b,I){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,h.Z)(function*(C,_,b,I,B={}){const $=yield gn(C,_,b,I,B);return"mfaPendingCredential"in $&&De(C,"multi-factor-auth-required",{_serverResponse:$}),$})).apply(this,arguments)}function Br(C,_,b,I){const B=`${_}${b}?${I}`;return C.config.emulator?Tn(C.config,B):`${C.config.apiScheme}://${B}`}class ir{constructor(_){this.auth=_,this.timer=null,this.promise=new Promise((b,I)=>{this.timer=setTimeout(()=>I(Ee(this.auth,"network-request-failed")),Gi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gr(C,_,b){const I={appName:C.name};b.email&&(I.email=b.email),b.phoneNumber&&(I.phoneNumber=b.phoneNumber);const B=Ee(C,_,I);return B.customData._tokenResponse=b,B}function ot(){return(ot=(0,h.Z)(function*(C,_){return gn(C,"POST","/v1/accounts:delete",_)})).apply(this,arguments)}function Pi(C,_){return $s.apply(this,arguments)}function $s(){return($s=(0,h.Z)(function*(C,_){return gn(C,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function ai(C,_){return _r.apply(this,arguments)}function _r(){return(_r=(0,h.Z)(function*(C,_){return gn(C,"POST","/v1/accounts:lookup",_)})).apply(this,arguments)}function Xr(C){if(C)try{const _=new Date(Number(C));if(!isNaN(_.getTime()))return _.toUTCString()}catch{}}function Cn(){return(Cn=(0,h.Z)(function*(C,_=!1){const b=(0,z.m9)(C),I=yield b.getIdToken(_),B=ft(I);oe(B&&B.exp&&B.auth_time&&B.iat,b.auth,"internal-error");const $="object"==typeof B.firebase?B.firebase:void 0,de=$?.sign_in_provider;return{claims:B,token:I,authTime:Xr(Et(B.auth_time)),issuedAtTime:Xr(Et(B.iat)),expirationTime:Xr(Et(B.exp)),signInProvider:de||null,signInSecondFactor:$?.sign_in_second_factor||null}})).apply(this,arguments)}function Et(C){return 1e3*Number(C)}function ft(C){var _;const[b,I,B]=C.split(".");if(void 0===b||void 0===I||void 0===B)return Me("JWT malformed, contained fewer than 3 sections"),null;try{const $=(0,z.tV)(I);return $?JSON.parse($):(Me("Failed to decode base64 JWT payload"),null)}catch($){return Me("Caught error parsing JWT payload as JSON",null===(_=$)||void 0===_?void 0:_.toString()),null}}function gi(C,_){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,h.Z)(function*(C,_,b=!1){if(b)return _;try{return yield _}catch(I){throw I instanceof z.ZR&&rr(I)&&C.auth.currentUser===C&&(yield C.auth.signOut()),I}})).apply(this,arguments)}function rr({code:C}){return"auth/user-disabled"===C||"auth/user-token-expired"===C}class Mt{constructor(_){this.user=_,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(_){var b;if(_){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const B=(null!==(b=this.user.stsTokenManager.expirationTime)&&void 0!==b?b:0)-Date.now()-3e5;return Math.max(0,B)}}schedule(_=!1){var b=this;if(!this.isRunning)return;const I=this.getInterval(_);this.timerId=setTimeout((0,h.Z)(function*(){yield b.iteration()}),I)}iteration(){var _=this;return(0,h.Z)(function*(){var b;try{yield _.user.getIdToken(!0)}catch(I){return void("auth/network-request-failed"===(null===(b=I)||void 0===b?void 0:b.code)&&_.schedule(!0))}_.schedule()})()}}class ms{constructor(_,b){this.createdAt=_,this.lastLoginAt=b,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xr(this.lastLoginAt),this.creationTime=Xr(this.createdAt)}_copy(_){this.createdAt=_.createdAt,this.lastLoginAt=_.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function an(C){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,h.Z)(function*(C){var _;const b=C.auth,I=yield C.getIdToken(),B=yield gi(C,ai(b,{idToken:I}));oe(B?.users.length,b,"internal-error");const $=B.users[0];C._notifyReloadListener($);const de=null!==(_=$.providerUserInfo)&&void 0!==_&&_.length?ct($.providerUserInfo):[],Se=qi(C.providerData,de),Ct=!!C.isAnonymous&&!(C.email&&$.passwordHash||Se?.length),vt={uid:$.localId,displayName:$.displayName||null,photoURL:$.photoUrl||null,email:$.email||null,emailVerified:$.emailVerified||!1,phoneNumber:$.phoneNumber||null,tenantId:$.tenantId||null,providerData:Se,metadata:new ms($.createdAt,$.lastLoginAt),isAnonymous:Ct};Object.assign(C,vt)})).apply(this,arguments)}function li(){return(li=(0,h.Z)(function*(C){const _=(0,z.m9)(C);yield an(_),yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)})).apply(this,arguments)}function qi(C,_){return[...C.filter(I=>!_.some(B=>B.providerId===I.providerId)),..._]}function ct(C){return C.map(_=>{var{providerId:b}=_,I=(0,V._T)(_,["providerId"]);return{providerId:b,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function ut(){return(ut=(0,h.Z)(function*(C,_){const b=yield Fr(C,{},(0,h.Z)(function*(){const I=(0,z.xO)({grant_type:"refresh_token",refresh_token:_}).slice(1),{tokenApiHost:B,apiKey:$}=C.config,de=Br(C,B,"/v1/token",`key=${$}`),Se=yield C._getAdditionalHeaders();return Se["Content-Type"]="application/x-www-form-urlencoded",nn.fetch()(de,{method:"POST",headers:Se,body:I})}));return{accessToken:b.access_token,expiresIn:b.expires_in,refreshToken:b.refresh_token}})).apply(this,arguments)}class At{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(_){oe(_.idToken,"internal-error"),oe(typeof _.idToken<"u","internal-error"),oe(typeof _.refreshToken<"u","internal-error");const b="expiresIn"in _&&typeof _.expiresIn<"u"?Number(_.expiresIn):function hn(C){const _=ft(C);return oe(_,"internal-error"),oe(typeof _.exp<"u","internal-error"),oe(typeof _.iat<"u","internal-error"),Number(_.exp)-Number(_.iat)}(_.idToken);this.updateTokensAndExpiration(_.idToken,_.refreshToken,b)}getToken(_,b=!1){var I=this;return(0,h.Z)(function*(){return oe(!I.accessToken||I.refreshToken,_,"user-token-expired"),b||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(_,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(_,b){var I=this;return(0,h.Z)(function*(){const{accessToken:B,refreshToken:$,expiresIn:de}=yield function Le(C,_){return ut.apply(this,arguments)}(_,b);I.updateTokensAndExpiration(B,$,Number(de))})()}updateTokensAndExpiration(_,b,I){this.refreshToken=b||null,this.accessToken=_||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(_,b){const{refreshToken:I,accessToken:B,expirationTime:$}=b,de=new At;return I&&(oe("string"==typeof I,"internal-error",{appName:_}),de.refreshToken=I),B&&(oe("string"==typeof B,"internal-error",{appName:_}),de.accessToken=B),$&&(oe("number"==typeof $,"internal-error",{appName:_}),de.expirationTime=$),de}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(_){this.accessToken=_.accessToken,this.refreshToken=_.refreshToken,this.expirationTime=_.expirationTime}_clone(){return Object.assign(new At,this.toJSON())}_performRefresh(){return Ae("not implemented")}}function St(C,_){oe("string"==typeof C||typeof C>"u","internal-error",{appName:_})}class Ht{constructor(_){var{uid:b,auth:I,stsTokenManager:B}=_,$=(0,V._T)(_,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=b,this.auth=I,this.stsTokenManager=B,this.accessToken=B.accessToken,this.displayName=$.displayName||null,this.email=$.email||null,this.emailVerified=$.emailVerified||!1,this.phoneNumber=$.phoneNumber||null,this.photoURL=$.photoURL||null,this.isAnonymous=$.isAnonymous||!1,this.tenantId=$.tenantId||null,this.providerData=$.providerData?[...$.providerData]:[],this.metadata=new ms($.createdAt||void 0,$.lastLoginAt||void 0)}getIdToken(_){var b=this;return(0,h.Z)(function*(){const I=yield gi(b,b.stsTokenManager.getToken(b.auth,_));return oe(I,b.auth,"internal-error"),b.accessToken!==I&&(b.accessToken=I,yield b.auth._persistUserIfCurrent(b),b.auth._notifyListenersIfCurrent(b)),I})()}getIdTokenResult(_){return function Qn(C){return Cn.apply(this,arguments)}(this,_)}reload(){return function cn(C){return li.apply(this,arguments)}(this)}_assign(_){this!==_&&(oe(this.uid===_.uid,this.auth,"internal-error"),this.displayName=_.displayName,this.photoURL=_.photoURL,this.email=_.email,this.emailVerified=_.emailVerified,this.phoneNumber=_.phoneNumber,this.isAnonymous=_.isAnonymous,this.tenantId=_.tenantId,this.providerData=_.providerData.map(b=>Object.assign({},b)),this.metadata._copy(_.metadata),this.stsTokenManager._assign(_.stsTokenManager))}_clone(_){return new Ht(Object.assign(Object.assign({},this),{auth:_,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(_){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=_,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(_){this.reloadListener?this.reloadListener(_):this.reloadUserInfo=_}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(_,b=!1){var I=this;return(0,h.Z)(function*(){let B=!1;_.idToken&&_.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(_),B=!0),b&&(yield an(I)),yield I.auth._persistUserIfCurrent(I),B&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var _=this;return(0,h.Z)(function*(){const b=yield _.getIdToken();return yield gi(_,function ra(C,_){return ot.apply(this,arguments)}(_.auth,{idToken:b})),_.stsTokenManager.clearRefreshToken(),_.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(_=>Object.assign({},_)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(_,b){var I,B,$,de,Se,$e,at,Ct;const vt=null!==(I=b.displayName)&&void 0!==I?I:void 0,Rt=null!==(B=b.email)&&void 0!==B?B:void 0,Bt=null!==($=b.phoneNumber)&&void 0!==$?$:void 0,Gt=null!==(de=b.photoURL)&&void 0!==de?de:void 0,Ta=null!==(Se=b.tenantId)&&void 0!==Se?Se:void 0,fn=null!==($e=b._redirectEventId)&&void 0!==$e?$e:void 0,Kf=null!==(at=b.createdAt)&&void 0!==at?at:void 0,xy=null!==(Ct=b.lastLoginAt)&&void 0!==Ct?Ct:void 0,{uid:Tu,emailVerified:og,isAnonymous:Nn,providerData:Wt,stsTokenManager:Fi}=b;oe(Tu&&Fi,_,"internal-error");const Yf=At.fromJSON(this.name,Fi);oe("string"==typeof Tu,_,"internal-error"),St(vt,_.name),St(Rt,_.name),oe("boolean"==typeof og,_,"internal-error"),oe("boolean"==typeof Nn,_,"internal-error"),St(Bt,_.name),St(Gt,_.name),St(Ta,_.name),St(fn,_.name),St(Kf,_.name),St(xy,_.name);const Su=new Ht({uid:Tu,auth:_,email:Rt,emailVerified:og,displayName:vt,isAnonymous:Nn,photoURL:Gt,phoneNumber:Bt,tenantId:Ta,stsTokenManager:Yf,createdAt:Kf,lastLoginAt:xy});return Wt&&Array.isArray(Wt)&&(Su.providerData=Wt.map(Gr=>Object.assign({},Gr))),fn&&(Su._redirectEventId=fn),Su}static _fromIdTokenResponse(_,b,I=!1){return(0,h.Z)(function*(){const B=new At;B.updateFromServerResponse(b);const $=new Ht({uid:b.localId,auth:_,stsTokenManager:B,isAnonymous:I});return yield an($),$})()}}const se=(()=>{class C{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(b,I){var B=this;return(0,h.Z)(function*(){B.storage[b]=I})()}_get(b){var I=this;return(0,h.Z)(function*(){const B=I.storage[b];return void 0===B?null:B})()}_remove(b){var I=this;return(0,h.Z)(function*(){delete I.storage[b]})()}_addListener(b,I){}_removeListener(b,I){}}return C.type="NONE",C})();function fe(C,_,b){return`firebase:${C}:${_}:${b}`}class Pe{constructor(_,b,I){this.persistence=_,this.auth=b,this.userKey=I;const{config:B,name:$}=this.auth;this.fullUserKey=fe(this.userKey,B.apiKey,$),this.fullPersistenceKey=fe("persistence",B.apiKey,$),this.boundEventHandler=b._onStorageEvent.bind(b),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(_){return this.persistence._set(this.fullUserKey,_.toJSON())}getCurrentUser(){var _=this;return(0,h.Z)(function*(){const b=yield _.persistence._get(_.fullUserKey);return b?Ht._fromJSON(_.auth,b):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(_){var b=this;return(0,h.Z)(function*(){if(b.persistence===_)return;const I=yield b.getCurrentUser();return yield b.removeCurrentUser(),b.persistence=_,I?b.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(_,b,I="authUser"){return(0,h.Z)(function*(){if(!b.length)return new Pe(Ce(se),_,I);const B=(yield Promise.all(b.map(function(){var at=(0,h.Z)(function*(Ct){if(yield Ct._isAvailable())return Ct});return function(Ct){return at.apply(this,arguments)}}()))).filter(at=>at);let $=B[0]||Ce(se);const de=fe(I,_.config.apiKey,_.name);let Se=null;for(const at of b)try{const Ct=yield at._get(de);if(Ct){const vt=Ht._fromJSON(_,Ct);at!==$&&(Se=vt),$=at;break}}catch{}const $e=B.filter(at=>at._shouldAllowMigration);return $._shouldAllowMigration&&$e.length?($=$e[0],Se&&(yield $._set(de,Se.toJSON())),yield Promise.all(b.map(function(){var at=(0,h.Z)(function*(Ct){if(Ct!==$)try{yield Ct._remove(de)}catch{}});return function(Ct){return at.apply(this,arguments)}}())),new Pe($,_,I)):new Pe($,_,I)})()}}function ge(C){const _=C.toLowerCase();if(_.includes("opera/")||_.includes("opr/")||_.includes("opios/"))return"Opera";if(En(_))return"IEMobile";if(_.includes("msie")||_.includes("trident/"))return"IE";if(_.includes("edge/"))return"Edge";if(et(_))return"Firefox";if(_.includes("silk/"))return"Silk";if(Ze(_))return"Blackberry";if(Je(_))return"Webos";if(mt(_))return"Safari";if((_.includes("chrome/")||ln(_))&&!_.includes("edge/"))return"Chrome";if(Jt(_))return"Android";{const I=C.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function et(C=(0,z.z$)()){return/firefox\//i.test(C)}function mt(C=(0,z.z$)()){const _=C.toLowerCase();return _.includes("safari/")&&!_.includes("chrome/")&&!_.includes("crios/")&&!_.includes("android")}function ln(C=(0,z.z$)()){return/crios\//i.test(C)}function En(C=(0,z.z$)()){return/iemobile/i.test(C)}function Jt(C=(0,z.z$)()){return/android/i.test(C)}function Ze(C=(0,z.z$)()){return/blackberry/i.test(C)}function Je(C=(0,z.z$)()){return/webos/i.test(C)}function zt(C=(0,z.z$)()){return/iphone|ipad|ipod/i.test(C)||/macintosh/i.test(C)&&/mobile/i.test(C)}function yo(C=(0,z.z$)()){return zt(C)||Jt(C)||Je(C)||Ze(C)||/windows phone/i.test(C)||En(C)}function qs(C,_=[]){let b;switch(C){case"Browser":b=ge((0,z.z$)());break;case"Worker":b=`${ge((0,z.z$)())}-${C}`;break;default:b=C}const I=_.length?_.join(","):"FirebaseCore-web";return`${b}/JsCore/${re.SDK_VERSION}/${I}`}class sa{constructor(_){this.auth=_,this.queue=[]}pushCallback(_,b){const I=$=>new Promise((de,Se)=>{try{de(_($))}catch($e){Se($e)}});I.onAbort=b,this.queue.push(I);const B=this.queue.length-1;return()=>{this.queue[B]=()=>Promise.resolve()}}runMiddleware(_){var b=this;return(0,h.Z)(function*(){var I;if(b.auth.currentUser===_)return;const B=[];try{for(const $ of b.queue)yield $(_),$.onAbort&&B.push($.onAbort)}catch($){B.reverse();for(const de of B)try{de()}catch{}throw b.auth._errorFactory.create("login-blocked",{originalMessage:null===(I=$)||void 0===I?void 0:I.message})}})()}}class jt{constructor(_,b,I){this.app=_,this.heartbeatServiceProvider=b,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vo(this),this.idTokenSubscription=new vo(this),this.beforeStateQueue=new sa(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=X,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=_.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(_,b){var I=this;return b&&(this._popupRedirectResolver=Ce(b)),this._initializationPromise=this.queue((0,h.Z)(function*(){var B,$;if(!I._deleted&&(I.persistenceManager=yield Pe.create(I,_),!I._deleted)){if(null!==(B=I._popupRedirectResolver)&&void 0!==B&&B._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(b),I.lastNotifiedUid=(null===($=I.currentUser)||void 0===$?void 0:$.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var _=this;return(0,h.Z)(function*(){if(_._deleted)return;const b=yield _.assertedPersistence.getCurrentUser();if(_.currentUser||b){if(_.currentUser&&b&&_.currentUser.uid===b.uid)return _._currentUser._assign(b),void(yield _.currentUser.getIdToken());yield _._updateCurrentUser(b,!0)}})()}initializeCurrentUser(_){var b=this;return(0,h.Z)(function*(){var I;const B=yield b.assertedPersistence.getCurrentUser();let $=B,de=!1;if(_&&b.config.authDomain){yield b.getOrInitRedirectPersistenceManager();const Se=null===(I=b.redirectUser)||void 0===I?void 0:I._redirectEventId,$e=$?._redirectEventId,at=yield b.tryRedirectSignIn(_);(!Se||Se===$e)&&at?.user&&($=at.user,de=!0)}if(!$)return b.directlySetCurrentUser(null);if(!$._redirectEventId){if(de)try{yield b.beforeStateQueue.runMiddleware($)}catch(Se){$=B,b._popupRedirectResolver._overrideRedirectResult(b,()=>Promise.reject(Se))}return $?b.reloadAndSetCurrentUserOrClear($):b.directlySetCurrentUser(null)}return oe(b._popupRedirectResolver,b,"argument-error"),yield b.getOrInitRedirectPersistenceManager(),b.redirectUser&&b.redirectUser._redirectEventId===$._redirectEventId?b.directlySetCurrentUser($):b.reloadAndSetCurrentUserOrClear($)})()}tryRedirectSignIn(_){var b=this;return(0,h.Z)(function*(){let I=null;try{I=yield b._popupRedirectResolver._completeRedirectFn(b,_,!0)}catch{yield b._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(_){var b=this;return(0,h.Z)(function*(){var I;try{yield an(_)}catch(B){if("auth/network-request-failed"!==(null===(I=B)||void 0===I?void 0:I.code))return b.directlySetCurrentUser(null)}return b.directlySetCurrentUser(_)})()}useDeviceLanguage(){this.languageCode=function rt(){if(typeof navigator>"u")return null;const C=navigator;return C.languages&&C.languages[0]||C.language||null}()}_delete(){var _=this;return(0,h.Z)(function*(){_._deleted=!0})()}updateCurrentUser(_){var b=this;return(0,h.Z)(function*(){const I=_?(0,z.m9)(_):null;return I&&oe(I.auth.config.apiKey===b.config.apiKey,b,"invalid-user-token"),b._updateCurrentUser(I&&I._clone(b))})()}_updateCurrentUser(_,b=!1){var I=this;return(0,h.Z)(function*(){if(!I._deleted)return _&&oe(I.tenantId===_.tenantId,I,"tenant-id-mismatch"),b||(yield I.beforeStateQueue.runMiddleware(_)),I.queue((0,h.Z)(function*(){yield I.directlySetCurrentUser(_),I.notifyAuthListeners()}))})()}signOut(){var _=this;return(0,h.Z)(function*(){return yield _.beforeStateQueue.runMiddleware(null),(_.redirectPersistenceManager||_._popupRedirectResolver)&&(yield _._setRedirectUser(null)),_._updateCurrentUser(null,!0)})()}setPersistence(_){var b=this;return this.queue((0,h.Z)(function*(){yield b.assertedPersistence.setPersistence(Ce(_))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(_){this._errorFactory=new z.LL("auth","Firebase",_())}onAuthStateChanged(_,b,I){return this.registerStateListener(this.authStateSubscription,_,b,I)}beforeAuthStateChanged(_,b){return this.beforeStateQueue.pushCallback(_,b)}onIdTokenChanged(_,b,I){return this.registerStateListener(this.idTokenSubscription,_,b,I)}toJSON(){var _;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(_=this._currentUser)||void 0===_?void 0:_.toJSON()}}_setRedirectUser(_,b){var I=this;return(0,h.Z)(function*(){const B=yield I.getOrInitRedirectPersistenceManager(b);return null===_?B.removeCurrentUser():B.setCurrentUser(_)})()}getOrInitRedirectPersistenceManager(_){var b=this;return(0,h.Z)(function*(){if(!b.redirectPersistenceManager){const I=_&&Ce(_)||b._popupRedirectResolver;oe(I,b,"argument-error"),b.redirectPersistenceManager=yield Pe.create(b,[Ce(I._redirectPersistence)],"redirectUser"),b.redirectUser=yield b.redirectPersistenceManager.getCurrentUser()}return b.redirectPersistenceManager})()}_redirectUserForId(_){var b=this;return(0,h.Z)(function*(){var I,B;return b._isInitialized&&(yield b.queue((0,h.Z)(function*(){}))),(null===(I=b._currentUser)||void 0===I?void 0:I._redirectEventId)===_?b._currentUser:(null===(B=b.redirectUser)||void 0===B?void 0:B._redirectEventId)===_?b.redirectUser:null})()}_persistUserIfCurrent(_){var b=this;return(0,h.Z)(function*(){if(_===b.currentUser)return b.queue((0,h.Z)(function*(){return b.directlySetCurrentUser(_)}))})()}_notifyListenersIfCurrent(_){_===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var _,b;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(b=null===(_=this.currentUser)||void 0===_?void 0:_.uid)&&void 0!==b?b:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(_,b,I,B){if(this._deleted)return()=>{};const $="function"==typeof b?b:b.next.bind(b),de=this._isInitialized?Promise.resolve():this._initializationPromise;return oe(de,this,"internal-error"),de.then(()=>$(this.currentUser)),"function"==typeof b?_.addObserver(b,I,B):_.addObserver(b)}directlySetCurrentUser(_){var b=this;return(0,h.Z)(function*(){b.currentUser&&b.currentUser!==_&&b._currentUser._stopProactiveRefresh(),_&&b.isProactiveRefreshEnabled&&_._startProactiveRefresh(),b.currentUser=_,_?yield b.assertedPersistence.setCurrentUser(_):yield b.assertedPersistence.removeCurrentUser()})()}queue(_){return this.operations=this.operations.then(_,_),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(_){!_||this.frameworks.includes(_)||(this.frameworks.push(_),this.frameworks.sort(),this.clientVersion=qs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var _=this;return(0,h.Z)(function*(){var b;const I={"X-Client-Version":_.clientVersion};_.app.options.appId&&(I["X-Firebase-gmpid"]=_.app.options.appId);const B=yield null===(b=_.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===b?void 0:b.getHeartbeatsHeader();return B&&(I["X-Firebase-Client"]=B),I})()}}function Mn(C){return(0,z.m9)(C)}class vo{constructor(_){this.auth=_,this.observer=null,this.addObserver=(0,z.ne)(b=>this.observer=b)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Jr(C){const _=C.indexOf(":");return _<0?"":C.substr(0,_+1)}function Zs(C){if(!C)return null;const _=Number(C);return isNaN(_)?null:_}class Ti{constructor(_,b){this.providerId=_,this.signInMethod=b}toJSON(){return Ae("not implemented")}_getIdTokenResponse(_){return Ae("not implemented")}_linkToIdToken(_,b){return Ae("not implemented")}_getReauthenticationResolver(_){return Ae("not implemented")}}function Jn(C,_){return ja.apply(this,arguments)}function ja(){return(ja=(0,h.Z)(function*(C,_){return gn(C,"POST","/v1/accounts:resetPassword",Ft(C,_))})).apply(this,arguments)}function _n(C,_){return rc.apply(this,arguments)}function rc(){return(rc=(0,h.Z)(function*(C,_){return gn(C,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function sc(C,_){return bo.apply(this,arguments)}function bo(){return(bo=(0,h.Z)(function*(C,_){return gn(C,"POST","/v1/accounts:update",Ft(C,_))})).apply(this,arguments)}function oa(){return(oa=(0,h.Z)(function*(C,_){return $i(C,"POST","/v1/accounts:signInWithPassword",Ft(C,_))})).apply(this,arguments)}function Ys(C,_){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,h.Z)(function*(C,_){return gn(C,"POST","/v1/accounts:sendOobCode",Ft(C,_))})).apply(this,arguments)}function yi(C,_){return oc.apply(this,arguments)}function oc(){return(oc=(0,h.Z)(function*(C,_){return Ys(C,_)})).apply(this,arguments)}function vi(C,_){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,h.Z)(function*(C,_){return Ys(C,_)})).apply(this,arguments)}function Ga(C,_){return aa.apply(this,arguments)}function aa(){return(aa=(0,h.Z)(function*(C,_){return Ys(C,_)})).apply(this,arguments)}function ac(C,_){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,h.Z)(function*(C,_){return Ys(C,_)})).apply(this,arguments)}function Md(){return(Md=(0,h.Z)(function*(C,_){return $i(C,"POST","/v1/accounts:signInWithEmailLink",Ft(C,_))})).apply(this,arguments)}function lc(){return(lc=(0,h.Z)(function*(C,_){return $i(C,"POST","/v1/accounts:signInWithEmailLink",Ft(C,_))})).apply(this,arguments)}class uc extends Ti{constructor(_,b,I,B=null){super("password",I),this._email=_,this._password=b,this._tenantId=B}static _fromEmailAndPassword(_,b){return new uc(_,b,"password")}static _fromEmailAndCode(_,b,I=null){return new uc(_,b,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(_){const b="string"==typeof _?JSON.parse(_):_;if(b?.email&&b?.password){if("password"===b.signInMethod)return this._fromEmailAndPassword(b.email,b.password);if("emailLink"===b.signInMethod)return this._fromEmailAndCode(b.email,b.password,b.tenantId)}return null}_getIdTokenResponse(_){var b=this;return(0,h.Z)(function*(){switch(b.signInMethod){case"password":return function za(C,_){return oa.apply(this,arguments)}(_,{returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function bf(C,_){return Md.apply(this,arguments)}(_,{email:b._email,oobCode:b._password});default:De(_,"internal-error")}})()}_linkToIdToken(_,b){var I=this;return(0,h.Z)(function*(){switch(I.signInMethod){case"password":return _n(_,{idToken:b,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function wf(C,_){return lc.apply(this,arguments)}(_,{idToken:b,email:I._email,oobCode:I._password});default:De(_,"internal-error")}})()}_getReauthenticationResolver(_){return this._getIdTokenResponse(_)}}function ci(C,_){return kd.apply(this,arguments)}function kd(){return(kd=(0,h.Z)(function*(C,_){return $i(C,"POST","/v1/accounts:signInWithIdp",Ft(C,_))})).apply(this,arguments)}class gs extends Ti{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(_){const b=new gs(_.providerId,_.signInMethod);return _.idToken||_.accessToken?(_.idToken&&(b.idToken=_.idToken),_.accessToken&&(b.accessToken=_.accessToken),_.nonce&&!_.pendingToken&&(b.nonce=_.nonce),_.pendingToken&&(b.pendingToken=_.pendingToken)):_.oauthToken&&_.oauthTokenSecret?(b.accessToken=_.oauthToken,b.secret=_.oauthTokenSecret):De("argument-error"),b}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(_){const b="string"==typeof _?JSON.parse(_):_,{providerId:I,signInMethod:B}=b,$=(0,V._T)(b,["providerId","signInMethod"]);if(!I||!B)return null;const de=new gs(I,B);return de.idToken=$.idToken||void 0,de.accessToken=$.accessToken||void 0,de.secret=$.secret,de.nonce=$.nonce,de.pendingToken=$.pendingToken||null,de}_getIdTokenResponse(_){return ci(_,this.buildRequest())}_linkToIdToken(_,b){const I=this.buildRequest();return I.idToken=b,ci(_,I)}_getReauthenticationResolver(_){const b=this.buildRequest();return b.autoCreate=!1,ci(_,b)}buildRequest(){const _={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)_.pendingToken=this.pendingToken;else{const b={};this.idToken&&(b.id_token=this.idToken),this.accessToken&&(b.access_token=this.accessToken),this.secret&&(b.oauth_token_secret=this.secret),b.providerId=this.providerId,this.nonce&&!this.pendingToken&&(b.nonce=this.nonce),_.postBody=(0,z.xO)(b)}return _}}function Rm(C,_){return Rd.apply(this,arguments)}function Rd(){return(Rd=(0,h.Z)(function*(C,_){return gn(C,"POST","/v1/accounts:sendVerificationCode",Ft(C,_))})).apply(this,arguments)}function Qs(){return(Qs=(0,h.Z)(function*(C,_){return $i(C,"POST","/v1/accounts:signInWithPhoneNumber",Ft(C,_))})).apply(this,arguments)}function Pd(){return(Pd=(0,h.Z)(function*(C,_){const b=yield $i(C,"POST","/v1/accounts:signInWithPhoneNumber",Ft(C,_));if(b.temporaryProof)throw gr(C,"account-exists-with-different-credential",b);return b})).apply(this,arguments)}const Om={USER_NOT_FOUND:"user-not-found"};function Od(){return(Od=(0,h.Z)(function*(C,_){return $i(C,"POST","/v1/accounts:signInWithPhoneNumber",Ft(C,Object.assign(Object.assign({},_),{operation:"REAUTH"})),Om)})).apply(this,arguments)}class Xs extends Ti{constructor(_){super("phone","phone"),this.params=_}static _fromVerification(_,b){return new Xs({verificationId:_,verificationCode:b})}static _fromTokenResponse(_,b){return new Xs({phoneNumber:_,temporaryProof:b})}_getIdTokenResponse(_){return function cc(C,_){return Qs.apply(this,arguments)}(_,this._makeVerificationRequest())}_linkToIdToken(_,b){return function Pm(C,_){return Pd.apply(this,arguments)}(_,Object.assign({idToken:b},this._makeVerificationRequest()))}_getReauthenticationResolver(_){return function Nm(C,_){return Od.apply(this,arguments)}(_,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:_,phoneNumber:b,verificationId:I,verificationCode:B}=this.params;return _&&b?{temporaryProof:_,phoneNumber:b}:{sessionInfo:I,code:B}}toJSON(){const _={providerId:this.providerId};return this.params.phoneNumber&&(_.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(_.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(_.verificationCode=this.params.verificationCode),this.params.verificationId&&(_.verificationId=this.params.verificationId),_}static fromJSON(_){"string"==typeof _&&(_=JSON.parse(_));const{verificationId:b,verificationCode:I,phoneNumber:B,temporaryProof:$}=_;return I||b||B||$?new Xs({verificationId:b,verificationCode:I,phoneNumber:B,temporaryProof:$}):null}}class Pl{constructor(_){var b,I,B,$,de,Se;const $e=(0,z.zd)((0,z.pd)(_)),at=null!==(b=$e.apiKey)&&void 0!==b?b:null,Ct=null!==(I=$e.oobCode)&&void 0!==I?I:null,vt=function Nd(C){switch(C){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(B=$e.mode)&&void 0!==B?B:null);oe(at&&Ct&&vt,"argument-error"),this.apiKey=at,this.operation=vt,this.code=Ct,this.continueUrl=null!==($=$e.continueUrl)&&void 0!==$?$:null,this.languageCode=null!==(de=$e.languageCode)&&void 0!==de?de:null,this.tenantId=null!==(Se=$e.tenantId)&&void 0!==Se?Se:null}static parseLink(_){const b=function Ld(C){const _=(0,z.zd)((0,z.pd)(C)).link,b=_?(0,z.zd)((0,z.pd)(_)).deep_link_id:null,I=(0,z.zd)((0,z.pd)(C)).deep_link_id;return(I?(0,z.zd)((0,z.pd)(I)).link:null)||I||b||_||C}(_);try{return new Pl(b)}catch{return null}}}let es=(()=>{class C{constructor(){this.providerId=C.PROVIDER_ID}static credential(b,I){return uc._fromEmailAndPassword(b,I)}static credentialWithLink(b,I){const B=Pl.parseLink(I);return oe(B,"argument-error"),uc._fromEmailAndCode(b,B.code,B.tenantId)}}return C.PROVIDER_ID="password",C.EMAIL_PASSWORD_SIGN_IN_METHOD="password",C.EMAIL_LINK_SIGN_IN_METHOD="emailLink",C})();class _s{constructor(_){this.providerId=_,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(_){this.defaultLanguageCode=_}setCustomParameters(_){return this.customParameters=_,this}getCustomParameters(){return this.customParameters}}class ys extends _s{constructor(){super(...arguments),this.scopes=[]}addScope(_){return this.scopes.includes(_)||this.scopes.push(_),this}getScopes(){return[...this.scopes]}}class wo extends ys{static credentialFromJSON(_){const b="string"==typeof _?JSON.parse(_):_;return oe("providerId"in b&&"signInMethod"in b,"argument-error"),gs._fromParams(b)}credential(_){return this._credential(Object.assign(Object.assign({},_),{nonce:_.rawNonce}))}_credential(_){return oe(_.idToken||_.accessToken,"argument-error"),gs._fromParams(Object.assign(Object.assign({},_),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(_){return wo.oauthCredentialFromTaggedObject(_)}static credentialFromError(_){return wo.oauthCredentialFromTaggedObject(_.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:b,oauthAccessToken:I,oauthTokenSecret:B,pendingToken:$,nonce:de,providerId:Se}=_;if(!I&&!B&&!b&&!$||!Se)return null;try{return new wo(Se)._credential({idToken:b,accessToken:I,nonce:de,pendingToken:$})}catch{return null}}}let Wa=(()=>{class C extends ys{constructor(){super("facebook.com")}static credential(b){return gs._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.FACEBOOK_SIGN_IN_METHOD,accessToken:b})}static credentialFromResult(b){return C.credentialFromTaggedObject(b)}static credentialFromError(b){return C.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b||!("oauthAccessToken"in b)||!b.oauthAccessToken)return null;try{return C.credential(b.oauthAccessToken)}catch{return null}}}return C.FACEBOOK_SIGN_IN_METHOD="facebook.com",C.PROVIDER_ID="facebook.com",C})(),Ol=(()=>{class C extends ys{constructor(){super("google.com"),this.addScope("profile")}static credential(b,I){return gs._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GOOGLE_SIGN_IN_METHOD,idToken:b,accessToken:I})}static credentialFromResult(b){return C.credentialFromTaggedObject(b)}static credentialFromError(b){return C.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthIdToken:I,oauthAccessToken:B}=b;if(!I&&!B)return null;try{return C.credential(I,B)}catch{return null}}}return C.GOOGLE_SIGN_IN_METHOD="google.com",C.PROVIDER_ID="google.com",C})(),dc=(()=>{class C extends ys{constructor(){super("github.com")}static credential(b){return gs._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GITHUB_SIGN_IN_METHOD,accessToken:b})}static credentialFromResult(b){return C.credentialFromTaggedObject(b)}static credentialFromError(b){return C.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b||!("oauthAccessToken"in b)||!b.oauthAccessToken)return null;try{return C.credential(b.oauthAccessToken)}catch{return null}}}return C.GITHUB_SIGN_IN_METHOD="github.com",C.PROVIDER_ID="github.com",C})();class la extends Ti{constructor(_,b){super(_,_),this.pendingToken=b}_getIdTokenResponse(_){return ci(_,this.buildRequest())}_linkToIdToken(_,b){const I=this.buildRequest();return I.idToken=b,ci(_,I)}_getReauthenticationResolver(_){const b=this.buildRequest();return b.autoCreate=!1,ci(_,b)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(_){const b="string"==typeof _?JSON.parse(_):_,{providerId:I,signInMethod:B,pendingToken:$}=b;return I&&B&&$&&I===B?new la(I,$):null}static _create(_,b){return new la(_,b)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class yr extends _s{constructor(_){oe(_.startsWith("saml."),"argument-error"),super(_)}static credentialFromResult(_){return yr.samlCredentialFromTaggedObject(_)}static credentialFromError(_){return yr.samlCredentialFromTaggedObject(_.customData||{})}static credentialFromJSON(_){const b=la.fromJSON(_);return oe(b,"argument-error"),b}static samlCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{pendingToken:b,providerId:I}=_;if(!b||!I)return null;try{return la._create(I,b)}catch{return null}}}let or=(()=>{class C extends ys{constructor(){super("twitter.com")}static credential(b,I){return gs._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.TWITTER_SIGN_IN_METHOD,oauthToken:b,oauthTokenSecret:I})}static credentialFromResult(b){return C.credentialFromTaggedObject(b)}static credentialFromError(b){return C.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthAccessToken:I,oauthTokenSecret:B}=b;if(!I||!B)return null;try{return C.credential(I,B)}catch{return null}}}return C.TWITTER_SIGN_IN_METHOD="twitter.com",C.PROVIDER_ID="twitter.com",C})();function ua(C,_){return hc.apply(this,arguments)}function hc(){return(hc=(0,h.Z)(function*(C,_){return $i(C,"POST","/v1/accounts:signUp",Ft(C,_))})).apply(this,arguments)}class Si{constructor(_){this.user=_.user,this.providerId=_.providerId,this._tokenResponse=_._tokenResponse,this.operationType=_.operationType}static _fromIdTokenResponse(_,b,I,B=!1){return(0,h.Z)(function*(){const $=yield Ht._fromIdTokenResponse(_,I,B),de=Df(I);return new Si({user:$,providerId:de,_tokenResponse:I,operationType:b})})()}static _forOperation(_,b,I){return(0,h.Z)(function*(){yield _._updateTokensIfNecessary(I,!0);const B=Df(I);return new Si({user:_,providerId:B,_tokenResponse:I,operationType:b})})()}}function Df(C){return C.providerId?C.providerId:"phoneNumber"in C?"phone":null}function Vn(){return(Vn=(0,h.Z)(function*(C){var _;const b=Mn(C);if(yield b._initializationPromise,null!==(_=b.currentUser)&&void 0!==_&&_.isAnonymous)return new Si({user:b.currentUser,providerId:null,operationType:"signIn"});const I=yield ua(b,{returnSecureToken:!0}),B=yield Si._fromIdTokenResponse(b,"signIn",I,!0);return yield b._updateCurrentUser(B.user),B})).apply(this,arguments)}class fc extends z.ZR{constructor(_,b,I,B){var $;super(b.code,b.message),this.operationType=I,this.user=B,Object.setPrototypeOf(this,fc.prototype),this.customData={appName:_.name,tenantId:null!==($=_.tenantId)&&void 0!==$?$:void 0,_serverResponse:b.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(_,b,I,B){return new fc(_,b,I,B)}}function Lm(C,_,b,I){return("reauthenticate"===_?b._getReauthenticationResolver(C):b._getIdTokenResponse(C)).catch($=>{throw"auth/multi-factor-auth-required"===$.code?fc._fromErrorAndOperation(C,$,_,I):$})}function vr(C){return new Set(C.map(({providerId:_})=>_).filter(_=>!!_))}function Nl(){return(Nl=(0,h.Z)(function*(C,_){const b=(0,z.m9)(C);yield en(!0,b,_);const{providerUserInfo:I}=yield Pi(b.auth,{idToken:yield b.getIdToken(),deleteProvider:[_]}),B=vr(I||[]);return b.providerData=b.providerData.filter($=>B.has($.providerId)),B.has("phone")||(b.phoneNumber=null),yield b.auth._persistUserIfCurrent(b),b})).apply(this,arguments)}function Eo(C,_){return bs.apply(this,arguments)}function bs(){return(bs=(0,h.Z)(function*(C,_,b=!1){const I=yield gi(C,_._linkToIdToken(C.auth,yield C.getIdToken()),b);return Si._forOperation(C,"link",I)})).apply(this,arguments)}function en(C,_,b){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,h.Z)(function*(C,_,b){yield an(_);const B=!1===C?"provider-already-linked":"no-such-provider";oe(vr(_.providerData).has(b)===C,_.auth,B)})).apply(this,arguments)}function Co(C,_){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,h.Z)(function*(C,_,b=!1){var I;const{auth:B}=C,$="reauthenticate";try{const de=yield gi(C,Lm(B,$,_,C),b);oe(de.idToken,B,"internal-error");const Se=ft(de.idToken);oe(Se,B,"internal-error");const{sub:$e}=Se;return oe(C.uid===$e,B,"user-mismatch"),Si._forOperation(C,$,de)}catch(de){throw"auth/user-not-found"===(null===(I=de)||void 0===I?void 0:I.code)&&De(B,"user-mismatch"),de}})).apply(this,arguments)}function Hr(C,_){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,h.Z)(function*(C,_,b=!1){const I="signIn",B=yield Lm(C,I,_),$=yield Si._fromIdTokenResponse(C,I,B);return b||(yield C._updateCurrentUser($.user)),$})).apply(this,arguments)}function kn(C,_){return kt.apply(this,arguments)}function kt(){return(kt=(0,h.Z)(function*(C,_){return Hr(Mn(C),_)})).apply(this,arguments)}function Vl(C,_){return Tf.apply(this,arguments)}function Tf(){return(Tf=(0,h.Z)(function*(C,_){const b=(0,z.m9)(C);return yield en(!1,b,_.providerId),Eo(b,_)})).apply(this,arguments)}function Ul(C,_){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,h.Z)(function*(C,_){return Co((0,z.m9)(C),_)})).apply(this,arguments)}function pc(C,_){return ws.apply(this,arguments)}function ws(){return(ws=(0,h.Z)(function*(C,_){return $i(C,"POST","/v1/accounts:signInWithCustomToken",Ft(C,_))})).apply(this,arguments)}function $a(){return($a=(0,h.Z)(function*(C,_){const b=Mn(C),I=yield pc(b,{token:_,returnSecureToken:!0}),B=yield Si._fromIdTokenResponse(b,"signIn",I);return yield b._updateCurrentUser(B.user),B})).apply(this,arguments)}class Fe{constructor(_,b){this.factorId=_,this.uid=b.mfaEnrollmentId,this.enrollmentTime=new Date(b.enrolledAt).toUTCString(),this.displayName=b.displayName}static _fromServerResponse(_,b){return"phoneInfo"in b?Yt._fromServerResponse(_,b):De(_,"internal-error")}}class Yt extends Fe{constructor(_){super("phone",_),this.phoneNumber=_.phoneInfo}static _fromServerResponse(_,b){return new Yt(b)}}function jl(C,_,b){var I;oe((null===(I=b.url)||void 0===I?void 0:I.length)>0,C,"invalid-continue-uri"),oe(typeof b.dynamicLinkDomain>"u"||b.dynamicLinkDomain.length>0,C,"invalid-dynamic-link-domain"),_.continueUrl=b.url,_.dynamicLinkDomain=b.dynamicLinkDomain,_.canHandleCodeInApp=b.handleCodeInApp,b.iOS&&(oe(b.iOS.bundleId.length>0,C,"missing-ios-bundle-id"),_.iOSBundleId=b.iOS.bundleId),b.android&&(oe(b.android.packageName.length>0,C,"missing-android-pkg-name"),_.androidInstallApp=b.android.installApp,_.androidMinimumVersionCode=b.android.minimumVersion,_.androidPackageName=b.android.packageName)}function Un(){return(Un=(0,h.Z)(function*(C,_,b){const I=(0,z.m9)(C),B={requestType:"PASSWORD_RESET",email:_};b&&jl(I,B,b),yield vi(I,B)})).apply(this,arguments)}function ca(){return(ca=(0,h.Z)(function*(C,_,b){yield Jn((0,z.m9)(C),{oobCode:_,newPassword:b})})).apply(this,arguments)}function qa(){return(qa=(0,h.Z)(function*(C,_){yield sc((0,z.m9)(C),{oobCode:_})})).apply(this,arguments)}function Za(C,_){return gc.apply(this,arguments)}function gc(){return(gc=(0,h.Z)(function*(C,_){const b=(0,z.m9)(C),I=yield Jn(b,{oobCode:_}),B=I.requestType;switch(oe(B,b,"internal-error"),B){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":oe(I.newEmail,b,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":oe(I.mfaInfo,b,"internal-error");default:oe(I.email,b,"internal-error")}let $=null;return I.mfaInfo&&($=Fe._fromServerResponse(Mn(b),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:$},operation:B}})).apply(this,arguments)}function Fd(){return(Fd=(0,h.Z)(function*(C,_){const{data:b}=yield Za((0,z.m9)(C),_);return b.email})).apply(this,arguments)}function Hn(){return(Hn=(0,h.Z)(function*(C,_,b){const I=Mn(C),B=yield ua(I,{returnSecureToken:!0,email:_,password:b}),$=yield Si._fromIdTokenResponse(I,"signIn",B);return yield I._updateCurrentUser($.user),$})).apply(this,arguments)}function Do(){return(Do=(0,h.Z)(function*(C,_,b){const I=(0,z.m9)(C),B={requestType:"EMAIL_SIGNIN",email:_};oe(b.handleCodeInApp,I,"argument-error"),b&&jl(I,B,b),yield Ga(I,B)})).apply(this,arguments)}function Ya(){return(Ya=(0,h.Z)(function*(C,_,b){const I=(0,z.m9)(C),B=es.credentialWithLink(_,b||je());return oe(B._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),kn(I,B)})).apply(this,arguments)}function Bm(C,_){return vc.apply(this,arguments)}function vc(){return(vc=(0,h.Z)(function*(C,_){return gn(C,"POST","/v1/accounts:createAuthUri",Ft(C,_))})).apply(this,arguments)}function Qa(){return(Qa=(0,h.Z)(function*(C,_){const I={identifier:_,continueUri:_t()?je():"http://localhost"},{signinMethods:B}=yield Bm((0,z.m9)(C),I);return B||[]})).apply(this,arguments)}function Xa(){return(Xa=(0,h.Z)(function*(C,_){const b=(0,z.m9)(C),B={requestType:"VERIFY_EMAIL",idToken:yield C.getIdToken()};_&&jl(b.auth,B,_);const{email:$}=yield yi(b.auth,B);$!==C.email&&(yield C.reload())})).apply(this,arguments)}function $l(){return($l=(0,h.Z)(function*(C,_,b){const I=(0,z.m9)(C),$={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield C.getIdToken(),newEmail:_};b&&jl(I.auth,$,b);const{email:de}=yield ac(I.auth,$);de!==C.email&&(yield C.reload())})).apply(this,arguments)}function ql(C,_){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,h.Z)(function*(C,_){return gn(C,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function Dc(){return(Dc=(0,h.Z)(function*(C,{displayName:_,photoURL:b}){if(void 0===_&&void 0===b)return;const I=(0,z.m9)(C),$={idToken:yield I.getIdToken(),displayName:_,photoUrl:b,returnSecureToken:!0},de=yield gi(I,ql(I.auth,$));I.displayName=de.displayName||null,I.photoURL=de.photoUrl||null;const Se=I.providerData.find(({providerId:$e})=>"password"===$e);Se&&(Se.displayName=I.displayName,Se.photoURL=I.photoURL),yield I._updateTokensIfNecessary(de)})).apply(this,arguments)}function To(C,_,b){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,h.Z)(function*(C,_,b){const{auth:I}=C,$={idToken:yield C.getIdToken(),returnSecureToken:!0};_&&($.email=_),b&&($.password=b);const de=yield gi(C,_n(I,$));yield C._updateTokensIfNecessary(de,!0)})).apply(this,arguments)}class ar{constructor(_,b,I={}){this.isNewUser=_,this.providerId=b,this.profile=I}}class An extends ar{constructor(_,b,I,B){super(_,b,I),this.username=B}}class Vd extends ar{constructor(_,b){super(_,"facebook.com",b)}}class Ic extends An{constructor(_,b){super(_,"github.com",b,"string"==typeof b?.login?b?.login:null)}}class Sf extends ar{constructor(_,b){super(_,"google.com",b)}}class Tc extends An{constructor(_,b,I){super(_,"twitter.com",b,I)}}function Kl(C){const{user:_,_tokenResponse:b}=C;return _.isAnonymous&&!b?{providerId:null,isNewUser:!1,profile:null}:function di(C){var _,b;if(!C)return null;const{providerId:I}=C,B=C.rawUserInfo?JSON.parse(C.rawUserInfo):{},$=C.isNewUser||"identitytoolkit#SignupNewUserResponse"===C.kind;if(!I&&C?.idToken){const de=null===(b=null===(_=ft(C.idToken))||void 0===_?void 0:_.firebase)||void 0===b?void 0:b.sign_in_provider;if(de)return new ar($,"anonymous"!==de&&"custom"!==de?de:null)}if(!I)return null;switch(I){case"facebook.com":return new Vd($,B);case"github.com":return new Ic($,B);case"google.com":return new Sf($,B);case"twitter.com":return new Tc($,B,C.screenName||null);case"custom":case"anonymous":return new ar($,null);default:return new ar($,I,B)}}(b)}class Ao{constructor(_,b,I){this.type=_,this.credential=b,this.auth=I}static _fromIdtoken(_,b){return new Ao("enroll",_,b)}static _fromMfaPendingCredential(_){return new Ao("signin",_)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(_){var b,I;if(_?.multiFactorSession){if(null!==(b=_.multiFactorSession)&&void 0!==b&&b.pendingCredential)return Ao._fromMfaPendingCredential(_.multiFactorSession.pendingCredential);if(null!==(I=_.multiFactorSession)&&void 0!==I&&I.idToken)return Ao._fromIdtoken(_.multiFactorSession.idToken)}return null}}class Ql{constructor(_,b,I){this.session=_,this.hints=b,this.signInResolver=I}static _fromError(_,b){const I=Mn(_),B=b.customData._serverResponse,$=(B.mfaInfo||[]).map(Se=>Fe._fromServerResponse(I,Se));oe(B.mfaPendingCredential,I,"internal-error");const de=Ao._fromMfaPendingCredential(B.mfaPendingCredential);return new Ql(de,$,function(){var Se=(0,h.Z)(function*($e){const at=yield $e._process(I,de);delete B.mfaInfo,delete B.mfaPendingCredential;const Ct=Object.assign(Object.assign({},B),{idToken:at.idToken,refreshToken:at.refreshToken});switch(b.operationType){case"signIn":const vt=yield Si._fromIdTokenResponse(I,b.operationType,Ct);return yield I._updateCurrentUser(vt.user),vt;case"reauthenticate":return oe(b.user,I,"internal-error"),Si._forOperation(b.user,b.operationType,Ct);default:De(I,"internal-error")}});return function($e){return Se.apply(this,arguments)}}())}resolveSignIn(_){var b=this;return(0,h.Z)(function*(){return b.signInResolver(_)})()}}function Xl(C,_){return gn(C,"POST","/v2/accounts/mfaEnrollment:start",Ft(C,_))}class Af{constructor(_){this.user=_,this.enrolledFactors=[],_._onReload(b=>{b.mfaInfo&&(this.enrolledFactors=b.mfaInfo.map(I=>Fe._fromServerResponse(_.auth,I)))})}static _fromUser(_){return new Af(_)}getSession(){var _=this;return(0,h.Z)(function*(){return Ao._fromIdtoken(yield _.user.getIdToken(),_.user.auth)})()}enroll(_,b){var I=this;return(0,h.Z)(function*(){const B=_,$=yield I.getSession(),de=yield gi(I.user,B._process(I.user.auth,$,b));return yield I.user._updateTokensIfNecessary(de),I.user.reload()})()}unenroll(_){var b=this;return(0,h.Z)(function*(){var I;const B="string"==typeof _?_:_.uid,$=yield b.user.getIdToken(),de=yield gi(b.user,function zd(C,_){return gn(C,"POST","/v2/accounts/mfaEnrollment:withdraw",Ft(C,_))}(b.user.auth,{idToken:$,mfaEnrollmentId:B}));b.enrolledFactors=b.enrolledFactors.filter(({uid:Se})=>Se!==B),yield b.user._updateTokensIfNecessary(de);try{yield b.user.reload()}catch(Se){if("auth/user-token-expired"!==(null===(I=Se)||void 0===I?void 0:I.code))throw Se}})()}}const xo=new WeakMap,Mo="__sak";class eu{constructor(_,b){this.storageRetriever=_,this.type=b}_isAvailable(){try{return this.storage?(this.storage.setItem(Mo,"1"),this.storage.removeItem(Mo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(_,b){return this.storage.setItem(_,JSON.stringify(b)),Promise.resolve()}_get(_){const b=this.storage.getItem(_);return Promise.resolve(b?JSON.parse(b):null)}_remove(_){return this.storage.removeItem(_),Promise.resolve()}get storage(){return this.storageRetriever()}}const el=(()=>{class C extends eu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(b,I)=>this.onStorageEvent(b,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ja(){const C=(0,z.z$)();return mt(C)||zt(C)}()&&function Sn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=yo(),this._shouldAllowMigration=!0}forAllChangedKeys(b){for(const I of Object.keys(this.listeners)){const B=this.storage.getItem(I),$=this.localCache[I];B!==$&&b(I,$,B)}}onStorageEvent(b,I=!1){if(!b.key)return void this.forAllChangedKeys((Se,$e,at)=>{this.notifyListeners(Se,at)});const B=b.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Se=this.storage.getItem(B);if(b.newValue!==Se)null!==b.newValue?this.storage.setItem(B,b.newValue):this.storage.removeItem(B);else if(this.localCache[B]===b.newValue&&!I)return}const $=()=>{const Se=this.storage.getItem(B);!I&&this.localCache[B]===Se||this.notifyListeners(B,Se)},de=this.storage.getItem(B);!function ui(){return(0,z.w1)()&&10===document.documentMode}()||de===b.newValue||b.newValue===b.oldValue?$():setTimeout($,10)}notifyListeners(b,I){this.localCache[b]=I;const B=this.listeners[b];if(B)for(const $ of Array.from(B))$(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((b,I,B)=>{this.onStorageEvent(new StorageEvent("storage",{key:b,oldValue:I,newValue:B}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(b,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[b]||(this.listeners[b]=new Set,this.localCache[b]=this.storage.getItem(b)),this.listeners[b].add(I)}_removeListener(b,I){this.listeners[b]&&(this.listeners[b].delete(I),0===this.listeners[b].size&&delete this.listeners[b]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(b,I){var B=()=>super._set,$=this;return(0,h.Z)(function*(){yield B().call($,b,I),$.localCache[b]=JSON.stringify(I)})()}_get(b){var I=()=>super._get,B=this;return(0,h.Z)(function*(){const $=yield I().call(B,b);return B.localCache[b]=JSON.stringify($),$})()}_remove(b){var I=()=>super._remove,B=this;return(0,h.Z)(function*(){yield I().call(B,b),delete B.localCache[b]})()}}return C.type="LOCAL",C})(),ns=(()=>{class C extends eu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(b,I){}_removeListener(b,I){}}return C.type="SESSION",C})();let $d=(()=>{class C{constructor(b){this.eventTarget=b,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(b){const I=this.receivers.find($=>$.isListeningto(b));if(I)return I;const B=new C(b);return this.receivers.push(B),B}isListeningto(b){return this.eventTarget===b}handleEvent(b){var I=this;return(0,h.Z)(function*(){const B=b,{eventId:$,eventType:de,data:Se}=B.data,$e=I.handlersMap[de];if(!$e?.size)return;B.ports[0].postMessage({status:"ack",eventId:$,eventType:de});const at=Array.from($e).map(function(){var vt=(0,h.Z)(function*(Rt){return Rt(B.origin,Se)});return function(Rt){return vt.apply(this,arguments)}}()),Ct=yield function nl(C){return Promise.all(C.map(function(){var _=(0,h.Z)(function*(b){try{return{fulfilled:!0,value:yield b}}catch(I){return{fulfilled:!1,reason:I}}});return function(b){return _.apply(this,arguments)}}()))}(at);B.ports[0].postMessage({status:"done",eventId:$,eventType:de,response:Ct})})()}_subscribe(b,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[b]||(this.handlersMap[b]=new Set),this.handlersMap[b].add(I)}_unsubscribe(b,I){this.handlersMap[b]&&I&&this.handlersMap[b].delete(I),(!I||0===this.handlersMap[b].size)&&delete this.handlersMap[b],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return C.receivers=[],C})();function il(C="",_=10){let b="";for(let I=0;I<_;I++)b+=Math.floor(10*Math.random());return C+b}class Sc{constructor(_){this.target=_,this.handlers=new Set}removeMessageHandler(_){_.messageChannel&&(_.messageChannel.port1.removeEventListener("message",_.onMessage),_.messageChannel.port1.close()),this.handlers.delete(_)}_send(_,b,I=50){var B=this;return(0,h.Z)(function*(){const $=typeof MessageChannel<"u"?new MessageChannel:null;if(!$)throw new Error("connection_unavailable");let de,Se;return new Promise(($e,at)=>{const Ct=il("",20);$.port1.start();const vt=setTimeout(()=>{at(new Error("unsupported_event"))},I);Se={messageChannel:$,onMessage(Rt){const Bt=Rt;if(Bt.data.eventId===Ct)switch(Bt.data.status){case"ack":clearTimeout(vt),de=setTimeout(()=>{at(new Error("timeout"))},3e3);break;case"done":clearTimeout(de),$e(Bt.data.response);break;default:clearTimeout(vt),clearTimeout(de),at(new Error("invalid_response"))}}},B.handlers.add(Se),$.port1.addEventListener("message",Se.onMessage),B.target.postMessage({eventType:_,eventId:Ct,data:b},[$.port2])}).finally(()=>{Se&&B.removeMessageHandler(Se)})})()}}function $n(){return window}function tu(){return typeof $n().WorkerGlobalScope<"u"&&"function"==typeof $n().importScripts}function rl(){return(rl=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const to="firebaseLocalStorageDb",no="firebaseLocalStorage",ru="fbase_key";class Ro{constructor(_){this.request=_}toPromise(){return new Promise((_,b)=>{this.request.addEventListener("success",()=>{_(this.request.result)}),this.request.addEventListener("error",()=>{b(this.request.error)})})}}function sl(C,_){return C.transaction([no],_?"readwrite":"readonly").objectStore(no)}function ol(){const C=indexedDB.open(to,1);return new Promise((_,b)=>{C.addEventListener("error",()=>{b(C.error)}),C.addEventListener("upgradeneeded",()=>{const I=C.result;try{I.createObjectStore(no,{keyPath:ru})}catch(B){b(B)}}),C.addEventListener("success",(0,h.Z)(function*(){const I=C.result;I.objectStoreNames.contains(no)?_(I):(I.close(),yield function Zd(){const C=indexedDB.deleteDatabase(to);return new Ro(C).toPromise()}(),_(yield ol()))}))})}function io(C,_,b){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,h.Z)(function*(C,_,b){const I=sl(C,!0).put({[ru]:_,value:b});return new Ro(I).toPromise()})).apply(this,arguments)}function al(){return(al=(0,h.Z)(function*(C,_){const b=sl(C,!1).get(_),I=yield new Ro(b).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Po(C,_){const b=sl(C,!0).delete(_);return new Ro(b).toPromise()}const pa=(()=>{class C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var b=this;return(0,h.Z)(function*(){return b.db||(b.db=yield ol()),b.db})()}_withRetries(b){var I=this;return(0,h.Z)(function*(){let B=0;for(;;)try{const $=yield I._openDb();return yield b($)}catch($){if(B++>3)throw $;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var b=this;return(0,h.Z)(function*(){return tu()?b.initializeReceiver():b.initializeSender()})()}initializeReceiver(){var b=this;return(0,h.Z)(function*(){b.receiver=$d._getInstance(function iu(){return tu()?self:null}()),b.receiver._subscribe("keyChanged",function(){var I=(0,h.Z)(function*(B,$){return{keyProcessed:(yield b._poll()).includes($.key)}});return function(B,$){return I.apply(this,arguments)}}()),b.receiver._subscribe("ping",function(){var I=(0,h.Z)(function*(B,$){return["keyChanged"]});return function(B,$){return I.apply(this,arguments)}}())})()}initializeSender(){var b=this;return(0,h.Z)(function*(){var I,B;if(b.activeServiceWorker=yield function ko(){return rl.apply(this,arguments)}(),!b.activeServiceWorker)return;b.sender=new Sc(b.activeServiceWorker);const $=yield b.sender._send("ping",{},800);!$||(null===(I=$[0])||void 0===I?void 0:I.fulfilled)&&(null===(B=$[0])||void 0===B?void 0:B.value.includes("keyChanged"))&&(b.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(b){var I=this;return(0,h.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function nu(){var C;return(null===(C=navigator?.serviceWorker)||void 0===C?void 0:C.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:b},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const b=yield ol();return yield io(b,Mo,"1"),yield Po(b,Mo),!0}catch{}return!1})()}_withPendingWrite(b){var I=this;return(0,h.Z)(function*(){I.pendingWrites++;try{yield b()}finally{I.pendingWrites--}})()}_set(b,I){var B=this;return(0,h.Z)(function*(){return B._withPendingWrite((0,h.Z)(function*(){return yield B._withRetries($=>io($,b,I)),B.localCache[b]=I,B.notifyServiceWorker(b)}))})()}_get(b){var I=this;return(0,h.Z)(function*(){const B=yield I._withRetries($=>function su(C,_){return al.apply(this,arguments)}($,b));return I.localCache[b]=B,B})()}_remove(b){var I=this;return(0,h.Z)(function*(){return I._withPendingWrite((0,h.Z)(function*(){return yield I._withRetries(B=>Po(B,b)),delete I.localCache[b],I.notifyServiceWorker(b)}))})()}_poll(){var b=this;return(0,h.Z)(function*(){const I=yield b._withRetries(de=>{const Se=sl(de,!1).getAll();return new Ro(Se).toPromise()});if(!I)return[];if(0!==b.pendingWrites)return[];const B=[],$=new Set;for(const{fbase_key:de,value:Se}of I)$.add(de),JSON.stringify(b.localCache[de])!==JSON.stringify(Se)&&(b.notifyListeners(de,Se),B.push(de));for(const de of Object.keys(b.localCache))b.localCache[de]&&!$.has(de)&&(b.notifyListeners(de,null),B.push(de));return B})()}notifyListeners(b,I){this.localCache[b]=I;const B=this.listeners[b];if(B)for(const $ of Array.from(B))$(I)}startPolling(){var b=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return b._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(b,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[b]||(this.listeners[b]=new Set,this._get(b)),this.listeners[b].add(I)}_removeListener(b,I){this.listeners[b]&&(this.listeners[b].delete(I),0===this.listeners[b].size&&delete this.listeners[b]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return C.type="LOCAL",C})();function ma(C,_){return gn(C,"POST","/v2/accounts/mfaSignIn:start",Ft(C,_))}function ro(){return(ro=(0,h.Z)(function*(C){return(yield gn(C,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function _a(C){return new Promise((_,b)=>{const I=document.createElement("script");I.setAttribute("src",C),I.onload=_,I.onerror=B=>{const $=Ee("internal-error");$.customData=B,b($)},I.type="text/javascript",I.charset="UTF-8",function ga(){var C,_;return null!==(_=null===(C=document.getElementsByTagName("head"))||void 0===C?void 0:C[0])&&void 0!==_?_:document}().appendChild(I)})}function lu(C){return`__${C}${Math.floor(1e6*Math.random())}`}const ll=1e12;class Dn{constructor(_){this.auth=_,this.counter=ll,this._widgets=new Map}render(_,b){const I=this.counter;return this._widgets.set(I,new Vm(_,this.auth.name,b||{})),this.counter++,I}reset(_){var b;const I=_||ll;null===(b=this._widgets.get(I))||void 0===b||b.delete(),this._widgets.delete(I)}getResponse(_){var b;return(null===(b=this._widgets.get(_||ll))||void 0===b?void 0:b.getResponse())||""}execute(_){var b=this;return(0,h.Z)(function*(){var I;return null===(I=b._widgets.get(_||ll))||void 0===I||I.execute(),""})()}}class Vm{constructor(_,b,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const B="string"==typeof _?document.getElementById(_):_;oe(B,"argument-error",{appName:b}),this.container=B,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function uy(C){const _=[],b="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<C;I++)_.push(b.charAt(Math.floor(Math.random()*b.length)));return _.join("")}(50);const{callback:_,"expired-callback":b}=this.params;if(_)try{_(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,b)try{b()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Um=lu("rcb"),cy=new mn(3e4,6e4);class xf{constructor(){var _;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(_=$n().grecaptcha)||void 0===_||!_.render)}load(_,b=""){return oe(function hE(C){return C.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(C)}(b),_,"argument-error"),this.shouldResolveImmediately(b)?Promise.resolve($n().grecaptcha):new Promise((I,B)=>{const $=$n().setTimeout(()=>{B(Ee(_,"network-request-failed"))},cy.get());$n()[Um]=()=>{$n().clearTimeout($),delete $n()[Um];const Se=$n().grecaptcha;if(!Se)return void B(Ee(_,"internal-error"));const $e=Se.render;Se.render=(at,Ct)=>{const vt=$e(at,Ct);return this.counter++,vt},this.hostLanguage=b,I(Se)},_a(`https://www.google.com/recaptcha/api.js??${(0,z.xO)({onload:Um,render:"explicit",hl:b})}`).catch(()=>{clearTimeout($),B(Ee(_,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(_){var b;return!(null===(b=$n().grecaptcha)||void 0===b||!b.render)&&(_===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Mc{load(_){return(0,h.Z)(function*(){return new Dn(_)})()}clearedOneInstance(){}}const hy="recaptcha",fy={theme:"light",type:"image"};class wi{constructor(_,b=Object.assign({},fy),I){this.parameters=b,this.type=hy,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Mn(I),this.isInvisible="invisible"===this.parameters.size,oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const B="string"==typeof _?document.getElementById(_):_;oe(B,this.auth,"argument-error"),this.container=B,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Mc:new xf,this.validateStartingState()}verify(){var _=this;return(0,h.Z)(function*(){_.assertNotDestroyed();const b=yield _.render(),I=_.getAssertedRecaptcha();return I.getResponse(b)||new Promise($=>{const de=Se=>{!Se||(_.tokenChangeListeners.delete(de),$(Se))};_.tokenChangeListeners.add(de),_.isInvisible&&I.execute(b)})})()}render(){try{this.assertNotDestroyed()}catch(_){return Promise.reject(_)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(_=>{throw this.renderPromise=null,_})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(_=>{this.container.removeChild(_)})}validateStartingState(){oe(!this.parameters.sitekey,this.auth,"argument-error"),oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(_){return b=>{if(this.tokenChangeListeners.forEach(I=>I(b)),"function"==typeof _)_(b);else if("string"==typeof _){const I=$n()[_];"function"==typeof I&&I(b)}}}assertNotDestroyed(){oe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var _=this;return(0,h.Z)(function*(){if(yield _.init(),!_.widgetId){let b=_.container;if(!_.isInvisible){const I=document.createElement("div");b.appendChild(I),b=I}_.widgetId=_.getAssertedRecaptcha().render(b,_.parameters)}return _.widgetId})()}init(){var _=this;return(0,h.Z)(function*(){oe(_t()&&!tu(),_.auth,"internal-error"),yield function Ds(){let C=null;return new Promise(_=>{"complete"!==document.readyState?(C=()=>_(),window.addEventListener("load",C)):_()}).catch(_=>{throw C&&window.removeEventListener("load",C),_})}(),_.recaptcha=yield _._recaptchaLoader.load(_.auth,_.auth.languageCode||void 0);const b=yield function lr(C){return ro.apply(this,arguments)}(_.auth);oe(b,_.auth,"internal-error"),_.parameters.sitekey=b})()}getAssertedRecaptcha(){return oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class qn{constructor(_,b){this.verificationId=_,this.onConfirmation=b}confirm(_){const b=Xs._fromVerification(this.verificationId,_);return this.onConfirmation(b)}}function Ei(){return(Ei=(0,h.Z)(function*(C,_,b){const I=Mn(C),B=yield In(I,_,(0,z.m9)(b));return new qn(B,$=>kn(I,$))})).apply(this,arguments)}function ei(){return(ei=(0,h.Z)(function*(C,_,b){const I=(0,z.m9)(C);yield en(!1,I,"phone");const B=yield In(I.auth,_,(0,z.m9)(b));return new qn(B,$=>Vl(I,$))})).apply(this,arguments)}function ti(){return(ti=(0,h.Z)(function*(C,_,b){const I=(0,z.m9)(C),B=yield In(I.auth,_,(0,z.m9)(b));return new qn(B,$=>Ul(I,$))})).apply(this,arguments)}function In(C,_,b){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,h.Z)(function*(C,_,b){var I;const B=yield b.verify();try{let $;if(oe("string"==typeof B,C,"argument-error"),oe(b.type===hy,C,"argument-error"),$="string"==typeof _?{phoneNumber:_}:_,"session"in $){const de=$.session;if("phoneNumber"in $)return oe("enroll"===de.type,C,"internal-error"),(yield Xl(C,{idToken:de.credential,phoneEnrollmentInfo:{phoneNumber:$.phoneNumber,recaptchaToken:B}})).phoneSessionInfo.sessionInfo;{oe("signin"===de.type,C,"internal-error");const Se=(null===(I=$.multiFactorHint)||void 0===I?void 0:I.uid)||$.multiFactorUid;return oe(Se,C,"missing-multi-factor-info"),(yield ma(C,{mfaPendingCredential:de.credential,mfaEnrollmentId:Se,phoneSignInInfo:{recaptchaToken:B}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:de}=yield Rm(C,{phoneNumber:$.phoneNumber,recaptchaToken:B});return de}}finally{b._reset()}})).apply(this,arguments)}function uu(){return(uu=(0,h.Z)(function*(C,_){yield Eo((0,z.m9)(C),_)})).apply(this,arguments)}let ul=(()=>{class C{constructor(b){this.providerId=C.PROVIDER_ID,this.auth=Mn(b)}verifyPhoneNumber(b,I){return In(this.auth,b,(0,z.m9)(I))}static credential(b,I){return Xs._fromVerification(b,I)}static credentialFromResult(b){return C.credentialFromTaggedObject(b)}static credentialFromError(b){return C.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{phoneNumber:I,temporaryProof:B}=b;return I&&B?Xs._fromTokenResponse(I,B):null}}return C.PROVIDER_ID="phone",C.PHONE_SIGN_IN_METHOD="phone",C})();function Qi(C,_){return _?Ce(_):(oe(C._popupRedirectResolver,C,"argument-error"),C._popupRedirectResolver)}class kc extends Ti{constructor(_){super("custom","custom"),this.params=_}_getIdTokenResponse(_){return ci(_,this._buildIdpRequest())}_linkToIdToken(_,b){return ci(_,this._buildIdpRequest(b))}_getReauthenticationResolver(_){return ci(_,this._buildIdpRequest())}_buildIdpRequest(_){const b={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return _&&(b.idToken=_),b}}function cr(C){return Hr(C.auth,new kc(C),C.bypassAuthState)}function Rc(C){const{auth:_,user:b}=C;return oe(b,_,"internal-error"),Co(b,new kc(C),C.bypassAuthState)}function No(C){return Yd.apply(this,arguments)}function Yd(){return(Yd=(0,h.Z)(function*(C){const{auth:_,user:b}=C;return oe(b,_,"internal-error"),Eo(b,new kc(C),C.bypassAuthState)})).apply(this,arguments)}class cu{constructor(_,b,I,B,$=!1){this.auth=_,this.resolver=I,this.user=B,this.bypassAuthState=$,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(b)?b:[b]}execute(){var _=this;return new Promise(function(){var b=(0,h.Z)(function*(I,B){_.pendingPromise={resolve:I,reject:B};try{_.eventManager=yield _.resolver._initialize(_.auth),yield _.onExecution(),_.eventManager.registerConsumer(_)}catch($){_.reject($)}});return function(I,B){return b.apply(this,arguments)}}())}onAuthEvent(_){var b=this;return(0,h.Z)(function*(){const{urlResponse:I,sessionId:B,postBody:$,tenantId:de,error:Se,type:$e}=_;if(Se)return void b.reject(Se);const at={auth:b.auth,requestUri:I,sessionId:B,tenantId:de||void 0,postBody:$||void 0,user:b.user,bypassAuthState:b.bypassAuthState};try{b.resolve(yield b.getIdpTask($e)(at))}catch(Ct){b.reject(Ct)}})()}onError(_){this.reject(_)}getIdpTask(_){switch(_){case"signInViaPopup":case"signInViaRedirect":return cr;case"linkViaPopup":case"linkViaRedirect":return No;case"reauthViaPopup":case"reauthViaRedirect":return Rc;default:De(this.auth,"internal-error")}}resolve(_){he(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(_),this.unregisterAndCleanUp()}reject(_){he(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(_),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const va=new mn(2e3,1e4);function du(){return(du=(0,h.Z)(function*(C,_,b){const I=Mn(C);He(C,_,_s);const B=Qi(I,b);return new ba(I,"signInViaPopup",_,B).executeNotNull()})).apply(this,arguments)}function cl(){return(cl=(0,h.Z)(function*(C,_,b){const I=(0,z.m9)(C);He(I.auth,_,_s);const B=Qi(I.auth,b);return new ba(I.auth,"reauthViaPopup",_,B,I).executeNotNull()})).apply(this,arguments)}function so(){return(so=(0,h.Z)(function*(C,_,b){const I=(0,z.m9)(C);He(I.auth,_,_s);const B=Qi(I.auth,b);return new ba(I.auth,"linkViaPopup",_,B,I).executeNotNull()})).apply(this,arguments)}let ba=(()=>{class C extends cu{constructor(b,I,B,$,de){super(b,I,$,de),this.provider=B,this.authWindow=null,this.pollId=null,C.currentPopupAction&&C.currentPopupAction.cancel(),C.currentPopupAction=this}executeNotNull(){var b=this;return(0,h.Z)(function*(){const I=yield b.execute();return oe(I,b.auth,"internal-error"),I})()}onExecution(){var b=this;return(0,h.Z)(function*(){he(1===b.filter.length,"Popup operations only handle one event");const I=il();b.authWindow=yield b.resolver._openPopup(b.auth,b.provider,b.filter[0],I),b.authWindow.associatedEvent=I,b.resolver._originValidation(b.auth).catch(B=>{b.reject(B)}),b.resolver._isIframeWebStorageSupported(b.auth,B=>{B||b.reject(Ee(b.auth,"web-storage-unsupported"))}),b.pollUserCancellation()})()}get eventId(){var b;return(null===(b=this.authWindow)||void 0===b?void 0:b.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,C.currentPopupAction=null}pollUserCancellation(){const b=()=>{var I,B;this.pollId=null!==(B=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==B&&B.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(b,va.get())};b()}}return C.currentPopupAction=null,C})();const wr=new Map;class Rn extends cu{constructor(_,b,I=!1){super(_,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],b,void 0,I),this.eventId=null}execute(){var _=()=>super.execute,b=this;return(0,h.Z)(function*(){let I=wr.get(b.auth._key());if(!I){try{const $=(yield function wa(C,_){return rs.apply(this,arguments)}(b.resolver,b.auth))?yield _().call(b):null;I=()=>Promise.resolve($)}catch(B){I=()=>Promise.reject(B)}wr.set(b.auth._key(),I)}return b.bypassAuthState||wr.set(b.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(_){var b=()=>super.onAuthEvent,I=this;return(0,h.Z)(function*(){if("signInViaRedirect"===_.type)return b().call(I,_);if("unknown"!==_.type){if(_.eventId){const B=yield I.auth._redirectUserForId(_.eventId);if(B)return I.user=B,b().call(I,_);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function rs(){return(rs=(0,h.Z)(function*(C,_){const b=Is(_),I=oo(C);if(!(yield I._isAvailable()))return!1;const B="true"===(yield I._get(b));return yield I._remove(b),B})).apply(this,arguments)}function Lo(C,_){return fu.apply(this,arguments)}function fu(){return(fu=(0,h.Z)(function*(C,_){return oo(C)._set(Is(_),"true")})).apply(this,arguments)}function Xi(C,_){wr.set(C._key(),_)}function oo(C){return Ce(C._redirectPersistence)}function Is(C){return fe("pendingRedirect",C.config.apiKey,C.name)}function mu(){return(mu=(0,h.Z)(function*(C,_,b){const I=Mn(C);He(C,_,_s);const B=Qi(I,b);return yield Lo(B,I),B._openRedirect(I,_,"signInViaRedirect")})).apply(this,arguments)}function Mf(){return(Mf=(0,h.Z)(function*(C,_,b){const I=(0,z.m9)(C);He(I.auth,_,_s);const B=Qi(I.auth,b);yield Lo(B,I.auth);const $=yield Ke(I);return B._openRedirect(I.auth,_,"reauthViaRedirect",$)})).apply(this,arguments)}function G(){return(G=(0,h.Z)(function*(C,_,b){const I=(0,z.m9)(C);He(I.auth,_,_s);const B=Qi(I.auth,b);yield en(!1,I,_.providerId),yield Lo(B,I.auth);const $=yield Ke(I);return B._openRedirect(I.auth,_,"linkViaRedirect",$)})).apply(this,arguments)}function pe(){return(pe=(0,h.Z)(function*(C,_){return yield Mn(C)._initializationPromise,be(C,_,!1)})).apply(this,arguments)}function be(C,_){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,h.Z)(function*(C,_,b=!1){const I=Mn(C),B=Qi(I,_),de=yield new Rn(I,B,b).execute();return de&&!b&&(delete de.user._redirectEventId,yield I._persistUserIfCurrent(de.user),yield I._setRedirectUser(null,_)),de})).apply(this,arguments)}function Ke(C){return nt.apply(this,arguments)}function nt(){return(nt=(0,h.Z)(function*(C){const _=il(`${C.uid}:::`);return C._redirectEventId=_,yield C.auth._setRedirectUser(C),yield C.auth._persistUserIfCurrent(C),_})).apply(this,arguments)}class Vt{constructor(_){this.auth=_,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(_){this.consumers.add(_),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,_)&&(this.sendToConsumer(this.queuedRedirectEvent,_),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(_){this.consumers.delete(_)}onEvent(_){if(this.hasEventBeenHandled(_))return!1;let b=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(_,I)&&(b=!0,this.sendToConsumer(_,I),this.saveEventToCache(_))}),this.hasHandledPotentialRedirect||!function Di(C){switch(C.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ci(C);default:return!1}}(_)||(this.hasHandledPotentialRedirect=!0,b||(this.queuedRedirectEvent=_,b=!0)),b}sendToConsumer(_,b){var I;if(_.error&&!Ci(_)){const B=(null===(I=_.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";b.onError(Ee(this.auth,B))}else b.onAuthEvent(_)}isEventForConsumer(_,b){const I=null===b.eventId||!!_.eventId&&_.eventId===b.eventId;return b.filter.includes(_.type)&&I}hasEventBeenHandled(_){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(yt(_))}saveEventToCache(_){this.cachedEventUids.add(yt(_)),this.lastProcessedEventTime=Date.now()}}function yt(C){return[C.type,C.eventId,C.sessionId,C.tenantId].filter(_=>_).join("-")}function Ci({type:C,error:_}){return"unknown"===C&&"auth/no-auth-event"===_?.code}function ao(C){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,h.Z)(function*(C,_={}){return gn(C,"GET","/v1/projects",_)})).apply(this,arguments)}const dl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kf=/^https?/;function ss(){return(ss=(0,h.Z)(function*(C){if(C.config.emulator)return;const{authorizedDomains:_}=yield ao(C);for(const b of _)try{if(Er(b))return}catch{}De(C,"unauthorized-domain")})).apply(this,arguments)}function Er(C){const _=je(),{protocol:b,hostname:I}=new URL(_);if(C.startsWith("chrome-extension://")){const de=new URL(C);return""===de.hostname&&""===I?"chrome-extension:"===b&&C.replace("chrome-extension://","")===_.replace("chrome-extension://",""):"chrome-extension:"===b&&de.hostname===I}if(!kf.test(b))return!1;if(dl.test(C))return I===C;const B=C.replace(/\./g,"\\.");return new RegExp("^(.+\\."+B+"|"+B+")$","i").test(I)}const Bo=new mn(3e4,6e4);function Ts(){const C=$n().___jsl;if(C?.H)for(const _ of Object.keys(C.H))if(C.H[_].r=C.H[_].r||[],C.H[_].L=C.H[_].L||[],C.H[_].r=[...C.H[_].L],C.CP)for(let b=0;b<C.CP.length;b++)C.CP[b]=null}let Oc=null;function Nc(C){return Oc=Oc||function Cr(C){return new Promise((_,b)=>{var I,B,$;function de(){Ts(),gapi.load("gapi.iframes",{callback:()=>{_(gapi.iframes.getContext())},ontimeout:()=>{Ts(),b(Ee(C,"network-request-failed"))},timeout:Bo.get()})}if(null!==(B=null===(I=$n().gapi)||void 0===I?void 0:I.iframes)&&void 0!==B&&B.Iframe)_(gapi.iframes.getContext());else{if(null===($=$n().gapi)||void 0===$||!$.load){const Se=lu("iframefcb");return $n()[Se]=()=>{gapi.load?de():b(Ee(C,"network-request-failed"))},_a(`https://apis.google.com/js/api.js?onload=${Se}`).catch($e=>b($e))}de()}}).catch(_=>{throw Oc=null,_})}(C),Oc}const _u=new mn(5e3,15e3),my={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Rf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gy(C){const _=C.config;oe(_.authDomain,C,"auth-domain-config-required");const b=_.emulator?Tn(_,"emulator/auth/iframe"):`https://${C.config.authDomain}/__/auth/iframe`,I={apiKey:_.apiKey,appName:C.name,v:re.SDK_VERSION},B=Rf.get(C.config.apiHost);B&&(I.eid=B);const $=C._getFrameworks();return $.length&&(I.fw=$.join(",")),`${b}?${(0,z.xO)(I).slice(1)}`}function Pn(){return Pn=(0,h.Z)(function*(C){const _=yield Nc(C),b=$n().gapi;return oe(b,C,"internal-error"),_.open({where:document.body,url:gy(C),messageHandlersFilter:b.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:my,dontclear:!0},I=>new Promise(function(){var B=(0,h.Z)(function*($,de){yield I.restyle({setHideOnLeave:!1});const Se=Ee(C,"network-request-failed"),$e=$n().setTimeout(()=>{de(Se)},_u.get());function at(){$n().clearTimeout($e),$(I)}I.ping(at).then(at,()=>{de(Se)})});return function($,de){return B.apply(this,arguments)}}()))}),Pn.apply(this,arguments)}const Gm={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Q{constructor(_){this.window=_,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Lc(C,_,b,I,B,$){oe(C.config.authDomain,C,"auth-domain-config-required"),oe(C.config.apiKey,C,"invalid-api-key");const de={apiKey:C.config.apiKey,appName:C.name,authType:b,redirectUrl:I,v:re.SDK_VERSION,eventId:B};if(_ instanceof _s){_.setDefaultLanguage(C.languageCode),de.providerId=_.providerId||"",(0,z.xb)(_.getCustomParameters())||(de.customParameters=JSON.stringify(_.getCustomParameters()));for(const[$e,at]of Object.entries($||{}))de[$e]=at}if(_ instanceof ys){const $e=_.getScopes().filter(at=>""!==at);$e.length>0&&(de.scopes=$e.join(","))}C.tenantId&&(de.tid=C.tenantId);const Se=de;for(const $e of Object.keys(Se))void 0===Se[$e]&&delete Se[$e];return`${function _y({config:C}){return C.emulator?Tn(C,"emulator/auth/handler"):`https://${C.authDomain}/__/auth/handler`}(C)}?${(0,z.xO)(Se).slice(1)}`}const Nf="webStorageSupport";class dr extends class Lf{constructor(_){this.factorId=_}_process(_,b,I){switch(b.type){case"enroll":return this._finalizeEnroll(_,b.credential,I);case"signin":return this._finalizeSignIn(_,b.credential);default:return Ae("unexpected MultiFactorSessionType")}}}{constructor(_){super("phone"),this.credential=_}static _fromCredential(_){return new dr(_)}_finalizeEnroll(_,b,I){return function Jl(C,_){return gn(C,"POST","/v2/accounts/mfaEnrollment:finalize",Ft(C,_))}(_,{idToken:b,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(_,b){return function au(C,_){return gn(C,"POST","/v2/accounts/mfaSignIn:finalize",Ft(C,_))}(_,{mfaPendingCredential:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let yu=(()=>{class C{constructor(){}static assertion(b){return dr._fromCredential(b)}}return C.FACTOR_ID="phone",C})();var Ff="@firebase/auth",Fc="0.20.10";class vu{constructor(_){this.auth=_,this.internalListeners=new Map}getUid(){var _;return this.assertAuthConfigured(),(null===(_=this.auth.currentUser)||void 0===_?void 0:_.uid)||null}getToken(_){var b=this;return(0,h.Z)(function*(){return b.assertAuthConfigured(),yield b.auth._initializationPromise,b.auth.currentUser?{accessToken:yield b.auth.currentUser.getIdToken(_)}:null})()}addAuthTokenListener(_){if(this.assertAuthConfigured(),this.internalListeners.has(_))return;const b=this.auth.onIdTokenChanged(I=>{var B;_((null===(B=I)||void 0===B?void 0:B.stsTokenManager.accessToken)||null)});this.internalListeners.set(_,b),this.updateProactiveRefresh()}removeAuthTokenListener(_){this.assertAuthConfigured();const b=this.internalListeners.get(_);!b||(this.internalListeners.delete(_),b(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function hl(){return window}function fr(){return(fr=(0,h.Z)(function*(C,_,b){var I;const{BuildInfo:B}=hl();he(_.sessionId,"AuthEvent did not contain a session ID");const $=yield hi(_.sessionId),de={};return zt()?de.ibi=B.packageName:Jt()?de.apn=B.packageName:De(C,"operation-not-supported-in-this-environment"),B.displayName&&(de.appDisplayName=B.displayName),de.sessionId=$,Lc(C,b,_.type,void 0,null!==(I=_.eventId)&&void 0!==I?I:void 0,de)})).apply(this,arguments)}function uo(){return(uo=(0,h.Z)(function*(C){const{BuildInfo:_}=hl(),b={};zt()?b.iosBundleId=_.packageName:Jt()?b.androidPackageName=_.packageName:De(C,"operation-not-supported-in-this-environment"),yield ao(C,b)})).apply(this,arguments)}function nh(){return(nh=(0,h.Z)(function*(C,_,b){const{cordova:I}=hl();let B=()=>{};try{yield new Promise(($,de)=>{let Se=null;function $e(){var vt;$();const Rt=null===(vt=I.plugins.browsertab)||void 0===vt?void 0:vt.close;"function"==typeof Rt&&Rt(),"function"==typeof b?.close&&b.close()}function at(){Se||(Se=window.setTimeout(()=>{de(Ee(C,"redirect-cancelled-by-user"))},2e3))}function Ct(){"visible"===document?.visibilityState&&at()}_.addPassiveListener($e),document.addEventListener("resume",at,!1),Jt()&&document.addEventListener("visibilitychange",Ct,!1),B=()=>{_.removePassiveListener($e),document.removeEventListener("resume",at,!1),document.removeEventListener("visibilitychange",Ct,!1),Se&&window.clearTimeout(Se)}})}finally{B()}})).apply(this,arguments)}function hi(C){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,h.Z)(function*(C){const _=fE(C),b=yield crypto.subtle.digest("SHA-256",_);return Array.from(new Uint8Array(b)).map(B=>B.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function fE(C){if(he(/[0-9a-zA-Z]+/.test(C),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(C);const _=new ArrayBuffer(C.length),b=new Uint8Array(_);for(let I=0;I<C.length;I++)b[I]=C.charCodeAt(I);return b}(0,z.Pz)("authIdTokenMaxAge"),function vy(C){(0,re._registerComponent)(new g.wA("auth",(_,{options:b})=>{const I=_.getProvider("app").getImmediate(),B=_.getProvider("heartbeat"),{apiKey:$,authDomain:de}=I.options;return((Se,$e)=>{oe($&&!$.includes(":"),"invalid-api-key",{appName:Se.name}),oe(!de?.includes(":"),"argument-error",{appName:Se.name});const at={apiKey:$,authDomain:de,clientPlatform:C,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qs(C)},Ct=new jt(Se,$e,at);return function We(C,_){const b=_?.persistence||[],I=(Array.isArray(b)?b:[b]).map(Ce);_?.errorMap&&C._updateErrorMap(_.errorMap),C._initializeWithPersistence(I,_?.popupRedirectResolver)}(Ct,b),Ct})(I,B)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((_,b,I)=>{_.getProvider("auth-internal").initialize()})),(0,re._registerComponent)(new g.wA("auth-internal",_=>{const b=Mn(_.getProvider("auth").getImmediate());return new vu(b)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,re.registerVersion)(Ff,Fc,function yy(C){switch(C){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(C)),(0,re.registerVersion)(Ff,Fc,"esm2017")}("Browser");class qm extends Vt{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(_=>{this.resolveInialized=_})}addPassiveListener(_){this.passiveListeners.add(_)}removePassiveListener(_){this.passiveListeners.delete(_)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(_){return this.resolveInialized(),this.passiveListeners.forEach(b=>b(_)),super.onEvent(_)}initialized(){var _=this;return(0,h.Z)(function*(){yield _.initPromise})()}}function ih(C){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,h.Z)(function*(C){const _=yield pl()._get(Bc(C));return _&&(yield pl()._remove(Bc(C))),_})).apply(this,arguments)}function rh(){const C=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<20;b++){const I=Math.floor(Math.random()*_.length);C.push(_.charAt(I))}return C.join("")}function pl(){return Ce(el)}function Bc(C){return fe("authEvent",C.config.apiKey,C.name)}function ml(C){if(!C?.includes("?"))return{};const[_,...b]=C.split("?");return(0,z.zd)(b.join("?"))}function Uf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ee("no-auth-event")}}function Vc(){var C;return(null===(C=self?.location)||void 0===C?void 0:C.protocol)||null}function Da(C=(0,z.z$)()){return!("file:"!==Vc()&&"ionic:"!==Vc()&&"capacitor:"!==Vc()||!C.toLowerCase().match(/iphone|ipad|ipod|android/))}function oh(){try{const C=self.localStorage,_=il();if(C)return C.setItem(_,"1"),C.removeItem(_),!function sh(C=(0,z.z$)()){return function jf(){return(0,z.w1)()&&11===document?.documentMode}()||function eg(C=(0,z.z$)()){return/Edge\/\d+/.test(C)}(C)}()||(0,z.hl)()}catch{return Du()&&(0,z.hl)()}return!1}function Du(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ah(){return(function Cy(){return"http:"===Vc()||"https:"===Vc()}()||(0,z.ru)()||Da())&&!function Jm(){return(0,z.b$)()||(0,z.UG)()}()&&oh()&&!Du()}function lh(){return Da()&&typeof document<"u"}function zf(){return(zf=(0,h.Z)(function*(){return!!lh()&&new Promise(C=>{const _=setTimeout(()=>{C(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(_),C(!0)})})})).apply(this,arguments)}const Ir={LOCAL:"local",NONE:"none",SESSION:"session"},gl=oe,Uo="persistence";function Uc(C){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,h.Z)(function*(C){yield C._initializationPromise;const _=uh(),b=fe(Uo,C.config.apiKey,C.name);_&&_.setItem(b,C._getPersistence())})).apply(this,arguments)}function uh(){var C;try{return(null===(C=function Gf(){return typeof window<"u"?window:null}())||void 0===C?void 0:C.sessionStorage)||null}catch{return null}}const ch=oe;class Tr{constructor(){this.browserResolver=Ce(class Wm{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ns,this._completeRedirectFn=be,this._overrideRedirectResult=Xi}_openPopup(_,b,I,B){var $=this;return(0,h.Z)(function*(){var de;he(null===(de=$.eventManagers[_._key()])||void 0===de?void 0:de.manager,"_initialize() not called before _openPopup()");const Se=Lc(_,b,I,je(),B);return function zr(C,_,b,I=500,B=600){const $=Math.max((window.screen.availHeight-B)/2,0).toString(),de=Math.max((window.screen.availWidth-I)/2,0).toString();let Se="";const $e=Object.assign(Object.assign({},Gm),{width:I.toString(),height:B.toString(),top:$,left:de}),at=(0,z.z$)().toLowerCase();b&&(Se=ln(at)?"_blank":b),et(at)&&(_=_||"http://localhost",$e.scrollbars="yes");const Ct=Object.entries($e).reduce((Rt,[Bt,Gt])=>`${Rt}${Bt}=${Gt},`,"");if(function sr(C=(0,z.z$)()){var _;return zt(C)&&!(null===(_=window.navigator)||void 0===_||!_.standalone)}(at)&&"_self"!==Se)return function Pf(C,_){const b=document.createElement("a");b.href=C,b.target=_;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),b.dispatchEvent(I)}(_||"",Se),new Q(null);const vt=window.open(_||"",Se,Ct);oe(vt,C,"popup-blocked");try{vt.focus()}catch{}return new Q(vt)}(_,Se,il())})()}_openRedirect(_,b,I,B){var $=this;return(0,h.Z)(function*(){return yield $._originValidation(_),function jr(C){$n().location.href=C}(Lc(_,b,I,je(),B)),new Promise(()=>{})})()}_initialize(_){const b=_._key();if(this.eventManagers[b]){const{manager:B,promise:$}=this.eventManagers[b];return B?Promise.resolve(B):(he($,"If manager is not set, promise should be"),$)}const I=this.initAndGetManager(_);return this.eventManagers[b]={promise:I},I.catch(()=>{delete this.eventManagers[b]}),I}initAndGetManager(_){var b=this;return(0,h.Z)(function*(){const I=yield function un(C){return Pn.apply(this,arguments)}(_),B=new Vt(_);return I.register("authEvent",$=>(oe($?.authEvent,_,"invalid-auth-event"),{status:B.onEvent($.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),b.eventManagers[_._key()]={manager:B},b.iframes[_._key()]=I,B})()}_isIframeWebStorageSupported(_,b){this.iframes[_._key()].send(Nf,{type:Nf},B=>{var $;const de=null===($=B?.[0])||void 0===$?void 0:$[Nf];void 0!==de&&b(!!de),De(_,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(_){const b=_._key();return this.originValidationPromises[b]||(this.originValidationPromises[b]=function Xd(C){return ss.apply(this,arguments)}(_)),this.originValidationPromises[b]}get _shouldInitProactively(){return yo()||mt()||zt()}}),this.cordovaResolver=Ce(class Bf{constructor(){this._redirectPersistence=ns,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=be,this._overrideRedirectResult=Xi}_initialize(_){var b=this;return(0,h.Z)(function*(){const I=_._key();let B=b.eventManagers.get(I);return B||(B=new qm(_),b.eventManagers.set(I,B),b.attachCallbackListeners(_,B)),B})()}_openPopup(_){De(_,"operation-not-supported-in-this-environment")}_openRedirect(_,b,I,B){var $=this;return(0,h.Z)(function*(){!function by(C){var _,b,I,B,$,de,Se,$e,at,Ct;const vt=hl();oe("function"==typeof(null===(_=vt?.universalLinks)||void 0===_?void 0:_.subscribe),C,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),oe(typeof(null===(b=vt?.BuildInfo)||void 0===b?void 0:b.packageName)<"u",C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),oe("function"==typeof(null===($=null===(B=null===(I=vt?.cordova)||void 0===I?void 0:I.plugins)||void 0===B?void 0:B.browsertab)||void 0===$?void 0:$.openUrl),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe("function"==typeof(null===($e=null===(Se=null===(de=vt?.cordova)||void 0===de?void 0:de.plugins)||void 0===Se?void 0:Se.browsertab)||void 0===$e?void 0:$e.isAvailable),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe("function"==typeof(null===(Ct=null===(at=vt?.cordova)||void 0===at?void 0:at.InAppBrowser)||void 0===Ct?void 0:Ct.open),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(_);const de=yield $._initialize(_);yield de.initialized(),de.resetRedirect(),function pu(){wr.clear()}(),yield $._originValidation(_);const Se=function wy(C,_,b=null){return{type:_,eventId:b,urlResponse:null,sessionId:rh(),postBody:null,tenantId:C.tenantId,error:Ee(C,"no-auth-event")}}(_,I,B);yield function Zm(C,_){return pl()._set(Bc(C),_)}(_,Se);const $e=yield function Vo(C,_,b){return fr.apply(this,arguments)}(_,Se,b),at=yield function $m(C){const{cordova:_}=hl();return new Promise(b=>{_.plugins.browsertab.isAvailable(I=>{let B=null;I?_.plugins.browsertab.openUrl(C):B=_.InAppBrowser.open(C,function _i(C=(0,z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(C)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(C)}()?"_blank":"_system","location=yes"),b(B)})})}($e);return function th(C,_,b){return nh.apply(this,arguments)}(_,de,at)})()}_isIframeWebStorageSupported(_,b){throw new Error("Method not implemented.")}_originValidation(_){const b=_._key();return this.originValidationPromises[b]||(this.originValidationPromises[b]=function As(C){return uo.apply(this,arguments)}(_)),this.originValidationPromises[b]}attachCallbackListeners(_,b){const{universalLinks:I,handleOpenURL:B,BuildInfo:$}=hl(),de=setTimeout((0,h.Z)(function*(){yield ih(_),b.onEvent(Uf())}),500),Se=function(){var Ct=(0,h.Z)(function*(vt){clearTimeout(de);const Rt=yield ih(_);let Bt=null;Rt&&vt?.url&&(Bt=function fl(C,_){var b,I;const B=function On(C){const _=ml(C),b=_.link?decodeURIComponent(_.link):void 0,I=ml(b).link,B=_.deep_link_id?decodeURIComponent(_.deep_link_id):void 0;return ml(B).link||B||I||b||C}(_);if(B.includes("/__/auth/callback")){const $=ml(B),de=$.firebaseError?function Ey(C){try{return JSON.parse(C)}catch{return null}}(decodeURIComponent($.firebaseError)):null,Se=null===(I=null===(b=de?.code)||void 0===b?void 0:b.split("auth/"))||void 0===I?void 0:I[1],$e=Se?Ee(Se):null;return $e?{type:C.type,eventId:C.eventId,tenantId:C.tenantId,error:$e,urlResponse:null,sessionId:null,postBody:null}:{type:C.type,eventId:C.eventId,tenantId:C.tenantId,sessionId:C.sessionId,urlResponse:B,postBody:null}}return null}(Rt,vt.url)),b.onEvent(Bt||Uf())});return function(Rt){return Ct.apply(this,arguments)}}();typeof I<"u"&&"function"==typeof I.subscribe&&I.subscribe(null,Se);const $e=B,at=`${$.packageName.toLowerCase()}://`;hl().handleOpenURL=function(){var Ct=(0,h.Z)(function*(vt){if(vt.toLowerCase().startsWith(at)&&Se({url:vt}),"function"==typeof $e)try{$e(vt)}catch(Rt){console.error(Rt)}});return function(vt){return Ct.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ns,this._completeRedirectFn=be,this._overrideRedirectResult=Xi}_initialize(_){var b=this;return(0,h.Z)(function*(){return yield b.selectUnderlyingResolver(),b.assertedUnderlyingResolver._initialize(_)})()}_openPopup(_,b,I,B){var $=this;return(0,h.Z)(function*(){return yield $.selectUnderlyingResolver(),$.assertedUnderlyingResolver._openPopup(_,b,I,B)})()}_openRedirect(_,b,I,B){var $=this;return(0,h.Z)(function*(){return yield $.selectUnderlyingResolver(),$.assertedUnderlyingResolver._openRedirect(_,b,I,B)})()}_isIframeWebStorageSupported(_,b){this.assertedUnderlyingResolver._isIframeWebStorageSupported(_,b)}_originValidation(_){return this.assertedUnderlyingResolver._originValidation(_)}get _shouldInitProactively(){return lh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ch(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var _=this;return(0,h.Z)(function*(){if(_.underlyingResolver)return;const b=yield function Dy(){return zf.apply(this,arguments)}();_.underlyingResolver=b?_.cordovaResolver:_.browserResolver})()}}function dh(C){return C.unwrap()}function Ty(C){return co(C)}function co(C){const{_tokenResponse:_}=C instanceof z.ZR?C.customData:C;if(!_)return null;if(!(C instanceof z.ZR)&&"temporaryProof"in _&&"phoneNumber"in _)return ul.credentialFromResult(C);const b=_.providerId;if(!b||"password"===b)return null;let I;switch(b){case"google.com":I=Ol;break;case"facebook.com":I=Wa;break;case"github.com":I=dc;break;case"twitter.com":I=or;break;default:const{oauthIdToken:B,oauthAccessToken:$,oauthTokenSecret:de,pendingToken:Se,nonce:$e}=_;return $||de||B||Se?Se?b.startsWith("saml.")?la._create(b,Se):gs._fromParams({providerId:b,signInMethod:b,pendingToken:Se,idToken:B,accessToken:$}):new wo(b).credential({idToken:B,accessToken:$,rawNonce:$e}):null}return C instanceof z.ZR?I.credentialFromError(C):I.credentialFromResult(C)}function ni(C,_){return _.catch(b=>{throw b instanceof z.ZR&&function Sy(C,_){var b,I;const B=null===(b=_.customData)||void 0===b?void 0:b._tokenResponse;if("auth/multi-factor-auth-required"===(null===(I=_)||void 0===I?void 0:I.code))_.resolver=new hh(C,function jn(C,_){var b;const I=(0,z.m9)(C),B=_;return oe(_.customData.operationType,I,"argument-error"),oe(null===(b=B.customData._serverResponse)||void 0===b?void 0:b.mfaPendingCredential,I,"argument-error"),Ql._fromError(I,B)}(C,_));else if(B){const $=co(_),de=_;$&&(de.credential=$,de.tenantId=B.tenantId||void 0,de.email=B.email||void 0,de.phoneNumber=B.phoneNumber||void 0)}}(C,b),b}).then(b=>{const B=b.user;return{operationType:b.operationType,credential:Ty(b),additionalUserInfo:Kl(b),user:Sr.getOrCreate(B)}})}function $f(C,_){return qf.apply(this,arguments)}function qf(){return(qf=(0,h.Z)(function*(C,_){const b=yield _;return{verificationId:b.verificationId,confirm:I=>ni(C,b.confirm(I))}})).apply(this,arguments)}class hh{constructor(_,b){this.resolver=b,this.auth=function Wf(C){return C.wrapped()}(_)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(_){return ni(dh(this.auth),this.resolver.resolveSignIn(_))}}class Sr{constructor(_){this._delegate=_,this.multiFactor=function fa(C){const _=(0,z.m9)(C);return xo.has(_)||xo.set(_,Af._fromUser(_)),xo.get(_)}(_)}static getOrCreate(_){return Sr.USER_MAP.has(_)||Sr.USER_MAP.set(_,new Sr(_)),Sr.USER_MAP.get(_)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(_){return this._delegate.getIdTokenResult(_)}getIdToken(_){return this._delegate.getIdToken(_)}linkAndRetrieveDataWithCredential(_){return this.linkWithCredential(_)}linkWithCredential(_){var b=this;return(0,h.Z)(function*(){return ni(b.auth,Vl(b._delegate,_))})()}linkWithPhoneNumber(_,b){var I=this;return(0,h.Z)(function*(){return $f(I.auth,function Ni(C,_,b){return ei.apply(this,arguments)}(I._delegate,_,b))})()}linkWithPopup(_){var b=this;return(0,h.Z)(function*(){return ni(b.auth,function hu(C,_,b){return so.apply(this,arguments)}(b._delegate,_,Tr))})()}linkWithRedirect(_){var b=this;return(0,h.Z)(function*(){return yield Uc(Mn(b.auth)),function k(C,_,b){return function O(C,_,b){return G.apply(this,arguments)}(C,_,b)}(b._delegate,_,Tr)})()}reauthenticateAndRetrieveDataWithCredential(_){return this.reauthenticateWithCredential(_)}reauthenticateWithCredential(_){var b=this;return(0,h.Z)(function*(){return ni(b.auth,Ul(b._delegate,_))})()}reauthenticateWithPhoneNumber(_,b){return $f(this.auth,function Kd(C,_,b){return ti.apply(this,arguments)}(this._delegate,_,b))}reauthenticateWithPopup(_){return ni(this.auth,function Pc(C,_,b){return cl.apply(this,arguments)}(this._delegate,_,Tr))}reauthenticateWithRedirect(_){var b=this;return(0,h.Z)(function*(){return yield Uc(Mn(b.auth)),function Qd(C,_,b){return function gu(C,_,b){return Mf.apply(this,arguments)}(C,_,b)}(b._delegate,_,Tr)})()}sendEmailVerification(_){return function bc(C,_){return Xa.apply(this,arguments)}(this._delegate,_)}unlink(_){var b=this;return(0,h.Z)(function*(){return yield function Ki(C,_){return Nl.apply(this,arguments)}(b._delegate,_),b})()}updateEmail(_){return function Bd(C,_){return To((0,z.m9)(C),_,null)}(this._delegate,_)}updatePassword(_){return function Io(C,_){return To((0,z.m9)(C),null,_)}(this._delegate,_)}updatePhoneNumber(_){return function bn(C,_){return uu.apply(this,arguments)}(this._delegate,_)}updateProfile(_){return function Cc(C,_){return Dc.apply(this,arguments)}(this._delegate,_)}verifyBeforeUpdateEmail(_,b){return function wc(C,_,b){return $l.apply(this,arguments)}(this._delegate,_,b)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Sr.USER_MAP=new WeakMap;const Ia=oe;let ng=(()=>{class C{constructor(b,I){if(this.app=b,I.isInitialized())return this._delegate=I.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:B}=b.options;Ia(B,"invalid-api-key",{appName:b.name}),Ia(B,"invalid-api-key",{appName:b.name});const $=typeof window<"u"?Tr:void 0;this._delegate=I.initialize({options:{persistence:Ay(B,b.name),popupRedirectResolver:$}}),this._delegate._updateErrorMap(U),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Sr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(b){this._delegate.languageCode=b}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(b){this._delegate.tenantId=b}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(b,I){!function Rl(C,_,b){const I=Mn(C);oe(I._canInitEmulator,I,"emulator-config-failed"),oe(/^https?:\/\//.test(_),I,"invalid-emulator-scheme");const B=!!b?.disableWarnings,$=Jr(_),{host:de,port:Se}=function Xn(C){const _=Jr(C),b=/(\/\/)?([^?#/]+)/.exec(C.substr(_.length));if(!b)return{host:"",port:null};const I=b[2].split("@").pop()||"",B=/^(\[[^\]]+\])(:|$)/.exec(I);if(B){const $=B[1];return{host:$,port:Zs(I.substr($.length+1))}}{const[$,de]=I.split(":");return{host:$,port:Zs(de)}}}(_);I.config.emulator={url:`${$}//${de}${null===Se?"":`:${Se}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:de,port:Se,protocol:$.replace(":",""),options:Object.freeze({disableWarnings:B})}),B||function Ks(){function C(){const _=document.createElement("p"),b=_.style;_.innerText="Running in emulator mode. Do not use with production credentials.",b.position="fixed",b.width="100%",b.backgroundColor="#ffffff",b.border=".1em solid #000000",b.color="#b50000",b.bottom="0px",b.left="0px",b.margin="0px",b.zIndex="10000",b.textAlign="center",_.classList.add("firebase-emulator-warning"),document.body.appendChild(_)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",C):C())}()}(this._delegate,b,I)}applyActionCode(b){return function br(C,_){return qa.apply(this,arguments)}(this._delegate,b)}checkActionCode(b){return Za(this._delegate,b)}confirmPasswordReset(b,I){return function Gl(C,_,b){return ca.apply(this,arguments)}(this._delegate,b,I)}createUserWithEmailAndPassword(b,I){var B=this;return(0,h.Z)(function*(){return ni(B._delegate,function Ka(C,_,b){return Hn.apply(this,arguments)}(B._delegate,b,I))})()}fetchProvidersForEmail(b){return this.fetchSignInMethodsForEmail(b)}fetchSignInMethodsForEmail(b){return function Wl(C,_){return Qa.apply(this,arguments)}(this._delegate,b)}isSignInWithEmailLink(b){return function Es(C,_){return"EMAIL_SIGNIN"===Pl.parseLink(_)?.operation}(0,b)}getRedirectResult(){var b=this;return(0,h.Z)(function*(){Ia(ah(),b._delegate,"operation-not-supported-in-this-environment");const I=yield function ie(C,_){return pe.apply(this,arguments)}(b._delegate,Tr);return I?ni(b._delegate,Promise.resolve(I)):{credential:null,user:null}})()}addFrameworkForLogging(b){!function Ym(C,_){Mn(C)._logFramework(_)}(this._delegate,b)}onAuthStateChanged(b,I,B){const{next:$,error:de,complete:Se}=Zf(b,I,B);return this._delegate.onAuthStateChanged($,de,Se)}onIdTokenChanged(b,I,B){const{next:$,error:de,complete:Se}=Zf(b,I,B);return this._delegate.onIdTokenChanged($,de,Se)}sendSignInLinkToEmail(b,I){return function yc(C,_,b){return Do.apply(this,arguments)}(this._delegate,b,I)}sendPasswordResetEmail(b,I){return function zl(C,_,b){return Un.apply(this,arguments)}(this._delegate,b,I||void 0)}setPersistence(b){var I=this;return(0,h.Z)(function*(){let B;switch(function tg(C,_){gl(Object.values(Ir).includes(_),C,"invalid-persistence-type"),(0,z.b$)()?gl(_!==Ir.SESSION,C,"unsupported-persistence-type"):(0,z.UG)()?gl(_===Ir.NONE,C,"unsupported-persistence-type"):Du()?gl(_===Ir.NONE||_===Ir.LOCAL&&(0,z.hl)(),C,"unsupported-persistence-type"):gl(_===Ir.NONE||oh(),C,"unsupported-persistence-type")}(I._delegate,b),b){case Ir.SESSION:B=ns;break;case Ir.LOCAL:B=(yield Ce(pa)._isAvailable())?pa:el;break;case Ir.NONE:B=se;break;default:return De("argument-error",{appName:I._delegate.name})}return I._delegate.setPersistence(B)})()}signInAndRetrieveDataWithCredential(b){return this.signInWithCredential(b)}signInAnonymously(){return ni(this._delegate,function If(C){return Vn.apply(this,arguments)}(this._delegate))}signInWithCredential(b){return ni(this._delegate,kn(this._delegate,b))}signInWithCustomToken(b){return ni(this._delegate,function mc(C,_){return $a.apply(this,arguments)}(this._delegate,b))}signInWithEmailAndPassword(b,I){return ni(this._delegate,function ts(C,_,b){return kn((0,z.m9)(C),es.credential(_,b))}(this._delegate,b,I))}signInWithEmailLink(b,I){return ni(this._delegate,function Fm(C,_,b){return Ya.apply(this,arguments)}(this._delegate,b,I))}signInWithPhoneNumber(b,I){return $f(this._delegate,function ur(C,_,b){return Ei.apply(this,arguments)}(this._delegate,b,I))}signInWithPopup(b){var I=this;return(0,h.Z)(function*(){return Ia(ah(),I._delegate,"operation-not-supported-in-this-environment"),ni(I._delegate,function is(C,_,b){return du.apply(this,arguments)}(I._delegate,b,Tr))})()}signInWithRedirect(b){var I=this;return(0,h.Z)(function*(){return Ia(ah(),I._delegate,"operation-not-supported-in-this-environment"),yield Uc(I._delegate),function Zn(C,_,b){return function Hm(C,_,b){return mu.apply(this,arguments)}(C,_,b)}(I._delegate,b,Tr)})()}updateCurrentUser(b){return this._delegate.updateCurrentUser(b)}verifyPasswordResetCode(b){return function _c(C,_){return Fd.apply(this,arguments)}(this._delegate,b)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return C.Persistence=Ir,C})();function Zf(C,_,b){let I=C;"function"!=typeof C&&({next:I,error:_,complete:b}=C);const B=I;return{next:de=>B(de&&Sr.getOrCreate(de)),error:_,complete:b}}function Ay(C,_){const b=function Iy(C,_){const b=uh();if(!b)return[];const I=fe(Uo,C,_);switch(b.getItem(I)){case Ir.NONE:return[se];case Ir.LOCAL:return[pa,ns];case Ir.SESSION:return[ns];default:return[]}}(C,_);if(typeof self<"u"&&!b.includes(pa)&&b.push(pa),typeof window<"u")for(const I of[el,ns])b.includes(I)||b.push(I);return b.includes(se)||b.push(se),b}class fh{constructor(){this.providerId="phone",this._delegate=new ul(dh(ue.Z.auth()))}static credential(_,b){return ul.credential(_,b)}verifyPhoneNumber(_,b){return this._delegate.verifyPhoneNumber(_,b)}unwrap(){return this._delegate}}fh.PHONE_SIGN_IN_METHOD=ul.PHONE_SIGN_IN_METHOD,fh.PROVIDER_ID=ul.PROVIDER_ID;const ig=oe;class rg{constructor(_,b,I=ue.Z.app()){var B;ig(null===(B=I.options)||void 0===B?void 0:B.apiKey,"invalid-api-key",{appName:I.name}),this._delegate=new wi(_,b,I.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function sg(C){C.INTERNAL.registerComponent(new g.wA("auth-compat",_=>{const b=_.getProvider("app-compat").getImmediate(),I=_.getProvider("auth");return new ng(b,I)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:es,FacebookAuthProvider:Wa,GithubAuthProvider:dc,GoogleAuthProvider:Ol,OAuthProvider:wo,SAMLAuthProvider:yr,PhoneAuthProvider:fh,PhoneMultiFactorGenerator:yu,RecaptchaVerifier:rg,TwitterAuthProvider:or,Auth:ng,AuthCredential:Ti,Error:z.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),C.registerVersion("@firebase/auth-compat","0.2.23")}(ue.Z)},1554:lt=>{lt.exports=function ue(z,re,Y){function V(j,c){if(!re[j]){if(!z[j]){if(g)return g(j,!0);var w=new Error("Cannot find module '"+j+"'");throw w.code="MODULE_NOT_FOUND",w}var x=re[j]={exports:{}};z[j][0].call(x.exports,function(P){return V(z[j][1][P]||P)},x,x.exports,ue,z,re,Y)}return re[j].exports}for(var g=void 0,F=0;F<Y.length;F++)V(Y[F]);return V}({1:[function(ue,z,re){typeof z<"u"&&(z.exports=function Y(V,g,F){var j=!1;if(typeof window.XMLHttpRequest>"u")return g(Error("Browser not supported"));if(typeof F>"u"){var c=V.match(/^\s*https?:\/\/[^\/]*/);F=c&&c[0]!==location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}var m=new window.XMLHttpRequest;if(F&&!("withCredentials"in m)){m=new window.XDomainRequest;var x=g;g=function(){if(j)x.apply(this,arguments);else{var U=this,q=arguments;setTimeout(function(){x.apply(U,q)},0)}}}function P(){void 0===m.status||function w(U){return U>=200&&U<300||304===U}(m.status)?g.call(m,null,m):g.call(m,m,null)}return"onload"in m?m.onload=P:m.onreadystatechange=function(){4===m.readyState&&P()},m.onerror=function(q){g.call(this,q||!0,null),g=function(){}},m.onprogress=function(){},m.ontimeout=function(U){g.call(this,U,null),g=function(){}},m.onabort=function(U){g.call(this,U,null),g=function(){}},m.open("GET",V,!0),m.send(null),j=!0,m})},{}],2:[function(ue,z,re){"use strict";var Y={};function V(F,j){F=Math.round(F*j),(F<<=1)<0&&(F=~F);for(var c="";F>=32;)c+=String.fromCharCode(63+(32|31&F)),F>>=5;return c+String.fromCharCode(F+63)}function g(F){for(var j=[],c=0;c<F.length;c++)j.push(F[c].slice().reverse());return j}Y.decode=function(F,j){for(var X,c=0,m=0,w=0,x=[],P=0,U=0,q=null,me=Math.pow(10,j||5);c<F.length;){q=null,P=0,U=0;do{U|=(31&(q=F.charCodeAt(c++)-63))<<P,P+=5}while(q>=32);X=1&U?~(U>>1):U>>1,P=U=0;do{U|=(31&(q=F.charCodeAt(c++)-63))<<P,P+=5}while(q>=32);x.push([(m+=X)/me,(w+=1&U?~(U>>1):U>>1)/me])}return x},Y.encode=function(F,j){if(!F.length)return"";for(var c=Math.pow(10,j||5),m=V(F[0][0],c)+V(F[0][1],c),w=1;w<F.length;w++){var x=F[w],P=F[w-1];m+=V(x[0]-P[0],c),m+=V(x[1]-P[1],c)}return m},Y.fromGeoJSON=function(F,j){if(F&&"Feature"===F.type&&(F=F.geometry),!F||"LineString"!==F.type)throw new Error("Input must be a GeoJSON LineString");return Y.encode(g(F.coordinates),j)},Y.toGeoJSON=function(F,j){return{type:"LineString",coordinates:g(Y.decode(F,j))}},"object"==typeof z&&z.exports&&(z.exports=Y)},{}],3:[function(ue,z,re){!function(){"use strict";L.Routing=L.Routing||{},L.Routing.Autocomplete=L.Class.extend({options:{timeout:500,blurTimeout:100,noResultsMessage:"No results found."},initialize:function(Y,V,g,F){L.setOptions(this,F),this._elem=Y,this._resultFn=F.resultFn?L.Util.bind(F.resultFn,F.resultContext):null,this._autocomplete=F.autocompleteFn?L.Util.bind(F.autocompleteFn,F.autocompleteContext):null,this._selectFn=L.Util.bind(V,g),this._container=L.DomUtil.create("div","leaflet-routing-geocoder-result"),this._resultTable=L.DomUtil.create("table","",this._container),L.DomEvent.addListener(this._elem,"input",this._keyPressed,this),L.DomEvent.addListener(this._elem,"keypress",this._keyPressed,this),L.DomEvent.addListener(this._elem,"keydown",this._keyDown,this),L.DomEvent.addListener(this._elem,"blur",function(){this._isOpen&&this.close()},this)},close:function(){L.DomUtil.removeClass(this._container,"leaflet-routing-geocoder-result-open"),this._isOpen=!1},_open:function(){var Y=this._elem.getBoundingClientRect();if(!this._container.parentElement){var V=void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,g=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;this._container.style.left=Y.left+V+"px",this._container.style.top=Y.bottom+g+"px",this._container.style.width=Y.right-Y.left+"px",document.body.appendChild(this._container)}L.DomUtil.addClass(this._container,"leaflet-routing-geocoder-result-open"),this._isOpen=!0},_setResults:function(Y){var V,g,F,j;for(delete this._selection,this._results=Y;this._resultTable.firstChild;)this._resultTable.removeChild(this._resultTable.firstChild);for(V=0;V<Y.length;V++)(g=L.DomUtil.create("tr","",this._resultTable)).setAttribute("data-result-index",V),F=L.DomUtil.create("td","",g),j=document.createTextNode(Y[V].name),F.appendChild(j),L.DomEvent.addListener(F,"mousedown",L.DomEvent.preventDefault),L.DomEvent.addListener(F,"click",this._createClickListener(Y[V]));V||(g=L.DomUtil.create("tr","",this._resultTable),(F=L.DomUtil.create("td","leaflet-routing-geocoder-no-results",g)).innerHTML=this.options.noResultsMessage),this._open(),Y.length>0&&this._select(1)},_createClickListener:function(Y){var V=this._resultSelected(Y);return L.bind(function(){this._elem.blur(),V()},this)},_resultSelected:function(Y){return L.bind(function(){this.close(),this._elem.value=Y.name,this._lastCompletedText=Y.name,this._selectFn(Y)},this)},_keyPressed:function(Y){var V;return this._isOpen&&13===Y.keyCode&&this._selection?(V=parseInt(this._selection.getAttribute("data-result-index"),10),this._resultSelected(this._results[V])(),void L.DomEvent.preventDefault(Y)):13!==Y.keyCode?this._autocomplete&&document.activeElement===this._elem?(this._timer&&clearTimeout(this._timer),void(this._timer=setTimeout(L.Util.bind(function(){this._complete(this._autocomplete)},this),this.options.timeout))):void this._unselect():void this._complete(this._resultFn,!0)},_select:function(Y){var V=this._selection;V&&(L.DomUtil.removeClass(V.firstChild,"leaflet-routing-geocoder-selected"),V=V[Y>0?"nextSibling":"previousSibling"]),V||(V=this._resultTable[Y>0?"firstChild":"lastChild"]),V&&(L.DomUtil.addClass(V.firstChild,"leaflet-routing-geocoder-selected"),this._selection=V)},_unselect:function(){this._selection&&L.DomUtil.removeClass(this._selection.firstChild,"leaflet-routing-geocoder-selected"),delete this._selection},_keyDown:function(Y){if(this._isOpen)switch(Y.keyCode){case 27:return this.close(),void L.DomEvent.preventDefault(Y);case 38:return this._select(-1),void L.DomEvent.preventDefault(Y);case 40:return this._select(1),void L.DomEvent.preventDefault(Y)}},_complete:function(Y,V){var g=this._elem.value;function F(j){this._lastCompletedText=g,V&&1===j.length?this._resultSelected(j[0])():this._setResults(j)}!g||(g!==this._lastCompletedText?Y(g,F,this):V&&F.call(this,this._results))}})}()},{}],4:[function(ue,z,re){(function(Y){!function(){"use strict";var V=typeof window<"u"?window.L:typeof Y<"u"?Y.L:null;V.Routing=V.Routing||{},V.extend(V.Routing,ue("./L.Routing.Itinerary")),V.extend(V.Routing,ue("./L.Routing.Line")),V.extend(V.Routing,ue("./L.Routing.Plan")),V.extend(V.Routing,ue("./L.Routing.OSRMv1")),V.extend(V.Routing,ue("./L.Routing.Mapbox")),V.extend(V.Routing,ue("./L.Routing.ErrorControl")),V.Routing.Control=V.Routing.Itinerary.extend({options:{fitSelectedRoutes:"smart",routeLine:function(g,F){return V.Routing.line(g,F)},autoRoute:!0,routeWhileDragging:!1,routeDragInterval:500,waypointMode:"connect",showAlternatives:!1,defaultErrorHandler:function(g){console.error("Routing error:",g.error)}},initialize:function(g){V.Util.setOptions(this,g),this._router=this.options.router||new V.Routing.OSRMv1(g),this._plan=this.options.plan||V.Routing.plan(this.options.waypoints,g),this._requestCount=0,V.Routing.Itinerary.prototype.initialize.call(this,g),this.on("routeselected",this._routeSelected,this),this.options.defaultErrorHandler&&this.on("routingerror",this.options.defaultErrorHandler),this._plan.on("waypointschanged",this._onWaypointsChanged,this),g.routeWhileDragging&&this._setupRouteDragging(),this.options.autoRoute&&this.route()},onZoomEnd:function(){if(this._selectedRoute&&this._router.requiresMoreDetail){var g=this._map;this._router.requiresMoreDetail(this._selectedRoute,g.getZoom(),g.getBounds())&&this.route({callback:V.bind(function(F,j){var c;if(!F){for(c=0;c<j.length;c++)this._routes[c].properties=j[c].properties;this._updateLineCallback(F,j)}},this),simplifyGeometry:!1,geometryOnly:!0})}},onAdd:function(g){var F=V.Routing.Itinerary.prototype.onAdd.call(this,g);return this._map=g,this._map.addLayer(this._plan),this._map.on("zoomend",this.onZoomEnd,this),this._plan.options.geocoder&&F.insertBefore(this._plan.createGeocoders(),F.firstChild),F},onRemove:function(g){if(g.off("zoomend",this.onZoomEnd,this),this._line&&g.removeLayer(this._line),g.removeLayer(this._plan),this._alternatives&&this._alternatives.length>0)for(var F=0,j=this._alternatives.length;F<j;F++)g.removeLayer(this._alternatives[F]);return V.Routing.Itinerary.prototype.onRemove.call(this,g)},getWaypoints:function(){return this._plan.getWaypoints()},setWaypoints:function(g){return this._plan.setWaypoints(g),this},spliceWaypoints:function(){return this._plan.spliceWaypoints.apply(this._plan,arguments)},getPlan:function(){return this._plan},getRouter:function(){return this._router},_routeSelected:function(g){var F=this._selectedRoute=g.route,j=this.options.showAlternatives&&g.alternatives,c=this.options.fitSelectedRoutes,m="smart"===c&&!this._waypointsVisible()||"smart"!==c&&c;this._updateLines({route:F,alternatives:j}),m&&this._map.fitBounds(this._line.getBounds()),"snap"===this.options.waypointMode&&(this._plan.off("waypointschanged",this._onWaypointsChanged,this),this.setWaypoints(F.waypoints),this._plan.on("waypointschanged",this._onWaypointsChanged,this))},_waypointsVisible:function(){var F,j,c,m,w,g=this.getWaypoints();try{for(F=this._map.getSize(),m=0;m<g.length;m++)w=this._map.latLngToLayerPoint(g[m].latLng),j?j.extend(w):j=V.bounds([w]);return((c=j.getSize()).x>F.x/5||c.y>F.y/5)&&this._waypointsInViewport()}catch{return!1}},_waypointsInViewport:function(){var F,j,g=this.getWaypoints();try{F=this._map.getBounds()}catch{return!1}for(j=0;j<g.length;j++)if(F.contains(g[j].latLng))return!0;return!1},_updateLines:function(g){var F=void 0===this.options.addWaypoints||this.options.addWaypoints;this._clearLines(),this._alternatives=[],g.alternatives&&g.alternatives.forEach(function(j,c){this._alternatives[c]=this.options.routeLine(j,V.extend({isAlternative:!0},this.options.altLineOptions||this.options.lineOptions)),this._alternatives[c].addTo(this._map),this._hookAltEvents(this._alternatives[c])},this),this._line=this.options.routeLine(g.route,V.extend({addWaypoints:F,extendToWaypoints:"connect"===this.options.waypointMode},this.options.lineOptions)),this._line.addTo(this._map),this._hookEvents(this._line)},_hookEvents:function(g){g.on("linetouched",function(F){this._plan.dragNewWaypoint(F)},this)},_hookAltEvents:function(g){g.on("linetouched",function(F){var j=this._routes.slice(),c=j.splice(F.target._route.routesIndex,1)[0];this.fire("routeselected",{route:c,alternatives:j})},this)},_onWaypointsChanged:function(g){this.options.autoRoute&&this.route({}),this._plan.isReady()||(this._clearLines(),this._clearAlts()),this.fire("waypointschanged",{waypoints:g.waypoints})},_setupRouteDragging:function(){var F,g=0;this._plan.on("waypointdrag",V.bind(function(j){F=j.waypoints,g||(g=setTimeout(V.bind(function(){this.route({waypoints:F,geometryOnly:!0,callback:V.bind(this._updateLineCallback,this)}),g=void 0},this),this.options.routeDragInterval))},this)),this._plan.on("waypointdragend",function(){g&&(clearTimeout(g),g=void 0),this.route()},this)},_updateLineCallback:function(g,F){if(g)"abort"!==g.type&&this._clearLines();else{var j=(F=F.slice()).splice(this._selectedRoute.routesIndex,1)[0];this._updateLines({route:j,alternatives:F})}},route:function(g){var j,F=++this._requestCount;this._pendingRequest&&this._pendingRequest.abort&&(this._pendingRequest.abort(),this._pendingRequest=null),g=g||{},this._plan.isReady()&&(this.options.useZoomParameter&&(g.z=this._map&&this._map.getZoom()),j=g&&g.waypoints||this._plan.getWaypoints(),this.fire("routingstart",{waypoints:j}),this._pendingRequest=this._router.route(j,function(c,m){if(this._pendingRequest=null,g.callback)return g.callback.call(this,c,m);if(F===this._requestCount){if(this._clearLines(),this._clearAlts(),c&&"abort"!==c.type)return void this.fire("routingerror",{error:c});if(m.forEach(function(x,P){x.routesIndex=P}),g.geometryOnly){var w=m.splice(0,1)[0];this._routeSelected({route:w,alternatives:m})}else this.fire("routesfound",{waypoints:j,routes:m}),this.setAlternatives(m)}},this,g))},_clearLines:function(){if(this._line&&(this._map.removeLayer(this._line),delete this._line),this._alternatives&&this._alternatives.length){for(var g in this._alternatives)this._map.removeLayer(this._alternatives[g]);this._alternatives=[]}}}),V.Routing.control=function(g){return new V.Routing.Control(g)},z.exports=V.Routing}()}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./L.Routing.ErrorControl":5,"./L.Routing.Itinerary":8,"./L.Routing.Line":10,"./L.Routing.Mapbox":12,"./L.Routing.OSRMv1":13,"./L.Routing.Plan":14}],5:[function(ue,z,re){!function(){"use strict";L.Routing=L.Routing||{},L.Routing.ErrorControl=L.Control.extend({options:{header:"Routing error",formatMessage:function(Y){return Y.status<0?"Calculating the route caused an error. Technical description follows: <code><pre>"+Y.message+"</pre></code":"The route could not be calculated. "+Y.message}},initialize:function(Y,V){L.Control.prototype.initialize.call(this,V),Y.on("routingerror",L.bind(function(g){this._element&&(this._element.children[1].innerHTML=this.options.formatMessage(g.error),this._element.style.visibility="visible")},this)).on("routingstart",L.bind(function(){this._element&&(this._element.style.visibility="hidden")},this))},onAdd:function(){var Y;return this._element=L.DomUtil.create("div","leaflet-bar leaflet-routing-error"),this._element.style.visibility="hidden",Y=L.DomUtil.create("h3",null,this._element),L.DomUtil.create("span",null,this._element),Y.innerHTML=this.options.header,this._element},onRemove:function(){delete this._element}}),L.Routing.errorControl=function(Y,V){return new L.Routing.ErrorControl(Y,V)}}()},{}],6:[function(ue,z,re){(function(Y){!function(){"use strict";var V=typeof window<"u"?window.L:typeof Y<"u"?Y.L:null;V.Routing=V.Routing||{},V.extend(V.Routing,ue("./L.Routing.Localization")),V.Routing.Formatter=V.Class.extend({options:{units:"metric",unitNames:null,language:"en",roundingSensitivity:1,distanceTemplate:"{value} {unit}"},initialize:function(g){V.setOptions(this,g);var F=V.Util.isArray(this.options.language)?this.options.language:[this.options.language,"en"];this._localization=new V.Routing.Localization(F)},formatDistance:function(g,F){var w,x,P,j=this.options.unitNames||this._localization.localize("units"),c=F<=0,m=c?function(q){return q}:V.bind(this._round,this);return P="imperial"===this.options.units?(x=g/.9144)>=1e3?{value:m(g/1609.344,F),unit:j.miles}:{value:m(x,F),unit:j.yards}:{value:(w=m(g,F))>=1e3?w/1e3:w,unit:w>=1e3?j.kilometers:j.meters},c&&(P.value=P.value.toFixed(-F)),V.Util.template(this.options.distanceTemplate,P)},_round:function(g,F){var c=Math.pow(10,(Math.floor(g/(F||this.options.roundingSensitivity))+"").length-1),w=Math.floor(g/c)>5?c:c/2;return Math.round(g/w)*w},formatTime:function(g){var F=this.options.unitNames||this._localization.localize("units");return(g=30*Math.round(g/30))>86400?Math.round(g/3600)+" "+F.hours:g>3600?Math.floor(g/3600)+" "+F.hours+" "+Math.round(g%3600/60)+" "+F.minutes:g>300?Math.round(g/60)+" "+F.minutes:g>60?Math.floor(g/60)+" "+F.minutes+(g%60!=0?" "+g%60+" "+F.seconds:""):g+" "+F.seconds},formatInstruction:function(g,F){return void 0===g.text?this.capitalize(V.Util.template(this._getInstructionTemplate(g,F),V.extend({},g,{exitStr:g.exit?this._localization.localize("formatOrder")(g.exit):"",dir:this._localization.localize(["directions",g.direction]),modifier:this._localization.localize(["directions",g.modifier])}))):g.text},getIconName:function(g,F){switch(g.type){case"Head":if(0===F)return"depart";break;case"WaypointReached":return"via";case"Roundabout":return"enter-roundabout";case"DestinationReached":return"arrive"}switch(g.modifier){case"Straight":return"continue";case"SlightRight":return"bear-right";case"Right":return"turn-right";case"SharpRight":return"sharp-right";case"TurnAround":case"Uturn":return"u-turn";case"SharpLeft":return"sharp-left";case"Left":return"turn-left";case"SlightLeft":return"bear-left"}},capitalize:function(g){return g.charAt(0).toUpperCase()+g.substring(1)},_getInstructionTemplate:function(g,F){var j="Straight"===g.type?0===F?"Head":"Continue":g.type,c=this._localization.localize(["instructions",j]);return c||(c=[this._localization.localize(["directions",j])," "+this._localization.localize(["instructions","Onto"])]),c[0]+(c.length>1&&g.road?c[1]:"")}}),z.exports=V.Routing}()}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./L.Routing.Localization":11}],7:[function(ue,z,re){(function(Y){!function(){"use strict";var V=typeof window<"u"?window.L:typeof Y<"u"?Y.L:null;function g(F){F.setSelectionRange?F.setSelectionRange(0,9999):F.select()}V.Routing=V.Routing||{},V.extend(V.Routing,ue("./L.Routing.Autocomplete")),V.Routing.GeocoderElement=V.Class.extend({includes:V.Mixin.Events,options:{createGeocoder:function(F,j,c){var m=V.DomUtil.create("div","leaflet-routing-geocoder"),w=V.DomUtil.create("input","",m),x=c.addWaypoints?V.DomUtil.create("span","leaflet-routing-remove-waypoint",m):void 0;return w.disabled=!c.addWaypoints,{container:m,input:w,closeButton:x}},geocoderPlaceholder:function(F,j,c){var m=new V.Routing.Localization(c.options.language).localize("ui");return 0===F?m.startPlaceholder:F<j-1?V.Util.template(m.viaPlaceholder,{viaNumber:F}):m.endPlaceholder},geocoderClass:function(){return""},waypointNameFallback:function(F){var c=F.lng<0?"W":"E";return(F.lat<0?"S":"N")+(Math.round(1e4*Math.abs(F.lat))/1e4).toString()+", "+c+(Math.round(1e4*Math.abs(F.lng))/1e4).toString()},maxGeocoderTolerance:200,autocompleteOptions:{},language:"en"},initialize:function(F,j,c,m){V.setOptions(this,m);var w=this.options.createGeocoder(j,c,this.options),x=w.closeButton,P=w.input;P.setAttribute("placeholder",this.options.geocoderPlaceholder(j,c,this)),P.className=this.options.geocoderClass(j,c),this._element=w,this._waypoint=F,this.update(),P.value=F.name,V.DomEvent.addListener(P,"click",function(){g(this)},P),x&&V.DomEvent.addListener(x,"click",function(){this.fire("delete",{waypoint:this._waypoint})},this),new V.Routing.Autocomplete(P,function(U){P.value=U.name,F.name=U.name,F.latLng=U.center,this.fire("geocoded",{waypoint:F,value:U})},this,V.extend({resultFn:this.options.geocoder.geocode,resultContext:this.options.geocoder,autocompleteFn:this.options.geocoder.suggest,autocompleteContext:this.options.geocoder},this.options.autocompleteOptions))},getContainer:function(){return this._element.container},setValue:function(F){this._element.input.value=F},update:function(F){var c,j=this._waypoint;j.name=j.name||"",j.latLng&&(F||!j.name)&&(c=this.options.waypointNameFallback(j.latLng),this.options.geocoder&&this.options.geocoder.reverse?this.options.geocoder.reverse(j.latLng,67108864,function(m){j.name=m.length>0&&m[0].center.distanceTo(j.latLng)<this.options.maxGeocoderTolerance?m[0].name:c,this._update()},this):(j.name=c,this._update()))},focus:function(){var F=this._element.input;F.focus(),g(F)},_update:function(){var F=this._waypoint,j=F&&F.name?F.name:"";this.setValue(j),this.fire("reversegeocoded",{waypoint:F,value:j})}}),V.Routing.geocoderElement=function(F,j,c,m){return new V.Routing.GeocoderElement(F,j,c,m)},z.exports=V.Routing}()}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./L.Routing.Autocomplete":3}],8:[function(ue,z,re){(function(Y){!function(){"use strict";var V=typeof window<"u"?window.L:typeof Y<"u"?Y.L:null;V.Routing=V.Routing||{},V.extend(V.Routing,ue("./L.Routing.Formatter")),V.extend(V.Routing,ue("./L.Routing.ItineraryBuilder")),V.Routing.Itinerary=V.Control.extend({includes:V.Mixin.Events,options:{pointMarkerStyle:{radius:5,color:"#03f",fillColor:"white",opacity:1,fillOpacity:.7},summaryTemplate:"<h2>{name}</h2><h3>{distance}, {time}</h3>",timeTemplate:"{time}",containerClassName:"",alternativeClassName:"",minimizedClassName:"",itineraryClassName:"",totalDistanceRoundingSensitivity:-1,show:!0,collapsible:void 0,collapseBtn:function(g){var F=V.DomUtil.create("span",g.options.collapseBtnClass);V.DomEvent.on(F,"click",g._toggle,g),g._container.insertBefore(F,g._container.firstChild)},collapseBtnClass:"leaflet-routing-collapse-btn"},initialize:function(g){V.setOptions(this,g),this._formatter=this.options.formatter||new V.Routing.Formatter(this.options),this._itineraryBuilder=this.options.itineraryBuilder||new V.Routing.ItineraryBuilder({containerClassName:this.options.itineraryClassName})},onAdd:function(g){var F=this.options.collapsible;return F=F||void 0===F&&g.getSize().x<=640,this._container=V.DomUtil.create("div","leaflet-routing-container leaflet-bar "+(this.options.show?"":"leaflet-routing-container-hide ")+(F?"leaflet-routing-collapsible ":"")+this.options.containerClassName),this._altContainer=this.createAlternativesContainer(),this._container.appendChild(this._altContainer),V.DomEvent.disableClickPropagation(this._container),V.DomEvent.addListener(this._container,"mousewheel",function(j){V.DomEvent.stopPropagation(j)}),F&&this.options.collapseBtn(this),this._container},onRemove:function(){},createAlternativesContainer:function(){return V.DomUtil.create("div","leaflet-routing-alternatives-container")},setAlternatives:function(g){var F,c;for(this._clearAlts(),this._routes=g,F=0;F<this._routes.length;F++)c=this._createAlternative(this._routes[F],F),this._altContainer.appendChild(c),this._altElements.push(c);return this._selectRoute({route:this._routes[0],alternatives:this._routes.slice(1)}),this},show:function(){V.DomUtil.removeClass(this._container,"leaflet-routing-container-hide")},hide:function(){V.DomUtil.addClass(this._container,"leaflet-routing-container-hide")},_toggle:function(){this[V.DomUtil.hasClass(this._container,"leaflet-routing-container-hide")?"show":"hide"]()},_createAlternative:function(g,F){var j=V.DomUtil.create("div","leaflet-routing-alt "+this.options.alternativeClassName+(F>0?" leaflet-routing-alt-minimized "+this.options.minimizedClassName:"")),c=this.options.summaryTemplate,m=V.extend({name:g.name,distance:this._formatter.formatDistance(g.summary.totalDistance,this.options.totalDistanceRoundingSensitivity),time:this._formatter.formatTime(g.summary.totalTime)},g);return j.innerHTML="function"==typeof c?c(m):V.Util.template(c,m),V.DomEvent.addListener(j,"click",this._onAltClicked,this),this.on("routeselected",this._selectAlt,this),j.appendChild(this._createItineraryContainer(g)),j},_clearAlts:function(){for(var g=this._altContainer;g&&g.firstChild;)g.removeChild(g.firstChild);this._altElements=[]},_createItineraryContainer:function(g){var c,m,w,x,P,U,F=this._itineraryBuilder.createContainer(),j=this._itineraryBuilder.createStepsContainer();for(F.appendChild(j),c=0;c<g.instructions.length;c++)P=this._formatter.formatInstruction(m=g.instructions[c],c),x=this._formatter.formatDistance(m.distance),U=this._formatter.getIconName(m,c),w=this._itineraryBuilder.createStep(P,x,U,j),this._addRowListeners(w,g.coordinates[m.index]);return F},_addRowListeners:function(g,F){V.DomEvent.addListener(g,"mouseover",function(){this._marker=V.circleMarker(F,this.options.pointMarkerStyle).addTo(this._map)},this),V.DomEvent.addListener(g,"mouseout",function(){this._marker&&(this._map.removeLayer(this._marker),delete this._marker)},this),V.DomEvent.addListener(g,"click",function(j){this._map.panTo(F),V.DomEvent.stopPropagation(j)},this)},_onAltClicked:function(g){for(var F=g.target||window.event.srcElement;!V.DomUtil.hasClass(F,"leaflet-routing-alt");)F=F.parentElement;var j=this._altElements.indexOf(F),c=this._routes.slice(),m=c.splice(j,1)[0];this.fire("routeselected",{route:m,alternatives:c})},_selectAlt:function(g){var j,c,m;if(V.DomUtil.hasClass(this._altElements[g.route.routesIndex],"leaflet-routing-alt-minimized"))for(j=0;j<this._altElements.length;j++)V.DomUtil[m=j===g.route.routesIndex?"removeClass":"addClass"](c=this._altElements[j],"leaflet-routing-alt-minimized"),this.options.minimizedClassName&&V.DomUtil[m](c,this.options.minimizedClassName),j!==g.route.routesIndex&&(c.scrollTop=0);V.DomEvent.stop(g)},_selectRoute:function(g){this._marker&&(this._map.removeLayer(this._marker),delete this._marker),this.fire("routeselected",g)}}),V.Routing.itinerary=function(g){return new V.Routing.Itinerary(g)},z.exports=V.Routing}()}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./L.Routing.Formatter":6,"./L.Routing.ItineraryBuilder":9}],9:[function(ue,z,re){(function(Y){!function(){"use strict";var V=typeof window<"u"?window.L:typeof Y<"u"?Y.L:null;V.Routing=V.Routing||{},V.Routing.ItineraryBuilder=V.Class.extend({options:{containerClassName:""},initialize:function(g){V.setOptions(this,g)},createContainer:function(g){var F=V.DomUtil.create("table",g||""),j=V.DomUtil.create("colgroup","",F);return V.DomUtil.create("col","leaflet-routing-instruction-icon",j),V.DomUtil.create("col","leaflet-routing-instruction-text",j),V.DomUtil.create("col","leaflet-routing-instruction-distance",j),F},createStepsContainer:function(){return V.DomUtil.create("tbody","")},createStep:function(g,F,j,c){var w,x,m=V.DomUtil.create("tr","",c);return x=V.DomUtil.create("td","",m),w=V.DomUtil.create("span","leaflet-routing-icon leaflet-routing-icon-"+j,x),x.appendChild(w),(x=V.DomUtil.create("td","",m)).appendChild(document.createTextNode(g)),(x=V.DomUtil.create("td","",m)).appendChild(document.createTextNode(F)),m}}),z.exports=V.Routing}()}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],10:[function(ue,z,re){(function(Y){!function(){"use strict";var V=typeof window<"u"?window.L:typeof Y<"u"?Y.L:null;V.Routing=V.Routing||{},V.Routing.Line=V.LayerGroup.extend({includes:V.Mixin.Events,options:{styles:[{color:"black",opacity:.15,weight:9},{color:"white",opacity:.8,weight:6},{color:"red",opacity:1,weight:2}],missingRouteStyles:[{color:"black",opacity:.15,weight:7},{color:"white",opacity:.6,weight:4},{color:"gray",opacity:.8,weight:2,dashArray:"7,12"}],addWaypoints:!0,extendToWaypoints:!0,missingRouteTolerance:10},initialize:function(g,F){V.setOptions(this,F),V.LayerGroup.prototype.initialize.call(this,F),this._route=g,this.options.extendToWaypoints&&this._extendToWaypoints(),this._addSegment(g.coordinates,this.options.styles,this.options.addWaypoints)},getBounds:function(){return V.latLngBounds(this._route.coordinates)},_findWaypointIndices:function(){var j,g=this._route.inputWaypoints,F=[];for(j=0;j<g.length;j++)F.push(this._findClosestRoutePoint(g[j].latLng));return F},_findClosestRoutePoint:function(g){var j,c,m,F=Number.MAX_VALUE;for(c=this._route.coordinates.length-1;c>=0;c--)(m=g.distanceTo(this._route.coordinates[c]))<F&&(j=c,F=m);return j},_extendToWaypoints:function(){var j,c,m,g=this._route.inputWaypoints,F=this._getWaypointIndices();for(j=0;j<g.length;j++)c=g[j].latLng,m=V.latLng(this._route.coordinates[F[j]]),c.distanceTo(m)>this.options.missingRouteTolerance&&this._addSegment([c,m],this.options.missingRouteStyles)},_addSegment:function(g,F,j){var c,m;for(c=0;c<F.length;c++)m=V.polyline(g,F[c]),this.addLayer(m),j&&m.on("mousedown",this._onLineTouched,this)},_findNearestWpBefore:function(g){for(var F=this._getWaypointIndices(),j=F.length-1;j>=0&&F[j]>g;)j--;return j},_onLineTouched:function(g){var F=this._findNearestWpBefore(this._findClosestRoutePoint(g.latlng));this.fire("linetouched",{afterIndex:F,latlng:g.latlng})},_getWaypointIndices:function(){return this._wpIndices||(this._wpIndices=this._route.waypointIndices||this._findWaypointIndices()),this._wpIndices}}),V.Routing.line=function(g,F){return new V.Routing.Line(g,F)},z.exports=V.Routing}()}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],11:[function(ue,z,re){!function(){"use strict";var Y={directions:{N:"norte",NE:"noreste",E:"este",SE:"sureste",S:"sur",SW:"suroeste",W:"oeste",NW:"noroeste",SlightRight:"leve giro a la derecha",Right:"derecha",SharpRight:"giro pronunciado a la derecha",SlightLeft:"leve giro a la izquierda",Left:"izquierda",SharpLeft:"giro pronunciado a la izquierda",Uturn:"media vuelta"},instructions:{Head:["Derecho {dir}"," sobre {road}"],Continue:["Continuar {dir}"," en {road}"],TurnAround:["Dar vuelta"],WaypointReached:["Lleg\xf3 a un punto del camino"],Roundabout:["Tomar {exitStr} salida en la rotonda"," en {road}"],DestinationReached:["Llegada a destino"],Fork:["En el cruce gira a {modifier}"," hacia {road}"],Merge:["Incorp\xf3rate {modifier}"," hacia {road}"],OnRamp:["Gira {modifier} en la salida"," hacia {road}"],OffRamp:["Toma la salida {modifier}"," hacia {road}"],EndOfRoad:["Gira {modifier} al final de la carretera"," hacia {road}"],Onto:"hacia {road}"},formatOrder:function(V){return V+"\xba"},ui:{startPlaceholder:"Inicio",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Destino"},units:{meters:"m",kilometers:"km",yards:"yd",miles:"mi",hours:"h",minutes:"min",seconds:"s"}};L.Routing=L.Routing||{},L.Routing.Localization=L.Class.extend({initialize:function(V){this._langs=L.Util.isArray(V)?V:[V,"en"];for(var g=0,F=this._langs.length;g<F;g++)if(!L.Routing.Localization[this._langs[g]])throw new Error('No localization for language "'+this._langs[g]+'".')},localize:function(V){var g,j;V=L.Util.isArray(V)?V:[V];for(var c=0,m=this._langs.length;c<m;c++){g=L.Routing.Localization[this._langs[c]];for(var w=0,x=V.length;g&&w<x;w++)g=j=g[V[w]];if(j)return j}}}),L.Routing.Localization=L.extend(L.Routing.Localization,{en:{directions:{N:"north",NE:"northeast",E:"east",SE:"southeast",S:"south",SW:"southwest",W:"west",NW:"northwest",SlightRight:"slight right",Right:"right",SharpRight:"sharp right",SlightLeft:"slight left",Left:"left",SharpLeft:"sharp left",Uturn:"Turn around"},instructions:{Head:["Head {dir}"," on {road}"],Continue:["Continue {dir}"],TurnAround:["Turn around"],WaypointReached:["Waypoint reached"],Roundabout:["Take the {exitStr} exit in the roundabout"," onto {road}"],DestinationReached:["Destination reached"],Fork:["At the fork, turn {modifier}"," onto {road}"],Merge:["Merge {modifier}"," onto {road}"],OnRamp:["Turn {modifier} on the ramp"," onto {road}"],OffRamp:["Take the ramp on the {modifier}"," onto {road}"],EndOfRoad:["Turn {modifier} at the end of the road"," onto {road}"],Onto:"onto {road}"},formatOrder:function(V){var g=V%10-1,F=["st","nd","rd"];return F[g]?V+F[g]:V+"th"},ui:{startPlaceholder:"Start",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"End"},units:{meters:"m",kilometers:"km",yards:"yd",miles:"mi",hours:"h",minutes:"min",seconds:"s"}},de:{directions:{N:"Norden",NE:"Nordosten",E:"Osten",SE:"S\xfcdosten",S:"S\xfcden",SW:"S\xfcdwesten",W:"Westen",NW:"Nordwesten"},instructions:{Head:["Richtung {dir}"," auf {road}"],Continue:["Geradeaus Richtung {dir}"," auf {road}"],SlightRight:["Leicht rechts abbiegen"," auf {road}"],Right:["Rechts abbiegen"," auf {road}"],SharpRight:["Scharf rechts abbiegen"," auf {road}"],TurnAround:["Wenden"],SharpLeft:["Scharf links abbiegen"," auf {road}"],Left:["Links abbiegen"," auf {road}"],SlightLeft:["Leicht links abbiegen"," auf {road}"],WaypointReached:["Zwischenhalt erreicht"],Roundabout:["Nehmen Sie die {exitStr} Ausfahrt im Kreisverkehr"," auf {road}"],DestinationReached:["Sie haben ihr Ziel erreicht"]},formatOrder:function(V){return V+"."},ui:{startPlaceholder:"Start",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Ziel"}},sv:{directions:{N:"norr",NE:"nordost",E:"\xf6st",SE:"sydost",S:"syd",SW:"sydv\xe4st",W:"v\xe4st",NW:"nordv\xe4st",SlightRight:"svagt h\xf6ger",Right:"h\xf6ger",SharpRight:"skarpt h\xf6ger",SlightLeft:"svagt v\xe4nster",Left:"v\xe4nster",SharpLeft:"skarpt v\xe4nster",Uturn:"V\xe4nd"},instructions:{Head:["\xc5k \xe5t {dir}"," till {road}"],Continue:["Forts\xe4tt {dir}"],SlightRight:["Svagt h\xf6ger"," till {road}"],Right:["Sv\xe4ng h\xf6ger"," till {road}"],SharpRight:["Skarpt h\xf6ger"," till {road}"],TurnAround:["V\xe4nd"],SharpLeft:["Skarpt v\xe4nster"," till {road}"],Left:["Sv\xe4ng v\xe4nster"," till {road}"],SlightLeft:["Svagt v\xe4nster"," till {road}"],WaypointReached:["Viapunkt n\xe5dd"],Roundabout:["Tag {exitStr} avfarten i rondellen"," till {road}"],DestinationReached:["Framme vid resans m\xe5l"],Fork:["Tag av {modifier}"," till {road}"],Merge:["Anslut {modifier} "," till {road}"],OnRamp:["Tag p\xe5farten {modifier}"," till {road}"],OffRamp:["Tag avfarten {modifier}"," till {road}"],EndOfRoad:["Sv\xe4ng {modifier} vid v\xe4gens slut"," till {road}"],Onto:"till {road}"},formatOrder:function(V){return["f\xf6rsta","andra","tredje","fj\xe4rde","femte","sj\xe4tte","sjunde","\xe5ttonde","nionde","tionde"][V-1]},ui:{startPlaceholder:"Fr\xe5n",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Till"}},es:Y,sp:Y,nl:{directions:{N:"noordelijke",NE:"noordoostelijke",E:"oostelijke",SE:"zuidoostelijke",S:"zuidelijke",SW:"zuidewestelijke",W:"westelijke",NW:"noordwestelijke"},instructions:{Head:["Vertrek in {dir} richting"," de {road} op"],Continue:["Ga in {dir} richting"," de {road} op"],SlightRight:["Volg de weg naar rechts"," de {road} op"],Right:["Ga rechtsaf"," de {road} op"],SharpRight:["Ga scherpe bocht naar rechts"," de {road} op"],TurnAround:["Keer om"],SharpLeft:["Ga scherpe bocht naar links"," de {road} op"],Left:["Ga linksaf"," de {road} op"],SlightLeft:["Volg de weg naar links"," de {road} op"],WaypointReached:["Aangekomen bij tussenpunt"],Roundabout:["Neem de {exitStr} afslag op de rotonde"," de {road} op"],DestinationReached:["Aangekomen op eindpunt"]},formatOrder:function(V){return 1===V||V>=20?V+"ste":V+"de"},ui:{startPlaceholder:"Vertrekpunt",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Bestemming"}},fr:{directions:{N:"nord",NE:"nord-est",E:"est",SE:"sud-est",S:"sud",SW:"sud-ouest",W:"ouest",NW:"nord-ouest"},instructions:{Head:["Tout droit au {dir}"," sur {road}"],Continue:["Continuer au {dir}"," sur {road}"],SlightRight:["L\xe9g\xe8rement \xe0 droite"," sur {road}"],Right:["A droite"," sur {road}"],SharpRight:["Compl\xe8tement \xe0 droite"," sur {road}"],TurnAround:["Faire demi-tour"],SharpLeft:["Compl\xe8tement \xe0 gauche"," sur {road}"],Left:["A gauche"," sur {road}"],SlightLeft:["L\xe9g\xe8rement \xe0 gauche"," sur {road}"],WaypointReached:["Point d'\xe9tape atteint"],Roundabout:["Au rond-point, prenez la {exitStr} sortie"," sur {road}"],DestinationReached:["Destination atteinte"]},formatOrder:function(V){return V+"\xba"},ui:{startPlaceholder:"D\xe9part",viaPlaceholder:"Interm\xe9diaire {viaNumber}",endPlaceholder:"Arriv\xe9e"}},it:{directions:{N:"nord",NE:"nord-est",E:"est",SE:"sud-est",S:"sud",SW:"sud-ovest",W:"ovest",NW:"nord-ovest"},instructions:{Head:["Dritto verso {dir}"," su {road}"],Continue:["Continuare verso {dir}"," su {road}"],SlightRight:["Mantenere la destra"," su {road}"],Right:["A destra"," su {road}"],SharpRight:["Strettamente a destra"," su {road}"],TurnAround:["Fare inversione di marcia"],SharpLeft:["Strettamente a sinistra"," su {road}"],Left:["A sinistra"," sur {road}"],SlightLeft:["Mantenere la sinistra"," su {road}"],WaypointReached:["Punto di passaggio raggiunto"],Roundabout:["Alla rotonda, prendere la {exitStr} uscita"],DestinationReached:["Destinazione raggiunta"]},formatOrder:function(V){return V+"\xba"},ui:{startPlaceholder:"Partenza",viaPlaceholder:"Intermedia {viaNumber}",endPlaceholder:"Destinazione"}},pt:{directions:{N:"norte",NE:"nordeste",E:"leste",SE:"sudeste",S:"sul",SW:"sudoeste",W:"oeste",NW:"noroeste",SlightRight:"curva ligeira a direita",Right:"direita",SharpRight:"curva fechada a direita",SlightLeft:"ligeira a esquerda",Left:"esquerda",SharpLeft:"curva fechada a esquerda",Uturn:"Meia volta"},instructions:{Head:["Siga {dir}"," na {road}"],Continue:["Continue {dir}"," na {road}"],SlightRight:["Curva ligeira a direita"," na {road}"],Right:["Curva a direita"," na {road}"],SharpRight:["Curva fechada a direita"," na {road}"],TurnAround:["Retorne"],SharpLeft:["Curva fechada a esquerda"," na {road}"],Left:["Curva a esquerda"," na {road}"],SlightLeft:["Curva ligueira a esquerda"," na {road}"],WaypointReached:["Ponto de interesse atingido"],Roundabout:["Pegue a {exitStr} sa\xedda na rotat\xf3ria"," na {road}"],DestinationReached:["Destino atingido"],Fork:["Na encruzilhada, vire a {modifier}"," na {road}"],Merge:["Entre \xe0 {modifier}"," na {road}"],OnRamp:["Vire {modifier} na rampa"," na {road}"],OffRamp:["Entre na rampa na {modifier}"," na {road}"],EndOfRoad:["Vire {modifier} no fim da rua"," na {road}"],Onto:"na {road}"},formatOrder:function(V){return V+"\xba"},ui:{startPlaceholder:"Origem",viaPlaceholder:"Interm\xe9dio {viaNumber}",endPlaceholder:"Destino"}},sk:{directions:{N:"sever",NE:"serverov\xfdchod",E:"v\xfdchod",SE:"juhov\xfdchod",S:"juh",SW:"juhoz\xe1pad",W:"z\xe1pad",NW:"serveroz\xe1pad"},instructions:{Head:["Mierte na {dir}"," na {road}"],Continue:["Pokra\u010dujte na {dir}"," na {road}"],SlightRight:["Mierne doprava"," na {road}"],Right:["Doprava"," na {road}"],SharpRight:["Prudko doprava"," na {road}"],TurnAround:["Oto\u010dte sa"],SharpLeft:["Prudko do\u013eava"," na {road}"],Left:["Do\u013eava"," na {road}"],SlightLeft:["Mierne do\u013eava"," na {road}"],WaypointReached:["Ste v prejazdovom bode."],Roundabout:["Odbo\u010dte na {exitStr} v\xfdjazde"," na {road}"],DestinationReached:["Pri\u0161li ste do cie\u013ea."]},formatOrder:function(V){var g=V%10-1,F=[".",".","."];return F[g]?V+F[g]:V+"."},ui:{startPlaceholder:"Za\u010diatok",viaPlaceholder:"Cez {viaNumber}",endPlaceholder:"Koniec"}},el:{directions:{N:"\u03b2\u03cc\u03c1\u03b5\u03b9\u03b1",NE:"\u03b2\u03bf\u03c1\u03b5\u03b9\u03bf\u03b1\u03bd\u03b1\u03c4\u03bf\u03bb\u03b9\u03ba\u03ac",E:"\u03b1\u03bd\u03b1\u03c4\u03bf\u03bb\u03b9\u03ba\u03ac",SE:"\u03bd\u03bf\u03c4\u03b9\u03bf\u03b1\u03bd\u03b1\u03c4\u03bf\u03bb\u03b9\u03ba\u03ac",S:"\u03bd\u03cc\u03c4\u03b9\u03b1",SW:"\u03bd\u03bf\u03c4\u03b9\u03bf\u03b4\u03c5\u03c4\u03b9\u03ba\u03ac",W:"\u03b4\u03c5\u03c4\u03b9\u03ba\u03ac",NW:"\u03b2\u03bf\u03c1\u03b5\u03b9\u03bf\u03b4\u03c5\u03c4\u03b9\u03ba\u03ac"},instructions:{Head:["\u039a\u03b1\u03c4\u03b5\u03c5\u03b8\u03c5\u03bd\u03b8\u03b5\u03af\u03c4\u03b5 {dir}"," \u03c3\u03c4\u03b7\u03bd {road}"],Continue:["\u03a3\u03c5\u03bd\u03b5\u03c7\u03af\u03c3\u03c4\u03b5 {dir}"," \u03c3\u03c4\u03b7\u03bd {road}"],SlightRight:["\u0395\u03bb\u03b1\u03c6\u03c1\u03ce\u03c2 \u03b4\u03b5\u03be\u03b9\u03ac"," \u03c3\u03c4\u03b7\u03bd {road}"],Right:["\u0394\u03b5\u03be\u03b9\u03ac"," \u03c3\u03c4\u03b7\u03bd {road}"],SharpRight:["\u0391\u03c0\u03cc\u03c4\u03bf\u03bc\u03b7 \u03b4\u03b5\u03be\u03b9\u03ac \u03c3\u03c4\u03c1\u03bf\u03c6\u03ae"," \u03c3\u03c4\u03b7\u03bd {road}"],TurnAround:["\u039a\u03ac\u03bd\u03c4\u03b5 \u03b1\u03bd\u03b1\u03c3\u03c4\u03c1\u03bf\u03c6\u03ae"],SharpLeft:["\u0391\u03c0\u03cc\u03c4\u03bf\u03bc\u03b7 \u03b1\u03c1\u03b9\u03c3\u03c4\u03b5\u03c1\u03ae \u03c3\u03c4\u03c1\u03bf\u03c6\u03ae"," \u03c3\u03c4\u03b7\u03bd {road}"],Left:["\u0391\u03c1\u03b9\u03c3\u03c4\u03b5\u03c1\u03ac"," \u03c3\u03c4\u03b7\u03bd {road}"],SlightLeft:["\u0395\u03bb\u03b1\u03c6\u03c1\u03ce\u03c2 \u03b1\u03c1\u03b9\u03c3\u03c4\u03b5\u03c1\u03ac"," \u03c3\u03c4\u03b7\u03bd {road}"],WaypointReached:["\u03a6\u03c4\u03ac\u03c3\u03b1\u03c4\u03b5 \u03c3\u03c4\u03bf \u03c3\u03b7\u03bc\u03b5\u03af\u03bf \u03b1\u03bd\u03b1\u03c6\u03bf\u03c1\u03ac\u03c2"],Roundabout:["\u0391\u03ba\u03bf\u03bb\u03bf\u03c5\u03b8\u03ae\u03c3\u03c4\u03b5 \u03c4\u03b7\u03bd {exitStr} \u03ad\u03be\u03bf\u03b4\u03bf \u03c3\u03c4\u03bf \u03ba\u03c5\u03ba\u03bb\u03b9\u03ba\u03cc \u03ba\u03cc\u03bc\u03b2\u03bf"," \u03c3\u03c4\u03b7\u03bd {road}"],DestinationReached:["\u03a6\u03c4\u03ac\u03c3\u03b1\u03c4\u03b5 \u03c3\u03c4\u03bf\u03bd \u03c0\u03c1\u03bf\u03bf\u03c1\u03b9\u03c3\u03bc\u03cc \u03c3\u03b1\u03c2"]},formatOrder:function(V){return V+"\xba"},ui:{startPlaceholder:"\u0391\u03c6\u03b5\u03c4\u03b7\u03c1\u03af\u03b1",viaPlaceholder:"\u03bc\u03ad\u03c3\u03c9 {viaNumber}",endPlaceholder:"\u03a0\u03c1\u03bf\u03bf\u03c1\u03b9\u03c3\u03bc\u03cc\u03c2"}},ca:{directions:{N:"nord",NE:"nord-est",E:"est",SE:"sud-est",S:"sud",SW:"sud-oest",W:"oest",NW:"nord-oest",SlightRight:"lleu gir a la dreta",Right:"dreta",SharpRight:"gir pronunciat a la dreta",SlightLeft:"gir pronunciat a l'esquerra",Left:"esquerra",SharpLeft:"lleu gir a l'esquerra",Uturn:"mitja volta"},instructions:{Head:["Recte {dir}"," sobre {road}"],Continue:["Continuar {dir}"],TurnAround:["Donar la volta"],WaypointReached:["Ha arribat a un punt del cam\xed"],Roundabout:["Agafar {exitStr} sortida a la rotonda"," a {road}"],DestinationReached:["Arribada al dest\xed"],Fork:["A la cru\xeflla gira a la {modifier}"," cap a {road}"],Merge:["Incorpora't {modifier}"," a {road}"],OnRamp:["Gira {modifier} a la sortida"," cap a {road}"],OffRamp:["Pren la sortida {modifier}"," cap a {road}"],EndOfRoad:["Gira {modifier} al final de la carretera"," cap a {road}"],Onto:"cap a {road}"},formatOrder:function(V){return V+"\xba"},ui:{startPlaceholder:"Origen",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Dest\xed"},units:{meters:"m",kilometers:"km",yards:"yd",miles:"mi",hours:"h",minutes:"min",seconds:"s"}}}),z.exports=L.Routing}()},{}],12:[function(ue,z,re){(function(Y){!function(){"use strict";var V=typeof window<"u"?window.L:typeof Y<"u"?Y.L:null;V.Routing=V.Routing||{},V.extend(V.Routing,ue("./L.Routing.OSRMv1")),V.Routing.Mapbox=V.Routing.OSRMv1.extend({options:{serviceUrl:"https://api.mapbox.com/directions/v5",profile:"mapbox/driving",useHints:!1},initialize:function(g,F){V.Routing.OSRMv1.prototype.initialize.call(this,F),this.options.requestParameters=this.options.requestParameters||{},this.options.requestParameters.access_token=g}}),V.Routing.mapbox=function(g,F){return new V.Routing.Mapbox(g,F)},z.exports=V.Routing}()}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./L.Routing.OSRMv1":13}],13:[function(ue,z,re){(function(Y){!function(){"use strict";var V=typeof window<"u"?window.L:typeof Y<"u"?Y.L:null,g=ue("corslite"),F=ue("polyline");V.Routing=V.Routing||{},V.extend(V.Routing,ue("./L.Routing.Waypoint")),V.Routing.OSRMv1=V.Class.extend({options:{serviceUrl:"https://router.project-osrm.org/route/v1",profile:"driving",timeout:3e4,routingOptions:{alternatives:!0,steps:!0},polylinePrecision:5,useHints:!0},initialize:function(j){V.Util.setOptions(this,j),this._hints={locations:{}}},route:function(j,c,m,w){var U,q,X,te,me,x=!1,P=[];for(w=V.extend({},this.options.routingOptions,w),U=this.buildRouteUrl(j,w),this.options.requestParameters&&(U+=V.Util.getParamString(this.options.requestParameters,U)),q=setTimeout(function(){x=!0,c.call(m||c,{status:-1,message:"OSRM request timed out."})},this.options.timeout),te=0;te<j.length;te++)P.push(new V.Routing.Waypoint((X=j[te]).latLng,X.name,X.options));return me=g(U,V.bind(function(Me,De){var Ee,Ie={};if(clearTimeout(q),x)me.abort();else{if(Me)Ie.message="HTTP request failed: "+Me.type+(Me.target&&Me.target.status?" HTTP "+Me.target.status+": "+Me.target.statusText:""),Ie.url=U,Ie.status=-1,Ie.target=Me;else try{Ee=JSON.parse(De.responseText);try{return this._routeDone(Ee,P,w,c,m)}catch(He){Ie.status=-3,Ie.message=He.toString()}}catch(He){Ie.status=-2,Ie.message="Error parsing OSRM response: "+He.toString()}c.call(m||c,Ie)}},this))},requiresMoreDetail:function(j,c,m){if(!j.properties.isSimplified)return!1;var x,w=j.inputWaypoints;for(x=0;x<w.length;++x)if(!m.contains(w[x].latLng))return!0;return!1},_routeDone:function(j,c,m,w,x){var U,q,X,P=[];if(x=x||w,"Ok"===j.code){for(U=this._toWaypoints(c,j.waypoints),q=0;q<j.routes.length;q++)(X=this._convertRoute(j.routes[q])).inputWaypoints=c,X.waypoints=U,X.properties={isSimplified:!m||!m.geometryOnly||m.simplifyGeometry},P.push(X);this._saveHintData(j.waypoints,c),w.call(x,null,P)}else w.call(x,{status:j.code})},_convertRoute:function(j){var U,q,X,te,me,Me,De,c={name:"",coordinates:[],instructions:[],summary:{totalDistance:j.distance,totalTime:j.duration}},m=[],w=0,x=j.legs.length,P=j.legs[0].steps.length>0;for(U=0;U<x;U++)for(m.push((X=j.legs[U]).summary&&X.summary.charAt(0).toUpperCase()+X.summary.substring(1)),q=0;q<X.steps.length;q++)me=this._decodePolyline((te=X.steps[q]).geometry),c.coordinates.push.apply(c.coordinates,me),Me=this._maneuverToInstructionType(te.maneuver,U===x-1),De=this._maneuverToModifier(te.maneuver),Me&&c.instructions.push({type:Me,distance:te.distance,time:te.duration,road:te.name,direction:this._bearingToDirection(te.maneuver.bearing_after),exit:te.maneuver.exit,index:w,mode:te.mode,modifier:De}),w+=me.length;return c.name=m.join(", "),P||(c.coordinates=this._decodePolyline(j.geometry)),c},_bearingToDirection:function(j){return["N","NE","E","SE","S","SW","W","NW"][Math.round(j/45)%8]},_maneuverToInstructionType:function(j,c){switch(j.type){case"new name":return"Continue";case"depart":return"Head";case"arrive":return c?"DestinationReached":"WaypointReached";case"roundabout":case"rotary":return"Roundabout";case"merge":case"fork":case"on ramp":case"off ramp":case"end of road":return this._camelCase(j.type);default:return this._camelCase(j.modifier)}},_maneuverToModifier:function(j){var c=j.modifier;switch(j.type){case"merge":case"fork":case"on ramp":case"off ramp":case"end of road":c=this._leftOrRight(c)}return c&&this._camelCase(c)},_camelCase:function(j){for(var c=j.split(" "),m="",w=0,x=c.length;w<x;w++)m+=c[w].charAt(0).toUpperCase()+c[w].substring(1);return m},_leftOrRight:function(j){return j.indexOf("left")>=0?"Left":"Right"},_decodePolyline:function(j){var w,c=F.decode(j,this.options.polylinePrecision),m=new Array(c.length);for(w=c.length-1;w>=0;w--)m[w]=V.latLng(c[w]);return m},_toWaypoints:function(j,c){var w,x,m=[];for(w=0;w<c.length;w++)m.push(V.Routing.waypoint(V.latLng((x=c[w].location)[1],x[0]),j[w].name,j[w].options));return m},buildRouteUrl:function(j,c){for(var P,U,m=[],w=[],X=0;X<j.length;X++)m.push((P=j[X].latLng).lng+","+P.lat),w.push(this._hints.locations[this._locationKey(P)]||"");return U=!(c&&c.geometryOnly),this.options.serviceUrl+"/"+this.options.profile+"/"+m.join(";")+"?"+(c.geometryOnly?c.simplifyGeometry?"":"overview=full":"overview=false")+"&alternatives="+(!0).toString()+"&steps="+U.toString()+(this.options.useHints?"&hints="+w.join(";"):"")+(c.allowUTurns?"&continue_straight="+!c.allowUTurns:"")},_locationKey:function(j){return j.lat+","+j.lng},_saveHintData:function(j,c){this._hints={locations:{}};for(var w=j.length-1;w>=0;w--)this._hints.locations[this._locationKey(c[w].latLng)]=j[w].hint}}),V.Routing.osrmv1=function(j){return new V.Routing.OSRMv1(j)},z.exports=V.Routing}()}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./L.Routing.Waypoint":15,corslite:1,polyline:2}],14:[function(ue,z,re){(function(Y){!function(){"use strict";var V=typeof window<"u"?window.L:typeof Y<"u"?Y.L:null;V.Routing=V.Routing||{},V.extend(V.Routing,ue("./L.Routing.GeocoderElement")),V.extend(V.Routing,ue("./L.Routing.Waypoint")),V.Routing.Plan=(V.Layer||V.Class).extend({includes:V.Mixin.Events,options:{dragStyles:[{color:"black",opacity:.15,weight:9},{color:"white",opacity:.8,weight:6},{color:"red",opacity:1,weight:2,dashArray:"7,12"}],draggableWaypoints:!0,routeWhileDragging:!1,addWaypoints:!0,reverseWaypoints:!1,addButtonClassName:"",language:"en",createGeocoderElement:V.Routing.geocoderElement,createMarker:function(g,F){return V.marker(F.latLng,{draggable:this.draggableWaypoints})},geocodersClassName:""},initialize:function(g,F){V.Util.setOptions(this,F),this._waypoints=[],this.setWaypoints(g)},isReady:function(){var g;for(g=0;g<this._waypoints.length;g++)if(!this._waypoints[g].latLng)return!1;return!0},getWaypoints:function(){var g,F=[];for(g=0;g<this._waypoints.length;g++)F.push(this._waypoints[g]);return F},setWaypoints:function(g){var F=[0,this._waypoints.length].concat(g);return this.spliceWaypoints.apply(this,F),this},spliceWaypoints:function(){var F,g=[arguments[0],arguments[1]];for(F=2;F<arguments.length;F++)g.push(arguments[F]&&arguments[F].hasOwnProperty("latLng")?arguments[F]:V.Routing.waypoint(arguments[F]));for([].splice.apply(this._waypoints,g);this._waypoints.length<2;)this.spliceWaypoints(this._waypoints.length,0,null);this._updateMarkers(),this._fireChanged.apply(this,g)},onAdd:function(g){this._map=g,this._updateMarkers()},onRemove:function(){var g;if(this._removeMarkers(),this._newWp)for(g=0;g<this._newWp.lines.length;g++)this._map.removeLayer(this._newWp.lines[g]);delete this._map},createGeocoders:function(){var j,c,g=V.DomUtil.create("div","leaflet-routing-geocoders "+this.options.geocodersClassName),F=this._waypoints;return this._geocoderContainer=g,this._geocoderElems=[],this.options.addWaypoints&&((j=V.DomUtil.create("button","leaflet-routing-add-waypoint "+this.options.addButtonClassName,g)).setAttribute("type","button"),V.DomEvent.addListener(j,"click",function(){this.spliceWaypoints(F.length,0,null)},this)),this.options.reverseWaypoints&&((c=V.DomUtil.create("button","leaflet-routing-reverse-waypoints",g)).setAttribute("type","button"),V.DomEvent.addListener(c,"click",function(){this._waypoints.reverse(),this.setWaypoints(this._waypoints)},this)),this._updateGeocoders(),this.on("waypointsspliced",this._updateGeocoders),g},_createGeocoder:function(g){var F=this.options.createGeocoderElement(this._waypoints[g],g,this._waypoints.length,this.options);return F.on("delete",function(){g>0||this._waypoints.length>2?this.spliceWaypoints(g,1):this.spliceWaypoints(g,1,new V.Routing.Waypoint)},this).on("geocoded",function(j){this._updateMarkers(),this._fireChanged(),this._focusGeocoder(g+1),this.fire("waypointgeocoded",{waypointIndex:g,waypoint:j.waypoint})},this).on("reversegeocoded",function(j){this.fire("waypointgeocoded",{waypointIndex:g,waypoint:j.waypoint})},this),F},_updateGeocoders:function(){var F,j,g=[];for(F=0;F<this._geocoderElems.length;F++)this._geocoderContainer.removeChild(this._geocoderElems[F].getContainer());for(F=this._waypoints.length-1;F>=0;F--)j=this._createGeocoder(F),this._geocoderContainer.insertBefore(j.getContainer(),this._geocoderContainer.firstChild),g.push(j);this._geocoderElems=g.reverse()},_removeMarkers:function(){var g;if(this._markers)for(g=0;g<this._markers.length;g++)this._markers[g]&&this._map.removeLayer(this._markers[g]);this._markers=[]},_updateMarkers:function(){var g,F;if(this._map)for(this._removeMarkers(),g=0;g<this._waypoints.length;g++)this._waypoints[g].latLng?(F=this.options.createMarker(g,this._waypoints[g],this._waypoints.length))&&(F.addTo(this._map),this.options.draggableWaypoints&&this._hookWaypointEvents(F,g)):F=null,this._markers.push(F)},_fireChanged:function(){this.fire("waypointschanged",{waypoints:this.getWaypoints()}),arguments.length>=2&&this.fire("waypointsspliced",{index:Array.prototype.shift.call(arguments),nRemoved:Array.prototype.shift.call(arguments),added:arguments})},_hookWaypointEvents:function(g,F,j){var P,U,c=function(q){return j?q.latlng:q.target.getLatLng()},m=V.bind(function(q){this.fire("waypointdragstart",{index:F,latlng:c(q)})},this),w=V.bind(function(q){this._waypoints[F].latLng=c(q),this.fire("waypointdrag",{index:F,latlng:c(q)})},this),x=V.bind(function(q){this._waypoints[F].latLng=c(q),this._waypoints[F].name="",this._geocoderElems&&this._geocoderElems[F].update(!0),this.fire("waypointdragend",{index:F,latlng:c(q)}),this._fireChanged()},this);j?(P=V.bind(function(q){this._markers[F].setLatLng(q.latlng),w(q)},this),U=V.bind(function(q){this._map.dragging.enable(),this._map.off("mouseup",U),this._map.off("mousemove",P),x(q)},this),this._map.dragging.disable(),this._map.on("mousemove",P),this._map.on("mouseup",U),m({latlng:this._waypoints[F].latLng})):(g.on("dragstart",m),g.on("drag",w),g.on("dragend",x))},dragNewWaypoint:function(g){var F=g.afterIndex+1;this.options.routeWhileDragging?(this.spliceWaypoints(F,0,g.latlng),this._hookWaypointEvents(this._markers[F],F,!0)):this._dragNewWaypoint(F,g.latlng)},_dragNewWaypoint:function(g,F){var q,j=new V.Routing.Waypoint(F),c=this._waypoints[g-1],m=this._waypoints[g],w=this.options.createMarker(g,j,this._waypoints.length+1),x=[],P=V.bind(function(X){var te;for(w&&w.setLatLng(X.latlng),te=0;te<x.length;te++)x[te].spliceLatLngs(1,1,X.latlng)},this),U=V.bind(function(X){var te;for(w&&this._map.removeLayer(w),te=0;te<x.length;te++)this._map.removeLayer(x[te]);this._map.off("mousemove",P),this._map.off("mouseup",U),this.spliceWaypoints(g,0,X.latlng)},this);for(w&&w.addTo(this._map),q=0;q<this.options.dragStyles.length;q++)x.push(V.polyline([c.latLng,F,m.latLng],this.options.dragStyles[q]).addTo(this._map));this._map.on("mousemove",P),this._map.on("mouseup",U)},_focusGeocoder:function(g){this._geocoderElems[g]?this._geocoderElems[g].focus():document.activeElement.blur()}}),V.Routing.plan=function(g,F){return new V.Routing.Plan(g,F)},z.exports=V.Routing}()}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./L.Routing.GeocoderElement":7,"./L.Routing.Waypoint":15}],15:[function(ue,z,re){(function(Y){!function(){"use strict";var V=typeof window<"u"?window.L:typeof Y<"u"?Y.L:null;V.Routing=V.Routing||{},V.Routing.Waypoint=V.Class.extend({options:{allowUTurn:!1},initialize:function(g,F,j){V.Util.setOptions(this,j),this.latLng=V.latLng(g),this.name=F}}),V.Routing.waypoint=function(g,F,j){return new V.Routing.Waypoint(g,F,j)},z.exports=V.Routing}()}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[4])(4)},8407:(lt,Re,ee)=>{var h,ue;!function(z,re,Y){var c,m,V=z.L,g={version:"0.7.7"};"object"==typeof lt.exports?lt.exports=g:(ue="function"==typeof(h=g)?h.call(Re,ee,Re,lt):h)!==Y&&(lt.exports=ue),g.noConflict=function(){return z.L=V,this},z.L=g,g.Util={extend:function(c){var w,x,P,U,m=Array.prototype.slice.call(arguments,1);for(x=0,P=m.length;x<P;x++)for(w in U=m[x]||{})U.hasOwnProperty(w)&&(c[w]=U[w]);return c},bind:function(c,m){var w=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return c.apply(m,w||arguments)}},stamp:(c=0,m="_leaflet_id",function(w){return w[m]=w[m]||++c,w[m]}),invokeEach:function(c,m,w){var x,P;if("object"==typeof c){for(x in P=Array.prototype.slice.call(arguments,3),c)m.apply(w,[x,c[x]].concat(P));return!0}return!1},limitExecByInterval:function(c,m,w){var x,P;return function U(){var q=arguments;x?P=!0:(x=!0,setTimeout(function(){x=!1,P&&(U.apply(w,q),P=!1)},m),c.apply(w,q))}},falseFn:function(){return!1},formatNum:function(c,m){var w=Math.pow(10,m||5);return Math.round(c*w)/w},trim:function(c){return c.trim?c.trim():c.replace(/^\s+|\s+$/g,"")},splitWords:function(c){return g.Util.trim(c).split(/\s+/)},setOptions:function(c,m){return c.options=g.extend({},c.options,m),c.options},getParamString:function(c,m,w){var x=[];for(var P in c)x.push(encodeURIComponent(w?P.toUpperCase():P)+"="+encodeURIComponent(c[P]));return(m&&-1!==m.indexOf("?")?"&":"?")+x.join("&")},template:function(c,m){return c.replace(/\{ *([\w_]+) *\}/g,function(w,x){var P=m[x];if(P===Y)throw new Error("No value provided for variable "+w);return"function"==typeof P&&(P=P(m)),P})},isArray:Array.isArray||function(c){return"[object Array]"===Object.prototype.toString.call(c)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function c(U){var q,X,te=["webkit","moz","o","ms"];for(q=0;q<te.length&&!X;q++)X=z[te[q]+U];return X}var m=0;function w(U){var q=+new Date,X=Math.max(0,16-(q-m));return m=q+X,z.setTimeout(U,X)}var x=z.requestAnimationFrame||c("RequestAnimationFrame")||w,P=z.cancelAnimationFrame||c("CancelAnimationFrame")||c("CancelRequestAnimationFrame")||function(U){z.clearTimeout(U)};g.Util.requestAnimFrame=function(U,q,X,te){if(U=g.bind(U,q),!X||x!==w)return x.call(z,U,te);U()},g.Util.cancelAnimFrame=function(U){U&&P.call(z,U)}}(),g.extend=g.Util.extend,g.bind=g.Util.bind,g.stamp=g.Util.stamp,g.setOptions=g.Util.setOptions,g.Class=function(){},g.Class.extend=function(c){var m=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},w=function(){};w.prototype=this.prototype;var x=new w;for(var P in x.constructor=m,m.prototype=x,this)this.hasOwnProperty(P)&&"prototype"!==P&&(m[P]=this[P]);c.statics&&(g.extend(m,c.statics),delete c.statics),c.includes&&(g.Util.extend.apply(null,[x].concat(c.includes)),delete c.includes),c.options&&x.options&&(c.options=g.extend({},x.options,c.options)),g.extend(x,c),x._initHooks=[];var U=this;return m.__super__=U.prototype,x.callInitHooks=function(){if(!this._initHooksCalled){U.prototype.callInitHooks&&U.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var q=0,X=x._initHooks.length;q<X;q++)x._initHooks[q].call(this)}},m},g.Class.include=function(c){g.extend(this.prototype,c)},g.Class.mergeOptions=function(c){g.extend(this.prototype.options,c)},g.Class.addInitHook=function(c){var m=Array.prototype.slice.call(arguments,1),w="function"==typeof c?c:function(){this[c].apply(this,m)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(w)};var w,F="_leaflet_events";g.Mixin={},g.Mixin.Events={addEventListener:function(c,m,w){if(g.Util.invokeEach(c,this.addEventListener,this,m,w))return this;var U,q,X,te,me,Me,De,x=this[F]=this[F]||{},P=w&&w!==this&&g.stamp(w);for(U=0,q=(c=g.Util.splitWords(c)).length;U<q;U++)X={action:m,context:w||this},te=c[U],P?(Me=(me=te+"_idx")+"_len",(De=x[me]=x[me]||{})[P]||(De[P]=[],x[Me]=(x[Me]||0)+1),De[P].push(X)):(x[te]=x[te]||[],x[te].push(X));return this},hasEventListeners:function(c){var m=this[F];return!!m&&(c in m&&m[c].length>0||c+"_idx"in m&&m[c+"_idx_len"]>0)},removeEventListener:function(c,m,w){if(!this[F])return this;if(!c)return this.clearAllEventListeners();if(g.Util.invokeEach(c,this.removeEventListener,this,m,w))return this;var U,q,X,te,me,Me,De,Ee,x=this[F],P=w&&w!==this&&g.stamp(w);for(U=0,q=(c=g.Util.splitWords(c)).length;U<q;U++)if(De=(Me=(X=c[U])+"_idx")+"_len",Ee=x[Me],m){if(te=P&&Ee?Ee[P]:x[X]){for(me=te.length-1;me>=0;me--)te[me].action===m&&(!w||te[me].context===w)&&(te.splice(me,1)[0].action=g.Util.falseFn);w&&Ee&&0===te.length&&(delete Ee[P],x[De]--)}}else delete x[X],delete x[Me],delete x[De];return this},clearAllEventListeners:function(){return delete this[F],this},fireEvent:function(c,m){if(!this.hasEventListeners(c))return this;var P,U,q,X,te,w=g.Util.extend({},m,{type:c,target:this}),x=this[F];if(x[c])for(U=0,q=(P=x[c].slice()).length;U<q;U++)P[U].action.call(P[U].context,w);for(te in X=x[c+"_idx"])if(P=X[te].slice())for(U=0,q=P.length;U<q;U++)P[U].action.call(P[U].context,w);return this},addOneTimeEventListener:function(c,m,w){if(g.Util.invokeEach(c,this.addOneTimeEventListener,this,m,w))return this;var x=g.bind(function(){this.removeEventListener(c,m,w).removeEventListener(c,x,w)},this);return this.addEventListener(c,m,w).addEventListener(c,x,w)}},g.Mixin.Events.on=g.Mixin.Events.addEventListener,g.Mixin.Events.off=g.Mixin.Events.removeEventListener,g.Mixin.Events.once=g.Mixin.Events.addOneTimeEventListener,g.Mixin.Events.fire=g.Mixin.Events.fireEvent,function(){var c="ActiveXObject"in z,m=c&&!re.addEventListener,w=navigator.userAgent.toLowerCase(),x=-1!==w.indexOf("webkit"),P=-1!==w.indexOf("chrome"),U=-1!==w.indexOf("phantom"),q=-1!==w.indexOf("android"),X=-1!==w.search("android [23]"),te=-1!==w.indexOf("gecko"),me=typeof orientation!=Y+"",Me=!z.PointerEvent&&z.MSPointerEvent,De=z.PointerEvent&&z.navigator.pointerEnabled||Me,Ee="devicePixelRatio"in z&&z.devicePixelRatio>1||"matchMedia"in z&&z.matchMedia("(min-resolution:144dpi)")&&z.matchMedia("(min-resolution:144dpi)").matches,Ie=re.documentElement,He=c&&"transition"in Ie.style,ze="WebKitCSSMatrix"in z&&"m11"in new z.WebKitCSSMatrix&&!X,oe="MozPerspective"in Ie.style,Ae="OTransition"in Ie.style;g.Browser={ie:c,ielt9:m,webkit:x,gecko:te&&!x&&!z.opera&&!c,android:q,android23:X,chrome:P,ie3d:He,webkit3d:ze,gecko3d:oe,opera3d:Ae,any3d:!z.L_DISABLE_3D&&(He||ze||oe||Ae)&&!U,mobile:me,mobileWebkit:me&&x,mobileWebkit3d:me&&ze,mobileOpera:me&&z.opera,touch:!z.L_NO_TOUCH&&!U&&(De||"ontouchstart"in z||z.DocumentTouch&&re instanceof z.DocumentTouch),msPointer:Me,pointer:De,retina:Ee}}(),g.Point=function(c,m,w){this.x=w?Math.round(c):c,this.y=w?Math.round(m):m},g.Point.prototype={clone:function(){return new g.Point(this.x,this.y)},add:function(c){return this.clone()._add(g.point(c))},_add:function(c){return this.x+=c.x,this.y+=c.y,this},subtract:function(c){return this.clone()._subtract(g.point(c))},_subtract:function(c){return this.x-=c.x,this.y-=c.y,this},divideBy:function(c){return this.clone()._divideBy(c)},_divideBy:function(c){return this.x/=c,this.y/=c,this},multiplyBy:function(c){return this.clone()._multiplyBy(c)},_multiplyBy:function(c){return this.x*=c,this.y*=c,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(c){var m=(c=g.point(c)).x-this.x,w=c.y-this.y;return Math.sqrt(m*m+w*w)},equals:function(c){return(c=g.point(c)).x===this.x&&c.y===this.y},contains:function(c){return c=g.point(c),Math.abs(c.x)<=Math.abs(this.x)&&Math.abs(c.y)<=Math.abs(this.y)},toString:function(){return"Point("+g.Util.formatNum(this.x)+", "+g.Util.formatNum(this.y)+")"}},g.point=function(c,m,w){return c instanceof g.Point?c:g.Util.isArray(c)?new g.Point(c[0],c[1]):c===Y||null===c?c:new g.Point(c,m,w)},g.Bounds=function(c,m){if(c)for(var w=m?[c,m]:c,x=0,P=w.length;x<P;x++)this.extend(w[x])},g.Bounds.prototype={extend:function(c){return c=g.point(c),this.min||this.max?(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)):(this.min=c.clone(),this.max=c.clone()),this},getCenter:function(c){return new g.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,c)},getBottomLeft:function(){return new g.Point(this.min.x,this.max.y)},getTopRight:function(){return new g.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(c){var m,w;return(c="number"==typeof c[0]||c instanceof g.Point?g.point(c):g.bounds(c))instanceof g.Bounds?(m=c.min,w=c.max):m=w=c,m.x>=this.min.x&&w.x<=this.max.x&&m.y>=this.min.y&&w.y<=this.max.y},intersects:function(c){c=g.bounds(c);var m=this.min,w=this.max,x=c.min,P=c.max;return P.x>=m.x&&x.x<=w.x&&P.y>=m.y&&x.y<=w.y},isValid:function(){return!(!this.min||!this.max)}},g.bounds=function(c,m){return!c||c instanceof g.Bounds?c:new g.Bounds(c,m)},g.Transformation=function(c,m,w,x){this._a=c,this._b=m,this._c=w,this._d=x},g.Transformation.prototype={transform:function(c,m){return this._transform(c.clone(),m)},_transform:function(c,m){return c.x=(m=m||1)*(this._a*c.x+this._b),c.y=m*(this._c*c.y+this._d),c},untransform:function(c,m){return new g.Point((c.x/(m=m||1)-this._b)/this._a,(c.y/m-this._d)/this._c)}},g.DomUtil={get:function(c){return"string"==typeof c?re.getElementById(c):c},getStyle:function(c,m){var w=c.style[m];if(!w&&c.currentStyle&&(w=c.currentStyle[m]),(!w||"auto"===w)&&re.defaultView){var x=re.defaultView.getComputedStyle(c,null);w=x?x[m]:null}return"auto"===w?null:w},getViewportOffset:function(c){var q,m=0,w=0,x=c,P=re.body,U=re.documentElement;do{if(m+=x.offsetTop||0,w+=x.offsetLeft||0,m+=parseInt(g.DomUtil.getStyle(x,"borderTopWidth"),10)||0,w+=parseInt(g.DomUtil.getStyle(x,"borderLeftWidth"),10)||0,q=g.DomUtil.getStyle(x,"position"),x.offsetParent===P&&"absolute"===q)break;if("fixed"===q){m+=P.scrollTop||U.scrollTop||0,w+=P.scrollLeft||U.scrollLeft||0;break}if("relative"===q&&!x.offsetLeft){var X=g.DomUtil.getStyle(x,"width"),te=g.DomUtil.getStyle(x,"max-width"),me=x.getBoundingClientRect();("none"!==X||"none"!==te)&&(w+=me.left+x.clientLeft),m+=me.top+(P.scrollTop||U.scrollTop||0);break}x=x.offsetParent}while(x);x=c;do{if(x===P)break;m-=x.scrollTop||0,w-=x.scrollLeft||0,x=x.parentNode}while(x);return new g.Point(w,m)},documentIsLtr:function(){return g.DomUtil._docIsLtrCached||(g.DomUtil._docIsLtrCached=!0,g.DomUtil._docIsLtr="ltr"===g.DomUtil.getStyle(re.body,"direction")),g.DomUtil._docIsLtr},create:function(c,m,w){var x=re.createElement(c);return x.className=m,w&&w.appendChild(x),x},hasClass:function(c,m){if(c.classList!==Y)return c.classList.contains(m);var w=g.DomUtil._getClass(c);return w.length>0&&new RegExp("(^|\\s)"+m+"(\\s|$)").test(w)},addClass:function(c,m){if(c.classList!==Y)for(var w=g.Util.splitWords(m),x=0,P=w.length;x<P;x++)c.classList.add(w[x]);else if(!g.DomUtil.hasClass(c,m)){var U=g.DomUtil._getClass(c);g.DomUtil._setClass(c,(U?U+" ":"")+m)}},removeClass:function(c,m){c.classList!==Y?c.classList.remove(m):g.DomUtil._setClass(c,g.Util.trim((" "+g.DomUtil._getClass(c)+" ").replace(" "+m+" "," ")))},_setClass:function(c,m){c.className.baseVal===Y?c.className=m:c.className.baseVal=m},_getClass:function(c){return c.className.baseVal===Y?c.className:c.className.baseVal},setOpacity:function(c,m){if("opacity"in c.style)c.style.opacity=m;else if("filter"in c.style){var w=!1,x="DXImageTransform.Microsoft.Alpha";try{w=c.filters.item(x)}catch{if(1===m)return}m=Math.round(100*m),w?(w.Enabled=100!==m,w.Opacity=m):c.style.filter+=" progid:"+x+"(opacity="+m+")"}},testProp:function(c){for(var m=re.documentElement.style,w=0;w<c.length;w++)if(c[w]in m)return c[w];return!1},getTranslateString:function(c){var m=g.Browser.webkit3d;return"translate"+(m?"3d":"")+"("+c.x+"px,"+c.y+"px"+(m?",0":"")+")"},getScaleString:function(c,m){return g.DomUtil.getTranslateString(m.add(m.multiplyBy(-1*c)))+" scale("+c+") "},setPosition:function(c,m,w){c._leaflet_pos=m,!w&&g.Browser.any3d?c.style[g.DomUtil.TRANSFORM]=g.DomUtil.getTranslateString(m):(c.style.left=m.x+"px",c.style.top=m.y+"px")},getPosition:function(c){return c._leaflet_pos}},g.DomUtil.TRANSFORM=g.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),g.DomUtil.TRANSITION=g.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),g.DomUtil.TRANSITION_END="webkitTransition"===g.DomUtil.TRANSITION||"OTransition"===g.DomUtil.TRANSITION?g.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in re)g.extend(g.DomUtil,{disableTextSelection:function(){g.DomEvent.on(z,"selectstart",g.DomEvent.preventDefault)},enableTextSelection:function(){g.DomEvent.off(z,"selectstart",g.DomEvent.preventDefault)}});else{var c=g.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);g.extend(g.DomUtil,{disableTextSelection:function(){if(c){var m=re.documentElement.style;this._userSelect=m[c],m[c]="none"}},enableTextSelection:function(){c&&(re.documentElement.style[c]=this._userSelect,delete this._userSelect)}})}g.extend(g.DomUtil,{disableImageDrag:function(){g.DomEvent.on(z,"dragstart",g.DomEvent.preventDefault)},enableImageDrag:function(){g.DomEvent.off(z,"dragstart",g.DomEvent.preventDefault)}})}(),g.LatLng=function(c,m,w){if(c=parseFloat(c),m=parseFloat(m),isNaN(c)||isNaN(m))throw new Error("Invalid LatLng object: ("+c+", "+m+")");this.lat=c,this.lng=m,w!==Y&&(this.alt=parseFloat(w))},g.extend(g.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),g.LatLng.prototype={equals:function(c){return!!c&&(c=g.latLng(c),Math.max(Math.abs(this.lat-c.lat),Math.abs(this.lng-c.lng))<=g.LatLng.MAX_MARGIN)},toString:function(c){return"LatLng("+g.Util.formatNum(this.lat,c)+", "+g.Util.formatNum(this.lng,c)+")"},distanceTo:function(c){c=g.latLng(c);var w=g.LatLng.DEG_TO_RAD,P=(c.lng-this.lng)*w,U=this.lat*w,q=c.lat*w,X=Math.sin((c.lat-this.lat)*w/2),te=Math.sin(P/2),me=X*X+te*te*Math.cos(U)*Math.cos(q);return 12756274*Math.atan2(Math.sqrt(me),Math.sqrt(1-me))},wrap:function(c,m){var w=this.lng;return new g.LatLng(this.lat,w=(w+(m=m||180))%(m-(c=c||-180))+(w<c||w===m?m:c))}},g.latLng=function(c,m){return c instanceof g.LatLng?c:g.Util.isArray(c)?"number"==typeof c[0]||"string"==typeof c[0]?new g.LatLng(c[0],c[1],c[2]):null:c===Y||null===c?c:"object"==typeof c&&"lat"in c?new g.LatLng(c.lat,"lng"in c?c.lng:c.lon):m===Y?null:new g.LatLng(c,m)},g.LatLngBounds=function(c,m){if(c)for(var w=m?[c,m]:c,x=0,P=w.length;x<P;x++)this.extend(w[x])},g.LatLngBounds.prototype={extend:function(c){if(!c)return this;var m=g.latLng(c);return(c=null!==m?m:g.latLngBounds(c))instanceof g.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(c.lat,this._southWest.lat),this._southWest.lng=Math.min(c.lng,this._southWest.lng),this._northEast.lat=Math.max(c.lat,this._northEast.lat),this._northEast.lng=Math.max(c.lng,this._northEast.lng)):(this._southWest=new g.LatLng(c.lat,c.lng),this._northEast=new g.LatLng(c.lat,c.lng)):c instanceof g.LatLngBounds&&(this.extend(c._southWest),this.extend(c._northEast)),this},pad:function(c){var m=this._southWest,w=this._northEast,x=Math.abs(m.lat-w.lat)*c,P=Math.abs(m.lng-w.lng)*c;return new g.LatLngBounds(new g.LatLng(m.lat-x,m.lng-P),new g.LatLng(w.lat+x,w.lng+P))},getCenter:function(){return new g.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new g.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new g.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(c){c="number"==typeof c[0]||c instanceof g.LatLng?g.latLng(c):g.latLngBounds(c);var x,P,m=this._southWest,w=this._northEast;return c instanceof g.LatLngBounds?(x=c.getSouthWest(),P=c.getNorthEast()):x=P=c,x.lat>=m.lat&&P.lat<=w.lat&&x.lng>=m.lng&&P.lng<=w.lng},intersects:function(c){c=g.latLngBounds(c);var m=this._southWest,w=this._northEast,x=c.getSouthWest(),P=c.getNorthEast();return P.lat>=m.lat&&x.lat<=w.lat&&P.lng>=m.lng&&x.lng<=w.lng},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(c){return!!c&&(c=g.latLngBounds(c),this._southWest.equals(c.getSouthWest())&&this._northEast.equals(c.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},g.latLngBounds=function(c,m){return!c||c instanceof g.LatLngBounds?c:new g.LatLngBounds(c,m)},g.Projection={},g.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(c){var m=g.LatLng.DEG_TO_RAD,w=this.MAX_LATITUDE,x=Math.max(Math.min(w,c.lat),-w),P=c.lng*m,U=x*m;return U=Math.log(Math.tan(Math.PI/4+U/2)),new g.Point(P,U)},unproject:function(c){var m=g.LatLng.RAD_TO_DEG,w=c.x*m,x=(2*Math.atan(Math.exp(c.y))-Math.PI/2)*m;return new g.LatLng(x,w)}},g.Projection.LonLat={project:function(c){return new g.Point(c.lng,c.lat)},unproject:function(c){return new g.LatLng(c.y,c.x)}},g.CRS={latLngToPoint:function(c,m){var w=this.projection.project(c),x=this.scale(m);return this.transformation._transform(w,x)},pointToLatLng:function(c,m){var w=this.scale(m),x=this.transformation.untransform(c,w);return this.projection.unproject(x)},project:function(c){return this.projection.project(c)},scale:function(c){return 256*Math.pow(2,c)},getSize:function(c){var m=this.scale(c);return g.point(m,m)}},g.CRS.Simple=g.extend({},g.CRS,{projection:g.Projection.LonLat,transformation:new g.Transformation(1,0,-1,0),scale:function(c){return Math.pow(2,c)}}),g.CRS.EPSG3857=g.extend({},g.CRS,{code:"EPSG:3857",projection:g.Projection.SphericalMercator,transformation:new g.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(c){return this.projection.project(c).multiplyBy(6378137)}}),g.CRS.EPSG900913=g.extend({},g.CRS.EPSG3857,{code:"EPSG:900913"}),g.CRS.EPSG4326=g.extend({},g.CRS,{code:"EPSG:4326",projection:g.Projection.LonLat,transformation:new g.Transformation(1/360,.5,-1/360,.5)}),g.Map=g.Class.extend({includes:g.Mixin.Events,options:{crs:g.CRS.EPSG3857,fadeAnimation:g.DomUtil.TRANSITION&&!g.Browser.android23,trackResize:!0,markerZoomAnimation:g.DomUtil.TRANSITION&&g.Browser.any3d},initialize:function(c,m){m=g.setOptions(this,m),this._initContainer(c),this._initLayout(),this._onResize=g.bind(this._onResize,this),this._initEvents(),m.maxBounds&&this.setMaxBounds(m.maxBounds),m.center&&m.zoom!==Y&&this.setView(g.latLng(m.center),m.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(m.layers)},setView:function(c,m){return m=m===Y?this.getZoom():m,this._resetView(g.latLng(c),this._limitZoom(m)),this},setZoom:function(c,m){return this._loaded?this.setView(this.getCenter(),c,{zoom:m}):(this._zoom=this._limitZoom(c),this)},zoomIn:function(c,m){return this.setZoom(this._zoom+(c||1),m)},zoomOut:function(c,m){return this.setZoom(this._zoom-(c||1),m)},setZoomAround:function(c,m,w){var x=this.getZoomScale(m),P=this.getSize().divideBy(2),q=(c instanceof g.Point?c:this.latLngToContainerPoint(c)).subtract(P).multiplyBy(1-1/x),X=this.containerPointToLatLng(P.add(q));return this.setView(X,m,{zoom:w})},fitBounds:function(c,m){m=m||{},c=c.getBounds?c.getBounds():g.latLngBounds(c);var w=g.point(m.paddingTopLeft||m.padding||[0,0]),x=g.point(m.paddingBottomRight||m.padding||[0,0]),P=this.getBoundsZoom(c,!1,w.add(x));P=m.maxZoom?Math.min(m.maxZoom,P):P;var U=x.subtract(w).divideBy(2),q=this.project(c.getSouthWest(),P),X=this.project(c.getNorthEast(),P),te=this.unproject(q.add(X).divideBy(2).add(U),P);return this.setView(te,P,m)},fitWorld:function(c){return this.fitBounds([[-90,-180],[90,180]],c)},panTo:function(c,m){return this.setView(c,this._zoom,{pan:m})},panBy:function(c){return this.fire("movestart"),this._rawPanBy(g.point(c)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(c){return c=g.latLngBounds(c),this.options.maxBounds=c,c?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(c,m){var w=this.getCenter(),x=this._limitCenter(w,this._zoom,c);return w.equals(x)?this:this.panTo(x,m)},addLayer:function(c){var m=g.stamp(c);return this._layers[m]||(this._layers[m]=c,c.options&&(!isNaN(c.options.maxZoom)||!isNaN(c.options.minZoom))&&(this._zoomBoundLayers[m]=c,this._updateZoomLevels()),this.options.zoomAnimation&&g.TileLayer&&c instanceof g.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,c.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(c)),this},removeLayer:function(c){var m=g.stamp(c);return this._layers[m]?(this._loaded&&c.onRemove(this),delete this._layers[m],this._loaded&&this.fire("layerremove",{layer:c}),this._zoomBoundLayers[m]&&(delete this._zoomBoundLayers[m],this._updateZoomLevels()),this.options.zoomAnimation&&g.TileLayer&&c instanceof g.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,c.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(c){return!!c&&g.stamp(c)in this._layers},eachLayer:function(c,m){for(var w in this._layers)c.call(m,this._layers[w]);return this},invalidateSize:function(c){if(!this._loaded)return this;c=g.extend({animate:!1,pan:!0},!0===c?{animate:!0}:c);var m=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var w=this.getSize(),x=m.divideBy(2).round(),P=w.divideBy(2).round(),U=x.subtract(P);return U.x||U.y?(c.animate&&c.pan?this.panBy(U):(c.pan&&this._rawPanBy(U),this.fire("move"),c.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(g.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:m,newSize:w})):this},addHandler:function(c,m){if(!m)return this;var w=this[c]=new m(this);return this._handlers.push(w),this.options[c]&&w.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch{this._container._leaflet=Y}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var c=this.getPixelBounds(),m=this.unproject(c.getBottomLeft()),w=this.unproject(c.getTopRight());return new g.LatLngBounds(m,w)},getMinZoom:function(){return this.options.minZoom===Y?this._layersMinZoom===Y?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===Y?this._layersMaxZoom===Y?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(c,m,w){c=g.latLngBounds(c);var me,x=this.getMinZoom()-(m?1:0),P=this.getMaxZoom(),U=this.getSize(),q=c.getNorthWest(),X=c.getSouthEast(),te=!0;w=g.point(w||[0,0]);do{x++,me=this.project(X,x).subtract(this.project(q,x)).add(w),te=m?me.x<U.x||me.y<U.y:U.contains(me)}while(te&&x<=P);return te&&m?null:m?x:x-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new g.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var c=this._getTopLeftPoint();return new g.Bounds(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(c){var m=this.options.crs;return m.scale(c)/m.scale(this._zoom)},getScaleZoom:function(c){return this._zoom+Math.log(c)/Math.LN2},project:function(c,m){return m=m===Y?this._zoom:m,this.options.crs.latLngToPoint(g.latLng(c),m)},unproject:function(c,m){return m=m===Y?this._zoom:m,this.options.crs.pointToLatLng(g.point(c),m)},layerPointToLatLng:function(c){var m=g.point(c).add(this.getPixelOrigin());return this.unproject(m)},latLngToLayerPoint:function(c){return this.project(g.latLng(c))._round()._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(c){return g.point(c).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(c){return g.point(c).add(this._getMapPanePos())},containerPointToLatLng:function(c){var m=this.containerPointToLayerPoint(g.point(c));return this.layerPointToLatLng(m)},latLngToContainerPoint:function(c){return this.layerPointToContainerPoint(this.latLngToLayerPoint(g.latLng(c)))},mouseEventToContainerPoint:function(c){return g.DomEvent.getMousePosition(c,this._container)},mouseEventToLayerPoint:function(c){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(c))},mouseEventToLatLng:function(c){return this.layerPointToLatLng(this.mouseEventToLayerPoint(c))},_initContainer:function(c){var m=this._container=g.DomUtil.get(c);if(!m)throw new Error("Map container not found.");if(m._leaflet)throw new Error("Map container is already initialized.");m._leaflet=!0},_initLayout:function(){var c=this._container;g.DomUtil.addClass(c,"leaflet-container"+(g.Browser.touch?" leaflet-touch":"")+(g.Browser.retina?" leaflet-retina":"")+(g.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var m=g.DomUtil.getStyle(c,"position");"absolute"!==m&&"relative"!==m&&"fixed"!==m&&(c.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var c=this._panes={};this._mapPane=c.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=c.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),c.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),c.shadowPane=this._createPane("leaflet-shadow-pane"),c.overlayPane=this._createPane("leaflet-overlay-pane"),c.markerPane=this._createPane("leaflet-marker-pane"),c.popupPane=this._createPane("leaflet-popup-pane");var m=" leaflet-zoom-hide";this.options.markerZoomAnimation||(g.DomUtil.addClass(c.markerPane,m),g.DomUtil.addClass(c.shadowPane,m),g.DomUtil.addClass(c.popupPane,m))},_createPane:function(c,m){return g.DomUtil.create("div",c,m||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(c){for(var m=0,w=(c=c?g.Util.isArray(c)?c:[c]:[]).length;m<w;m++)this.addLayer(c[m])},_resetView:function(c,m,w,x){var P=this._zoom!==m;x||(this.fire("movestart"),P&&this.fire("zoomstart")),this._zoom=m,this._initialCenter=c,this._initialTopLeftPoint=this._getNewTopLeftPoint(c),w?this._initialTopLeftPoint._add(this._getMapPanePos()):g.DomUtil.setPosition(this._mapPane,new g.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var U=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!w}),U&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(P||x)&&this.fire("zoomend"),this.fire("moveend",{hard:!w})},_rawPanBy:function(c){g.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(c))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var c,m=1/0,w=-1/0,x=this._getZoomSpan();for(c in this._zoomBoundLayers){var P=this._zoomBoundLayers[c];isNaN(P.options.minZoom)||(m=Math.min(m,P.options.minZoom)),isNaN(P.options.maxZoom)||(w=Math.max(w,P.options.maxZoom))}c===Y?this._layersMaxZoom=this._layersMinZoom=Y:(this._layersMaxZoom=w,this._layersMinZoom=m),x!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(c){if(g.DomEvent){g.DomEvent[c=c||"on"](this._container,"click",this._onMouseClick,this);var w,x,m=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(w=0,x=m.length;w<x;w++)g.DomEvent[c](this._container,m[w],this._fireMouseEvent,this);this.options.trackResize&&g.DomEvent[c](z,"resize",this._onResize,this)}},_onResize:function(){g.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=g.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(c){!this._loaded||!c._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||g.DomEvent._skipped(c)||(this.fire("preclick"),this._fireMouseEvent(c))},_fireMouseEvent:function(c){if(this._loaded&&!g.DomEvent._skipped(c)){var m=c.type;if(this.hasEventListeners(m="mouseenter"===m?"mouseover":"mouseleave"===m?"mouseout":m)){"contextmenu"===m&&g.DomEvent.preventDefault(c);var w=this.mouseEventToContainerPoint(c),x=this.containerPointToLayerPoint(w),P=this.layerPointToLatLng(x);this.fire(m,{latlng:P,layerPoint:x,containerPoint:w,originalEvent:c})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var c=0,m=this._handlers.length;c<m;c++)this._handlers[c].disable()},whenReady:function(c,m){return this._loaded?c.call(m||this,this):this.on("load",c,m),this},_layerAdd:function(c){c.onAdd(this),this.fire("layeradd",{layer:c})},_getMapPanePos:function(){return g.DomUtil.getPosition(this._mapPane)},_moved:function(){var c=this._getMapPanePos();return c&&!c.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(c,m){var w=this.getSize()._divideBy(2);return this.project(c,m)._subtract(w)._round()},_latLngToNewLayerPoint:function(c,m,w){var x=this._getNewTopLeftPoint(w,m).add(this._getMapPanePos());return this.project(c,m)._subtract(x)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(c){return this.latLngToLayerPoint(c).subtract(this._getCenterLayerPoint())},_limitCenter:function(c,m,w){if(!w)return c;var x=this.project(c,m),P=this.getSize().divideBy(2),U=new g.Bounds(x.subtract(P),x.add(P)),q=this._getBoundsOffset(U,w,m);return this.unproject(x.add(q),m)},_limitOffset:function(c,m){if(!m)return c;var w=this.getPixelBounds(),x=new g.Bounds(w.min.add(c),w.max.add(c));return c.add(this._getBoundsOffset(x,m))},_getBoundsOffset:function(c,m,w){var x=this.project(m.getNorthWest(),w).subtract(c.min),P=this.project(m.getSouthEast(),w).subtract(c.max),U=this._rebound(x.x,-P.x),q=this._rebound(x.y,-P.y);return new g.Point(U,q)},_rebound:function(c,m){return c+m>0?Math.round(c-m)/2:Math.max(0,Math.ceil(c))-Math.max(0,Math.floor(m))},_limitZoom:function(c){var m=this.getMinZoom(),w=this.getMaxZoom();return Math.max(m,Math.min(w,c))}}),g.map=function(c,m){return new g.Map(c,m)},g.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(c){var m=g.LatLng.DEG_TO_RAD,w=this.MAX_LATITUDE,x=Math.max(Math.min(w,c.lat),-w),P=this.R_MAJOR,q=c.lng*m*P,X=x*m,te=this.R_MINOR/P,me=Math.sqrt(1-te*te),Me=me*Math.sin(X);Me=Math.pow((1-Me)/(1+Me),.5*me);var De=Math.tan(.5*(.5*Math.PI-X))/Me;return X=-P*Math.log(De),new g.Point(q,X)},unproject:function(c){for(var Ie,m=g.LatLng.RAD_TO_DEG,w=this.R_MAJOR,P=c.x*m/w,U=this.R_MINOR/w,q=Math.sqrt(1-U*U),X=Math.exp(-c.y/w),te=Math.PI/2-2*Math.atan(X),De=15,Ee=.1;Math.abs(Ee)>1e-7&&--De>0;)Ie=q*Math.sin(te),te+=Ee=Math.PI/2-2*Math.atan(X*Math.pow((1-Ie)/(1+Ie),.5*q))-te;return new g.LatLng(te*m,P)}},g.CRS.EPSG3395=g.extend({},g.CRS,{code:"EPSG:3395",projection:g.Projection.Mercator,transformation:(w=.5/(Math.PI*g.Projection.Mercator.R_MAJOR),new g.Transformation(w,.5,-w,.5))}),g.TileLayer=g.Class.extend({includes:g.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:g.Browser.mobile,updateWhenIdle:g.Browser.mobile},initialize:function(c,m){(m=g.setOptions(this,m)).detectRetina&&g.Browser.retina&&m.maxZoom>0&&(m.tileSize=Math.floor(m.tileSize/2),m.zoomOffset++,m.minZoom>0&&m.minZoom--,this.options.maxZoom--),m.bounds&&(m.bounds=g.latLngBounds(m.bounds)),this._url=c;var w=this.options.subdomains;"string"==typeof w&&(this.options.subdomains=w.split(""))},onAdd:function(c){this._map=c,this._animated=c._zoomAnimated,this._initContainer(),c.on({viewreset:this._reset,moveend:this._update},this),this._animated&&c.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=g.Util.limitExecByInterval(this._update,150,this),c.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(c){return c.addLayer(this),this},onRemove:function(c){this._container.parentNode.removeChild(this._container),c.off({viewreset:this._reset,moveend:this._update},this),this._animated&&c.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||c.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var c=this._map._panes.tilePane;return this._container&&(c.appendChild(this._container),this._setAutoZIndex(c,Math.max)),this},bringToBack:function(){var c=this._map._panes.tilePane;return this._container&&(c.insertBefore(this._container,c.firstChild),this._setAutoZIndex(c,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(c){return this.options.opacity=c,this._map&&this._updateOpacity(),this},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},setUrl:function(c,m){return this._url=c,m||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==Y&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(c,m){var P,U,q,w=c.children,x=-m(1/0,-1/0);for(U=0,q=w.length;U<q;U++)w[U]!==this._container&&(P=parseInt(w[U].style.zIndex,10),isNaN(P)||(x=m(x,P)));this.options.zIndex=this._container.style.zIndex=(isFinite(x)?x:0)+m(1,-1)},_updateOpacity:function(){var c,m=this._tiles;if(g.Browser.ielt9)for(c in m)g.DomUtil.setOpacity(m[c],this.options.opacity);else g.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var c=this._map._panes.tilePane;if(!this._container){if(this._container=g.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var m="leaflet-tile-container";this._bgBuffer=g.DomUtil.create("div",m,this._container),this._tileContainer=g.DomUtil.create("div",m,this._container)}else this._tileContainer=this._container;c.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(c){for(var m in this._tiles)this.fire("tileunload",{tile:this._tiles[m]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&c&&c.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var c=this._map,m=c.getZoom()+this.options.zoomOffset,w=this.options.maxNativeZoom,x=this.options.tileSize;return w&&m>w&&(x=Math.round(c.getZoomScale(m)/c.getZoomScale(w)*x)),x},_update:function(){if(this._map){var c=this._map,m=c.getPixelBounds(),w=c.getZoom(),x=this._getTileSize();if(!(w>this.options.maxZoom||w<this.options.minZoom)){var P=g.bounds(m.min.divideBy(x)._floor(),m.max.divideBy(x)._floor());this._addTilesFromCenterOut(P),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(P)}}},_addTilesFromCenterOut:function(c){var x,P,U,m=[],w=c.getCenter();for(x=c.min.y;x<=c.max.y;x++)for(P=c.min.x;P<=c.max.x;P++)U=new g.Point(P,x),this._tileShouldBeLoaded(U)&&m.push(U);var q=m.length;if(0!==q){m.sort(function(te,me){return te.distanceTo(w)-me.distanceTo(w)});var X=re.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=q,P=0;P<q;P++)this._addTile(m[P],X);this._tileContainer.appendChild(X)}},_tileShouldBeLoaded:function(c){if(c.x+":"+c.y in this._tiles)return!1;var m=this.options;if(!m.continuousWorld){var w=this._getWrapTileNum();if(m.noWrap&&(c.x<0||c.x>=w.x)||c.y<0||c.y>=w.y)return!1}if(m.bounds){var x=this._getTileSize(),P=c.multiplyBy(x),U=P.add([x,x]),q=this._map.unproject(P),X=this._map.unproject(U);if(!m.continuousWorld&&!m.noWrap&&(q=q.wrap(),X=X.wrap()),!m.bounds.intersects([q,X]))return!1}return!0},_removeOtherTiles:function(c){var m,w,x,P;for(P in this._tiles)m=P.split(":"),w=parseInt(m[0],10),x=parseInt(m[1],10),(w<c.min.x||w>c.max.x||x<c.min.y||x>c.max.y)&&this._removeTile(P)},_removeTile:function(c){var m=this._tiles[c];this.fire("tileunload",{tile:m,url:m.src}),this.options.reuseTiles?(g.DomUtil.removeClass(m,"leaflet-tile-loaded"),this._unusedTiles.push(m)):m.parentNode===this._tileContainer&&this._tileContainer.removeChild(m),g.Browser.android||(m.onload=null,m.src=g.Util.emptyImageUrl),delete this._tiles[c]},_addTile:function(c,m){var w=this._getTilePos(c),x=this._getTile();g.DomUtil.setPosition(x,w,g.Browser.chrome),this._tiles[c.x+":"+c.y]=x,this._loadTile(x,c),x.parentNode!==this._tileContainer&&m.appendChild(x)},_getZoomForUrl:function(){var c=this.options,m=this._map.getZoom();return c.zoomReverse&&(m=c.maxZoom-m),m+=c.zoomOffset,c.maxNativeZoom?Math.min(m,c.maxNativeZoom):m},_getTilePos:function(c){var m=this._map.getPixelOrigin(),w=this._getTileSize();return c.multiplyBy(w).subtract(m)},getTileUrl:function(c){return g.Util.template(this._url,g.extend({s:this._getSubdomain(c),z:c.z,x:c.x,y:c.y},this.options))},_getWrapTileNum:function(){return this._map.options.crs.getSize(this._map.getZoom()).divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(c){var m=this._getWrapTileNum();!this.options.continuousWorld&&!this.options.noWrap&&(c.x=(c.x%m.x+m.x)%m.x),this.options.tms&&(c.y=m.y-c.y-1),c.z=this._getZoomForUrl()},_getSubdomain:function(c){var m=Math.abs(c.x+c.y)%this.options.subdomains.length;return this.options.subdomains[m]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var c=this._unusedTiles.pop();return this._resetTile(c),c}return this._createTile()},_resetTile:function(){},_createTile:function(){var c=g.DomUtil.create("img","leaflet-tile");return c.style.width=c.style.height=this._getTileSize()+"px",c.galleryimg="no",c.onselectstart=c.onmousemove=g.Util.falseFn,g.Browser.ielt9&&this.options.opacity!==Y&&g.DomUtil.setOpacity(c,this.options.opacity),g.Browser.mobileWebkit3d&&(c.style.WebkitBackfaceVisibility="hidden"),c},_loadTile:function(c,m){c._layer=this,c.onload=this._tileOnLoad,c.onerror=this._tileOnError,this._adjustTilePoint(m),c.src=this.getTileUrl(m),this.fire("tileloadstart",{tile:c,url:c.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&g.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(g.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var c=this._layer;this.src!==g.Util.emptyImageUrl&&(g.DomUtil.addClass(this,"leaflet-tile-loaded"),c.fire("tileload",{tile:this,url:this.src})),c._tileLoaded()},_tileOnError:function(){var c=this._layer;c.fire("tileerror",{tile:this,url:this.src});var m=c.options.errorTileUrl;m&&(this.src=m),c._tileLoaded()}}),g.tileLayer=function(c,m){return new g.TileLayer(c,m)},g.TileLayer.WMS=g.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(c,m){this._url=c;var w=g.extend({},this.defaultWmsParams),x=m.tileSize||this.options.tileSize;for(var P in w.width=w.height=m.detectRetina&&g.Browser.retina?2*x:x,m)!this.options.hasOwnProperty(P)&&"crs"!==P&&(w[P]=m[P]);this.wmsParams=w,g.setOptions(this,m)},onAdd:function(c){this._crs=this.options.crs||c.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[this._wmsVersion>=1.3?"crs":"srs"]=this._crs.code,g.TileLayer.prototype.onAdd.call(this,c)},getTileUrl:function(c){var m=this._map,w=this.options.tileSize,x=c.multiplyBy(w),P=x.add([w,w]),U=this._crs.project(m.unproject(x,c.z)),q=this._crs.project(m.unproject(P,c.z)),X=this._wmsVersion>=1.3&&this._crs===g.CRS.EPSG4326?[q.y,U.x,U.y,q.x].join(","):[U.x,q.y,q.x,U.y].join(","),te=g.Util.template(this._url,{s:this._getSubdomain(c)});return te+g.Util.getParamString(this.wmsParams,te,!0)+"&BBOX="+X},setParams:function(c,m){return g.extend(this.wmsParams,c),m||this.redraw(),this}}),g.tileLayer.wms=function(c,m){return new g.TileLayer.WMS(c,m)},g.TileLayer.Canvas=g.TileLayer.extend({options:{async:!1},initialize:function(c){g.setOptions(this,c)},redraw:function(){for(var c in this._map&&(this._reset({hard:!0}),this._update()),this._tiles)this._redrawTile(this._tiles[c]);return this},_redrawTile:function(c){this.drawTile(c,c._tilePoint,this._map._zoom)},_createTile:function(){var c=g.DomUtil.create("canvas","leaflet-tile");return c.width=c.height=this.options.tileSize,c.onselectstart=c.onmousemove=g.Util.falseFn,c},_loadTile:function(c,m){c._layer=this,c._tilePoint=m,this._redrawTile(c),this.options.async||this.tileDrawn(c)},drawTile:function(){},tileDrawn:function(c){this._tileOnLoad.call(c)}}),g.tileLayer.canvas=function(c){return new g.TileLayer.Canvas(c)},g.ImageOverlay=g.Class.extend({includes:g.Mixin.Events,options:{opacity:1},initialize:function(c,m,w){this._url=c,this._bounds=g.latLngBounds(m),g.setOptions(this,w)},onAdd:function(c){this._map=c,this._image||this._initImage(),c._panes.overlayPane.appendChild(this._image),c.on("viewreset",this._reset,this),c.options.zoomAnimation&&g.Browser.any3d&&c.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(c){c.getPanes().overlayPane.removeChild(this._image),c.off("viewreset",this._reset,this),c.options.zoomAnimation&&c.off("zoomanim",this._animateZoom,this)},addTo:function(c){return c.addLayer(this),this},setOpacity:function(c){return this.options.opacity=c,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var c=this._map._panes.overlayPane;return this._image&&c.insertBefore(this._image,c.firstChild),this},setUrl:function(c){this._url=c,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=g.DomUtil.create("img","leaflet-image-layer"),g.DomUtil.addClass(this._image,this._map.options.zoomAnimation&&g.Browser.any3d?"leaflet-zoom-animated":"leaflet-zoom-hide"),this._updateOpacity(),g.extend(this._image,{galleryimg:"no",onselectstart:g.Util.falseFn,onmousemove:g.Util.falseFn,onload:g.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(c){var m=this._map,w=this._image,x=m.getZoomScale(c.zoom),P=this._bounds.getNorthWest(),U=this._bounds.getSouthEast(),q=m._latLngToNewLayerPoint(P,c.zoom,c.center),X=m._latLngToNewLayerPoint(U,c.zoom,c.center)._subtract(q),te=q._add(X._multiplyBy(.5*(1-1/x)));w.style[g.DomUtil.TRANSFORM]=g.DomUtil.getTranslateString(te)+" scale("+x+") "},_reset:function(){var c=this._image,m=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),w=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(m);g.DomUtil.setPosition(c,m),c.style.width=w.x+"px",c.style.height=w.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){g.DomUtil.setOpacity(this._image,this.options.opacity)}}),g.imageOverlay=function(c,m,w){return new g.ImageOverlay(c,m,w)},g.Icon=g.Class.extend({options:{className:""},initialize:function(c){g.setOptions(this,c)},createIcon:function(c){return this._createIcon("icon",c)},createShadow:function(c){return this._createIcon("shadow",c)},_createIcon:function(c,m){var x,w=this._getIconUrl(c);if(!w){if("icon"===c)throw new Error("iconUrl not set in Icon options (see the docs).");return null}return x=m&&"IMG"===m.tagName?this._createImg(w,m):this._createImg(w),this._setIconStyles(x,c),x},_setIconStyles:function(c,m){var P,w=this.options,x=g.point(w[m+"Size"]);!(P=g.point("shadow"===m&&w.shadowAnchor||w.iconAnchor))&&x&&(P=x.divideBy(2,!0)),c.className="leaflet-marker-"+m+" "+w.className,P&&(c.style.marginLeft=-P.x+"px",c.style.marginTop=-P.y+"px"),x&&(c.style.width=x.x+"px",c.style.height=x.y+"px")},_createImg:function(c,m){return(m=m||re.createElement("img")).src=c,m},_getIconUrl:function(c){return g.Browser.retina&&this.options[c+"RetinaUrl"]?this.options[c+"RetinaUrl"]:this.options[c+"Url"]}}),g.icon=function(c){return new g.Icon(c)},g.Icon.Default=g.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(c){var m=c+"Url";if(this.options[m])return this.options[m];g.Browser.retina&&"icon"===c&&(c+="-2x");var w=g.Icon.Default.imagePath;if(!w)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return w+"/marker-"+c+".png"}}),g.Icon.Default.imagePath=function(){var w,x,P,q,c=re.getElementsByTagName("script"),m=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(w=0,x=c.length;w<x;w++)if((P=c[w].src).match(m))return((q=P.split(m)[0])?q+"/":"")+"images"}(),g.Marker=g.Class.extend({includes:g.Mixin.Events,options:{icon:new g.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(c,m){g.setOptions(this,m),this._latlng=g.latLng(c)},onAdd:function(c){this._map=c,c.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),c.options.zoomAnimation&&c.options.markerZoomAnimation&&c.on("zoomanim",this._animateZoom,this)},addTo:function(c){return c.addLayer(this),this},onRemove:function(c){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),c.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(c){return this._latlng=g.latLng(c),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(c){return this.options.zIndexOffset=c,this.update(),this},setIcon:function(c){return this.options.icon=c,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){return this._icon&&this._setPos(this._map.latLngToLayerPoint(this._latlng).round()),this},_initIcon:function(){var c=this.options,m=this._map,x=m.options.zoomAnimation&&m.options.markerZoomAnimation?"leaflet-zoom-animated":"leaflet-zoom-hide",P=c.icon.createIcon(this._icon),U=!1;P!==this._icon&&(this._icon&&this._removeIcon(),U=!0,c.title&&(P.title=c.title),c.alt&&(P.alt=c.alt)),g.DomUtil.addClass(P,x),c.keyboard&&(P.tabIndex="0"),this._icon=P,this._initInteraction(),c.riseOnHover&&g.DomEvent.on(P,"mouseover",this._bringToFront,this).on(P,"mouseout",this._resetZIndex,this);var q=c.icon.createShadow(this._shadow),X=!1;q!==this._shadow&&(this._removeShadow(),X=!0),q&&g.DomUtil.addClass(q,x),this._shadow=q,c.opacity<1&&this._updateOpacity();var te=this._map._panes;U&&te.markerPane.appendChild(this._icon),q&&X&&te.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&g.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(c){g.DomUtil.setPosition(this._icon,c),this._shadow&&g.DomUtil.setPosition(this._shadow,c),this._zIndex=c.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(c){this._icon.style.zIndex=this._zIndex+c},_animateZoom:function(c){var m=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center).round();this._setPos(m)},_initInteraction:function(){if(this.options.clickable){var c=this._icon,m=["dblclick","mousedown","mouseover","mouseout","contextmenu"];g.DomUtil.addClass(c,"leaflet-clickable"),g.DomEvent.on(c,"click",this._onMouseClick,this),g.DomEvent.on(c,"keypress",this._onKeyPress,this);for(var w=0;w<m.length;w++)g.DomEvent.on(c,m[w],this._fireMouseEvent,this);g.Handler.MarkerDrag&&(this.dragging=new g.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(c){var m=this.dragging&&this.dragging.moved();(this.hasEventListeners(c.type)||m)&&g.DomEvent.stopPropagation(c),!m&&((!this.dragging||!this.dragging._enabled)&&this._map.dragging&&this._map.dragging.moved()||this.fire(c.type,{originalEvent:c,latlng:this._latlng}))},_onKeyPress:function(c){13===c.keyCode&&this.fire("click",{originalEvent:c,latlng:this._latlng})},_fireMouseEvent:function(c){this.fire(c.type,{originalEvent:c,latlng:this._latlng}),"contextmenu"===c.type&&this.hasEventListeners(c.type)&&g.DomEvent.preventDefault(c),"mousedown"!==c.type?g.DomEvent.stopPropagation(c):g.DomEvent.preventDefault(c)},setOpacity:function(c){return this.options.opacity=c,this._map&&this._updateOpacity(),this},_updateOpacity:function(){g.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&g.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),g.marker=function(c,m){return new g.Marker(c,m)},g.DivIcon=g.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(c){var m=c&&"DIV"===c.tagName?c:re.createElement("div"),w=this.options;return m.innerHTML=!1!==w.html?w.html:"",w.bgPos&&(m.style.backgroundPosition=-w.bgPos.x+"px "+-w.bgPos.y+"px"),this._setIconStyles(m,"icon"),m},createShadow:function(){return null}}),g.divIcon=function(c){return new g.DivIcon(c)},g.Map.mergeOptions({closePopupOnClick:!0}),g.Popup=g.Class.extend({includes:g.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(c,m){g.setOptions(this,c),this._source=m,this._animated=g.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(c){this._map=c,this._container||this._initLayout();var m=c.options.fadeAnimation;m&&g.DomUtil.setOpacity(this._container,0),c._panes.popupPane.appendChild(this._container),c.on(this._getEvents(),this),this.update(),m&&g.DomUtil.setOpacity(this._container,1),this.fire("open"),c.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(c){return c.addLayer(this),this},openOn:function(c){return c.openPopup(this),this},onRemove:function(c){c._panes.popupPane.removeChild(this._container),g.Util.falseFn(this._container.offsetWidth),c.off(this._getEvents(),this),c.options.fadeAnimation&&g.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),c.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(c){return this._latlng=g.latLng(c),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(c){return this._content=c,this.update(),this},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var c={viewreset:this._updatePosition};return this._animated&&(c.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(c.preclick=this._close),this.options.keepInView&&(c.moveend=this._adjustPan),c},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var x,c="leaflet-popup",w=this._container=g.DomUtil.create("div",c+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"));this.options.closeButton&&((x=this._closeButton=g.DomUtil.create("a",c+"-close-button",w)).href="#close",x.innerHTML="&#215;",g.DomEvent.disableClickPropagation(x),g.DomEvent.on(x,"click",this._onCloseButtonClick,this));var P=this._wrapper=g.DomUtil.create("div",c+"-content-wrapper",w);g.DomEvent.disableClickPropagation(P),this._contentNode=g.DomUtil.create("div",c+"-content",P),g.DomEvent.disableScrollPropagation(this._contentNode),g.DomEvent.on(P,"contextmenu",g.DomEvent.stopPropagation),this._tipContainer=g.DomUtil.create("div",c+"-tip-container",w),this._tip=g.DomUtil.create("div",c+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var c=this._contentNode,m=c.style;m.width="",m.whiteSpace="nowrap";var w=c.offsetWidth;w=Math.min(w,this.options.maxWidth),w=Math.max(w,this.options.minWidth),m.width=w+1+"px",m.whiteSpace="",m.height="";var P=this.options.maxHeight,U="leaflet-popup-scrolled";P&&c.offsetHeight>P?(m.height=P+"px",g.DomUtil.addClass(c,U)):g.DomUtil.removeClass(c,U),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var c=this._map.latLngToLayerPoint(this._latlng),m=this._animated,w=g.point(this.options.offset);m&&g.DomUtil.setPosition(this._container,c),this._containerBottom=-w.y-(m?0:c.y),this._containerLeft=-Math.round(this._containerWidth/2)+w.x+(m?0:c.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(c){var m=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center);g.DomUtil.setPosition(this._container,m)},_adjustPan:function(){if(this.options.autoPan){var c=this._map,m=this._container.offsetHeight,w=this._containerWidth,x=new g.Point(this._containerLeft,-m-this._containerBottom);this._animated&&x._add(g.DomUtil.getPosition(this._container));var P=c.layerPointToContainerPoint(x),U=g.point(this.options.autoPanPadding),q=g.point(this.options.autoPanPaddingTopLeft||U),X=g.point(this.options.autoPanPaddingBottomRight||U),te=c.getSize(),me=0,Me=0;P.x+w+X.x>te.x&&(me=P.x+w-te.x+X.x),P.x-me-q.x<0&&(me=P.x-q.x),P.y+m+X.y>te.y&&(Me=P.y+m-te.y+X.y),P.y-Me-q.y<0&&(Me=P.y-q.y),(me||Me)&&c.fire("autopanstart").panBy([me,Me])}},_onCloseButtonClick:function(c){this._close(),g.DomEvent.stop(c)}}),g.popup=function(c,m){return new g.Popup(c,m)},g.Map.include({openPopup:function(c,m,w){if(this.closePopup(),!(c instanceof g.Popup)){var x=c;c=new g.Popup(w).setLatLng(m).setContent(x)}return c._isOpen=!0,this._popup=c,this.addLayer(c)},closePopup:function(c){return(!c||c===this._popup)&&(c=this._popup,this._popup=null),c&&(this.removeLayer(c),c._isOpen=!1),this}}),g.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(c,m){var w=g.point(this.options.icon.options.popupAnchor||[0,0]);return w=w.add(g.Popup.prototype.options.offset),m&&m.offset&&(w=w.add(m.offset)),m=g.extend({offset:w},m),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),c instanceof g.Popup?(g.setOptions(c,m),this._popup=c,c._source=this):this._popup=new g.Popup(m,this).setContent(c),this},setPopupContent:function(c){return this._popup&&this._popup.setContent(c),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(c){this._popup.setLatLng(c.latlng)}}),g.LayerGroup=g.Class.extend({initialize:function(c){var m,w;if(this._layers={},c)for(m=0,w=c.length;m<w;m++)this.addLayer(c[m])},addLayer:function(c){var m=this.getLayerId(c);return this._layers[m]=c,this._map&&this._map.addLayer(c),this},removeLayer:function(c){var m=c in this._layers?c:this.getLayerId(c);return this._map&&this._layers[m]&&this._map.removeLayer(this._layers[m]),delete this._layers[m],this},hasLayer:function(c){return!!c&&(c in this._layers||this.getLayerId(c)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(c){var w,x,m=Array.prototype.slice.call(arguments,1);for(w in this._layers)(x=this._layers[w])[c]&&x[c].apply(x,m);return this},onAdd:function(c){this._map=c,this.eachLayer(c.addLayer,c)},onRemove:function(c){this.eachLayer(c.removeLayer,c),this._map=null},addTo:function(c){return c.addLayer(this),this},eachLayer:function(c,m){for(var w in this._layers)c.call(m,this._layers[w]);return this},getLayer:function(c){return this._layers[c]},getLayers:function(){var c=[];for(var m in this._layers)c.push(this._layers[m]);return c},setZIndex:function(c){return this.invoke("setZIndex",c)},getLayerId:function(c){return g.stamp(c)}}),g.layerGroup=function(c){return new g.LayerGroup(c)},g.FeatureGroup=g.LayerGroup.extend({includes:g.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(c){return this.hasLayer(c)?this:("on"in c&&c.on(g.FeatureGroup.EVENTS,this._propagateEvent,this),g.LayerGroup.prototype.addLayer.call(this,c),this._popupContent&&c.bindPopup&&c.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:c}))},removeLayer:function(c){return this.hasLayer(c)?(c in this._layers&&(c=this._layers[c]),"off"in c&&c.off(g.FeatureGroup.EVENTS,this._propagateEvent,this),g.LayerGroup.prototype.removeLayer.call(this,c),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:c})):this},bindPopup:function(c,m){return this._popupContent=c,this._popupOptions=m,this.invoke("bindPopup",c,m)},openPopup:function(c){for(var m in this._layers){this._layers[m].openPopup(c);break}return this},setStyle:function(c){return this.invoke("setStyle",c)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var c=new g.LatLngBounds;return this.eachLayer(function(m){c.extend(m instanceof g.Marker?m.getLatLng():m.getBounds())}),c},_propagateEvent:function(c){c=g.extend({layer:c.target,target:this},c),this.fire(c.type,c)}}),g.featureGroup=function(c){return new g.FeatureGroup(c)},g.Path=g.Class.extend({includes:[g.Mixin.Events],statics:{CLIP_PADDING:function(){var m=((g.Browser.mobile?1280:2e3)/Math.max(z.outerWidth,z.outerHeight)-1)/2;return Math.max(0,Math.min(.5,m))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(c){g.setOptions(this,c)},onAdd:function(c){this._map=c,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),c.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(c){return c.addLayer(this),this},onRemove:function(c){c._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,g.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),c.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(c){return g.setOptions(this,c),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),g.Map.include({_updatePathViewport:function(){var c=g.Path.CLIP_PADDING,m=this.getSize(),x=g.DomUtil.getPosition(this._mapPane).multiplyBy(-1)._subtract(m.multiplyBy(c)._round()),P=x.add(m.multiplyBy(1+2*c)._round());this._pathViewport=new g.Bounds(x,P)}}),g.Path.SVG_NS="http://www.w3.org/2000/svg",g.Browser.svg=!(!re.createElementNS||!re.createElementNS(g.Path.SVG_NS,"svg").createSVGRect),g.Path=g.Path.extend({statics:{SVG:g.Browser.svg},bringToFront:function(){var c=this._map._pathRoot,m=this._container;return m&&c.lastChild!==m&&c.appendChild(m),this},bringToBack:function(){var c=this._map._pathRoot,m=this._container,w=c.firstChild;return m&&w!==m&&c.insertBefore(m,w),this},getPathString:function(){},_createElement:function(c){return re.createElementNS(g.Path.SVG_NS,c)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&g.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),!this.options.clickable&&!this.options.pointerEvents&&this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var c=this.getPathString();c||(c="M0 0"),this._path.setAttribute("d",c)},_initEvents:function(){if(this.options.clickable){(g.Browser.svg||!g.Browser.vml)&&g.DomUtil.addClass(this._path,"leaflet-clickable"),g.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var c=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],m=0;m<c.length;m++)g.DomEvent.on(this._container,c[m],this._fireMouseEvent,this)}},_onMouseClick:function(c){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(c)},_fireMouseEvent:function(c){if(this._map&&this.hasEventListeners(c.type)){var m=this._map,w=m.mouseEventToContainerPoint(c),x=m.containerPointToLayerPoint(w),P=m.layerPointToLatLng(x);this.fire(c.type,{latlng:P,layerPoint:x,containerPoint:w,originalEvent:c}),"contextmenu"===c.type&&g.DomEvent.preventDefault(c),"mousemove"!==c.type&&g.DomEvent.stopPropagation(c)}}}),g.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=g.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&g.Browser.any3d?(g.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):g.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(c){var m=this.getZoomScale(c.zoom),w=this._getCenterOffset(c.center)._multiplyBy(-m)._add(this._pathViewport.min);this._pathRoot.style[g.DomUtil.TRANSFORM]=g.DomUtil.getTranslateString(w)+" scale("+m+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var c=this._pathViewport,m=c.min,w=c.max,x=w.x-m.x,P=w.y-m.y,U=this._pathRoot,q=this._panes.overlayPane;g.Browser.mobileWebkit&&q.removeChild(U),g.DomUtil.setPosition(U,m),U.setAttribute("width",x),U.setAttribute("height",P),U.setAttribute("viewBox",[m.x,m.y,x,P].join(" ")),g.Browser.mobileWebkit&&q.appendChild(U)}}}),g.Path.include({bindPopup:function(c,m){return c instanceof g.Popup?this._popup=c:((!this._popup||m)&&(this._popup=new g.Popup(m,this)),this._popup.setContent(c)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(c){return this._popup&&(c=c||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:c})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(c){this._popup.setLatLng(c.latlng),this._map.openPopup(this._popup)}}),g.Browser.vml=!g.Browser.svg&&function(){try{var c=re.createElement("div");c.innerHTML='<v:shape adj="1"/>';var m=c.firstChild;return m.style.behavior="url(#default#VML)",m&&"object"==typeof m.adj}catch{return!1}}(),g.Path=g.Browser.svg||!g.Browser.vml?g.Path:g.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return re.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(c){return re.createElement("<lvml:"+c+' class="lvml">')}}catch{return function(m){return re.createElement("<"+m+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var c=this._container=this._createElement("shape");g.DomUtil.addClass(c,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&g.DomUtil.addClass(c,"leaflet-clickable"),c.coordsize="1 1",this._path=this._createElement("path"),c.appendChild(this._path),this._map._pathRoot.appendChild(c)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var c=this._stroke,m=this._fill,w=this.options,x=this._container;x.stroked=w.stroke,x.filled=w.fill,w.stroke?(c||((c=this._stroke=this._createElement("stroke")).endcap="round",x.appendChild(c)),c.weight=w.weight+"px",c.color=w.color,c.opacity=w.opacity,c.dashStyle=w.dashArray?g.Util.isArray(w.dashArray)?w.dashArray.join(" "):w.dashArray.replace(/( *, *)/g," "):"",w.lineCap&&(c.endcap=w.lineCap.replace("butt","flat")),w.lineJoin&&(c.joinstyle=w.lineJoin)):c&&(x.removeChild(c),this._stroke=null),w.fill?(m||(m=this._fill=this._createElement("fill"),x.appendChild(m)),m.color=w.fillColor||w.color,m.opacity=w.fillOpacity):m&&(x.removeChild(m),this._fill=null)},_updatePath:function(){var c=this._container.style;c.display="none",this._path.v=this.getPathString()+" ",c.display=""}}),g.Map.include(g.Browser.svg||!g.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var c=this._pathRoot=re.createElement("div");c.className="leaflet-vml-container",this._panes.overlayPane.appendChild(c),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),g.Browser.canvas=!!re.createElement("canvas").getContext,g.Path=g.Path.SVG&&!z.L_PREFER_CANVAS||!g.Browser.canvas?g.Path:g.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(c){return g.setOptions(this,c),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(c){c.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!g.Path._updateRequest&&(g.Path._updateRequest=g.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){g.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var c=this.options;c.stroke&&(this._ctx.lineWidth=c.weight,this._ctx.strokeStyle=c.color),c.fill&&(this._ctx.fillStyle=c.fillColor||c.color),c.lineCap&&(this._ctx.lineCap=c.lineCap),c.lineJoin&&(this._ctx.lineJoin=c.lineJoin)},_drawPath:function(){var c,m,w,x,P;for(this._ctx.beginPath(),c=0,w=this._parts.length;c<w;c++){for(m=0,x=this._parts[c].length;m<x;m++)this._ctx[(0===m?"move":"line")+"To"]((P=this._parts[c][m]).x,P.y);this instanceof g.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var c=this._ctx,m=this.options;this._drawPath(),c.save(),this._updateStyle(),m.fill&&(c.globalAlpha=m.fillOpacity,c.fill(m.fillRule||"evenodd")),m.stroke&&(c.globalAlpha=m.opacity,c.stroke()),c.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click dblclick contextmenu",this._fireMouseEvent,this))},_fireMouseEvent:function(c){this._containsPoint(c.layerPoint)&&this.fire(c.type,c)},_onMouseMove:function(c){!this._map||this._map._animatingZoom||(this._containsPoint(c.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",c)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",c)))}}),g.Map.include(g.Path.SVG&&!z.L_PREFER_CANVAS||!g.Browser.canvas?{}:{_initPathRoot:function(){var m,c=this._pathRoot;c||((c=this._pathRoot=re.createElement("canvas")).style.position="absolute",(m=this._canvasCtx=c.getContext("2d")).lineCap="round",m.lineJoin="round",this._panes.overlayPane.appendChild(c),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var c=this._pathViewport,m=c.min,w=c.max.subtract(m),x=this._pathRoot;g.DomUtil.setPosition(x,m),x.width=w.x,x.height=w.y,x.getContext("2d").translate(-m.x,-m.y)}}}),g.LineUtil={simplify:function(c,m){if(!m||!c.length)return c.slice();var w=m*m;return c=this._reducePoints(c,w),this._simplifyDP(c,w)},pointToSegmentDistance:function(c,m,w){return Math.sqrt(this._sqClosestPointOnSegment(c,m,w,!0))},closestPointOnSegment:function(c,m,w){return this._sqClosestPointOnSegment(c,m,w)},_simplifyDP:function(c,m){var w=c.length,P=new(typeof Uint8Array!=Y+""?Uint8Array:Array)(w);P[0]=P[w-1]=1,this._simplifyDPStep(c,P,m,0,w-1);var U,q=[];for(U=0;U<w;U++)P[U]&&q.push(c[U]);return q},_simplifyDPStep:function(c,m,w,x,P){var q,X,te,U=0;for(X=x+1;X<=P-1;X++)(te=this._sqClosestPointOnSegment(c[X],c[x],c[P],!0))>U&&(q=X,U=te);U>w&&(m[q]=1,this._simplifyDPStep(c,m,w,x,q),this._simplifyDPStep(c,m,w,q,P))},_reducePoints:function(c,m){for(var w=[c[0]],x=1,P=0,U=c.length;x<U;x++)this._sqDist(c[x],c[P])>m&&(w.push(c[x]),P=x);return P<U-1&&w.push(c[U-1]),w},clipSegment:function(c,m,w,x){var q,X,te,P=x?this._lastCode:this._getBitCode(c,w),U=this._getBitCode(m,w);for(this._lastCode=U;;){if(!(P|U))return[c,m];if(P&U)return!1;X=this._getEdgeIntersection(c,m,q=P||U,w),te=this._getBitCode(X,w),q===P?(c=X,P=te):(m=X,U=te)}},_getEdgeIntersection:function(c,m,w,x){var P=m.x-c.x,U=m.y-c.y,q=x.min,X=x.max;return 8&w?new g.Point(c.x+P*(X.y-c.y)/U,X.y):4&w?new g.Point(c.x+P*(q.y-c.y)/U,q.y):2&w?new g.Point(X.x,c.y+U*(X.x-c.x)/P):1&w?new g.Point(q.x,c.y+U*(q.x-c.x)/P):void 0},_getBitCode:function(c,m){var w=0;return c.x<m.min.x?w|=1:c.x>m.max.x&&(w|=2),c.y<m.min.y?w|=4:c.y>m.max.y&&(w|=8),w},_sqDist:function(c,m){var w=m.x-c.x,x=m.y-c.y;return w*w+x*x},_sqClosestPointOnSegment:function(c,m,w,x){var me,P=m.x,U=m.y,q=w.x-P,X=w.y-U,te=q*q+X*X;return te>0&&((me=((c.x-P)*q+(c.y-U)*X)/te)>1?(P=w.x,U=w.y):me>0&&(P+=q*me,U+=X*me)),q=c.x-P,X=c.y-U,x?q*q+X*X:new g.Point(P,U)}},g.Polyline=g.Path.extend({initialize:function(c,m){g.Path.prototype.initialize.call(this,m),this._latlngs=this._convertLatLngs(c)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var c=0,m=this._latlngs.length;c<m;c++)this._originalPoints[c]=this._map.latLngToLayerPoint(this._latlngs[c])},getPathString:function(){for(var c=0,m=this._parts.length,w="";c<m;c++)w+=this._getPathPartStr(this._parts[c]);return w},getLatLngs:function(){return this._latlngs},setLatLngs:function(c){return this._latlngs=this._convertLatLngs(c),this.redraw()},addLatLng:function(c){return this._latlngs.push(g.latLng(c)),this.redraw()},spliceLatLngs:function(){var c=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),c},closestLayerPoint:function(c){for(var x,P,m=1/0,w=this._parts,U=null,q=0,X=w.length;q<X;q++)for(var te=w[q],me=1,Me=te.length;me<Me;me++){var De=g.LineUtil._sqClosestPointOnSegment(c,x=te[me-1],P=te[me],!0);De<m&&(m=De,U=g.LineUtil._sqClosestPointOnSegment(c,x,P))}return U&&(U.distance=Math.sqrt(m)),U},getBounds:function(){return new g.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(c,m){var w,x,P=m?c:[];for(w=0,x=c.length;w<x;w++){if(g.Util.isArray(c[w])&&"number"!=typeof c[w][0])return;P[w]=g.latLng(c[w])}return P},_initEvents:function(){g.Path.prototype._initEvents.call(this)},_getPathPartStr:function(c){for(var U,m=g.Path.VML,w=0,x=c.length,P="";w<x;w++)U=c[w],m&&U._round(),P+=(w?"L":"M")+U.x+" "+U.y;return P},_clipPoints:function(){var w,x,P,c=this._originalPoints,m=c.length;if(this.options.noClip)this._parts=[c];else{this._parts=[];var U=this._parts,q=this._map._pathViewport,X=g.LineUtil;for(w=0,x=0;w<m-1;w++)(P=X.clipSegment(c[w],c[w+1],q,w))&&(U[x]=U[x]||[],U[x].push(P[0]),(P[1]!==c[w+1]||w===m-2)&&(U[x].push(P[1]),x++))}},_simplifyPoints:function(){for(var c=this._parts,m=g.LineUtil,w=0,x=c.length;w<x;w++)c[w]=m.simplify(c[w],this.options.smoothFactor)},_updatePath:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),g.Path.prototype._updatePath.call(this))}}),g.polyline=function(c,m){return new g.Polyline(c,m)},g.PolyUtil={},g.PolyUtil.clipPolygon=function(c,m){var w,P,U,q,X,te,me,Me,De,x=[1,4,2,8],Ee=g.LineUtil;for(P=0,me=c.length;P<me;P++)c[P]._code=Ee._getBitCode(c[P],m);for(q=0;q<4;q++){for(Me=x[q],w=[],P=0,U=(me=c.length)-1;P<me;U=P++)te=c[U],(X=c[P])._code&Me?te._code&Me||((De=Ee._getEdgeIntersection(te,X,Me,m))._code=Ee._getBitCode(De,m),w.push(De)):(te._code&Me&&((De=Ee._getEdgeIntersection(te,X,Me,m))._code=Ee._getBitCode(De,m),w.push(De)),w.push(X));c=w}return c},g.Polygon=g.Polyline.extend({options:{fill:!0},initialize:function(c,m){g.Polyline.prototype.initialize.call(this,c,m),this._initWithHoles(c)},_initWithHoles:function(c){var m,w,x;if(c&&g.Util.isArray(c[0])&&"number"!=typeof c[0][0])for(this._latlngs=this._convertLatLngs(c[0]),this._holes=c.slice(1),m=0,w=this._holes.length;m<w;m++)(x=this._holes[m]=this._convertLatLngs(this._holes[m]))[0].equals(x[x.length-1])&&x.pop();(c=this._latlngs).length>=2&&c[0].equals(c[c.length-1])&&c.pop()},projectLatlngs:function(){var c,m,w,x;if(g.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes)for(c=0,w=this._holes.length;c<w;c++)for(this._holePoints[c]=[],m=0,x=this._holes[c].length;m<x;m++)this._holePoints[c][m]=this._map.latLngToLayerPoint(this._holes[c][m])},setLatLngs:function(c){return c&&g.Util.isArray(c[0])&&"number"!=typeof c[0][0]?(this._initWithHoles(c),this.redraw()):g.Polyline.prototype.setLatLngs.call(this,c)},_clipPoints:function(){var m=[];if(this._parts=[this._originalPoints].concat(this._holePoints),!this.options.noClip){for(var w=0,x=this._parts.length;w<x;w++){var P=g.PolyUtil.clipPolygon(this._parts[w],this._map._pathViewport);P.length&&m.push(P)}this._parts=m}},_getPathPartStr:function(c){return g.Polyline.prototype._getPathPartStr.call(this,c)+(g.Browser.svg?"z":"x")}}),g.polygon=function(c,m){return new g.Polygon(c,m)},function(){function c(m){return g.FeatureGroup.extend({initialize:function(w,x){this._layers={},this._options=x,this.setLatLngs(w)},setLatLngs:function(w){var x=0,P=w.length;for(this.eachLayer(function(U){x<P?U.setLatLngs(w[x++]):this.removeLayer(U)},this);x<P;)this.addLayer(new m(w[x++],this._options));return this},getLatLngs:function(){var w=[];return this.eachLayer(function(x){w.push(x.getLatLngs())}),w}})}g.MultiPolyline=c(g.Polyline),g.MultiPolygon=c(g.Polygon),g.multiPolyline=function(m,w){return new g.MultiPolyline(m,w)},g.multiPolygon=function(m,w){return new g.MultiPolygon(m,w)}}(),g.Rectangle=g.Polygon.extend({initialize:function(c,m){g.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(c),m)},setBounds:function(c){this.setLatLngs(this._boundsToLatLngs(c))},_boundsToLatLngs:function(c){return[(c=g.latLngBounds(c)).getSouthWest(),c.getNorthWest(),c.getNorthEast(),c.getSouthEast()]}}),g.rectangle=function(c,m){return new g.Rectangle(c,m)},g.Circle=g.Path.extend({initialize:function(c,m,w){g.Path.prototype.initialize.call(this,w),this._latlng=g.latLng(c),this._mRadius=m},options:{fill:!0},setLatLng:function(c){return this._latlng=g.latLng(c),this.redraw()},setRadius:function(c){return this._mRadius=c,this.redraw()},projectLatlngs:function(){var c=this._getLngRadius(),m=this._latlng,w=this._map.latLngToLayerPoint([m.lat,m.lng-c]);this._point=this._map.latLngToLayerPoint(m),this._radius=Math.max(this._point.x-w.x,1)},getBounds:function(){var c=this._getLngRadius(),m=this._mRadius/40075017*360,w=this._latlng;return new g.LatLngBounds([w.lat-m,w.lng-c],[w.lat+m,w.lng+c])},getLatLng:function(){return this._latlng},getPathString:function(){var c=this._point,m=this._radius;return this._checkIfEmpty()?"":g.Browser.svg?"M"+c.x+","+(c.y-m)+"A"+m+","+m+",0,1,1,"+(c.x-.1)+","+(c.y-m)+" z":(c._round(),m=Math.round(m),"AL "+c.x+","+c.y+" "+m+","+m+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(g.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var c=this._map._pathViewport,m=this._radius,w=this._point;return w.x-m>c.max.x||w.y-m>c.max.y||w.x+m<c.min.x||w.y+m<c.min.y}}),g.circle=function(c,m,w){return new g.Circle(c,m,w)},g.CircleMarker=g.Circle.extend({options:{radius:10,weight:2},initialize:function(c,m){g.Circle.prototype.initialize.call(this,c,null,m),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){g.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(c){return g.Circle.prototype.setLatLng.call(this,c),this._popup&&this._popup._isOpen&&this._popup.setLatLng(c),this},setRadius:function(c){return this.options.radius=this._radius=c,this.redraw()},getRadius:function(){return this._radius}}),g.circleMarker=function(c,m){return new g.CircleMarker(c,m)},g.Polyline.include(g.Path.CANVAS?{_containsPoint:function(c,m){var w,x,P,U,q,te,me=this.options.weight/2;for(g.Browser.touch&&(me+=10),w=0,U=this._parts.length;w<U;w++)for(x=0,P=(q=(te=this._parts[w]).length)-1;x<q;P=x++)if((m||0!==x)&&g.LineUtil.pointToSegmentDistance(c,te[P],te[x])<=me)return!0;return!1}}:{}),g.Polygon.include(g.Path.CANVAS?{_containsPoint:function(c){var w,x,P,U,q,X,te,me,m=!1;if(g.Polyline.prototype._containsPoint.call(this,c,!0))return!0;for(U=0,te=this._parts.length;U<te;U++)for(q=0,X=(me=(w=this._parts[U]).length)-1;q<me;X=q++)(x=w[q]).y>c.y!=(P=w[X]).y>c.y&&c.x<(P.x-x.x)*(c.y-x.y)/(P.y-x.y)+x.x&&(m=!m);return m}}:{}),g.Circle.include(g.Path.CANVAS?{_drawPath:function(){var c=this._point;this._ctx.beginPath(),this._ctx.arc(c.x,c.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(c){var w=this.options.stroke?this.options.weight/2:0;return c.distanceTo(this._point)<=this._radius+w}}:{}),g.CircleMarker.include(g.Path.CANVAS?{_updateStyle:function(){g.Path.prototype._updateStyle.call(this)}}:{}),g.GeoJSON=g.FeatureGroup.extend({initialize:function(c,m){g.setOptions(this,m),this._layers={},c&&this.addData(c)},addData:function(c){var w,x,P,m=g.Util.isArray(c)?c:c.features;if(m){for(w=0,x=m.length;w<x;w++)((P=m[w]).geometries||P.geometry||P.features||P.coordinates)&&this.addData(m[w]);return this}var U=this.options;if(!U.filter||U.filter(c)){var q=g.GeoJSON.geometryToLayer(c,U.pointToLayer,U.coordsToLatLng,U);return q.feature=g.GeoJSON.asFeature(c),q.defaultOptions=q.options,this.resetStyle(q),U.onEachFeature&&U.onEachFeature(c,q),this.addLayer(q)}},resetStyle:function(c){var m=this.options.style;m&&(g.Util.extend(c.options,c.defaultOptions),this._setLayerStyle(c,m))},setStyle:function(c){this.eachLayer(function(m){this._setLayerStyle(m,c)},this)},_setLayerStyle:function(c,m){"function"==typeof m&&(m=m(c.feature)),c.setStyle&&c.setStyle(m)}}),g.extend(g.GeoJSON,{geometryToLayer:function(c,m,w,x){var X,te,me,Me,P="Feature"===c.type?c.geometry:c,U=P.coordinates,q=[];switch(w=w||this.coordsToLatLng,P.type){case"Point":return X=w(U),m?m(c,X):new g.Marker(X);case"MultiPoint":for(me=0,Me=U.length;me<Me;me++)X=w(U[me]),q.push(m?m(c,X):new g.Marker(X));return new g.FeatureGroup(q);case"LineString":return te=this.coordsToLatLngs(U,0,w),new g.Polyline(te,x);case"Polygon":if(2===U.length&&!U[1].length)throw new Error("Invalid GeoJSON object.");return te=this.coordsToLatLngs(U,1,w),new g.Polygon(te,x);case"MultiLineString":return te=this.coordsToLatLngs(U,1,w),new g.MultiPolyline(te,x);case"MultiPolygon":return te=this.coordsToLatLngs(U,2,w),new g.MultiPolygon(te,x);case"GeometryCollection":for(me=0,Me=P.geometries.length;me<Me;me++)q.push(this.geometryToLayer({geometry:P.geometries[me],type:"Feature",properties:c.properties},m,w,x));return new g.FeatureGroup(q);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(c){return new g.LatLng(c[1],c[0],c[2])},coordsToLatLngs:function(c,m,w){var x,P,U,q=[];for(P=0,U=c.length;P<U;P++)x=m?this.coordsToLatLngs(c[P],m-1,w):(w||this.coordsToLatLng)(c[P]),q.push(x);return q},latLngToCoords:function(c){var m=[c.lng,c.lat];return c.alt!==Y&&m.push(c.alt),m},latLngsToCoords:function(c){for(var m=[],w=0,x=c.length;w<x;w++)m.push(g.GeoJSON.latLngToCoords(c[w]));return m},getFeature:function(c,m){return c.feature?g.extend({},c.feature,{geometry:m}):g.GeoJSON.asFeature(m)},asFeature:function(c){return"Feature"===c.type?c:{type:"Feature",properties:{},geometry:c}}});var j={toGeoJSON:function(){return g.GeoJSON.getFeature(this,{type:"Point",coordinates:g.GeoJSON.latLngToCoords(this.getLatLng())})}};g.Marker.include(j),g.Circle.include(j),g.CircleMarker.include(j),g.Polyline.include({toGeoJSON:function(){return g.GeoJSON.getFeature(this,{type:"LineString",coordinates:g.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),g.Polygon.include({toGeoJSON:function(){var m,w,x,c=[g.GeoJSON.latLngsToCoords(this.getLatLngs())];if(c[0].push(c[0][0]),this._holes)for(m=0,w=this._holes.length;m<w;m++)(x=g.GeoJSON.latLngsToCoords(this._holes[m])).push(x[0]),c.push(x);return g.GeoJSON.getFeature(this,{type:"Polygon",coordinates:c})}}),function(){function c(m){return function(){var w=[];return this.eachLayer(function(x){w.push(x.toGeoJSON().geometry.coordinates)}),g.GeoJSON.getFeature(this,{type:m,coordinates:w})}}g.MultiPolyline.include({toGeoJSON:c("MultiLineString")}),g.MultiPolygon.include({toGeoJSON:c("MultiPolygon")}),g.LayerGroup.include({toGeoJSON:function(){var x,m=this.feature&&this.feature.geometry,w=[];if(m&&"MultiPoint"===m.type)return c("MultiPoint").call(this);var P=m&&"GeometryCollection"===m.type;return this.eachLayer(function(U){U.toGeoJSON&&(x=U.toGeoJSON(),w.push(P?x.geometry:g.GeoJSON.asFeature(x)))}),P?g.GeoJSON.getFeature(this,{geometries:w,type:"GeometryCollection"}):{type:"FeatureCollection",features:w}}})}(),g.geoJson=function(c,m){return new g.GeoJSON(c,m)},g.DomEvent={addListener:function(c,m,w,x){var q,X,P=g.stamp(w),U="_leaflet_"+m+P;return c[U]?this:(q=function(me){return w.call(x||c,me||g.DomEvent._getEvent())},g.Browser.pointer&&0===m.indexOf("touch")?this.addPointerListener(c,m,q,P):(g.Browser.touch&&"dblclick"===m&&this.addDoubleTapListener&&this.addDoubleTapListener(c,q,P),"addEventListener"in c?"mousewheel"===m?(c.addEventListener("DOMMouseScroll",q,!1),c.addEventListener(m,q,!1)):"mouseenter"===m||"mouseleave"===m?(X=q,c.addEventListener("mouseenter"===m?"mouseover":"mouseout",q=function(me){if(g.DomEvent._checkMouse(c,me))return X(me)},!1)):("click"===m&&g.Browser.android&&(X=q,q=function(me){return g.DomEvent._filterClick(me,X)}),c.addEventListener(m,q,!1)):"attachEvent"in c&&c.attachEvent("on"+m,q),c[U]=q,this))},removeListener:function(c,m,w){var x=g.stamp(w),P="_leaflet_"+m+x,U=c[P];return U?(g.Browser.pointer&&0===m.indexOf("touch")?this.removePointerListener(c,m,x):g.Browser.touch&&"dblclick"===m&&this.removeDoubleTapListener?this.removeDoubleTapListener(c,x):"removeEventListener"in c?"mousewheel"===m?(c.removeEventListener("DOMMouseScroll",U,!1),c.removeEventListener(m,U,!1)):c.removeEventListener("mouseenter"===m||"mouseleave"===m?"mouseenter"===m?"mouseover":"mouseout":m,U,!1):"detachEvent"in c&&c.detachEvent("on"+m,U),c[P]=null,this):this},stopPropagation:function(c){return c.stopPropagation?c.stopPropagation():c.cancelBubble=!0,g.DomEvent._skipped(c),this},disableScrollPropagation:function(c){var m=g.DomEvent.stopPropagation;return g.DomEvent.on(c,"mousewheel",m).on(c,"MozMousePixelScroll",m)},disableClickPropagation:function(c){for(var m=g.DomEvent.stopPropagation,w=g.Draggable.START.length-1;w>=0;w--)g.DomEvent.on(c,g.Draggable.START[w],m);return g.DomEvent.on(c,"click",g.DomEvent._fakeStop).on(c,"dblclick",m)},preventDefault:function(c){return c.preventDefault?c.preventDefault():c.returnValue=!1,this},stop:function(c){return g.DomEvent.preventDefault(c).stopPropagation(c)},getMousePosition:function(c,m){if(!m)return new g.Point(c.clientX,c.clientY);var w=m.getBoundingClientRect();return new g.Point(c.clientX-w.left-m.clientLeft,c.clientY-w.top-m.clientTop)},getWheelDelta:function(c){var m=0;return c.wheelDelta&&(m=c.wheelDelta/120),c.detail&&(m=-c.detail/3),m},_skipEvents:{},_fakeStop:function(c){g.DomEvent._skipEvents[c.type]=!0},_skipped:function(c){var m=this._skipEvents[c.type];return this._skipEvents[c.type]=!1,m},_checkMouse:function(c,m){var w=m.relatedTarget;if(!w)return!0;try{for(;w&&w!==c;)w=w.parentNode}catch{return!1}return w!==c},_getEvent:function(){var c=z.event;if(!c)for(var m=arguments.callee.caller;m&&(!(c=m.arguments[0])||z.Event!==c.constructor);)m=m.caller;return c},_filterClick:function(c,m){var w=c.timeStamp||c.originalEvent.timeStamp,x=g.DomEvent._lastClick&&w-g.DomEvent._lastClick;if(!(x&&x>100&&x<500||c.target._simulatedClick&&!c._simulated))return g.DomEvent._lastClick=w,m(c);g.DomEvent.stop(c)}},g.DomEvent.on=g.DomEvent.addListener,g.DomEvent.off=g.DomEvent.removeListener,g.Draggable=g.Class.extend({includes:g.Mixin.Events,statics:{START:g.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(c,m){this._element=c,this._dragStartTarget=m||c},enable:function(){if(!this._enabled){for(var c=g.Draggable.START.length-1;c>=0;c--)g.DomEvent.on(this._dragStartTarget,g.Draggable.START[c],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var c=g.Draggable.START.length-1;c>=0;c--)g.DomEvent.off(this._dragStartTarget,g.Draggable.START[c],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(c){if(this._moved=!1,!c.shiftKey&&(1===c.which||1===c.button||c.touches)&&(g.DomEvent.stopPropagation(c),!g.Draggable._disabled&&(g.DomUtil.disableImageDrag(),g.DomUtil.disableTextSelection(),!this._moving))){var m=c.touches?c.touches[0]:c;this._startPoint=new g.Point(m.clientX,m.clientY),this._startPos=this._newPos=g.DomUtil.getPosition(this._element),g.DomEvent.on(re,g.Draggable.MOVE[c.type],this._onMove,this).on(re,g.Draggable.END[c.type],this._onUp,this)}},_onMove:function(c){if(c.touches&&c.touches.length>1)this._moved=!0;else{var m=c.touches&&1===c.touches.length?c.touches[0]:c,x=new g.Point(m.clientX,m.clientY).subtract(this._startPoint);!x.x&&!x.y||g.Browser.touch&&Math.abs(x.x)+Math.abs(x.y)<3||(g.DomEvent.preventDefault(c),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=g.DomUtil.getPosition(this._element).subtract(x),g.DomUtil.addClass(re.body,"leaflet-dragging"),this._lastTarget=c.target||c.srcElement,g.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(x),this._moving=!0,g.Util.cancelAnimFrame(this._animRequest),this._animRequest=g.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget))}},_updatePosition:function(){this.fire("predrag"),g.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){for(var c in g.DomUtil.removeClass(re.body,"leaflet-dragging"),this._lastTarget&&(g.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),g.Draggable.MOVE)g.DomEvent.off(re,g.Draggable.MOVE[c],this._onMove).off(re,g.Draggable.END[c],this._onUp);g.DomUtil.enableImageDrag(),g.DomUtil.enableTextSelection(),this._moved&&this._moving&&(g.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),g.Handler=g.Class.extend({initialize:function(c){this._map=c},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){!this._enabled||(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),g.Map.mergeOptions({dragging:!0,inertia:!g.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:g.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),g.Map.Drag=g.Handler.extend({addHooks:function(){if(!this._draggable){var c=this._map;this._draggable=new g.Draggable(c._mapPane,c._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),c.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),c.on("viewreset",this._onViewReset,this),c.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var c=this._map;c._panAnim&&c._panAnim.stop(),c.fire("movestart").fire("dragstart"),c.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var c=this._lastTime=+new Date,m=this._lastPos=this._draggable._newPos;this._positions.push(m),this._times.push(c),c-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var c=this._map.getSize()._divideBy(2),m=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=m.subtract(c).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var c=this._worldWidth,m=Math.round(c/2),w=this._initialWorldOffset,x=this._draggable._newPos.x,P=(x-m+w)%c+m-w,U=(x+m+w)%c-m-w,q=Math.abs(P+w)<Math.abs(U+w)?P:U;this._draggable._newPos.x=q},_onDragEnd:function(c){var m=this._map,w=m.options,x=+new Date-this._lastTime,P=!w.inertia||x>w.inertiaThreshold||!this._positions[0];if(m.fire("dragend",c),P)m.fire("moveend");else{var U=this._lastPos.subtract(this._positions[0]),X=w.easeLinearity,te=U.multiplyBy(X/((this._lastTime+x-this._times[0])/1e3)),me=te.distanceTo([0,0]),Me=Math.min(w.inertiaMaxSpeed,me),De=te.multiplyBy(Me/me),Ee=Me/(w.inertiaDeceleration*X),Ie=De.multiplyBy(-Ee/2).round();Ie.x&&Ie.y?(Ie=m._limitOffset(Ie,m.options.maxBounds),g.Util.requestAnimFrame(function(){m.panBy(Ie,{duration:Ee,easeLinearity:X,noMoveStart:!0})})):m.fire("moveend")}}}),g.Map.addInitHook("addHandler","dragging",g.Map.Drag),g.Map.mergeOptions({doubleClickZoom:!0}),g.Map.DoubleClickZoom=g.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(c){var m=this._map,w=m.getZoom()+(c.originalEvent.shiftKey?-1:1);"center"===m.options.doubleClickZoom?m.setZoom(w):m.setZoomAround(c.containerPoint,w)}}),g.Map.addInitHook("addHandler","doubleClickZoom",g.Map.DoubleClickZoom),g.Map.mergeOptions({scrollWheelZoom:!0}),g.Map.ScrollWheelZoom=g.Handler.extend({addHooks:function(){g.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),g.DomEvent.on(this._map._container,"MozMousePixelScroll",g.DomEvent.preventDefault),this._delta=0},removeHooks:function(){g.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),g.DomEvent.off(this._map._container,"MozMousePixelScroll",g.DomEvent.preventDefault)},_onWheelScroll:function(c){var m=g.DomEvent.getWheelDelta(c);this._delta+=m,this._lastMousePos=this._map.mouseEventToContainerPoint(c),this._startTime||(this._startTime=+new Date);var w=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(g.bind(this._performZoom,this),w),g.DomEvent.preventDefault(c),g.DomEvent.stopPropagation(c)},_performZoom:function(){var c=this._map,m=this._delta,w=c.getZoom();m=m>0?Math.ceil(m):Math.floor(m),m=Math.max(Math.min(m,4),-4),m=c._limitZoom(w+m)-w,this._delta=0,this._startTime=null,m&&("center"===c.options.scrollWheelZoom?c.setZoom(w+m):c.setZoomAround(this._lastMousePos,w+m))}}),g.Map.addInitHook("addHandler","scrollWheelZoom",g.Map.ScrollWheelZoom),g.extend(g.DomEvent,{_touchstart:g.Browser.msPointer?"MSPointerDown":g.Browser.pointer?"pointerdown":"touchstart",_touchend:g.Browser.msPointer?"MSPointerUp":g.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(c,m,w){var x,q,P=!1,X="_leaflet_",te=this._touchstart,me=this._touchend,Me=[];function De(He){var ze;if(g.Browser.pointer?(Me.push(He.pointerId),ze=Me.length):ze=He.touches.length,!(ze>1)){var oe=Date.now(),Ae=oe-(x||oe);q=He.touches?He.touches[0]:He,P=Ae>0&&Ae<=250,x=oe}}function Ee(He){if(g.Browser.pointer){var ze=Me.indexOf(He.pointerId);if(-1===ze)return;Me.splice(ze,1)}if(P){if(g.Browser.pointer){var Ae,oe={};for(var he in q)oe[he]="function"==typeof(Ae=q[he])?Ae.bind(q):Ae;q=oe}q.type="dblclick",m(q),x=null}}c[X+te+w]=De,c[X+me+w]=Ee;var Ie=g.Browser.pointer?re.documentElement:c;return c.addEventListener(te,De,!1),Ie.addEventListener(me,Ee,!1),g.Browser.pointer&&Ie.addEventListener(g.DomEvent.POINTER_CANCEL,Ee,!1),this},removeDoubleTapListener:function(c,m){var w="_leaflet_";return c.removeEventListener(this._touchstart,c[w+this._touchstart+m],!1),(g.Browser.pointer?re.documentElement:c).removeEventListener(this._touchend,c[w+this._touchend+m],!1),g.Browser.pointer&&re.documentElement.removeEventListener(g.DomEvent.POINTER_CANCEL,c[w+this._touchend+m],!1),this}}),g.extend(g.DomEvent,{POINTER_DOWN:g.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:g.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:g.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:g.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(c,m,w,x){switch(m){case"touchstart":return this.addPointerListenerStart(c,m,w,x);case"touchend":return this.addPointerListenerEnd(c,m,w,x);case"touchmove":return this.addPointerListenerMove(c,m,w,x);default:throw"Unknown touch event type"}},addPointerListenerStart:function(c,m,w,x){var U=this._pointers,q=function(te){"mouse"!==te.pointerType&&te.pointerType!==te.MSPOINTER_TYPE_MOUSE&&g.DomEvent.preventDefault(te);for(var me=!1,Me=0;Me<U.length;Me++)if(U[Me].pointerId===te.pointerId){me=!0;break}me||U.push(te),te.touches=U.slice(),te.changedTouches=[te],w(te)};if(c["_leaflet_touchstart"+x]=q,c.addEventListener(this.POINTER_DOWN,q,!1),!this._pointerDocumentListener){var X=function(te){for(var me=0;me<U.length;me++)if(U[me].pointerId===te.pointerId){U.splice(me,1);break}};re.documentElement.addEventListener(this.POINTER_UP,X,!1),re.documentElement.addEventListener(this.POINTER_CANCEL,X,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(c,m,w,x){var U=this._pointers;function q(X){if(X.pointerType!==X.MSPOINTER_TYPE_MOUSE&&"mouse"!==X.pointerType||0!==X.buttons){for(var te=0;te<U.length;te++)if(U[te].pointerId===X.pointerId){U[te]=X;break}X.touches=U.slice(),X.changedTouches=[X],w(X)}}return c["_leaflet_touchmove"+x]=q,c.addEventListener(this.POINTER_MOVE,q,!1),this},addPointerListenerEnd:function(c,m,w,x){var U=this._pointers,q=function(X){for(var te=0;te<U.length;te++)if(U[te].pointerId===X.pointerId){U.splice(te,1);break}X.touches=U.slice(),X.changedTouches=[X],w(X)};return c["_leaflet_touchend"+x]=q,c.addEventListener(this.POINTER_UP,q,!1),c.addEventListener(this.POINTER_CANCEL,q,!1),this},removePointerListener:function(c,m,w){var P=c["_leaflet_"+m+w];switch(m){case"touchstart":c.removeEventListener(this.POINTER_DOWN,P,!1);break;case"touchmove":c.removeEventListener(this.POINTER_MOVE,P,!1);break;case"touchend":c.removeEventListener(this.POINTER_UP,P,!1),c.removeEventListener(this.POINTER_CANCEL,P,!1)}return this}}),g.Map.mergeOptions({touchZoom:g.Browser.touch&&!g.Browser.android23,bounceAtZoomLimits:!0}),g.Map.TouchZoom=g.Handler.extend({addHooks:function(){g.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){g.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(c){var m=this._map;if(c.touches&&2===c.touches.length&&!m._animatingZoom&&!this._zooming){var w=m.mouseEventToLayerPoint(c.touches[0]),x=m.mouseEventToLayerPoint(c.touches[1]),P=m._getCenterLayerPoint();this._startCenter=w.add(x)._divideBy(2),this._startDist=w.distanceTo(x),this._moved=!1,this._zooming=!0,this._centerOffset=P.subtract(this._startCenter),m._panAnim&&m._panAnim.stop(),g.DomEvent.on(re,"touchmove",this._onTouchMove,this).on(re,"touchend",this._onTouchEnd,this),g.DomEvent.preventDefault(c)}},_onTouchMove:function(c){var m=this._map;if(c.touches&&2===c.touches.length&&this._zooming){var w=m.mouseEventToLayerPoint(c.touches[0]),x=m.mouseEventToLayerPoint(c.touches[1]);this._scale=w.distanceTo(x)/this._startDist,this._delta=w._add(x)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(!m.options.bounceAtZoomLimits&&(m.getZoom()===m.getMinZoom()&&this._scale<1||m.getZoom()===m.getMaxZoom()&&this._scale>1)||(this._moved||(g.DomUtil.addClass(m._mapPane,"leaflet-touching"),m.fire("movestart").fire("zoomstart"),this._moved=!0),g.Util.cancelAnimFrame(this._animRequest),this._animRequest=g.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),g.DomEvent.preventDefault(c)))}},_updateOnMove:function(){var c=this._map,m=this._getScaleOrigin(),w=c.layerPointToLatLng(m),x=c.getScaleZoom(this._scale);c._animateZoom(w,x,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(this._moved&&this._zooming){var c=this._map;this._zooming=!1,g.DomUtil.removeClass(c._mapPane,"leaflet-touching"),g.Util.cancelAnimFrame(this._animRequest),g.DomEvent.off(re,"touchmove",this._onTouchMove).off(re,"touchend",this._onTouchEnd);var m=this._getScaleOrigin(),w=c.layerPointToLatLng(m),x=c.getZoom(),P=c.getScaleZoom(this._scale)-x,U=P>0?Math.ceil(P):Math.floor(P),q=c._limitZoom(x+U),X=c.getZoomScale(q)/this._scale;c._animateZoom(w,q,m,X)}else this._zooming=!1},_getScaleOrigin:function(){var c=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(c)}}),g.Map.addInitHook("addHandler","touchZoom",g.Map.TouchZoom),g.Map.mergeOptions({tap:!0,tapTolerance:15}),g.Map.Tap=g.Handler.extend({addHooks:function(){g.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){g.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(c){if(c.touches){if(g.DomEvent.preventDefault(c),this._fireClick=!0,c.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var m=c.touches[0],w=m.target;this._startPos=this._newPos=new g.Point(m.clientX,m.clientY),w.tagName&&"a"===w.tagName.toLowerCase()&&g.DomUtil.addClass(w,"leaflet-active"),this._holdTimeout=setTimeout(g.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",m))},this),1e3),g.DomEvent.on(re,"touchmove",this._onMove,this).on(re,"touchend",this._onUp,this)}},_onUp:function(c){if(clearTimeout(this._holdTimeout),g.DomEvent.off(re,"touchmove",this._onMove,this).off(re,"touchend",this._onUp,this),this._fireClick&&c&&c.changedTouches){var m=c.changedTouches[0],w=m.target;w&&w.tagName&&"a"===w.tagName.toLowerCase()&&g.DomUtil.removeClass(w,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",m)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(c){var m=c.touches[0];this._newPos=new g.Point(m.clientX,m.clientY)},_simulateEvent:function(c,m){var w=re.createEvent("MouseEvents");w._simulated=!0,m.target._simulatedClick=!0,w.initMouseEvent(c,!0,!0,z,1,m.screenX,m.screenY,m.clientX,m.clientY,!1,!1,!1,!1,0,null),m.target.dispatchEvent(w)}}),g.Browser.touch&&!g.Browser.pointer&&g.Map.addInitHook("addHandler","tap",g.Map.Tap),g.Map.mergeOptions({boxZoom:!0}),g.Map.BoxZoom=g.Handler.extend({initialize:function(c){this._map=c,this._container=c._container,this._pane=c._panes.overlayPane,this._moved=!1},addHooks:function(){g.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){g.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(c){if(this._moved=!1,!c.shiftKey||1!==c.which&&1!==c.button)return!1;g.DomUtil.disableTextSelection(),g.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(c),g.DomEvent.on(re,"mousemove",this._onMouseMove,this).on(re,"mouseup",this._onMouseUp,this).on(re,"keydown",this._onKeyDown,this)},_onMouseMove:function(c){this._moved||(this._box=g.DomUtil.create("div","leaflet-zoom-box",this._pane),g.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var m=this._startLayerPoint,w=this._box,x=this._map.mouseEventToLayerPoint(c),P=x.subtract(m),U=new g.Point(Math.min(x.x,m.x),Math.min(x.y,m.y));g.DomUtil.setPosition(w,U),this._moved=!0,w.style.width=Math.max(0,Math.abs(P.x)-4)+"px",w.style.height=Math.max(0,Math.abs(P.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),g.DomUtil.enableTextSelection(),g.DomUtil.enableImageDrag(),g.DomEvent.off(re,"mousemove",this._onMouseMove).off(re,"mouseup",this._onMouseUp).off(re,"keydown",this._onKeyDown)},_onMouseUp:function(c){this._finish();var m=this._map,w=m.mouseEventToLayerPoint(c);if(!this._startLayerPoint.equals(w)){var x=new g.LatLngBounds(m.layerPointToLatLng(this._startLayerPoint),m.layerPointToLatLng(w));m.fitBounds(x),m.fire("boxzoomend",{boxZoomBounds:x})}},_onKeyDown:function(c){27===c.keyCode&&this._finish()}}),g.Map.addInitHook("addHandler","boxZoom",g.Map.BoxZoom),g.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),g.Map.Keyboard=g.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(c){this._map=c,this._setPanOffset(c.options.keyboardPanOffset),this._setZoomOffset(c.options.keyboardZoomOffset)},addHooks:function(){var c=this._map._container;-1===c.tabIndex&&(c.tabIndex="0"),g.DomEvent.on(c,"focus",this._onFocus,this).on(c,"blur",this._onBlur,this).on(c,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var c=this._map._container;g.DomEvent.off(c,"focus",this._onFocus,this).off(c,"blur",this._onBlur,this).off(c,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var c=re.body,m=re.documentElement,w=c.scrollTop||m.scrollTop,x=c.scrollLeft||m.scrollLeft;this._map._container.focus(),z.scrollTo(x,w)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(c){var x,P,m=this._panKeys={},w=this.keyCodes;for(x=0,P=w.left.length;x<P;x++)m[w.left[x]]=[-1*c,0];for(x=0,P=w.right.length;x<P;x++)m[w.right[x]]=[c,0];for(x=0,P=w.down.length;x<P;x++)m[w.down[x]]=[0,c];for(x=0,P=w.up.length;x<P;x++)m[w.up[x]]=[0,-1*c]},_setZoomOffset:function(c){var x,P,m=this._zoomKeys={},w=this.keyCodes;for(x=0,P=w.zoomIn.length;x<P;x++)m[w.zoomIn[x]]=c;for(x=0,P=w.zoomOut.length;x<P;x++)m[w.zoomOut[x]]=-c},_addHooks:function(){g.DomEvent.on(re,"keydown",this._onKeyDown,this)},_removeHooks:function(){g.DomEvent.off(re,"keydown",this._onKeyDown,this)},_onKeyDown:function(c){var m=c.keyCode,w=this._map;if(m in this._panKeys){if(w._panAnim&&w._panAnim._inProgress)return;w.panBy(this._panKeys[m]),w.options.maxBounds&&w.panInsideBounds(w.options.maxBounds)}else{if(!(m in this._zoomKeys))return;w.setZoom(w.getZoom()+this._zoomKeys[m])}g.DomEvent.stop(c)}}),g.Map.addInitHook("addHandler","keyboard",g.Map.Keyboard),g.Handler.MarkerDrag=g.Handler.extend({initialize:function(c){this._marker=c},addHooks:function(){var c=this._marker._icon;this._draggable||(this._draggable=new g.Draggable(c,c)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),g.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),g.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var c=this._marker,m=c._shadow,w=g.DomUtil.getPosition(c._icon),x=c._map.layerPointToLatLng(w);m&&g.DomUtil.setPosition(m,w),c._latlng=x,c.fire("move",{latlng:x}).fire("drag")},_onDragEnd:function(c){this._marker.fire("moveend").fire("dragend",c)}}),g.Control=g.Class.extend({options:{position:"topright"},initialize:function(c){g.setOptions(this,c)},getPosition:function(){return this.options.position},setPosition:function(c){var m=this._map;return m&&m.removeControl(this),this.options.position=c,m&&m.addControl(this),this},getContainer:function(){return this._container},addTo:function(c){this._map=c;var m=this._container=this.onAdd(c),w=this.getPosition(),x=c._controlCorners[w];return g.DomUtil.addClass(m,"leaflet-control"),-1!==w.indexOf("bottom")?x.insertBefore(m,x.firstChild):x.appendChild(m),this},removeFrom:function(c){var m=this.getPosition();return c._controlCorners[m].removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(c),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),g.control=function(c){return new g.Control(c)},g.Map.include({addControl:function(c){return c.addTo(this),this},removeControl:function(c){return c.removeFrom(this),this},_initControlPos:function(){var c=this._controlCorners={},m="leaflet-",w=this._controlContainer=g.DomUtil.create("div",m+"control-container",this._container);function x(P,U){c[P+U]=g.DomUtil.create("div",m+P+" "+m+U,w)}x("top","left"),x("top","right"),x("bottom","left"),x("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),g.Control.Zoom=g.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(c){var m="leaflet-control-zoom",w=g.DomUtil.create("div",m+" leaflet-bar");return this._map=c,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,m+"-in",w,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,m+"-out",w,this._zoomOut,this),this._updateDisabled(),c.on("zoomend zoomlevelschange",this._updateDisabled,this),w},onRemove:function(c){c.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(c){this._map.zoomIn(c.shiftKey?3:1)},_zoomOut:function(c){this._map.zoomOut(c.shiftKey?3:1)},_createButton:function(c,m,w,x,P,U){var q=g.DomUtil.create("a",w,x);q.innerHTML=c,q.href="#",q.title=m;var X=g.DomEvent.stopPropagation;return g.DomEvent.on(q,"click",X).on(q,"mousedown",X).on(q,"dblclick",X).on(q,"click",g.DomEvent.preventDefault).on(q,"click",P,U).on(q,"click",this._refocusOnMap,U),q},_updateDisabled:function(){var c=this._map,m="leaflet-disabled";g.DomUtil.removeClass(this._zoomInButton,m),g.DomUtil.removeClass(this._zoomOutButton,m),c._zoom===c.getMinZoom()&&g.DomUtil.addClass(this._zoomOutButton,m),c._zoom===c.getMaxZoom()&&g.DomUtil.addClass(this._zoomInButton,m)}}),g.Map.mergeOptions({zoomControl:!0}),g.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new g.Control.Zoom,this.addControl(this.zoomControl))}),g.control.zoom=function(c){return new g.Control.Zoom(c)},g.Control.Attribution=g.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(c){g.setOptions(this,c),this._attributions={}},onAdd:function(c){for(var m in this._container=g.DomUtil.create("div","leaflet-control-attribution"),g.DomEvent.disableClickPropagation(this._container),c._layers)c._layers[m].getAttribution&&this.addAttribution(c._layers[m].getAttribution());return c.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(c){c.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(c){return this.options.prefix=c,this._update(),this},addAttribution:function(c){if(c)return this._attributions[c]||(this._attributions[c]=0),this._attributions[c]++,this._update(),this},removeAttribution:function(c){if(c)return this._attributions[c]&&(this._attributions[c]--,this._update()),this},_update:function(){if(this._map){var c=[];for(var m in this._attributions)this._attributions[m]&&c.push(m);var w=[];this.options.prefix&&w.push(this.options.prefix),c.length&&w.push(c.join(", ")),this._container.innerHTML=w.join(" | ")}},_onLayerAdd:function(c){c.layer.getAttribution&&this.addAttribution(c.layer.getAttribution())},_onLayerRemove:function(c){c.layer.getAttribution&&this.removeAttribution(c.layer.getAttribution())}}),g.Map.mergeOptions({attributionControl:!0}),g.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new g.Control.Attribution).addTo(this))}),g.control.attribution=function(c){return new g.Control.Attribution(c)},g.Control.Scale=g.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(c){this._map=c;var m="leaflet-control-scale",w=g.DomUtil.create("div",m),x=this.options;return this._addScales(x,m,w),c.on(x.updateWhenIdle?"moveend":"move",this._update,this),c.whenReady(this._update,this),w},onRemove:function(c){c.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(c,m,w){c.metric&&(this._mScale=g.DomUtil.create("div",m+"-line",w)),c.imperial&&(this._iScale=g.DomUtil.create("div",m+"-line",w))},_update:function(){var c=this._map.getBounds(),m=c.getCenter().lat,x=6378137*Math.PI*Math.cos(m*Math.PI/180)*(c.getNorthEast().lng-c.getSouthWest().lng)/180,P=this._map.getSize(),U=this.options,q=0;P.x>0&&(q=x*(U.maxWidth/P.x)),this._updateScales(U,q)},_updateScales:function(c,m){c.metric&&m&&this._updateMetric(m),c.imperial&&m&&this._updateImperial(m)},_updateMetric:function(c){var m=this._getRoundNum(c);this._mScale.style.width=this._getScaleWidth(m/c)+"px",this._mScale.innerHTML=m<1e3?m+" m":m/1e3+" km"},_updateImperial:function(c){var x,P,U,m=3.2808399*c,w=this._iScale;m>5280?(P=this._getRoundNum(x=m/5280),w.style.width=this._getScaleWidth(P/x)+"px",w.innerHTML=P+" mi"):(U=this._getRoundNum(m),w.style.width=this._getScaleWidth(U/m)+"px",w.innerHTML=U+" ft")},_getScaleWidth:function(c){return Math.round(this.options.maxWidth*c)-10},_getRoundNum:function(c){var m=Math.pow(10,(Math.floor(c)+"").length-1),w=c/m;return m*(w>=10?10:w>=5?5:w>=3?3:w>=2?2:1)}}),g.control.scale=function(c){return new g.Control.Scale(c)},g.Control.Layers=g.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(c,m,w){for(var x in g.setOptions(this,w),this._layers={},this._lastZIndex=0,this._handlingClick=!1,c)this._addLayer(c[x],x);for(x in m)this._addLayer(m[x],x,!0)},onAdd:function(c){return this._initLayout(),this._update(),c.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(c){c.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(c,m){return this._addLayer(c,m),this._update(),this},addOverlay:function(c,m){return this._addLayer(c,m,!0),this._update(),this},removeLayer:function(c){var m=g.stamp(c);return delete this._layers[m],this._update(),this},_initLayout:function(){var c="leaflet-control-layers",m=this._container=g.DomUtil.create("div",c);m.setAttribute("aria-haspopup",!0),g.Browser.touch?g.DomEvent.on(m,"click",g.DomEvent.stopPropagation):g.DomEvent.disableClickPropagation(m).disableScrollPropagation(m);var w=this._form=g.DomUtil.create("form",c+"-list");if(this.options.collapsed){g.Browser.android||g.DomEvent.on(m,"mouseover",this._expand,this).on(m,"mouseout",this._collapse,this);var x=this._layersLink=g.DomUtil.create("a",c+"-toggle",m);x.href="#",x.title="Layers",g.Browser.touch?g.DomEvent.on(x,"click",g.DomEvent.stop).on(x,"click",this._expand,this):g.DomEvent.on(x,"focus",this._expand,this),g.DomEvent.on(w,"click",function(){setTimeout(g.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=g.DomUtil.create("div",c+"-base",w),this._separator=g.DomUtil.create("div",c+"-separator",w),this._overlaysList=g.DomUtil.create("div",c+"-overlays",w),m.appendChild(w)},_addLayer:function(c,m,w){var x=g.stamp(c);this._layers[x]={layer:c,name:m,overlay:w},this.options.autoZIndex&&c.setZIndex&&(this._lastZIndex++,c.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var w,x,c=!1,m=!1;for(w in this._layers)this._addItem(x=this._layers[w]),m=m||x.overlay,c=c||!x.overlay;this._separator.style.display=m&&c?"":"none"}},_onLayerChange:function(c){var m=this._layers[g.stamp(c.layer)];if(m){this._handlingClick||this._update();var w=m.overlay?"layeradd"===c.type?"overlayadd":"overlayremove":"layeradd"===c.type?"baselayerchange":null;w&&this._map.fire(w,m)}},_createRadioElement:function(c,m){var w='<input type="radio" class="leaflet-control-layers-selector" name="'+c+'"';m&&(w+=' checked="checked"'),w+="/>";var x=re.createElement("div");return x.innerHTML=w,x.firstChild},_addItem:function(c){var w,m=re.createElement("label"),x=this._map.hasLayer(c.layer);c.overlay?((w=re.createElement("input")).type="checkbox",w.className="leaflet-control-layers-selector",w.defaultChecked=x):w=this._createRadioElement("leaflet-base-layers",x),w.layerId=g.stamp(c.layer),g.DomEvent.on(w,"click",this._onInputClick,this);var P=re.createElement("span");return P.innerHTML=" "+c.name,m.appendChild(w),m.appendChild(P),(c.overlay?this._overlaysList:this._baseLayersList).appendChild(m),m},_onInputClick:function(){var c,m,w,x=this._form.getElementsByTagName("input"),P=x.length;for(this._handlingClick=!0,c=0;c<P;c++)w=this._layers[(m=x[c]).layerId],m.checked&&!this._map.hasLayer(w.layer)?this._map.addLayer(w.layer):!m.checked&&this._map.hasLayer(w.layer)&&this._map.removeLayer(w.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){g.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),g.control.layers=function(c,m,w){return new g.Control.Layers(c,m,w)},g.PosAnimation=g.Class.extend({includes:g.Mixin.Events,run:function(c,m,w,x){this.stop(),this._el=c,this._inProgress=!0,this._newPos=m,this.fire("start"),c.style[g.DomUtil.TRANSITION]="all "+(w||.25)+"s cubic-bezier(0,0,"+(x||.5)+",1)",g.DomEvent.on(c,g.DomUtil.TRANSITION_END,this._onTransitionEnd,this),g.DomUtil.setPosition(c,m),g.Util.falseFn(c.offsetWidth),this._stepTimer=setInterval(g.bind(this._onStep,this),50)},stop:function(){!this._inProgress||(g.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),g.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var c=this._getPos();c?(this._el._leaflet_pos=c,this.fire("step")):this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var c,m,w,P=z.getComputedStyle(this._el);if(g.Browser.any3d){if(!(w=P[g.DomUtil.TRANSFORM].match(this._transformRe)))return;c=parseFloat(w[1]),m=parseFloat(w[2])}else c=parseFloat(P.left),m=parseFloat(P.top);return new g.Point(c,m,!0)},_onTransitionEnd:function(){g.DomEvent.off(this._el,g.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[g.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),g.Map.include({setView:function(c,m,w){return m=m===Y?this._zoom:this._limitZoom(m),c=this._limitCenter(g.latLng(c),m,this.options.maxBounds),w=w||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!w.reset&&!0!==w&&(w.animate!==Y&&(w.zoom=g.extend({animate:w.animate},w.zoom),w.pan=g.extend({animate:w.animate},w.pan)),this._zoom!==m?this._tryAnimatedZoom&&this._tryAnimatedZoom(c,m,w.zoom):this._tryAnimatedPan(c,w.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(c,m),this)},panBy:function(c,m){if(m=m||{},!(c=g.point(c).round()).x&&!c.y)return this;if(this._panAnim||(this._panAnim=new g.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),m.noMoveStart||this.fire("movestart"),!1!==m.animate){g.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var w=this._getMapPanePos().subtract(c);this._panAnim.run(this._mapPane,w,m.duration||.25,m.easeLinearity)}else this._rawPanBy(c),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){g.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(c,m){var w=this._getCenterOffset(c)._floor();return!(!0!==(m&&m.animate)&&!this.getSize().contains(w)||(this.panBy(w,m),0))}}),g.PosAnimation=g.DomUtil.TRANSITION?g.PosAnimation:g.PosAnimation.extend({run:function(c,m,w,x){this.stop(),this._el=c,this._inProgress=!0,this._duration=w||.25,this._easeOutPower=1/Math.max(x||.5,.2),this._startPos=g.DomUtil.getPosition(c),this._offset=m.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(),this._complete())},_animate:function(){this._animId=g.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var c=+new Date-this._startTime,m=1e3*this._duration;c<m?this._runFrame(this._easeOut(c/m)):(this._runFrame(1),this._complete())},_runFrame:function(c){var m=this._startPos.add(this._offset.multiplyBy(c));g.DomUtil.setPosition(this._el,m),this.fire("step")},_complete:function(){g.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(c){return 1-Math.pow(1-c,this._easeOutPower)}}),g.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),g.DomUtil.TRANSITION&&g.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&g.DomUtil.TRANSITION&&g.Browser.any3d&&!g.Browser.android23&&!g.Browser.mobileOpera,this._zoomAnimated&&g.DomEvent.on(this._mapPane,g.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),g.Map.include(g.DomUtil.TRANSITION?{_catchTransitionEnd:function(c){this._animatingZoom&&c.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(c,m,w){if(this._animatingZoom)return!0;if(w=w||{},!this._zoomAnimated||!1===w.animate||this._nothingToAnimate()||Math.abs(m-this._zoom)>this.options.zoomAnimationThreshold)return!1;var x=this.getZoomScale(m),P=this._getCenterOffset(c)._divideBy(1-1/x),U=this._getCenterLayerPoint()._add(P);return!(!0!==w.animate&&!this.getSize().contains(P)||(this.fire("movestart").fire("zoomstart"),this._animateZoom(c,m,U,x,null,!0),0))},_animateZoom:function(c,m,w,x,P,U,q){q||(this._animatingZoom=!0),g.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=c,this._animateToZoom=m,g.Draggable&&(g.Draggable._disabled=!0),g.Util.requestAnimFrame(function(){this.fire("zoomanim",{center:c,zoom:m,origin:w,scale:x,delta:P,backwards:U}),setTimeout(g.bind(this._onZoomTransitionEnd,this),250)},this)},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._animatingZoom=!1,g.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),g.Util.requestAnimFrame(function(){this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),g.Draggable&&(g.Draggable._disabled=!1)},this))}}:{}),g.TileLayer.include({_animateZoom:function(c){this._animating||(this._animating=!0,this._prepareBgBuffer());var m=this._bgBuffer,w=g.DomUtil.TRANSFORM,x=c.delta?g.DomUtil.getTranslateString(c.delta):m.style[w],P=g.DomUtil.getScaleString(c.scale,c.origin);m.style[w]=c.backwards?P+" "+x:x+" "+P},_endZoomAnim:function(){var c=this._tileContainer,m=this._bgBuffer;c.style.visibility="",c.parentNode.appendChild(c),g.Util.falseFn(m.offsetWidth);var w=this._map.getZoom();(w>this.options.maxZoom||w<this.options.minZoom)&&this._clearBgBuffer(),this._animating=!1},_clearBgBuffer:function(){var c=this._map;c&&!c._animatingZoom&&!c.touchZoom._zooming&&(this._bgBuffer.innerHTML="",this._bgBuffer.style[g.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var c=this._tileContainer,m=this._bgBuffer,w=this._getLoadedTilesPercentage(m),x=this._getLoadedTilesPercentage(c);if(m&&w>.5&&x<.5)return c.style.visibility="hidden",void this._stopLoadingImages(c);m.style.visibility="hidden",m.style[g.DomUtil.TRANSFORM]="",this._tileContainer=m,m=this._bgBuffer=c,this._stopLoadingImages(m),clearTimeout(this._clearBgBufferTimer)},_getLoadedTilesPercentage:function(c){var w,x,m=c.getElementsByTagName("img"),P=0;for(w=0,x=m.length;w<x;w++)m[w].complete&&P++;return P/x},_stopLoadingImages:function(c){var w,x,P,m=Array.prototype.slice.call(c.getElementsByTagName("img"));for(w=0,x=m.length;w<x;w++)(P=m[w]).complete||(P.onload=g.Util.falseFn,P.onerror=g.Util.falseFn,P.src=g.Util.emptyImageUrl,P.parentNode.removeChild(P))}}),g.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(c){if(c=this._locateOptions=g.extend(this._defaultLocateOptions,c),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var m=g.bind(this._handleGeolocationResponse,this),w=g.bind(this._handleGeolocationError,this);return c.watch?this._locationWatchId=navigator.geolocation.watchPosition(m,w,c):navigator.geolocation.getCurrentPosition(m,w,c),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(c){var m=c.code,w=c.message||(1===m?"permission denied":2===m?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:m,message:"Geolocation error: "+w+"."})},_handleGeolocationResponse:function(c){var m=c.coords.latitude,w=c.coords.longitude,x=new g.LatLng(m,w),P=180*c.coords.accuracy/40075017,U=P/Math.cos(g.LatLng.DEG_TO_RAD*m),q=g.latLngBounds([m-P,w-U],[m+P,w+U]),X=this._locateOptions;if(X.setView){var te=Math.min(this.getBoundsZoom(q),X.maxZoom);this.setView(x,te)}var me={latlng:x,bounds:q,timestamp:c.timestamp};for(var Me in c.coords)"number"==typeof c.coords[Me]&&(me[Me]=c.coords[Me]);this.fire("locationfound",me)}})}(window,document)},3162:(lt,Re,ee)=>{!function(){"use strict";var h=ee(8407),ue=ee(5530),z=ee(1009);h.Routing=h.Routing||{},h.Routing.GraphHopper=h.Class.extend({options:{serviceUrl:"https://graphhopper.com/api/1/route",timeout:3e4,urlParameters:{}},initialize:function(re,Y){this._apiKey=re,h.Util.setOptions(this,Y)},route:function(re,Y,V,g){var c,m,w,x,F=!1,j=[];for(c=this.buildRouteUrl(re,g=g||{}),m=setTimeout(function(){F=!0,Y.call(V||Y,{status:-1,message:"GraphHopper request timed out."})},this.options.timeout),x=0;x<re.length;x++)j.push({latLng:(w=re[x]).latLng,name:w.name,options:w.options});return ue(c,h.bind(function(P,U){var q;clearTimeout(m),F||(P?Y.call(V||Y,{status:-1,message:"HTTP request failed: "+P}):(q=JSON.parse(U.responseText),this._routeDone(q,j,Y,V)))},this)),this},_routeDone:function(re,Y,V,g){var j,c,m,w,F=[];if(g=g||V,re.info.errors&&re.info.errors.length)V.call(g,{status:re.info.errors[0].details,message:re.info.errors[0].message});else{for(m=0;m<re.paths.length;m++)c=this._decodePolyline((w=re.paths[m]).points),j=this._mapWaypointIndices(Y,w.instructions,c),F.push({name:"",coordinates:c,instructions:this._convertInstructions(w.instructions),summary:{totalDistance:w.distance,totalTime:w.time/1e3},inputWaypoints:Y,actualWaypoints:j.waypoints,waypointIndices:j.waypointIndices});V.call(g,null,F)}},_decodePolyline:function(re){var g,Y=z.decode(re,5),V=new Array(Y.length);for(g=0;g<Y.length;g++)V[g]=new h.LatLng(Y[g][0],Y[g][1]);return V},_toWaypoints:function(re,Y){var g,V=[];for(g=0;g<Y.length;g++)V.push({latLng:h.latLng(Y[g]),name:re[g].name,options:re[g].options});return V},buildRouteUrl:function(re,Y){var F,j,g=[];for(F=0;F<re.length;F++)g.push("point="+re[F].latLng.lat+","+re[F].latLng.lng);return(j=this.options.serviceUrl+"?"+g.join("&"))+h.Util.getParamString(h.extend({instructions:!0,type:"json",key:this._apiKey},this.options.urlParameters),j)},_convertInstructions:function(re){var g,F,Y={"-3":"SharpLeft","-2":"Left","-1":"SlightLeft",0:"Straight",1:"SlightRight",2:"Right",3:"SharpRight",4:"DestinationReached",5:"WaypointReached",6:"Roundabout"},V=[];for(g=0;re&&g<re.length;g++)V.push({type:Y[(F=re[g]).sign],text:F.text,distance:F.distance,time:F.time/1e3,index:F.interval[0],exit:F.exit_number});return V},_mapWaypointIndices:function(re,Y,V){var j,c,g=[],F=[];for(F.push(0),g.push(new h.Routing.Waypoint(V[0],re[0].name)),j=0;Y&&j<Y.length;j++)5===Y[j].sign&&(F.push(c=Y[j].interval[0]),g.push({latLng:V[c],name:re[g.length+1].name}));return F.push(V.length-1),g.push({latLng:V[V.length-1],name:re[re.length-1].name}),{waypointIndices:F,waypoints:g}}}),h.Routing.graphHopper=function(re,Y){return new h.Routing.GraphHopper(re,Y)},lt.exports=h.Routing.GraphHopper}()},1009:lt=>{var Re={};function ee(h,ue){h=Math.round(h*ue),(h<<=1)<0&&(h=~h);for(var z="";h>=32;)z+=String.fromCharCode(63+(32|31&h)),h>>=5;return z+String.fromCharCode(h+63)}Re.decode=function(h,ue){for(var c,z=0,re=0,Y=0,V=[],g=0,F=0,j=null,w=Math.pow(10,ue||5);z<h.length;){j=null,g=0,F=0;do{F|=(31&(j=h.charCodeAt(z++)-63))<<g,g+=5}while(j>=32);c=1&F?~(F>>1):F>>1,g=F=0;do{F|=(31&(j=h.charCodeAt(z++)-63))<<g,g+=5}while(j>=32);V.push([(re+=c)/w,(Y+=1&F?~(F>>1):F>>1)/w])}return V},Re.encode=function(h,ue){if(!h.length)return"";for(var z=Math.pow(10,ue||5),re=ee(h[0][0],z)+ee(h[0][1],z),Y=1;Y<h.length;Y++){var V=h[Y],g=h[Y-1];re+=ee(V[0]-g[0],z),re+=ee(V[1]-g[1],z)}return re},lt.exports=Re},8306:(lt,Re,ee)=>{"use strict";ee.d(Re,{y:()=>c});var h=ee(930),ue=ee(727),z=ee(8822),re=ee(4671);var g=ee(2416),F=ee(576),j=ee(2806);let c=(()=>{class P{constructor(q){q&&(this._subscribe=q)}lift(q){const X=new P;return X.source=this,X.operator=q,X}subscribe(q,X,te){const me=function x(P){return P&&P instanceof h.Lv||function w(P){return P&&(0,F.m)(P.next)&&(0,F.m)(P.error)&&(0,F.m)(P.complete)}(P)&&(0,ue.Nn)(P)}(q)?q:new h.Hp(q,X,te);return(0,j.x)(()=>{const{operator:Me,source:De}=this;me.add(Me?Me.call(me,De):De?this._subscribe(me):this._trySubscribe(me))}),me}_trySubscribe(q){try{return this._subscribe(q)}catch(X){q.error(X)}}forEach(q,X){return new(X=m(X))((te,me)=>{const Me=new h.Hp({next:De=>{try{q(De)}catch(Ee){me(Ee),Me.unsubscribe()}},error:me,complete:te});this.subscribe(Me)})}_subscribe(q){var X;return null===(X=this.source)||void 0===X?void 0:X.subscribe(q)}[z.L](){return this}pipe(...q){return function V(P){return 0===P.length?re.y:1===P.length?P[0]:function(q){return P.reduce((X,te)=>te(X),q)}}(q)(this)}toPromise(q){return new(q=m(q))((X,te)=>{let me;this.subscribe(Me=>me=Me,Me=>te(Me),()=>X(me))})}}return P.create=U=>new P(U),P})();function m(P){var U;return null!==(U=P??g.v.Promise)&&void 0!==U?U:Promise}},7579:(lt,Re,ee)=>{"use strict";ee.d(Re,{x:()=>g});var h=ee(8306),ue=ee(727);const re=(0,ee(3888).d)(j=>function(){j(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Y=ee(8737),V=ee(2806);let g=(()=>{class j extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(m){const w=new F(this,this);return w.operator=m,w}_throwIfClosed(){if(this.closed)throw new re}next(m){(0,V.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const w of this.currentObservers)w.next(m)}})}error(m){(0,V.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=m;const{observers:w}=this;for(;w.length;)w.shift().error(m)}})}complete(){(0,V.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:m}=this;for(;m.length;)m.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var m;return(null===(m=this.observers)||void 0===m?void 0:m.length)>0}_trySubscribe(m){return this._throwIfClosed(),super._trySubscribe(m)}_subscribe(m){return this._throwIfClosed(),this._checkFinalizedStatuses(m),this._innerSubscribe(m)}_innerSubscribe(m){const{hasError:w,isStopped:x,observers:P}=this;return w||x?ue.Lc:(this.currentObservers=null,P.push(m),new ue.w0(()=>{this.currentObservers=null,(0,Y.P)(P,m)}))}_checkFinalizedStatuses(m){const{hasError:w,thrownError:x,isStopped:P}=this;w?m.error(x):P&&m.complete()}asObservable(){const m=new h.y;return m.source=this,m}}return j.create=(c,m)=>new F(c,m),j})();class F extends g{constructor(c,m){super(),this.destination=c,this.source=m}next(c){var m,w;null===(w=null===(m=this.destination)||void 0===m?void 0:m.next)||void 0===w||w.call(m,c)}error(c){var m,w;null===(w=null===(m=this.destination)||void 0===m?void 0:m.error)||void 0===w||w.call(m,c)}complete(){var c,m;null===(m=null===(c=this.destination)||void 0===c?void 0:c.complete)||void 0===m||m.call(c)}_subscribe(c){var m,w;return null!==(w=null===(m=this.source)||void 0===m?void 0:m.subscribe(c))&&void 0!==w?w:ue.Lc}}},930:(lt,Re,ee)=>{"use strict";ee.d(Re,{Hp:()=>q,Lv:()=>w});var h=ee(576),ue=ee(727),z=ee(2416),re=ee(7849),Y=ee(5032);const V=j("C",void 0,void 0);function j(De,Ee,Ie){return{kind:De,value:Ee,error:Ie}}var c=ee(3410),m=ee(2806);class w extends ue.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,ue.Nn)(Ee)&&Ee.add(this)):this.destination=Me}static create(Ee,Ie,He){return new q(Ee,Ie,He)}next(Ee){this.isStopped?me(function F(De){return j("N",De,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?me(function g(De){return j("E",void 0,De)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?me(V,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const x=Function.prototype.bind;function P(De,Ee){return x.call(De,Ee)}class U{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(Ee)}catch(He){X(He)}}error(Ee){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(Ee)}catch(He){X(He)}else X(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(Ie){X(Ie)}}}class q extends w{constructor(Ee,Ie,He){let ze;if(super(),(0,h.m)(Ee)||!Ee)ze={next:Ee??void 0,error:Ie??void 0,complete:He??void 0};else{let oe;this&&z.v.useDeprecatedNextContext?(oe=Object.create(Ee),oe.unsubscribe=()=>this.unsubscribe(),ze={next:Ee.next&&P(Ee.next,oe),error:Ee.error&&P(Ee.error,oe),complete:Ee.complete&&P(Ee.complete,oe)}):ze=Ee}this.destination=new U(ze)}}function X(De){z.v.useDeprecatedSynchronousErrorHandling?(0,m.O)(De):(0,re.h)(De)}function me(De,Ee){const{onStoppedNotification:Ie}=z.v;Ie&&c.z.setTimeout(()=>Ie(De,Ee))}const Me={closed:!0,next:Y.Z,error:function te(De){throw De},complete:Y.Z}},727:(lt,Re,ee)=>{"use strict";ee.d(Re,{Lc:()=>V,w0:()=>Y,Nn:()=>g});var h=ee(576);const z=(0,ee(3888).d)(j=>function(m){j(this),this.message=m?`${m.length} errors occurred during unsubscription:\n${m.map((w,x)=>`${x+1}) ${w.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=m});var re=ee(8737);class Y{constructor(c){this.initialTeardown=c,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let c;if(!this.closed){this.closed=!0;const{_parentage:m}=this;if(m)if(this._parentage=null,Array.isArray(m))for(const P of m)P.remove(this);else m.remove(this);const{initialTeardown:w}=this;if((0,h.m)(w))try{w()}catch(P){c=P instanceof z?P.errors:[P]}const{_finalizers:x}=this;if(x){this._finalizers=null;for(const P of x)try{F(P)}catch(U){c=c??[],U instanceof z?c=[...c,...U.errors]:c.push(U)}}if(c)throw new z(c)}}add(c){var m;if(c&&c!==this)if(this.closed)F(c);else{if(c instanceof Y){if(c.closed||c._hasParent(this))return;c._addParent(this)}(this._finalizers=null!==(m=this._finalizers)&&void 0!==m?m:[]).push(c)}}_hasParent(c){const{_parentage:m}=this;return m===c||Array.isArray(m)&&m.includes(c)}_addParent(c){const{_parentage:m}=this;this._parentage=Array.isArray(m)?(m.push(c),m):m?[m,c]:c}_removeParent(c){const{_parentage:m}=this;m===c?this._parentage=null:Array.isArray(m)&&(0,re.P)(m,c)}remove(c){const{_finalizers:m}=this;m&&(0,re.P)(m,c),c instanceof Y&&c._removeParent(this)}}Y.EMPTY=(()=>{const j=new Y;return j.closed=!0,j})();const V=Y.EMPTY;function g(j){return j instanceof Y||j&&"closed"in j&&(0,h.m)(j.remove)&&(0,h.m)(j.add)&&(0,h.m)(j.unsubscribe)}function F(j){(0,h.m)(j)?j():j.unsubscribe()}},2416:(lt,Re,ee)=>{"use strict";ee.d(Re,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(lt,Re,ee)=>{"use strict";ee.d(Re,{E:()=>ue});const ue=new(ee(8306).y)(Y=>Y.complete())},8996:(lt,Re,ee)=>{"use strict";ee.d(Re,{D:()=>Ee});var h=ee(8421),ue=ee(5363),z=ee(9468),V=ee(8306),F=ee(2202),j=ee(576),c=ee(9672);function w(Ie,He){if(!Ie)throw new Error("Iterable cannot be null");return new V.y(ze=>{(0,c.f)(ze,He,()=>{const oe=Ie[Symbol.asyncIterator]();(0,c.f)(ze,He,()=>{oe.next().then(Ae=>{Ae.done?ze.complete():ze.next(Ae.value)})},0,!0)})})}var x=ee(3670),P=ee(8239),U=ee(1144),q=ee(6495),X=ee(2206),te=ee(4532),me=ee(3260);function Ee(Ie,He){return He?function De(Ie,He){if(null!=Ie){if((0,x.c)(Ie))return function re(Ie,He){return(0,h.Xf)(Ie).pipe((0,z.R)(He),(0,ue.Q)(He))}(Ie,He);if((0,U.z)(Ie))return function g(Ie,He){return new V.y(ze=>{let oe=0;return He.schedule(function(){oe===Ie.length?ze.complete():(ze.next(Ie[oe++]),ze.closed||this.schedule())})})}(Ie,He);if((0,P.t)(Ie))return function Y(Ie,He){return(0,h.Xf)(Ie).pipe((0,z.R)(He),(0,ue.Q)(He))}(Ie,He);if((0,X.D)(Ie))return w(Ie,He);if((0,q.T)(Ie))return function m(Ie,He){return new V.y(ze=>{let oe;return(0,c.f)(ze,He,()=>{oe=Ie[F.h](),(0,c.f)(ze,He,()=>{let Ae,he;try{({value:Ae,done:he}=oe.next())}catch(_e){return void ze.error(_e)}he?ze.complete():ze.next(Ae)},0,!0)}),()=>(0,j.m)(oe?.return)&&oe.return()})}(Ie,He);if((0,me.L)(Ie))return function Me(Ie,He){return w((0,me.Q)(Ie),He)}(Ie,He)}throw(0,te.z)(Ie)}(Ie,He):(0,h.Xf)(Ie)}},8421:(lt,Re,ee)=>{"use strict";ee.d(Re,{Xf:()=>x});var h=ee(655),ue=ee(1144),z=ee(8239),re=ee(8306),Y=ee(3670),V=ee(2206),g=ee(4532),F=ee(6495),j=ee(3260),c=ee(576),m=ee(7849),w=ee(8822);function x(De){if(De instanceof re.y)return De;if(null!=De){if((0,Y.c)(De))return function P(De){return new re.y(Ee=>{const Ie=De[w.L]();if((0,c.m)(Ie.subscribe))return Ie.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,ue.z)(De))return function U(De){return new re.y(Ee=>{for(let Ie=0;Ie<De.length&&!Ee.closed;Ie++)Ee.next(De[Ie]);Ee.complete()})}(De);if((0,z.t)(De))return function q(De){return new re.y(Ee=>{De.then(Ie=>{Ee.closed||(Ee.next(Ie),Ee.complete())},Ie=>Ee.error(Ie)).then(null,m.h)})}(De);if((0,V.D)(De))return te(De);if((0,F.T)(De))return function X(De){return new re.y(Ee=>{for(const Ie of De)if(Ee.next(Ie),Ee.closed)return;Ee.complete()})}(De);if((0,j.L)(De))return function me(De){return te((0,j.Q)(De))}(De)}throw(0,g.z)(De)}function te(De){return new re.y(Ee=>{(function Me(De,Ee){var Ie,He,ze,oe;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,h.KL)(De);!(He=yield Ie.next()).done;)if(Ee.next(He.value),Ee.closed)return}catch(Ae){ze={error:Ae}}finally{try{He&&!He.done&&(oe=Ie.return)&&(yield oe.call(Ie))}finally{if(ze)throw ze.error}}Ee.complete()})})(De,Ee).catch(Ie=>Ee.error(Ie))})}},6451:(lt,Re,ee)=>{"use strict";ee.d(Re,{T:()=>V});var h=ee(8189),ue=ee(8421),z=ee(515),re=ee(3269),Y=ee(8996);function V(...g){const F=(0,re.yG)(g),j=(0,re._6)(g,1/0),c=g;return c.length?1===c.length?(0,ue.Xf)(c[0]):(0,h.J)(j)((0,Y.D)(c,F)):z.E}},5403:(lt,Re,ee)=>{"use strict";ee.d(Re,{x:()=>ue});var h=ee(930);function ue(re,Y,V,g,F){return new z(re,Y,V,g,F)}class z extends h.Lv{constructor(Y,V,g,F,j,c){super(Y),this.onFinalize=j,this.shouldUnsubscribe=c,this._next=V?function(m){try{V(m)}catch(w){Y.error(w)}}:super._next,this._error=F?function(m){try{F(m)}catch(w){Y.error(w)}finally{this.unsubscribe()}}:super._error,this._complete=g?function(){try{g()}catch(m){Y.error(m)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Y;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:V}=this;super.unsubscribe(),!V&&(null===(Y=this.onFinalize)||void 0===Y||Y.call(this))}}}},4004:(lt,Re,ee)=>{"use strict";ee.d(Re,{U:()=>z});var h=ee(4482),ue=ee(5403);function z(re,Y){return(0,h.e)((V,g)=>{let F=0;V.subscribe((0,ue.x)(g,j=>{g.next(re.call(Y,j,F++))}))})}},8189:(lt,Re,ee)=>{"use strict";ee.d(Re,{J:()=>z});var h=ee(5577),ue=ee(4671);function z(re=1/0){return(0,h.z)(ue.y,re)}},5577:(lt,Re,ee)=>{"use strict";ee.d(Re,{z:()=>F});var h=ee(4004),ue=ee(8421),z=ee(4482),re=ee(9672),Y=ee(5403),g=ee(576);function F(j,c,m=1/0){return(0,g.m)(c)?F((w,x)=>(0,h.U)((P,U)=>c(w,P,x,U))((0,ue.Xf)(j(w,x))),m):("number"==typeof c&&(m=c),(0,z.e)((w,x)=>function V(j,c,m,w,x,P,U,q){const X=[];let te=0,me=0,Me=!1;const De=()=>{Me&&!X.length&&!te&&c.complete()},Ee=He=>te<w?Ie(He):X.push(He),Ie=He=>{P&&c.next(He),te++;let ze=!1;(0,ue.Xf)(m(He,me++)).subscribe((0,Y.x)(c,oe=>{x?.(oe),P?Ee(oe):c.next(oe)},()=>{ze=!0},void 0,()=>{if(ze)try{for(te--;X.length&&te<w;){const oe=X.shift();U?(0,re.f)(c,U,()=>Ie(oe)):Ie(oe)}De()}catch(oe){c.error(oe)}}))};return j.subscribe((0,Y.x)(c,Ee,()=>{Me=!0,De()})),()=>{q?.()}}(w,x,j,m)))}},5363:(lt,Re,ee)=>{"use strict";ee.d(Re,{Q:()=>re});var h=ee(9672),ue=ee(4482),z=ee(5403);function re(Y,V=0){return(0,ue.e)((g,F)=>{g.subscribe((0,z.x)(F,j=>(0,h.f)(F,Y,()=>F.next(j),V),()=>(0,h.f)(F,Y,()=>F.complete(),V),j=>(0,h.f)(F,Y,()=>F.error(j),V)))})}},3099:(lt,Re,ee)=>{"use strict";ee.d(Re,{B:()=>Y});var h=ee(8421),ue=ee(7579),z=ee(930),re=ee(4482);function Y(g={}){const{connector:F=(()=>new ue.x),resetOnError:j=!0,resetOnComplete:c=!0,resetOnRefCountZero:m=!0}=g;return w=>{let x,P,U,q=0,X=!1,te=!1;const me=()=>{P?.unsubscribe(),P=void 0},Me=()=>{me(),x=U=void 0,X=te=!1},De=()=>{const Ee=x;Me(),Ee?.unsubscribe()};return(0,re.e)((Ee,Ie)=>{q++,!te&&!X&&me();const He=U=U??F();Ie.add(()=>{q--,0===q&&!te&&!X&&(P=V(De,m))}),He.subscribe(Ie),!x&&q>0&&(x=new z.Hp({next:ze=>He.next(ze),error:ze=>{te=!0,me(),P=V(Me,j,ze),He.error(ze)},complete:()=>{X=!0,me(),P=V(Me,c),He.complete()}}),(0,h.Xf)(Ee).subscribe(x))})(w)}}function V(g,F,...j){if(!0===F)return void g();if(!1===F)return;const c=new z.Hp({next:()=>{c.unsubscribe(),g()}});return F(...j).subscribe(c)}},9468:(lt,Re,ee)=>{"use strict";ee.d(Re,{R:()=>ue});var h=ee(4482);function ue(z,re=0){return(0,h.e)((Y,V)=>{V.add(z.schedule(()=>Y.subscribe(V),re))})}},4408:(lt,Re,ee)=>{"use strict";ee.d(Re,{o:()=>Y});var h=ee(727);class ue extends h.w0{constructor(g,F){super()}schedule(g,F=0){return this}}const z={setInterval(V,g,...F){const{delegate:j}=z;return j?.setInterval?j.setInterval(V,g,...F):setInterval(V,g,...F)},clearInterval(V){const{delegate:g}=z;return(g?.clearInterval||clearInterval)(V)},delegate:void 0};var re=ee(8737);class Y extends ue{constructor(g,F){super(g,F),this.scheduler=g,this.work=F,this.pending=!1}schedule(g,F=0){var j;if(this.closed)return this;this.state=g;const c=this.id,m=this.scheduler;return null!=c&&(this.id=this.recycleAsyncId(m,c,F)),this.pending=!0,this.delay=F,this.id=null!==(j=this.id)&&void 0!==j?j:this.requestAsyncId(m,this.id,F),this}requestAsyncId(g,F,j=0){return z.setInterval(g.flush.bind(g,this),j)}recycleAsyncId(g,F,j=0){if(null!=j&&this.delay===j&&!1===this.pending)return F;null!=F&&z.clearInterval(F)}execute(g,F){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const j=this._execute(g,F);if(j)return j;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(g,F){let c,j=!1;try{this.work(g)}catch(m){j=!0,c=m||new Error("Scheduled action threw falsy error")}if(j)return this.unsubscribe(),c}unsubscribe(){if(!this.closed){const{id:g,scheduler:F}=this,{actions:j}=F;this.work=this.state=this.scheduler=null,this.pending=!1,(0,re.P)(j,this),null!=g&&(this.id=this.recycleAsyncId(F,g,null)),this.delay=null,super.unsubscribe()}}}},7565:(lt,Re,ee)=>{"use strict";ee.d(Re,{v:()=>z});var h=ee(6063);class ue{constructor(Y,V=ue.now){this.schedulerActionCtor=Y,this.now=V}schedule(Y,V=0,g){return new this.schedulerActionCtor(this,Y).schedule(g,V)}}ue.now=h.l.now;class z extends ue{constructor(Y,V=ue.now){super(Y,V),this.actions=[],this._active=!1}flush(Y){const{actions:V}=this;if(this._active)return void V.push(Y);let g;this._active=!0;do{if(g=Y.execute(Y.state,Y.delay))break}while(Y=V.shift());if(this._active=!1,g){for(;Y=V.shift();)Y.unsubscribe();throw g}}}},4986:(lt,Re,ee)=>{"use strict";ee.d(Re,{P:()=>re,z:()=>z});var h=ee(4408);const z=new(ee(7565).v)(h.o),re=z},6063:(lt,Re,ee)=>{"use strict";ee.d(Re,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(lt,Re,ee)=>{"use strict";ee.d(Re,{z:()=>h});const h={setTimeout(ue,z,...re){const{delegate:Y}=h;return Y?.setTimeout?Y.setTimeout(ue,z,...re):setTimeout(ue,z,...re)},clearTimeout(ue){const{delegate:z}=h;return(z?.clearTimeout||clearTimeout)(ue)},delegate:void 0}},2202:(lt,Re,ee)=>{"use strict";ee.d(Re,{h:()=>ue});const ue=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(lt,Re,ee)=>{"use strict";ee.d(Re,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(lt,Re,ee)=>{"use strict";ee.d(Re,{_6:()=>V,jO:()=>re,yG:()=>Y});var h=ee(576),ue=ee(3532);function z(g){return g[g.length-1]}function re(g){return(0,h.m)(z(g))?g.pop():void 0}function Y(g){return(0,ue.K)(z(g))?g.pop():void 0}function V(g,F){return"number"==typeof z(g)?g.pop():F}},8737:(lt,Re,ee)=>{"use strict";function h(ue,z){if(ue){const re=ue.indexOf(z);0<=re&&ue.splice(re,1)}}ee.d(Re,{P:()=>h})},3888:(lt,Re,ee)=>{"use strict";function h(ue){const re=ue(Y=>{Error.call(Y),Y.stack=(new Error).stack});return re.prototype=Object.create(Error.prototype),re.prototype.constructor=re,re}ee.d(Re,{d:()=>h})},2806:(lt,Re,ee)=>{"use strict";ee.d(Re,{O:()=>re,x:()=>z});var h=ee(2416);let ue=null;function z(Y){if(h.v.useDeprecatedSynchronousErrorHandling){const V=!ue;if(V&&(ue={errorThrown:!1,error:null}),Y(),V){const{errorThrown:g,error:F}=ue;if(ue=null,g)throw F}}else Y()}function re(Y){h.v.useDeprecatedSynchronousErrorHandling&&ue&&(ue.errorThrown=!0,ue.error=Y)}},9672:(lt,Re,ee)=>{"use strict";function h(ue,z,re,Y=0,V=!1){const g=z.schedule(function(){re(),V?ue.add(this.schedule(null,Y)):this.unsubscribe()},Y);if(ue.add(g),!V)return g}ee.d(Re,{f:()=>h})},4671:(lt,Re,ee)=>{"use strict";function h(ue){return ue}ee.d(Re,{y:()=>h})},1144:(lt,Re,ee)=>{"use strict";ee.d(Re,{z:()=>h});const h=ue=>ue&&"number"==typeof ue.length&&"function"!=typeof ue},2206:(lt,Re,ee)=>{"use strict";ee.d(Re,{D:()=>ue});var h=ee(576);function ue(z){return Symbol.asyncIterator&&(0,h.m)(z?.[Symbol.asyncIterator])}},576:(lt,Re,ee)=>{"use strict";function h(ue){return"function"==typeof ue}ee.d(Re,{m:()=>h})},3670:(lt,Re,ee)=>{"use strict";ee.d(Re,{c:()=>z});var h=ee(8822),ue=ee(576);function z(re){return(0,ue.m)(re[h.L])}},6495:(lt,Re,ee)=>{"use strict";ee.d(Re,{T:()=>z});var h=ee(2202),ue=ee(576);function z(re){return(0,ue.m)(re?.[h.h])}},8239:(lt,Re,ee)=>{"use strict";ee.d(Re,{t:()=>ue});var h=ee(576);function ue(z){return(0,h.m)(z?.then)}},3260:(lt,Re,ee)=>{"use strict";ee.d(Re,{L:()=>re,Q:()=>z});var h=ee(655),ue=ee(576);function z(Y){return(0,h.FC)(this,arguments,function*(){const g=Y.getReader();try{for(;;){const{value:F,done:j}=yield(0,h.qq)(g.read());if(j)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(F)}}finally{g.releaseLock()}})}function re(Y){return(0,ue.m)(Y?.getReader)}},3532:(lt,Re,ee)=>{"use strict";ee.d(Re,{K:()=>ue});var h=ee(576);function ue(z){return z&&(0,h.m)(z.schedule)}},4482:(lt,Re,ee)=>{"use strict";ee.d(Re,{e:()=>z});var h=ee(576);function z(re){return Y=>{if(function ue(re){return(0,h.m)(re?.lift)}(Y))return Y.lift(function(V){try{return re(V,this)}catch(g){this.error(g)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(lt,Re,ee)=>{"use strict";function h(){}ee.d(Re,{Z:()=>h})},7849:(lt,Re,ee)=>{"use strict";ee.d(Re,{h:()=>z});var h=ee(2416),ue=ee(3410);function z(re){ue.z.setTimeout(()=>{const{onUnhandledError:Y}=h.v;if(!Y)throw re;Y(re)})}},4532:(lt,Re,ee)=>{"use strict";function h(ue){return new TypeError(`You provided ${null!==ue&&"object"==typeof ue?"an invalid object":`'${ue}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}ee.d(Re,{z:()=>h})},655:(lt,Re,ee)=>{"use strict";function re(he,_e){var Ce={};for(var we in he)Object.prototype.hasOwnProperty.call(he,we)&&_e.indexOf(we)<0&&(Ce[we]=he[we]);if(null!=he&&"function"==typeof Object.getOwnPropertySymbols){var We=0;for(we=Object.getOwnPropertySymbols(he);We<we.length;We++)_e.indexOf(we[We])<0&&Object.prototype.propertyIsEnumerable.call(he,we[We])&&(Ce[we[We]]=he[we[We]])}return Ce}function F(he,_e,Ce,we){return new(Ce||(Ce=Promise))(function(je,_t){function sn(mn){try{rt(we.next(mn))}catch(Tn){_t(Tn)}}function Zt(mn){try{rt(we.throw(mn))}catch(Tn){_t(Tn)}}function rt(mn){mn.done?je(mn.value):function We(je){return je instanceof Ce?je:new Ce(function(_t){_t(je)})}(mn.value).then(sn,Zt)}rt((we=we.apply(he,_e||[])).next())})}function X(he){return this instanceof X?(this.v=he,this):new X(he)}function te(he,_e,Ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var We,we=Ce.apply(he,_e||[]),je=[];return We={},_t("next"),_t("throw"),_t("return"),We[Symbol.asyncIterator]=function(){return this},We;function _t(nn){we[nn]&&(We[nn]=function(on){return new Promise(function(Gi,Ft){je.push([nn,on,Gi,Ft])>1||sn(nn,on)})})}function sn(nn,on){try{!function Zt(nn){nn.value instanceof X?Promise.resolve(nn.value.v).then(rt,mn):Tn(je[0][2],nn)}(we[nn](on))}catch(Gi){Tn(je[0][3],Gi)}}function rt(nn){sn("next",nn)}function mn(nn){sn("throw",nn)}function Tn(nn,on){nn(on),je.shift(),je.length&&sn(je[0][0],je[0][1])}}function Me(he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ce,_e=he[Symbol.asyncIterator];return _e?_e.call(he):(he=function w(he){var _e="function"==typeof Symbol&&Symbol.iterator,Ce=_e&&he[_e],we=0;if(Ce)return Ce.call(he);if(he&&"number"==typeof he.length)return{next:function(){return he&&we>=he.length&&(he=void 0),{value:he&&he[we++],done:!he}}};throw new TypeError(_e?"Object is not iterable.":"Symbol.iterator is not defined.")}(he),Ce={},we("next"),we("throw"),we("return"),Ce[Symbol.asyncIterator]=function(){return this},Ce);function we(je){Ce[je]=he[je]&&function(_t){return new Promise(function(sn,Zt){!function We(je,_t,sn,Zt){Promise.resolve(Zt).then(function(rt){je({value:rt,done:sn})},_t)}(sn,Zt,(_t=he[je](_t)).done,_t.value)})}}}ee.d(Re,{FC:()=>te,KL:()=>Me,_T:()=>re,mG:()=>F,qq:()=>X})},4650:(lt,Re,ee)=>{"use strict";ee.d(Re,{$8M:()=>au,$Z:()=>av,AFp:()=>sD,AaK:()=>F,BQk:()=>as,CHM:()=>jl,CRH:()=>ux,CZH:()=>g_,CqO:()=>Nv,D6c:()=>mL,EJc:()=>Nx,EpF:()=>Kg,F$t:()=>Vv,F4k:()=>N0,FYo:()=>B,FiY:()=>ie,G48:()=>iL,Gf:()=>lx,GfV:()=>$e,Gpc:()=>m,Hsn:()=>V0,Ikx:()=>tb,JOm:()=>Aa,KtG:()=>zl,LFG:()=>Zn,Lbi:()=>kx,Lck:()=>Ib,MAs:()=>P0,NdJ:()=>Lv,OlP:()=>Dn,Oqu:()=>nC,Q6J:()=>Rv,QGY:()=>Yg,QbO:()=>Px,Qsj:()=>$,R0b:()=>Ns,RDi:()=>gy,Rgc:()=>f_,SBq:()=>_,Suo:()=>KC,TTD:()=>ys,TgZ:()=>$g,VKq:()=>VC,WFA:()=>Fv,X6Q:()=>nL,XFs:()=>ot,Xpm:()=>Le,Y36:()=>Th,YNc:()=>R0,Yjl:()=>Pe,Yz7:()=>on,ZZ4:()=>zb,_Bn:()=>zA,_UZ:()=>Ov,_Vd:()=>Hc,_c5:()=>aM,_uU:()=>rA,aQg:()=>Gb,cJS:()=>Ft,cg1:()=>ud,d8E:()=>nb,dDg:()=>XN,dqk:()=>hn,eFA:()=>Kx,ekj:()=>zv,eoX:()=>Up,evT:()=>EE,f3M:()=>mu,g9A:()=>aD,h0i:()=>ii,hGG:()=>E_,iGM:()=>ax,ifc:()=>ft,ip1:()=>rD,kL8:()=>t_,lG2:()=>fe,lri:()=>jx,n5z:()=>Cs,oAB:()=>Ht,oxw:()=>B0,q4F:()=>at,qLn:()=>Ho,qOj:()=>Ep,qZA:()=>qg,rWj:()=>zx,sBO:()=>sL,sIi:()=>Lh,s_b:()=>Mb,soG:()=>Vp,uIk:()=>id,vHH:()=>U,vpe:()=>Il,wAp:()=>Tt,xp6:()=>sp,ynx:()=>Zg,z2F:()=>Hp,zSh:()=>Uc,zs3:()=>Zc});var h=ee(7579),ue=ee(727),z=ee(8306),re=ee(6451),Y=ee(3099);function V(s){for(let a in s)if(s[a]===V)return a;throw Error("Could not find renamed property on target object.")}function g(s,a){for(const l in a)a.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=a[l])}function F(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(F).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function j(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const c=V({__forward_ref__:V});function m(s){return s.__forward_ref__=m,s.toString=function(){return F(this())},s}function w(s){return x(s)?s():s}function x(s){return"function"==typeof s&&s.hasOwnProperty(c)&&s.__forward_ref__===m}class U extends Error{constructor(a,l){super(function q(s,a){return`NG0${Math.abs(s)}${a?": "+a.trim():""}`}(a,l)),this.code=a}}function X(s){return"string"==typeof s?s:null==s?"":String(s)}function Ee(s,a){throw new U(-201,!1)}function Zt(s,a){null==s&&function rt(s,a,l,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${l} ${d} ${a} <=Actual]`))}(a,s,null,"!=")}function on(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Ft(s){return{providers:s.providers||[],imports:s.imports||[]}}function gn(s){return Fr(s,Br)||Fr(s,gr)}function Fr(s,a){return s.hasOwnProperty(a)?s[a]:null}function Ws(s){return s&&(s.hasOwnProperty(ir)||s.hasOwnProperty(ra))?s[ir]:null}const Br=V({\u0275prov:V}),ir=V({\u0275inj:V}),gr=V({ngInjectableDef:V}),ra=V({ngInjectorDef:V});var ot=(()=>((ot=ot||{})[ot.Default=0]="Default",ot[ot.Host=1]="Host",ot[ot.Self=2]="Self",ot[ot.SkipSelf=4]="SkipSelf",ot[ot.Optional=8]="Optional",ot))();let Pi;function ai(s){const a=Pi;return Pi=s,a}function _r(s,a,l){const d=gn(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&ot.Optional?null:void 0!==a?a:void Ee(F(s))}function Bn(s){return{toString:s}.toString()}var Qn=(()=>((Qn=Qn||{})[Qn.OnPush=0]="OnPush",Qn[Qn.Default=1]="Default",Qn))(),ft=(()=>{return(s=ft||(ft={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",ft;var s})();const hn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),rr={},Mt=[],ms=V({\u0275cmp:V}),an=V({\u0275dir:V}),Vr=V({\u0275pipe:V}),cn=V({\u0275mod:V}),li=V({\u0275fac:V}),qi=V({__NG_ELEMENT_ID__:V});let ct=0;function Le(s){return Bn(()=>{const l=!0===s.standalone,d={},p={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Qn.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Mt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||ft.Emulated,id:"c"+ct++,styles:s.styles||Mt,_:null,setInput:null,schemas:s.schemas||null,tView:null},v=s.dependencies,D=s.features;return p.inputs=se(s.inputs,d),p.outputs=se(s.outputs),D&&D.forEach(T=>T(p)),p.directiveDefs=v?()=>("function"==typeof v?v():v).map(At).filter(St):null,p.pipeDefs=v?()=>("function"==typeof v?v():v).map(mt).filter(St):null,p})}function At(s){return ge(s)||et(s)}function St(s){return null!==s}function Ht(s){return Bn(()=>({type:s.type,bootstrap:s.bootstrap||Mt,declarations:s.declarations||Mt,imports:s.imports||Mt,exports:s.exports||Mt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function se(s,a){if(null==s)return rr;const l={};for(const d in s)if(s.hasOwnProperty(d)){let p=s[d],v=p;Array.isArray(p)&&(v=p[1],p=p[0]),l[p]=d,a&&(a[p]=v)}return l}const fe=Le;function Pe(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function ge(s){return s[ms]||null}function et(s){return s[an]||null}function mt(s){return s[Vr]||null}function vi(s){return Array.isArray(s)&&"object"==typeof s[1]}function Zi(s){return Array.isArray(s)&&!0===s[1]}function Ga(s){return 0!=(8&s.flags)}function aa(s){return 2==(2&s.flags)}function ac(s){return 1==(1&s.flags)}function Oi(s){return null!==s.template}function bf(s){return 0!=(256&s[2])}function es(s,a){return s.hasOwnProperty(li)?s[li]:null}class _s{constructor(a,l,d){this.previousValue=a,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function ys(){return wo}function wo(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ol),Wa}function Wa(){const s=Cf(this),a=s?.current;if(a){const l=s.previous;if(l===rr)s.previous=a;else for(let d in a)l[d]=a[d];s.current=null,this.ngOnChanges(a)}}function Ol(s,a,l,d){const p=Cf(s)||function la(s,a){return s[dc]=a}(s,{previous:rr,current:null}),v=p.current||(p.current={}),D=p.previous,T=this.declaredInputs[l],M=D[T];v[T]=new _s(M&&M.currentValue,a,D===rr),s[d]=a}ys.ngInherit=!0;const dc="__ngSimpleChanges__";function Cf(s){return s[dc]||null}function Vn(s){for(;Array.isArray(s);)s=s[0];return s}function vr(s,a){return Vn(a[s])}function Ki(s,a){return Vn(a[s.index])}function Eo(s,a){return s.data[a]}function en(s,a){const l=a[s];return vi(l)?l:l[0]}function Co(s){return 64==(64&s[2])}function Hr(s,a){return null==a?null:s[a]}function Bl(s){s[18]=0}function kn(s,a){s[5]+=a;let l=s,d=s[3];for(;null!==d&&(1===a&&1===l[5]||-1===a&&0===l[5]);)d[5]+=a,l=d,d=d[3]}const kt={lFrame:Cc(null),bindingsEnabled:!0};function ws(){return kt.bindingsEnabled}function Fe(){return kt.lFrame.lView}function Yt(){return kt.lFrame.tView}function jl(s){return kt.lFrame.contextLView=s,s[8]}function zl(s){return kt.lFrame.contextLView=null,s}function Un(){let s=Gl();for(;null!==s&&64===s.type;)s=s.parent;return s}function Gl(){return kt.lFrame.currentTNode}function br(s,a){const l=kt.lFrame;l.currentTNode=s,l.isParent=a}function qa(){return kt.lFrame.isParent}function Za(){kt.lFrame.isParent=!1}function Do(){return kt.lFrame.bindingIndex++}function Bm(s,a){const l=kt.lFrame;l.bindingIndex=l.bindingRootIndex=s,Wl(a)}function Wl(s){kt.lFrame.currentDirectiveIndex=s}function Qa(s){const a=kt.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}function bc(){return kt.lFrame.currentQueryIndex}function Xa(s){kt.lFrame.currentQueryIndex=s}function wc(s){const a=s[1];return 2===a.type?a.declTNode:1===a.type?s[6]:null}function $l(s,a,l){if(l&ot.SkipSelf){let p=a,v=s;for(;!(p=p.parent,null!==p||l&ot.Host||(p=wc(v),null===p||(v=v[15],10&p.type))););if(null===p)return!1;a=p,s=v}const d=kt.lFrame=Ec();return d.currentTNode=a,d.lView=s,!0}function ql(s){const a=Ec(),l=s[1];kt.lFrame=a,a.currentTNode=l.firstChild,a.lView=s,a.tView=l,a.contextLView=s,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function Ec(){const s=kt.lFrame,a=null===s?null:s.child;return null===a?Cc(s):a}function Cc(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function Dc(){const s=kt.lFrame;return kt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Bd=Dc;function Io(){const s=Dc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function di(){return kt.lFrame.selectedIndex}function ar(s){kt.lFrame.selectedIndex=s}function An(){const s=kt.lFrame;return Eo(s.tView,s.selectedIndex)}function Yl(s,a){for(let l=a.directiveStart,d=a.directiveEnd;l<d;l++){const v=s.data[l].type.prototype,{ngAfterContentInit:D,ngAfterContentChecked:T,ngAfterViewInit:M,ngAfterViewChecked:N,ngOnDestroy:W}=v;D&&(s.contentHooks||(s.contentHooks=[])).push(-l,D),T&&((s.contentHooks||(s.contentHooks=[])).push(l,T),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,T)),M&&(s.viewHooks||(s.viewHooks=[])).push(-l,M),N&&((s.viewHooks||(s.viewHooks=[])).push(l,N),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,N)),null!=W&&(s.destroyHooks||(s.destroyHooks=[])).push(l,W)}}function So(s,a,l){ha(s,a,3,l)}function da(s,a,l,d){(3&s[2])===l&&ha(s,a,l,d)}function Hd(s,a){let l=s[2];(3&l)===a&&(l&=2047,l+=1,s[2]=l)}function ha(s,a,l,d){const v=d??-1,D=a.length-1;let T=0;for(let M=void 0!==d?65535&s[18]:0;M<D;M++)if("number"==typeof a[M+1]){if(T=a[M],null!=d&&T>=d)break}else a[M]<0&&(s[18]+=65536),(T<v||-1==v)&&(jd(s,l,a,M),s[18]=(4294901760&s[18])+M+2),M++}function jd(s,a,l,d){const p=l[d]<0,v=l[d+1],T=s[p?-l[d]:l[d]];if(p){if(s[2]>>11<s[18]>>16&&(3&s[2])===a){s[2]+=2048;try{v.call(T)}finally{}}}else try{v.call(T)}finally{}}class eo{constructor(a,l,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function fa(s,a,l){let d=0;for(;d<l.length;){const p=l[d];if("number"==typeof p){if(0!==p)break;d++;const v=l[d++],D=l[d++],T=l[d++];s.setAttribute(a,D,T,v)}else{const v=p,D=l[++d];eu(v)?s.setProperty(a,v,D):s.setAttribute(a,v,D),d++}}return d}function Mo(s){return 3===s||4===s||6===s}function eu(s){return 64===s.charCodeAt(0)}function Ja(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let l=-1;for(let d=0;d<a.length;d++){const p=a[d];"number"==typeof p?l=p:0===l||Gd(s,l,p,null,-1===l||2===l?a[++d]:null)}}return s}function Gd(s,a,l,d,p){let v=0,D=s.length;if(-1===a)D=-1;else for(;v<s.length;){const T=s[v++];if("number"==typeof T){if(T===a){D=-1;break}if(T>a){D=v-1;break}}}for(;v<s.length;){const T=s[v];if("number"==typeof T)break;if(T===l){if(null===d)return void(null!==p&&(s[v+1]=p));if(d===s[v+1])return void(s[v+2]=p)}v++,null!==d&&v++,null!==p&&v++}-1!==D&&(s.splice(D,0,a),v=D+1),s.splice(v++,0,l),null!==d&&s.splice(v++,0,d),null!==p&&s.splice(v++,0,p)}function Wd(s){return-1!==s}function bi(s){return 32767&s}function tl(s,a){let l=function el(s){return s>>16}(s),d=a;for(;l>0;)d=d[15],l--;return d}let ns=!0;function nl(s){const a=ns;return ns=s,a}let $n=0;const jr={};function ko(s,a){const l=nu(s,a);if(-1!==l)return l;const d=a[1];d.firstCreatePass&&(s.injectorIndex=a.length,rl(d.data,s),rl(a,null),rl(d.blueprint,null));const p=iu(s,a),v=s.injectorIndex;if(Wd(p)){const D=bi(p),T=tl(p,a),M=T[1].data;for(let N=0;N<8;N++)a[v+N]=T[D+N]|M[D+N]}return a[v+8]=p,v}function rl(s,a){s.push(0,0,0,0,0,0,0,0,a)}function nu(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function iu(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,d=null,p=a;for(;null!==p;){if(d=ma(p),null===d)return-1;if(l++,p=p[15],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return-1}function to(s,a,l){!function tu(s,a,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(qi)&&(d=l[qi]),null==d&&(d=l[qi]=$n++);const p=255&d;a.data[s+(p>>5)]|=1<<p}(s,a,l)}function no(s,a,l){if(l&ot.Optional||void 0!==s)return s;Ee()}function ru(s,a,l,d){if(l&ot.Optional&&void 0===d&&(d=null),0==(l&(ot.Self|ot.Host))){const p=s[9],v=ai(void 0);try{return p?p.get(a,d,l&ot.Optional):_r(a,d,l&ot.Optional)}finally{ai(v)}}return no(d,0,l)}function Ro(s,a,l,d=ot.Default,p){if(null!==s){if(1024&a[2]){const D=function pa(s,a,l,d,p){let v=s,D=a;for(;null!==v&&null!==D&&1024&D[2]&&!(256&D[2]);){const T=sl(v,D,l,d|ot.Self,jr);if(T!==jr)return T;let M=v.parent;if(!M){const N=D[21];if(N){const W=N.get(l,jr,d);if(W!==jr)return W}M=ma(D),D=D[15]}v=M}return p}(s,a,l,d,jr);if(D!==jr)return D}const v=sl(s,a,l,d,jr);if(v!==jr)return v}return ru(a,l,d,p)}function sl(s,a,l,d,p){const v=function Ac(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(qi)?s[qi]:void 0;return"number"==typeof a?a>=0?255&a:xc:a}(l);if("function"==typeof v){if(!$l(a,s,d))return d&ot.Host?no(p,0,d):ru(a,l,d,p);try{const D=v(d);if(null!=D||d&ot.Optional)return D;Ee()}finally{Bd()}}else if("number"==typeof v){let D=null,T=nu(s,a),M=-1,N=d&ot.Host?a[16][6]:null;for((-1===T||d&ot.SkipSelf)&&(M=-1===T?iu(s,a):a[T+8],-1!==M&&al(d,!1)?(D=a[1],T=bi(M),a=tl(M,a)):T=-1);-1!==T;){const W=a[1];if(su(v,T,W.data)){const ne=Zd(T,a,l,D,d,N);if(ne!==jr)return ne}M=a[T+8],-1!==M&&al(d,a[1].data[T+8]===N)&&su(v,T,a)?(D=W,T=bi(M),a=tl(M,a)):T=-1}}return p}function Zd(s,a,l,d,p,v){const D=a[1],T=D.data[s+8],W=ol(T,D,l,null==d?aa(T)&&ns:d!=D&&0!=(3&T.type),p&ot.Host&&v===T);return null!==W?io(a,D,W,T):jr}function ol(s,a,l,d,p){const v=s.providerIndexes,D=a.data,T=1048575&v,M=s.directiveStart,W=v>>20,ce=p?T+W:s.directiveEnd;for(let ye=d?T:T+W;ye<ce;ye++){const Oe=D[ye];if(ye<M&&l===Oe||ye>=M&&Oe.type===l)return ye}if(p){const ye=D[M];if(ye&&Oi(ye)&&ye.type===l)return M}return null}function io(s,a,l,d){let p=s[l];const v=a.data;if(function Ao(s){return s instanceof eo}(p)){const D=p;D.resolving&&function me(s,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new U(-200,`Circular dependency in DI detected for ${s}${l}`)}(function te(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():X(s)}(v[l]));const T=nl(D.canSeeViewProviders);D.resolving=!0;const M=D.injectImpl?ai(D.injectImpl):null;$l(s,d,ot.Default);try{p=s[l]=D.factory(void 0,v,s,d),a.firstCreatePass&&l>=d.directiveStart&&function Ud(s,a,l){const{ngOnChanges:d,ngOnInit:p,ngDoCheck:v}=a.type.prototype;if(d){const D=wo(a);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,D),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,D)}p&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,p),v&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,v))}(l,v[l],a)}finally{null!==M&&ai(M),nl(T),D.resolving=!1,Bd()}}return p}function su(s,a,l){return!!(l[a+(s>>5)]&1<<s)}function al(s,a){return!(s&ot.Self||s&ot.Host&&a)}class Po{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,d){return Ro(this._tNode,this._lView,a,d,l)}}function xc(){return new Po(Un(),Fe())}function Cs(s){return Bn(()=>{const a=s.prototype.constructor,l=a[li]||ou(a),d=Object.prototype;let p=Object.getPrototypeOf(s.prototype).constructor;for(;p&&p!==d;){const v=p[li]||ou(p);if(v&&v!==l)return v;p=Object.getPrototypeOf(p)}return v=>new v})}function ou(s){return x(s)?()=>{const a=ou(w(s));return a&&a()}:es(s)}function ma(s){const a=s[1],l=a.type;return 2===l?a.declTNode:1===l?s[6]:null}function au(s){return function qd(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const l=s.attrs;if(l){const d=l.length;let p=0;for(;p<d;){const v=l[p];if(Mo(v))break;if(0===v)p+=2;else if("number"==typeof v)for(p++;p<d&&"string"==typeof l[p];)p++;else{if(v===a)return l[p+1];p+=2}}}return null}(Un(),s)}const ro="__parameters__";function ya(s,a,l){return Bn(()=>{const d=function lu(s){return function(...l){if(s){const d=s(...l);for(const p in d)this[p]=d[p]}}}(a);function p(...v){if(this instanceof p)return d.apply(this,v),this;const D=new p(...v);return T.annotation=D,T;function T(M,N,W){const ne=M.hasOwnProperty(ro)?M[ro]:Object.defineProperty(M,ro,{value:[]})[ro];for(;ne.length<=W;)ne.push(null);return(ne[W]=ne[W]||[]).push(D),M}}return l&&(p.prototype=Object.create(l.prototype)),p.prototype.ngMetadataName=s,p.annotationCls=p,p})}class Dn{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=on({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ni(s,a){void 0===a&&(a=s);for(let l=0;l<s.length;l++){let d=s[l];Array.isArray(d)?(a===s&&(a=s.slice(0,l)),Ni(d,a)):a!==s&&a.push(d)}return a}function ei(s,a){s.forEach(l=>Array.isArray(l)?ei(l,a):a(l))}function Kd(s,a,l){a>=s.length?s.push(l):s.splice(a,0,l)}function ti(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function In(s,a){const l=[];for(let d=0;d<s;d++)l.push(a);return l}function cr(s,a,l){let d=No(s,a);return d>=0?s[1|d]=l:(d=~d,function uu(s,a,l,d){let p=s.length;if(p==a)s.push(l,d);else if(1===p)s.push(d,s[0]),s[0]=l;else{for(p--,s.push(s[p-1],s[p]);p>a;)s[p]=s[p-2],p--;s[a]=l,s[a+1]=d}}(s,d,a,l)),d}function Rc(s,a){const l=No(s,a);if(l>=0)return s[1|l]}function No(s,a){return function cu(s,a,l){let d=0,p=s.length>>l;for(;p!==d;){const v=d+(p-d>>1),D=s[v<<l];if(a===D)return v<<l;D>a?p=v:d=v+1}return~(p<<l)}(s,a,1)}const wr={},Rn="__NG_DI_FLAG__",wa="ngTempTokenPath",Lo=/\n/gm,pu="__source";let Xi;function oo(s){const a=Xi;return Xi=s,a}function Is(s,a=ot.Default){if(void 0===Xi)throw new U(-203,!1);return null===Xi?_r(s,void 0,a):Xi.get(s,a&ot.Optional?null:void 0,a)}function Zn(s,a=ot.Default){return(function $s(){return Pi}()||Is)(w(s),a)}function mu(s,a=ot.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),Zn(s,a)}function Qd(s){const a=[];for(let l=0;l<s.length;l++){const d=w(s[l]);if(Array.isArray(d)){if(0===d.length)throw new U(900,!1);let p,v=ot.Default;for(let D=0;D<d.length;D++){const T=d[D],M=Mf(T);"number"==typeof M?-1===M?p=T.token:v|=M:p=T}a.push(Zn(p,v))}else a.push(Zn(d))}return a}function gu(s,a){return s[Rn]=a,s.prototype[Rn]=a,s}function Mf(s){return s[Rn]}const ie=gu(ya("Optional"),8),be=gu(ya("SkipSelf"),4);let Rf;function gy(s){Rf=s}const Jm=new Dn("ENVIRONMENT_INITIALIZER"),jf=new Dn("INJECTOR",-1),eg=new Dn("INJECTOR_DEF_TYPES");class sh{get(a,l=wr){if(l===wr){const d=new Error(`NullInjectorError: No provider for ${F(a)}!`);throw d.name="NullInjectorError",d}return l}}function oh(...s){return{\u0275providers:Du(0,s)}}function Du(s,...a){const l=[],d=new Set;let p;return ei(a,v=>{const D=v;lh(D,l,[],d)&&(p||(p=[]),p.push(D))}),void 0!==p&&ah(p,l),l}function ah(s,a){for(let l=0;l<s.length;l++){const{providers:p}=s[l];ei(p,v=>{a.push(v)})}}function lh(s,a,l,d){if(!(s=w(s)))return!1;let p=null,v=Ws(s);const D=!v&&ge(s);if(v||D){if(D&&!D.standalone)return!1;p=s}else{const M=s.ngModule;if(v=Ws(M),!v)return!1;p=M}const T=d.has(p);if(D){if(T)return!1;if(d.add(p),D.dependencies){const M="function"==typeof D.dependencies?D.dependencies():D.dependencies;for(const N of M)lh(N,a,l,d)}}else{if(!v)return!1;{if(null!=v.imports&&!T){let N;d.add(p);try{ei(v.imports,W=>{lh(W,a,l,d)&&(N||(N=[]),N.push(W))})}finally{}void 0!==N&&ah(N,a)}if(!T){const N=es(p)||(()=>new p);a.push({provide:p,useFactory:N,deps:Mt},{provide:eg,useValue:p,multi:!0},{provide:Jm,useValue:()=>Zn(p),multi:!0})}const M=v.providers;null==M||T||ei(M,W=>{a.push(W)})}}return p!==s&&void 0!==s.providers}const zf=V({provide:String,useValue:V});function Gf(s){return null!==s&&"object"==typeof s&&zf in s}function Uo(s){return"function"==typeof s}const Uc=new Dn("Set Injector scope."),Iu={},Iy={};let uh;function ch(){return void 0===uh&&(uh=new sh),uh}class Tr{}class dh extends Tr{constructor(a,l,d,p){super(),this.parent=l,this.source=d,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ia(a,D=>this.processProvider(D)),this.records.set(jf,ni(void 0,this)),p.has("environment")&&this.records.set(Tr,ni(void 0,this));const v=this.records.get(Uc);null!=v&&"string"==typeof v.value&&this.scopes.add(v.value),this.injectorDefTypes=new Set(this.get(eg.multi,Mt,ot.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const l=oo(this),d=ai(void 0);try{return a()}finally{oo(l),ai(d)}}get(a,l=wr,d=ot.Default){this.assertNotDestroyed();const p=oo(this),v=ai(void 0);try{if(!(d&ot.SkipSelf)){let T=this.records.get(a);if(void 0===T){const M=function hh(s){return"function"==typeof s||"object"==typeof s&&s instanceof Dn}(a)&&gn(a);T=M&&this.injectableDefInScope(M)?ni(Wf(a),Iu):null,this.records.set(a,T)}if(null!=T)return this.hydrate(a,T)}return(d&ot.Self?ch():this.parent).get(a,l=d&ot.Optional&&l===wr?null:l)}catch(D){if("NullInjectorError"===D.name){if((D[wa]=D[wa]||[]).unshift(F(a)),p)throw D;return function k(s,a,l,d){const p=s[wa];throw a[pu]&&p.unshift(a[pu]),s.message=function O(s,a,l,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let p=F(a);if(Array.isArray(a))p=a.map(F).join(" -> ");else if("object"==typeof a){let v=[];for(let D in a)if(a.hasOwnProperty(D)){let T=a[D];v.push(D+":"+("string"==typeof T?JSON.stringify(T):F(T)))}p=`{${v.join(", ")}}`}return`${l}${d?"("+d+")":""}[${p}]: ${s.replace(Lo,"\n  ")}`}("\n"+s.message,p,l,d),s.ngTokenPath=p,s[wa]=null,s}(D,a,"R3InjectorError",this.source)}throw D}finally{ai(v),oo(p)}}resolveInjectorInitializers(){const a=oo(this),l=ai(void 0);try{const d=this.get(Jm.multi,Mt,ot.Self);for(const p of d)p()}finally{oo(a),ai(l)}}toString(){const a=[],l=this.records;for(const d of l.keys())a.push(F(d));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new U(205,!1)}processProvider(a){let l=Uo(a=w(a))?a:w(a&&a.provide);const d=function Sy(s){return Gf(s)?ni(void 0,s.useValue):ni(co(s),Iu)}(a);if(Uo(a)||!0!==a.multi)this.records.get(l);else{let p=this.records.get(l);p||(p=ni(void 0,Iu,!0),p.factory=()=>Qd(p.multi),this.records.set(l,p)),l=a,p.multi.push(a)}this.records.set(l,d)}hydrate(a,l){return l.value===Iu&&(l.value=Iy,l.value=l.factory()),"object"==typeof l.value&&l.value&&function qf(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=w(a.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function Wf(s){const a=gn(s),l=null!==a?a.factory:es(s);if(null!==l)return l;if(s instanceof Dn)throw new U(204,!1);if(s instanceof Function)return function Ty(s){const a=s.length;if(a>0)throw In(a,"?"),new U(204,!1);const l=function Wi(s){const a=s&&(s[Br]||s[gr]);if(a){const l=function $i(s){if(s.hasOwnProperty("name"))return s.name;const a=(""+s).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),a}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new U(204,!1)}function co(s,a,l){let d;if(Uo(s)){const p=w(s);return es(p)||Wf(p)}if(Gf(s))d=()=>w(s.useValue);else if(function gl(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...Qd(s.deps||[]));else if(function Ir(s){return!(!s||!s.useExisting)}(s))d=()=>Zn(w(s.useExisting));else{const p=w(s&&(s.useClass||s.provide));if(!function $f(s){return!!s.deps}(s))return es(p)||Wf(p);d=()=>new p(...Qd(s.deps))}return d}function ni(s,a,l=!1){return{factory:s,value:a,multi:l?[]:void 0}}function Sr(s){return!!s.\u0275providers}function Ia(s,a){for(const l of s)Array.isArray(l)?Ia(l,a):Sr(l)?Ia(l.\u0275providers,a):a(l)}class Zf{}class rg{resolveComponentFactory(a){throw function Ay(s){const a=Error(`No component factory found for ${F(s)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=s,a}(a)}}let Hc=(()=>{class s{}return s.NULL=new rg,s})();function sg(){return C(Un(),Fe())}function C(s,a){return new _(Ki(s,a))}let _=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=sg,s})();function b(s){return s instanceof _?s.nativeElement:s}class B{}let $=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function de(){const s=Fe(),l=en(Un().index,s);return(vi(l)?l:s)[11]}(),s})(),Se=(()=>{class s{}return s.\u0275prov=on({token:s,providedIn:"root",factory:()=>null}),s})();class $e{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const at=new $e("14.2.6"),Ct={};function ag(s){return s.ngOriginalError}class Ho{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a);this._console.error("ERROR",a),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&ag(a);for(;l&&ag(l);)l=ag(l);return l||null}}const _l=new Map;let Xt=0;const Ny="__ngContext__";function Ji(s,a){vi(a)?(s[Ny]=a[20],function ug(s){_l.set(s[20],s)}(a)):s[Ny]=a}function EE(s){return s.ownerDocument}var Aa=(()=>((Aa=Aa||{})[Aa.Important=1]="Important",Aa[Aa.DashCase=2]="DashCase",Aa))();function Xf(s,a){return undefined(s,a)}function zc(s){const a=s[3];return Zi(a)?a[3]:a}function By(s){return Vy(s[13])}function pg(s){return Vy(s[4])}function Vy(s){for(;null!==s&&!Zi(s);)s=s[4];return s}function zo(s,a,l,d,p){if(null!=d){let v,D=!1;Zi(d)?v=d:vi(d)&&(D=!0,d=d[0]);const T=Vn(d);0===s&&null!==l?null==p?np(a,l,T):Wc(a,l,T,p||null,!0):1===s&&null!==l?Wc(a,l,T,p||null,!0):2===s?function wh(s,a,l){const d=vg(s,a);d&&function zy(s,a,l,d){s.removeChild(a,l,d)}(s,d,a,l)}(a,T,D):3===s&&a.destroyNode(T),null!=v&&function lS(s,a,l,d,p){const v=l[7];v!==Vn(l)&&zo(a,s,d,v,p);for(let T=10;T<l.length;T++){const M=l[T];xa(M[1],M,s,a,d,v)}}(a,s,v,l,p)}}function Jf(s,a,l){return s.createElement(a,l)}function gg(s,a){const l=s[9],d=l.indexOf(a),p=a[3];512&a[2]&&(a[2]&=-513,kn(p,-1)),l.splice(d,1)}function Uy(s,a){if(s.length<=10)return;const l=10+a,d=s[l];if(d){const p=d[17];null!==p&&p!==s&&gg(p,d),a>0&&(s[l-1][4]=d[4]);const v=ti(s,10+a);!function ep(s,a){xa(s,a,a[11],2,null,null),a[0]=null,a[6]=null}(d[1],d);const D=v[19];null!==D&&D.detachView(v[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function _g(s,a){if(!(128&a[2])){const l=a[11];l.destroyNode&&xa(s,a,l,3,null,null),function rS(s){let a=s[13];if(!a)return Hy(s[1],s);for(;a;){let l=null;if(vi(a))l=a[13];else{const d=a[10];d&&(l=d)}if(!l){for(;a&&!a[4]&&a!==s;)vi(a)&&Hy(a[1],a),a=a[3];null===a&&(a=s),vi(a)&&Hy(a[1],a),l=a&&a[4]}a=l}}(a)}}function Hy(s,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function TE(s,a){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let d=0;d<l.length;d+=2){const p=a[l[d]];if(!(p instanceof eo)){const v=l[d+1];if(Array.isArray(v))for(let D=0;D<v.length;D+=2){const T=p[v[D]],M=v[D+1];try{M.call(T)}finally{}}else try{v.call(p)}finally{}}}}(s,a),function yg(s,a){const l=s.cleanup,d=a[7];let p=-1;if(null!==l)for(let v=0;v<l.length-1;v+=2)if("string"==typeof l[v]){const D=l[v+1],T="function"==typeof D?D(a):Vn(a[D]),M=d[p=l[v+2]],N=l[v+3];"boolean"==typeof N?T.removeEventListener(l[v],M,N):N>=0?d[p=N]():d[p=-N].unsubscribe(),v+=2}else{const D=d[p=l[v+1]];l[v].call(D)}if(null!==d){for(let v=p+1;v<d.length;v++)(0,d[v])();a[7]=null}}(s,a),1===a[1].type&&a[11].destroy();const l=a[17];if(null!==l&&Zi(a[3])){l!==a[3]&&gg(l,a);const d=a[19];null!==d&&d.detachView(s)}!function Sa(s){_l.delete(s[20])}(a)}}function jy(s,a,l){return function tp(s,a,l){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return l[0];if(2&d.flags){const p=s.data[d.directiveStart].encapsulation;if(p===ft.None||p===ft.Emulated)return null}return Ki(d,l)}(s,a.parent,l)}function Wc(s,a,l,d,p){s.insertBefore(a,l,d,p)}function np(s,a,l){s.appendChild(a,l)}function $c(s,a,l,d,p){null!==d?Wc(s,a,l,d,p):np(s,a,l)}function vg(s,a){return s.parentNode(a)}function Gy(s,a,l){return xE(s,a,l)}let xE=function AE(s,a,l){return 40&s.type?Ki(s,l):null};function yh(s,a,l,d){const p=jy(s,d,a),v=a[11],T=Gy(d.parent||a[6],d,a);if(null!=p)if(Array.isArray(l))for(let M=0;M<l.length;M++)$c(v,p,l[M],T,!1);else $c(v,p,l,T,!1)}function vh(s,a){if(null!==a){const l=a.type;if(3&l)return Ki(a,s);if(4&l)return bh(-1,s[a.index]);if(8&l){const d=a.child;if(null!==d)return vh(s,d);{const p=s[a.index];return Zi(p)?bh(-1,p):Vn(p)}}if(32&l)return Xf(a,s)()||Vn(s[a.index]);{const d=bg(s,a);return null!==d?Array.isArray(d)?d[0]:vh(zc(s[16]),d):vh(s,a.next)}}return null}function bg(s,a){return null!==a?s[16][6].projection[a.projection]:null}function bh(s,a){const l=10+s+1;if(l<a.length){const d=a[l],p=d[1].firstChild;if(null!==p)return vh(d,p)}return a[7]}function bl(s,a,l,d,p,v,D){for(;null!=l;){const T=d[l.index],M=l.type;if(D&&0===a&&(T&&Ji(Vn(T),d),l.flags|=4),64!=(64&l.flags))if(8&M)bl(s,a,l.child,d,p,v,!1),zo(a,s,p,T,v);else if(32&M){const N=Xf(l,d);let W;for(;W=N();)zo(a,s,p,W,v);zo(a,s,p,T,v)}else 16&M?ME(s,a,d,l,p,v):zo(a,s,p,T,v);l=D?l.projectionNext:l.next}}function xa(s,a,l,d,p,v){bl(l,d,s.firstChild,a,p,v,!1)}function ME(s,a,l,d,p,v){const D=l[16],M=D[6].projection[d.projection];if(Array.isArray(M))for(let N=0;N<M.length;N++)zo(a,s,p,M[N],v);else bl(s,a,M,D[3],p,v,!0)}function kE(s,a,l){s.setAttribute(a,"style",l)}function $y(s,a,l){""===l?s.removeAttribute(a,"class"):s.setAttribute(a,"class",l)}function rp(s,a,l){let d=s.length;for(;;){const p=s.indexOf(a,l);if(-1===p)return p;if(0===p||s.charCodeAt(p-1)<=32){const v=a.length;if(p+v===d||s.charCodeAt(p+v)<=32)return p}l=p+1}}const qy="ng-template";function Eg(s,a,l){let d=0;for(;d<s.length;){let p=s[d++];if(l&&"class"===p){if(p=s[d],-1!==rp(p.toLowerCase(),a,0))return!0}else if(1===p){for(;d<s.length&&"string"==typeof(p=s[d++]);)if(p.toLowerCase()===a)return!0;return!1}}return!1}function xu(s){return 4===s.type&&s.value!==qy}function Zy(s,a,l){return a===(4!==s.type||l?s.value:qy)}function uS(s,a,l){let d=4;const p=s.attrs||[],v=function RE(s){for(let a=0;a<s.length;a++)if(Mo(s[a]))return a;return s.length}(p);let D=!1;for(let T=0;T<a.length;T++){const M=a[T];if("number"!=typeof M){if(!D)if(4&d){if(d=2|1&d,""!==M&&!Zy(s,M,l)||""===M&&1===a.length){if(rn(d))return!1;D=!0}}else{const N=8&d?M:a[++T];if(8&d&&null!==s.attrs){if(!Eg(s.attrs,N,l)){if(rn(d))return!1;D=!0}continue}const ne=Go(8&d?"class":M,p,xu(s),l);if(-1===ne){if(rn(d))return!1;D=!0;continue}if(""!==N){let ce;ce=ne>v?"":p[ne+1].toLowerCase();const ye=8&d?ce:null;if(ye&&-1!==rp(ye,N,0)||2&d&&N!==ce){if(rn(d))return!1;D=!0}}}}else{if(!D&&!rn(d)&&!rn(M))return!1;if(D&&rn(M))continue;D=!1,d=M|1&d}}return rn(d)||D}function rn(s){return 0==(1&s)}function Go(s,a,l,d){if(null===a)return-1;let p=0;if(d||!l){let v=!1;for(;p<a.length;){const D=a[p];if(D===s)return p;if(3===D||6===D)v=!0;else{if(1===D||2===D){let T=a[++p];for(;"string"==typeof T;)T=a[++p];continue}if(4===D)break;if(0===D){p+=4;continue}}p+=v?1:2}return-1}return function Yy(s,a){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const d=s[l];if("number"==typeof d)return-1;if(d===a)return l;l++}return-1}(a,s)}function Eh(s,a,l=!1){for(let d=0;d<a.length;d++)if(uS(s,a[d],l))return!0;return!1}function qc(s,a){e:for(let l=0;l<a.length;l++){const d=a[l];if(s.length===d.length){for(let p=0;p<s.length;p++)if(s[p]!==d[p])continue e;return!0}}return!1}function Qy(s,a){return s?":not("+a.trim()+")":a}function Mu(s){let a=s[0],l=1,d=2,p="",v=!1;for(;l<s.length;){let D=s[l];if("string"==typeof D)if(2&d){const T=s[++l];p+="["+D+(T.length>0?'="'+T+'"':"")+"]"}else 8&d?p+="."+D:4&d&&(p+=" "+D);else""!==p&&!rn(D)&&(a+=Qy(v,p),p=""),d=D,v=v||!rn(d);l++}return""!==p&&(a+=Qy(v,p)),a}const Ut={};function sp(s){PE(Yt(),Fe(),di()+s,!1)}function PE(s,a,l,d){if(!d)if(3==(3&a[2])){const v=s.preOrderCheckHooks;null!==v&&So(a,v,l)}else{const v=s.preOrderHooks;null!==v&&da(a,v,0,l)}ar(l)}function VE(s,a=null,l=null,d){const p=UE(s,a,l,d);return p.resolveInjectorInitializers(),p}function UE(s,a=null,l=null,d,p=new Set){const v=[l||Mt,oh(s)];return d=d||("object"==typeof s?void 0:F(s)),new dh(v,a||ch(),d||null,p)}let Zc=(()=>{class s{static create(l,d){if(Array.isArray(l))return VE({name:""},d,l,"");{const p=l.name??"";return VE({name:p},l.parent,l.providers,p)}}}return s.THROW_IF_NOT_FOUND=wr,s.NULL=new sh,s.\u0275prov=on({token:s,providedIn:"any",factory:()=>Zn(jf)}),s.__NG_ELEMENT_ID__=-1,s})();function Th(s,a=ot.Default){const l=Fe();return null===l?Zn(s,a):Ro(Un(),l,w(s),a)}function av(){throw new Error("invalid")}function op(s,a){return s<<17|a<<2}function ho(s){return s>>17&32767}function Sh(s){return 2|s}function Ma(s){return(131068&s)>>2}function lv(s,a){return-131069&s|a<<2}function uv(s){return 1|s}function Ng(s,a){const l=s.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const p=l[d],v=l[d+1];if(-1!==v){const D=s.data[v];Xa(p),D.contentQueries(2,a[v],v)}}}function Lg(s,a,l,d,p,v,D,T,M,N,W){const ne=a.blueprint.slice();return ne[0]=p,ne[2]=76|d,(null!==W||s&&1024&s[2])&&(ne[2]|=1024),Bl(ne),ne[3]=ne[15]=s,ne[8]=l,ne[10]=D||s&&s[10],ne[11]=T||s&&s[11],ne[12]=M||s&&s[12]||null,ne[9]=N||s&&s[9]||null,ne[6]=v,ne[20]=function lg(){return Xt++}(),ne[21]=W,ne[16]=2==a.type?s[16]:ne,ne}function xh(s,a,l,d,p){let v=s.data[a];if(null===v)v=function Fg(s,a,l,d,p){const v=Gl(),D=qa(),M=s.data[a]=function xS(s,a,l,d,p,v){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,D?v:v&&v.parent,l,a,d,p);return null===s.firstChild&&(s.firstChild=M),null!==v&&(D?null==v.child&&null!==M.parent&&(v.child=M):null===v.next&&(v.next=M)),M}(s,a,l,d,p),function Fm(){return kt.lFrame.inI18n}()&&(v.flags|=64);else if(64&v.type){v.type=l,v.value=d,v.attrs=p;const D=function ca(){const s=kt.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();v.injectorIndex=null===D?-1:D.injectorIndex}return br(v,!0),v}function Ru(s,a,l,d){if(0===l)return-1;const p=a.length;for(let v=0;v<l;v++)a.push(d),s.blueprint.push(d),s.data.push(null);return p}function dp(s,a,l){ql(a);try{const d=s.viewQuery;null!==d&&Dv(1,d,l);const p=s.template;null!==p&&hp(s,a,p,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Ng(s,a),s.staticViewQueries&&Dv(2,s.viewQuery,l);const v=s.components;null!==v&&function n0(s,a){for(let l=0;l<a.length;l++)OS(s,a[l])}(a,v)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{a[2]&=-5,Io()}}function Mh(s,a,l,d){const p=a[2];if(128!=(128&p)){ql(a);try{Bl(a),function yc(s){return kt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&hp(s,a,l,2,d);const D=3==(3&p);if(D){const N=s.preOrderCheckHooks;null!==N&&So(a,N,null)}else{const N=s.preOrderHooks;null!==N&&da(a,N,0,null),Hd(a,0)}if(function _p(s){for(let a=By(s);null!==a;a=pg(a)){if(!a[2])continue;const l=a[9];for(let d=0;d<l.length;d++){const p=l[d],v=p[3];0==(512&p[2])&&kn(v,1),p[2]|=512}}}(a),function f0(s){for(let a=By(s);null!==a;a=pg(a))for(let l=10;l<a.length;l++){const d=a[l],p=d[1];Co(d)&&Mh(p,d,p.template,d[8])}}(a),null!==s.contentQueries&&Ng(s,a),D){const N=s.contentCheckHooks;null!==N&&So(a,N)}else{const N=s.contentHooks;null!==N&&da(a,N,1),Hd(a,1)}!function gv(s,a){const l=s.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const p=l[d];if(p<0)ar(~p);else{const v=p,D=l[++d],T=l[++d];Bm(D,v),T(2,a[v])}}}finally{ar(-1)}}(s,a);const T=s.components;null!==T&&function AS(s,a){for(let l=0;l<a.length;l++)p0(s,a[l])}(a,T);const M=s.viewQuery;if(null!==M&&Dv(2,M,d),D){const N=s.viewCheckHooks;null!==N&&So(a,N)}else{const N=s.viewHooks;null!==N&&da(a,N,2),Hd(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,kn(a[3],-1))}finally{Io()}}}function hp(s,a,l,d,p){const v=di(),D=2&d;try{ar(-1),D&&a.length>22&&PE(s,a,22,!1),l(d,p)}finally{ar(v)}}function Pu(s,a,l){if(Ga(a)){const p=a.directiveEnd;for(let v=a.directiveStart;v<p;v++){const D=s.data[v];D.contentQueries&&D.contentQueries(1,l[v],v)}}}function fp(s,a,l){!ws()||(function vv(s,a,l,d){const p=l.directiveStart,v=l.directiveEnd;s.firstCreatePass||ko(l,a),Ji(d,a);const D=l.initialInputs;for(let T=p;T<v;T++){const M=s.data[T],N=Oi(M);N&&ks(a,l,M);const W=io(a,s,T,l);Ji(W,a),null!==D&&d0(0,T-p,W,M,0,D),N&&(en(l.index,a)[8]=W)}}(s,a,l,Ki(l,a)),128==(128&l.flags)&&function mp(s,a,l){const d=l.directiveStart,p=l.directiveEnd,v=l.index,D=function vc(){return kt.lFrame.currentDirectiveIndex}();try{ar(v);for(let T=d;T<p;T++){const M=s.data[T],N=a[T];Wl(T),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&Rh(M,N)}}finally{ar(-1),Wl(D)}}(s,a,l))}function Bg(s,a,l=Ki){const d=a.localNames;if(null!==d){let p=a.index+1;for(let v=0;v<d.length;v+=2){const D=d[v+1],T=-1===D?l(a,s):s[D];s[p++]=T}}}function r0(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=kh(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):a}function kh(s,a,l,d,p,v,D,T,M,N){const W=22+d,ne=W+p,ce=function s0(s,a){const l=[];for(let d=0;d<a;d++)l.push(d<s?null:Ut);return l}(W,ne),ye="function"==typeof N?N():N;return ce[1]={type:s,blueprint:ce,template:l,queries:null,viewQuery:T,declTNode:a,data:ce.slice().fill(null,W),bindingStartIndex:W,expandoStartIndex:ne,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof D?D():D,firstChild:null,schemas:M,consts:ye,incompleteFirstPass:!1}}function Vg(s,a,l,d){const p=Iv(a);null===l?p.push(d):(p.push(l),s.firstCreatePass&&m0(s).push(d,p.length-1))}function o0(s,a,l){for(let d in s)if(s.hasOwnProperty(d)){const p=s[d];(l=null===l?{}:l).hasOwnProperty(d)?l[d].push(a,p):l[d]=[a,p]}return l}function a0(s,a){const d=a.directiveEnd,p=s.data,v=a.attrs,D=[];let T=null,M=null;for(let N=a.directiveStart;N<d;N++){const W=p[N],ne=W.inputs,ce=null===v||xu(a)?null:PS(ne,v);D.push(ce),T=o0(ne,N,T),M=o0(W.outputs,N,M)}null!==T&&(T.hasOwnProperty("class")&&(a.flags|=16),T.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=D,a.inputs=T,a.outputs=M}function Ar(s,a,l,d,p,v,D,T){const M=Ki(a,l);let W,N=a.inputs;!T&&null!=N&&(W=N[d])?(yp(s,l,W,d,p),aa(a)&&yv(l,a.index)):3&a.type&&(d=function _v(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),p=null!=D?D(p,a.value||"",d):p,v.setProperty(M,d,p))}function yv(s,a){const l=en(a,s);16&l[2]||(l[2]|=32)}function Qc(s,a,l,d){let p=!1;if(ws()){const v=function kS(s,a,l){const d=s.directiveRegistry;let p=null;if(d)for(let v=0;v<d.length;v++){const D=d[v];Eh(l,D.selectors,!1)&&(p||(p=[]),to(ko(l,a),s,D.type),Oi(D)?(Ms(s,l),p.unshift(D)):p.push(D))}return p}(s,a,l),D=null===d?null:{"":-1};if(null!==v){p=!0,gp(l,s.data.length,v.length);for(let W=0;W<v.length;W++){const ne=v[W];ne.providersResolver&&ne.providersResolver(ne)}let T=!1,M=!1,N=Ru(s,a,v.length,null);for(let W=0;W<v.length;W++){const ne=v[W];l.mergedAttrs=Ja(l.mergedAttrs,ne.hostAttrs),bv(s,l,a,N,ne),RS(N,ne,D),null!==ne.contentQueries&&(l.flags|=8),(null!==ne.hostBindings||null!==ne.hostAttrs||0!==ne.hostVars)&&(l.flags|=128);const ce=ne.type.prototype;!T&&(ce.ngOnChanges||ce.ngOnInit||ce.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),T=!0),!M&&(ce.ngOnChanges||ce.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),M=!0),N++}a0(s,l)}D&&function c0(s,a,l){if(a){const d=s.localNames=[];for(let p=0;p<a.length;p+=2){const v=l[a[p+1]];if(null==v)throw new U(-301,!1);d.push(a[p],v)}}}(l,d,D)}return l.mergedAttrs=Ja(l.mergedAttrs,l.attrs),p}function l0(s,a,l,d,p,v){const D=v.hostBindings;if(D){let T=s.hostBindingOpCodes;null===T&&(T=s.hostBindingOpCodes=[]);const M=~a.index;(function u0(s){let a=s.length;for(;a>0;){const l=s[--a];if("number"==typeof l&&l<0)return l}return 0})(T)!=M&&T.push(M),T.push(d,p,D)}}function Rh(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function Ms(s,a){a.flags|=2,(s.components||(s.components=[])).push(a.index)}function RS(s,a,l){if(l){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)l[a.exportAs[d]]=s;Oi(a)&&(l[""]=s)}}function gp(s,a,l){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+l,s.providerIndexes=a}function bv(s,a,l,d,p){s.data[d]=p;const v=p.factory||(p.factory=es(p.type)),D=new eo(v,Oi(p),Th);s.blueprint[d]=D,l[d]=D,l0(s,a,0,d,Ru(s,l,p.hostVars,Ut),p)}function ks(s,a,l){const d=Ki(a,s),p=r0(l),v=s[10],D=Xc(s,Lg(s,p,null,l.onPush?32:16,d,a,v,v.createRenderer(d,l),null,null,null));s[a.index]=D}function Wo(s,a,l,d,p,v){const D=Ki(s,a);!function wv(s,a,l,d,p,v,D){if(null==v)s.removeAttribute(a,p,l);else{const T=null==D?X(v):D(v,d||"",p);s.setAttribute(a,p,T,l)}}(a[11],D,v,s.value,l,d,p)}function d0(s,a,l,d,p,v){const D=v[a];if(null!==D){const T=d.setInput;for(let M=0;M<D.length;){const N=D[M++],W=D[M++],ne=D[M++];null!==T?d.setInput(l,ne,N,W):l[W]=ne}}}function PS(s,a){let l=null,d=0;for(;d<a.length;){const p=a[d];if(0!==p)if(5!==p){if("number"==typeof p)break;s.hasOwnProperty(p)&&(null===l&&(l=[]),l.push(p,s[p],a[d+1])),d+=2}else d+=2;else d+=4}return l}function h0(s,a,l,d){return new Array(s,!0,!1,a,null,0,d,l,null,null)}function p0(s,a){const l=en(a,s);if(Co(l)){const d=l[1];48&l[2]?Mh(d,l,d.template,l[8]):l[5]>0&&Hg(l)}}function Hg(s){for(let d=By(s);null!==d;d=pg(d))for(let p=10;p<d.length;p++){const v=d[p];if(Co(v))if(512&v[2]){const D=v[1];Mh(D,v,D.template,v[8])}else v[5]>0&&Hg(v)}const l=s[1].components;if(null!==l)for(let d=0;d<l.length;d++){const p=en(l[d],s);Co(p)&&p[5]>0&&Hg(p)}}function OS(s,a){const l=en(a,s),d=l[1];(function Ev(s,a){for(let l=a.length;l<s.blueprint.length;l++)a.push(s.blueprint[l])})(d,l),dp(d,l,l[8])}function Xc(s,a){return s[13]?s[14][4]=a:s[13]=a,s[14]=a,a}function Cv(s){for(;s;){s[2]|=32;const a=zc(s);if(bf(s)&&!a)return s;s=a}return null}function Ph(s,a,l,d=!0){const p=a[10];p.begin&&p.begin();try{Mh(s,a,s.template,l)}catch(D){throw d&&_0(a,D),D}finally{p.end&&p.end()}}function Dv(s,a,l){Xa(0),a(s,l)}function Iv(s){return s[7]||(s[7]=[])}function m0(s){return s.cleanup||(s.cleanup=[])}function g0(s,a,l){return(null===s||Oi(s))&&(l=function fc(s){for(;Array.isArray(s);){if("object"==typeof s[1])return s;s=s[0]}return null}(l[a.index])),l[11]}function _0(s,a){const l=s[9],d=l?l.get(Ho,null):null;d&&d.handleError(a)}function yp(s,a,l,d,p){for(let v=0;v<l.length;){const D=l[v++],T=l[v++],M=a[D],N=s.data[D];null!==N.setInput?N.setInput(M,p,d,T):M[T]=p}}function jg(s,a,l){let d=l?s.styles:null,p=l?s.classes:null,v=0;if(null!==a)for(let D=0;D<a.length;D++){const T=a[D];"number"==typeof T?v=T:1==v?p=j(p,T):2==v&&(d=j(d,T+": "+a[++D]+";"))}l?s.styles=d:s.stylesWithoutHost=d,l?s.classes=p:s.classesWithoutHost=p}function Cl(s,a,l,d,p=!1){for(;null!==l;){const v=a[l.index];if(null!==v&&d.push(Vn(v)),Zi(v))for(let T=10;T<v.length;T++){const M=v[T],N=M[1].firstChild;null!==N&&Cl(M[1],M,N,d)}const D=l.type;if(8&D)Cl(s,a,l.child,d);else if(32&D){const T=Xf(l,a);let M;for(;M=T();)d.push(M)}else if(16&D){const T=bg(a,l);if(Array.isArray(T))d.push(...T);else{const M=zc(a[16]);Cl(M[1],M,T,d,!0)}}l=p?l.projectionNext:l.next}return d}class fo{constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,l=a[1];return Cl(l,a,l.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Zi(a)){const l=a[8],d=l?l.indexOf(this):-1;d>-1&&(Uy(a,d),ti(l,d))}this._attachedToViewContainer=!1}_g(this._lView[1],this._lView)}onDestroy(a){Vg(this._lView[1],this._lView,null,a)}markForCheck(){Cv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Ph(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function mg(s,a){xa(s,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=a}}class NS extends fo{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;Ph(a[1],a,a[8],!1)}checkNoChanges(){}get context(){return null}}class vp extends Hc{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=ge(a);return new wp(l,this.ngModule)}}function bp(s){const a=[];for(let l in s)s.hasOwnProperty(l)&&a.push({propName:s[l],templateName:l});return a}class Oh{constructor(a,l){this.injector=a,this.parentInjector=l}get(a,l,d){const p=this.injector.get(a,Ct,d);return p!==Ct||l===Ct?p:this.parentInjector.get(a,l,d)}}class wp extends Zf{constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function Xy(s){return s.map(Mu).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return bp(this.componentDef.inputs)}get outputs(){return bp(this.componentDef.outputs)}create(a,l,d,p){let v=(p=p||this.ngModule)instanceof Tr?p:p?.injector;v&&null!==this.componentDef.getStandaloneInjector&&(v=this.componentDef.getStandaloneInjector(v)||v);const D=v?new Oh(a,v):a,T=D.get(B,null);if(null===T)throw new U(407,!1);const M=D.get(Se,null),N=T.createRenderer(null,this.componentDef),W=this.componentDef.selectors[0][0]||"div",ne=d?function pp(s,a,l){return s.selectRootElement(a,l===ft.ShadowDom)}(N,d,this.componentDef.encapsulation):Jf(T.createRenderer(null,this.componentDef),W,function LS(s){const a=s.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(W)),ce=this.componentDef.onPush?288:272,ye=kh(0,null,null,1,0,null,null,null,null,null),Oe=Lg(null,ye,null,ce,null,null,T,N,M,D,null);let qe,tt;ql(Oe);try{const dt=function Sv(s,a,l,d,p,v){const D=l[1];l[22]=s;const M=xh(D,22,2,"#host",null),N=M.mergedAttrs=a.hostAttrs;null!==N&&(jg(M,N,!0),null!==s&&(fa(p,s,N),null!==M.classes&&$y(p,s,M.classes),null!==M.styles&&kE(p,s,M.styles)));const W=d.createRenderer(s,a),ne=Lg(l,r0(a),null,a.onPush?32:16,l[22],M,d,W,v||null,null,null);return D.firstCreatePass&&(to(ko(M,l),D,a.type),Ms(D,M),gp(M,l.length,1)),Xc(l,ne),l[22]=ne}(ne,this.componentDef,Oe,T,N);if(ne)if(d)fa(N,ne,["ng-version",at.full]);else{const{attrs:Dt,classes:Be}=function Ch(s){const a=[],l=[];let d=1,p=2;for(;d<s.length;){let v=s[d];if("string"==typeof v)2===p?""!==v&&a.push(v,s[++d]):8===p&&l.push(v);else{if(!rn(p))break;p=v}d++}return{attrs:a,classes:l}}(this.componentDef.selectors[0]);Dt&&fa(N,ne,Dt),Be&&Be.length>0&&$y(N,ne,Be.join(" "))}if(tt=Eo(ye,22),void 0!==l){const Dt=tt.projection=[];for(let Be=0;Be<this.ngContentSelectors.length;Be++){const Pt=l[Be];Dt.push(null!=Pt?Array.from(Pt):null)}}qe=function Av(s,a,l,d){const p=l[1],v=function Ra(s,a,l){const d=Un();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),bv(s,d,a,Ru(s,a,1,null),l),a0(s,d));const p=io(a,s,d.directiveStart,d);Ji(p,a);const v=Ki(d,a);return v&&Ji(v,a),p}(p,l,a);if(s[8]=l[8]=v,null!==d)for(const T of d)T(v,a);if(a.contentQueries){const T=Un();a.contentQueries(1,v,T.directiveStart)}const D=Un();return!p.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(ar(D.index),l0(l[1],D,0,D.directiveStart,D.directiveEnd,a),Rh(a,v)),v}(dt,this.componentDef,Oe,[BS]),dp(ye,Oe,null)}finally{Io()}return new v0(this.componentType,qe,C(tt,Oe),Oe,tt)}}class v0 extends class ng{}{constructor(a,l,d,p,v){super(),this.location=d,this._rootLView=p,this._tNode=v,this.instance=l,this.hostView=this.changeDetectorRef=new NS(p),this.componentType=a}setInput(a,l){const d=this._tNode.inputs;let p;if(null!==d&&(p=d[a])){const v=this._rootLView;yp(v[1],v,p,a,l),yv(v,this._tNode.index)}}get injector(){return new Po(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function BS(){const s=Un();Yl(Fe()[1],s)}function Ep(s){let a=function b0(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const d=[s];for(;a;){let p;if(Oi(s))p=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new U(903,!1);p=a.\u0275dir}if(p){if(l){d.push(p);const D=s;D.inputs=zg(s.inputs),D.declaredInputs=zg(s.declaredInputs),D.outputs=zg(s.outputs);const T=p.hostBindings;T&&E0(s,T);const M=p.viewQuery,N=p.contentQueries;if(M&&w0(s,M),N&&xv(s,N),g(s.inputs,p.inputs),g(s.declaredInputs,p.declaredInputs),g(s.outputs,p.outputs),Oi(p)&&p.data.animation){const W=s.data;W.animation=(W.animation||[]).concat(p.data.animation)}}const v=p.features;if(v)for(let D=0;D<v.length;D++){const T=v[D];T&&T.ngInherit&&T(s),T===Ep&&(l=!1)}}a=Object.getPrototypeOf(a)}!function VS(s){let a=0,l=null;for(let d=s.length-1;d>=0;d--){const p=s[d];p.hostVars=a+=p.hostVars,p.hostAttrs=Ja(p.hostAttrs,l=Ja(l,p.hostAttrs))}}(d)}function zg(s){return s===rr?{}:s===Mt?[]:s}function w0(s,a){const l=s.viewQuery;s.viewQuery=l?(d,p)=>{a(d,p),l(d,p)}:a}function xv(s,a){const l=s.contentQueries;s.contentQueries=l?(d,p,v)=>{a(d,p,v),l(d,p,v)}:a}function E0(s,a){const l=s.hostBindings;s.hostBindings=l?(d,p)=>{a(d,p),l(d,p)}:a}let Jc=null;function er(){if(!Jc){const s=hn.Symbol;if(s&&s.iterator)Jc=s.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<a.length;++l){const d=a[l];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(Jc=d)}}}return Jc}function Lh(s){return!!D0(s)&&(Array.isArray(s)||!(s instanceof Map)&&er()in s)}function D0(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function xr(s,a,l){return!Object.is(s[a],l)&&(s[a]=l,!0)}function id(s,a,l,d){const p=Fe();return xr(p,Do(),a)&&(Yt(),Wo(An(),p,s,a,l,d)),id}function R0(s,a,l,d,p,v,D,T){const M=Fe(),N=Yt(),W=s+22,ne=N.firstCreatePass?function jS(s,a,l,d,p,v,D,T,M){const N=a.consts,W=xh(a,s,4,D||null,Hr(N,T));Qc(a,l,W,Hr(N,M)),Yl(a,W);const ne=W.tViews=kh(2,W,d,p,v,a.directiveRegistry,a.pipeRegistry,null,a.schemas,N);return null!==a.queries&&(a.queries.template(a,W),ne.queries=a.queries.embeddedTView(W)),W}(W,N,M,a,l,d,p,v,D):N.data[W];br(ne,!1);const ce=M[11].createComment("");yh(N,M,ce,ne),Ji(ce,M),Xc(M,M[W]=h0(ce,M,ce,ne)),ac(ne)&&fp(N,M,ne),null!=D&&Bg(M,ne,T)}function P0(s){return function bs(s,a){return s[a]}(function _c(){return kt.lFrame.contextLView}(),22+s)}function Rv(s,a,l){const d=Fe();return xr(d,Do(),a)&&Ar(Yt(),An(),d,s,a,d[11],l,!1),Rv}function Pv(s,a,l,d,p){const D=p?"class":"style";yp(s,l,a.inputs[D],D,d)}function $g(s,a,l,d){const p=Fe(),v=Yt(),D=22+s,T=p[11],M=p[D]=Jf(T,a,function Kl(){return kt.lFrame.currentNamespace}()),N=v.firstCreatePass?function GS(s,a,l,d,p,v,D){const T=a.consts,N=xh(a,s,2,p,Hr(T,v));return Qc(a,l,N,Hr(T,D)),null!==N.attrs&&jg(N,N.attrs,!1),null!==N.mergedAttrs&&jg(N,N.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,N),N}(D,v,p,0,a,l,d):v.data[D];br(N,!0);const W=N.mergedAttrs;null!==W&&fa(T,M,W);const ne=N.classes;null!==ne&&$y(T,M,ne);const ce=N.styles;return null!==ce&&kE(T,M,ce),64!=(64&N.flags)&&yh(v,p,M,N),0===function Ul(){return kt.lFrame.elementDepthCount}()&&Ji(M,p),function Hl(){kt.lFrame.elementDepthCount++}(),ac(N)&&(fp(v,p,N),Pu(v,N,p)),null!==d&&Bg(p,N),$g}function qg(){let s=Un();qa()?Za():(s=s.parent,br(s,!1));const a=s;!function pc(){kt.lFrame.elementDepthCount--}();const l=Yt();return l.firstCreatePass&&(Yl(l,s),Ga(s)&&l.queries.elementEnd(s)),null!=a.classesWithoutHost&&function Jl(s){return 0!=(16&s.flags)}(a)&&Pv(l,a,Fe(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function zd(s){return 0!=(32&s.flags)}(a)&&Pv(l,a,Fe(),a.stylesWithoutHost,!1),qg}function Ov(s,a,l,d){return $g(s,a,l,d),qg(),Ov}function Zg(s,a,l){const d=Fe(),p=Yt(),v=s+22,D=p.firstCreatePass?function WS(s,a,l,d,p){const v=a.consts,D=Hr(v,d),T=xh(a,s,8,"ng-container",D);return null!==D&&jg(T,D,!0),Qc(a,l,T,Hr(v,p)),null!==a.queries&&a.queries.elementStart(a,T),T}(v,p,d,a,l):p.data[v];br(D,!0);const T=d[v]=d[11].createComment("");return yh(p,d,T,D),Ji(T,d),ac(D)&&(fp(p,d,D),Pu(p,D,d)),null!=l&&Bg(d,D),Zg}function as(){let s=Un();const a=Yt();return qa()?Za():(s=s.parent,br(s,!1)),a.firstCreatePass&&(Yl(a,s),Ga(s)&&a.queries.elementEnd(s)),as}function Kg(){return Fe()}function Yg(s){return!!s&&"function"==typeof s.then}function N0(s){return!!s&&"function"==typeof s.subscribe}const Nv=N0;function Lv(s,a,l,d){const p=Fe(),v=Yt(),D=Un();return L0(v,p,p[11],D,s,a,0,d),Lv}function Fv(s,a){const l=Un(),d=Fe(),p=Yt();return L0(p,d,g0(Qa(p.data),l,d),l,s,a),Fv}function L0(s,a,l,d,p,v,D,T){const M=ac(d),W=s.firstCreatePass&&m0(s),ne=a[8],ce=Iv(a);let ye=!0;if(3&d.type||T){const tt=Ki(d,a),dt=T?T(tt):tt,Dt=ce.length,Be=T?pn=>T(Vn(pn[d.index])):d.index;let Pt=null;if(!T&&M&&(Pt=function $S(s,a,l,d){const p=s.cleanup;if(null!=p)for(let v=0;v<p.length-1;v+=2){const D=p[v];if(D===l&&p[v+1]===d){const T=a[7],M=p[v+2];return T.length>M?T[M]:null}"string"==typeof D&&(v+=2)}return null}(s,a,p,d.index)),null!==Pt)(Pt.__ngLastListenerFn__||Pt).__ngNextListenerFn__=v,Pt.__ngLastListenerFn__=v,ye=!1;else{v=F0(d,a,ne,v,!1);const pn=l.listen(dt,p,v);ce.push(v,pn),W&&W.push(p,Be,Dt,Dt+1)}}else v=F0(d,a,ne,v,!1);const Oe=d.outputs;let qe;if(ye&&null!==Oe&&(qe=Oe[p])){const tt=qe.length;if(tt)for(let dt=0;dt<tt;dt+=2){const ri=a[qe[dt]][qe[dt+1]].subscribe(v),pd=ce.length;ce.push(v,ri),W&&W.push(p,d.index,pd,-(pd+1))}}}function Bv(s,a,l,d){try{return!1!==l(d)}catch(p){return _0(s,p),!1}}function F0(s,a,l,d,p){return function v(D){if(D===Function)return d;Cv(2&s.flags?en(s.index,a):a);let M=Bv(a,0,d,D),N=v.__ngNextListenerFn__;for(;N;)M=Bv(a,0,N,D)&&M,N=N.__ngNextListenerFn__;return p&&!1===M&&(D.preventDefault(),D.returnValue=!1),M}}function B0(s=1){return function To(s){return(kt.lFrame.contextLView=function Zl(s,a){for(;s>0;)a=a[15],s--;return a}(s,kt.lFrame.contextLView))[8]}(s)}function xO(s,a){let l=null;const d=function Ky(s){const a=s.attrs;if(null!=a){const l=a.indexOf(5);if(0==(1&l))return a[l+1]}return null}(s);for(let p=0;p<a.length;p++){const v=a[p];if("*"!==v){if(null===d?Eh(s,v,!0):qc(d,v))return p}else l=p}return l}function Vv(s){const a=Fe()[16][6];if(!a.projection){const d=a.projection=In(s?s.length:1,null),p=d.slice();let v=a.child;for(;null!==v;){const D=s?xO(v,s):0;null!==D&&(p[D]?p[D].projectionNext=v:d[D]=v,p[D]=v),v=v.next}}}function V0(s,a=0,l){const d=Fe(),p=Yt(),v=xh(p,22+s,16,null,l||null);null===v.projection&&(v.projection=a),Za(),64!=(64&v.flags)&&function Au(s,a,l){ME(a[11],0,a,l,jy(s,l,a),Gy(l.parent||a[6],l,a))}(p,d,v)}function Hv(s,a,l,d,p){const v=s[l+1],D=null===a;let T=d?ho(v):Ma(v),M=!1;for(;0!==T&&(!1===M||D);){const W=s[T+1];QS(s[T],a)&&(M=!0,s[T+1]=d?uv(W):Sh(W)),T=d?ho(W):Ma(W)}M&&(s[l+1]=d?Sh(v):uv(v))}function QS(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&No(s,a)>=0}function zv(s,a){return function qo(s,a,l,d){const p=Fe(),v=Yt(),D=function Es(s){const a=kt.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,l}(2);v.firstUpdatePass&&function Gv(s,a,l,d){const p=s.data;if(null===p[l+1]){const v=p[di()],D=function Q0(s,a){return a>=s.expandoStartIndex}(s,l);(function iA(s,a){return 0!=(s.flags&(a?16:32))})(v,d)&&null===a&&!D&&(a=!1),a=function Wv(s,a,l,d){const p=Qa(s);let v=d?a.residualClasses:a.residualStyles;if(null===p)0===(d?a.classBindings:a.styleBindings)&&(l=Cp(l=J0(null,s,a,l,d),a.attrs,d),v=null);else{const D=a.directiveStylingLast;if(-1===D||s[D]!==p)if(l=J0(p,s,a,l,d),null===v){let M=function X0(s,a,l){const d=l?a.classBindings:a.styleBindings;if(0!==Ma(d))return s[ho(d)]}(s,a,d);void 0!==M&&Array.isArray(M)&&(M=J0(null,s,a,M[1],d),M=Cp(M,a.attrs,d),function Xg(s,a,l,d){s[ho(l?a.classBindings:a.styleBindings)]=d}(s,a,d,M))}else v=function tA(s,a,l){let d;const p=a.directiveEnd;for(let v=1+a.directiveStylingLast;v<p;v++)d=Cp(d,s[v].hostAttrs,l);return Cp(d,a.attrs,l)}(s,a,d)}return void 0!==v&&(d?a.residualClasses=v:a.residualStyles=v),l}(p,v,a,d),function KS(s,a,l,d,p,v){let D=v?a.classBindings:a.styleBindings,T=ho(D),M=Ma(D);s[d]=l;let W,N=!1;if(Array.isArray(l)){const ne=l;W=ne[1],(null===W||No(ne,W)>0)&&(N=!0)}else W=l;if(p)if(0!==M){const ce=ho(s[T+1]);s[d+1]=op(ce,T),0!==ce&&(s[ce+1]=lv(s[ce+1],d)),s[T+1]=function YE(s,a){return 131071&s|a<<17}(s[T+1],d)}else s[d+1]=op(T,0),0!==T&&(s[T+1]=lv(s[T+1],d)),T=d;else s[d+1]=op(M,0),0===T?T=d:s[M+1]=lv(s[M+1],d),M=d;N&&(s[d+1]=Sh(s[d+1])),Hv(s,W,d,!0),Hv(s,W,d,!1),function YS(s,a,l,d,p){const v=p?s.residualClasses:s.residualStyles;null!=v&&"string"==typeof a&&No(v,a)>=0&&(l[d+1]=uv(l[d+1]))}(a,W,s,d,v),D=op(T,M),v?a.classBindings=D:a.styleBindings=D}(p,v,a,l,D,d)}}(v,s,D,d),a!==Ut&&xr(p,D,a)&&function eC(s,a,l,d,p,v,D,T){if(!(3&a.type))return;const M=s.data,N=M[T+1];qv(function QE(s){return 1==(1&s)}(N)?tC(M,a,l,p,Ma(N),D):void 0)||(qv(v)||function KE(s){return 2==(2&s)}(N)&&(v=tC(M,null,l,p,T,D)),function ip(s,a,l,d,p){if(a)p?s.addClass(l,d):s.removeClass(l,d);else{let v=-1===d.indexOf("-")?void 0:Aa.DashCase;null==p?s.removeStyle(l,d,v):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),v|=Aa.Important),s.setStyle(l,d,p,v))}}(d,D,vr(di(),l),p,v))}(v,v.data[di()],p,p[11],s,p[D+1]=function PO(s,a){return null==s||("string"==typeof a?s+=a:"object"==typeof s&&(s=F(function dr(s){return s instanceof class Lc{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?s.changingThisBreaksApplicationSecurity:s}(s)))),s}(a,l),d,D)}(s,a,null,!0),zv}function J0(s,a,l,d,p){let v=null;const D=l.directiveEnd;let T=l.directiveStylingLast;for(-1===T?T=l.directiveStart:T++;T<D&&(v=a[T],d=Cp(d,v.hostAttrs,p),v!==s);)T++;return null!==s&&(l.directiveStylingLast=T),d}function Cp(s,a,l){const d=l?1:2;let p=-1;if(null!==a)for(let v=0;v<a.length;v++){const D=a[v];"number"==typeof D?p=D:p===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),cr(s,D,!!l||a[++v]))}return void 0===s?null:s}function tC(s,a,l,d,p,v){const D=null===a;let T;for(;p>0;){const M=s[p],N=Array.isArray(M),W=N?M[1]:M,ne=null===W;let ce=l[p+1];ce===Ut&&(ce=ne?Mt:void 0);let ye=ne?Rc(ce,d):W===d?ce:void 0;if(N&&!qv(ye)&&(ye=Rc(M,d)),qv(ye)&&(T=ye,D))return T;const Oe=s[p+1];p=D?ho(Oe):Ma(Oe)}if(null!==a){let M=v?a.residualClasses:a.residualStyles;null!=M&&(T=Rc(M,d))}return T}function qv(s){return void 0!==s}function rA(s,a=""){const l=Fe(),d=Yt(),p=s+22,v=d.firstCreatePass?xh(d,p,1,a,null):d.data[p],D=l[p]=function Gc(s,a){return s.createText(a)}(l[11],a);yh(d,l,D,v),br(v,!1)}function nC(s){return iC("",s,""),nC}function iC(s,a,l){const d=Fe(),p=function Na(s,a,l,d){return xr(s,Do(),l)?a+X(l)+d:Ut}(d,s,a,l);return p!==Ut&&function Pa(s,a,l){const d=vr(a,s);!function _h(s,a,l){s.setValue(a,l)}(s[11],d,l)}(d,di(),p),iC}function tb(s,a,l){const d=Fe();return xr(d,Do(),a)&&Ar(Yt(),An(),d,s,a,d[11],l,!0),tb}function nb(s,a,l){const d=Fe();if(xr(d,Do(),a)){const v=Yt(),D=An();Ar(v,D,d,s,a,g0(Qa(v.data),D,d),l,!0)}return nb}const Bu=void 0;var fC=["en",[["a","p"],["AM","PM"],Bu],[["AM","PM"],Bu,Bu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bu,"{1} 'at' {0}",Bu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function ib(s){const l=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let Vu={};function ud(s){const a=function pC(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=n_(a);if(l)return l;const d=a.split("-")[0];if(l=n_(d),l)return l;if("en"===d)return fC;throw new U(701,!1)}function t_(s){return ud(s)[Tt.PluralCase]}function n_(s){return s in Vu||(Vu[s]=hn.ng&&hn.ng.common&&hn.ng.common.locales&&hn.ng.common.locales[s]),Vu[s]}var Tt=(()=>((Tt=Tt||{})[Tt.LocaleId=0]="LocaleId",Tt[Tt.DayPeriodsFormat=1]="DayPeriodsFormat",Tt[Tt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Tt[Tt.DaysFormat=3]="DaysFormat",Tt[Tt.DaysStandalone=4]="DaysStandalone",Tt[Tt.MonthsFormat=5]="MonthsFormat",Tt[Tt.MonthsStandalone=6]="MonthsStandalone",Tt[Tt.Eras=7]="Eras",Tt[Tt.FirstDayOfWeek=8]="FirstDayOfWeek",Tt[Tt.WeekendRange=9]="WeekendRange",Tt[Tt.DateFormat=10]="DateFormat",Tt[Tt.TimeFormat=11]="TimeFormat",Tt[Tt.DateTimeFormat=12]="DateTimeFormat",Tt[Tt.NumberSymbols=13]="NumberSymbols",Tt[Tt.NumberFormats=14]="NumberFormats",Tt[Tt.CurrencyCode=15]="CurrencyCode",Tt[Tt.CurrencySymbol=16]="CurrencySymbol",Tt[Tt.CurrencyName=17]="CurrencyName",Tt[Tt.Currencies=18]="Currencies",Tt[Tt.Directionality=19]="Directionality",Tt[Tt.PluralCase=20]="PluralCase",Tt[Tt.ExtraData=21]="ExtraData",Tt))();const Uh="en-US";let r_=Uh;function wb(s,a,l,d,p){if(s=w(s),Array.isArray(s))for(let v=0;v<s.length;v++)wb(s[v],a,l,d,p);else{const v=Yt(),D=Fe();let T=Uo(s)?s:w(s.provide),M=co(s);const N=Un(),W=1048575&N.providerIndexes,ne=N.directiveStart,ce=N.providerIndexes>>20;if(Uo(s)||!s.multi){const ye=new eo(M,p,Th),Oe=Db(T,a,p?W:W+ce,ne);-1===Oe?(to(ko(N,D),v,T),Eb(v,s,a.length),a.push(T),N.directiveStart++,N.directiveEnd++,p&&(N.providerIndexes+=1048576),l.push(ye),D.push(ye)):(l[Oe]=ye,D[Oe]=ye)}else{const ye=Db(T,a,W+ce,ne),Oe=Db(T,a,W,W+ce),qe=ye>=0&&l[ye],tt=Oe>=0&&l[Oe];if(p&&!tt||!p&&!qe){to(ko(N,D),v,T);const dt=function jA(s,a,l,d,p){const v=new eo(s,l,Th);return v.multi=[],v.index=a,v.componentProviders=0,Cb(v,p,d&&!l),v}(p?HA:UA,l.length,p,d,M);!p&&tt&&(l[Oe].providerFactory=dt),Eb(v,s,a.length,0),a.push(T),N.directiveStart++,N.directiveEnd++,p&&(N.providerIndexes+=1048576),l.push(dt),D.push(dt)}else Eb(v,s,ye>-1?ye:Oe,Cb(l[p?Oe:ye],M,!p&&d));!p&&d&&tt&&l[Oe].componentProviders++}}}function Eb(s,a,l,d){const p=Uo(a),v=function tg(s){return!!s.useClass}(a);if(p||v){const M=(v?w(a.useClass):a).prototype.ngOnDestroy;if(M){const N=s.destroyHooks||(s.destroyHooks=[]);if(!p&&a.multi){const W=N.indexOf(l);-1===W?N.push(l,[d,M]):N[W+1].push(d,M)}else N.push(l,M)}}}function Cb(s,a,l){return l&&s.componentProviders++,s.multi.push(a)-1}function Db(s,a,l,d){for(let p=l;p<d;p++)if(a[p]===s)return p;return-1}function UA(s,a,l,d){return Op(this.multi,[])}function HA(s,a,l,d){const p=this.multi;let v;if(this.providerFactory){const D=this.providerFactory.componentProviders,T=io(l,l[1],this.providerFactory.index,d);v=T.slice(0,D),Op(p,v);for(let M=D;M<T.length;M++)v.push(T[M])}else v=[],Op(p,v);return v}function Op(s,a){for(let l=0;l<s.length;l++)a.push((0,s[l])());return a}function zA(s,a=[]){return l=>{l.providersResolver=(d,p)=>function OC(s,a,l){const d=Yt();if(d.firstCreatePass){const p=Oi(s);wb(l,d.data,d.blueprint,p,!0),wb(a,d.data,d.blueprint,p,!1)}}(d,p?p(s):s,a)}}class ii{}function Ib(s,a){return new GA(s,a??null)}class GA extends ii{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vp(this);const d=function En(s,a){const l=s[cn]||null;if(!l&&!0===a)throw new Error(`Type ${F(s)} does not have '\u0275mod' property.`);return l}(a);this._bootstrapComponents=function jo(s){return s instanceof Function?s():s}(d.bootstrap),this._r3Injector=UE(a,l,[{provide:ii,useValue:this},{provide:Hc,useValue:this.componentFactoryResolver}],F(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Uu extends class WO{}{constructor(a){super(),this.moduleType=a}create(a){return new GA(this.moduleType,a)}}function VC(s,a,l,d){return function QA(s,a,l,d,p,v){const D=a+l;return xr(s,D,p)?function Oa(s,a,l){return s[a]=l}(s,D+1,v?d.call(v,p):d(p)):function d_(s,a){const l=s[a];return l===Ut?void 0:l}(s,D+1)}(Fe(),function Hn(){const s=kt.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}(),s,a,l,d)}function HC(s){return a=>{setTimeout(s,void 0,a)}}const Il=class uN extends h.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,d){let p=a,v=l||(()=>null),D=d;if(a&&"object"==typeof a){const M=a;p=M.next?.bind(M),v=M.error?.bind(M),D=M.complete?.bind(M)}this.__isAsync&&(v=HC(v),p&&(p=HC(p)),D&&(D=HC(D)));const T=super.subscribe({next:p,error:v,complete:D});return a instanceof ue.w0&&a.add(T),T}};function cN(){return this._results[er()]()}class jC{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=er(),d=jC.prototype;d[l]||(d[l]=cN)}get changes(){return this._changes||(this._changes=new Il)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const d=this;d.dirty=!1;const p=Ni(a);(this._changesDetected=!function Ei(s,a,l){if(s.length!==a.length)return!1;for(let d=0;d<s.length;d++){let p=s[d],v=a[d];if(l&&(p=l(p),v=l(v)),v!==p)return!1}return!0}(d._results,p,l))&&(d._results=p,d.length=p.length,d.last=p[this.length-1],d.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let f_=(()=>{class s{}return s.__NG_ELEMENT_ID__=fN,s})();const dN=f_,hN=class extends dN{constructor(a,l,d){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(a,l){const d=this._declarationTContainer.tViews,p=Lg(this._declarationLView,d,a,16,null,d.declTNode,null,null,null,null,l||null);p[17]=this._declarationLView[this._declarationTContainer.index];const D=this._declarationLView[19];return null!==D&&(p[19]=D.createEmbeddedView(d)),dp(d,p,a),new fo(p)}};function fN(){return xb(Un(),Fe())}function xb(s,a){return 4&s.type?new hN(a,s,C(s,a)):null}let Mb=(()=>{class s{}return s.__NG_ELEMENT_ID__=pN,s})();function pN(){return rx(Un(),Fe())}const mN=Mb,nx=class extends mN{constructor(a,l,d){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=d}get element(){return C(this._hostTNode,this._hostLView)}get injector(){return new Po(this._hostTNode,this._hostLView)}get parentInjector(){const a=iu(this._hostTNode,this._hostLView);if(Wd(a)){const l=tl(a,this._hostLView),d=bi(a);return new Po(l[1].data[d+8],l)}return new Po(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=ix(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,l,d){let p,v;"number"==typeof d?p=d:null!=d&&(p=d.index,v=d.injector);const D=a.createEmbeddedView(l||{},v);return this.insert(D,p),D}createComponent(a,l,d,p,v){const D=a&&!function qn(s){return"function"==typeof s}(a);let T;if(D)T=l;else{const ne=l||{};T=ne.index,d=ne.injector,p=ne.projectableNodes,v=ne.environmentInjector||ne.ngModuleRef}const M=D?a:new wp(ge(a)),N=d||this.parentInjector;if(!v&&null==M.ngModule){const ce=(D?N:this.parentInjector).get(Tr,null);ce&&(v=ce)}const W=M.create(N,p,void 0,v);return this.insert(W.hostView,T),W}insert(a,l){const d=a._lView,p=d[1];if(function Fl(s){return Zi(s[3])}(d)){const W=this.indexOf(a);if(-1!==W)this.detach(W);else{const ne=d[3],ce=new nx(ne,ne[6],ne[3]);ce.detach(ce.indexOf(a))}}const v=this._adjustIndex(l),D=this._lContainer;!function sS(s,a,l,d){const p=10+d,v=l.length;d>0&&(l[p-1][4]=a),d<v-10?(a[4]=l[p],Kd(l,10+d,a)):(l.push(a),a[4]=null),a[3]=l;const D=a[17];null!==D&&l!==D&&function oS(s,a){const l=s[9];a[16]!==a[3][3][16]&&(s[2]=!0),null===l?s[9]=[a]:l.push(a)}(D,a);const T=a[19];null!==T&&T.insertView(s),a[2]|=64}(p,d,D,v);const T=bh(v,D),M=d[11],N=vg(M,D[7]);return null!==N&&function iS(s,a,l,d,p,v){d[0]=p,d[6]=a,xa(s,d,l,1,p,v)}(p,D[6],M,d,N,T),a.attachToViewContainerRef(),Kd(zC(D),v,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=ix(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),d=Uy(this._lContainer,l);d&&(ti(zC(this._lContainer),l),_g(d[1],d))}detach(a){const l=this._adjustIndex(a,-1),d=Uy(this._lContainer,l);return d&&null!=ti(zC(this._lContainer),l)?new fo(d):null}_adjustIndex(a,l=0){return a??this.length+l}};function ix(s){return s[8]}function zC(s){return s[8]||(s[8]=[])}function rx(s,a){let l;const d=a[s.index];if(Zi(d))l=d;else{let p;if(8&s.type)p=Vn(d);else{const v=a[11];p=v.createComment("");const D=Ki(s,a);Wc(v,vg(v,D),p,function aS(s,a){return s.nextSibling(a)}(v,D),!1)}a[s.index]=l=h0(d,a,p,s),Xc(a,l)}return new nx(l,s,a)}class GC{constructor(a){this.queryList=a,this.matches=null}clone(){return new GC(this.queryList)}setDirty(){this.queryList.setDirty()}}class WC{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const d=null!==a.contentQueries?a.contentQueries[0]:l.length,p=[];for(let v=0;v<d;v++){const D=l.getByIndex(v);p.push(this.queries[D.indexInDeclarationView].clone())}return new WC(p)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==hx(a,l).matches&&this.queries[l].setDirty()}}class sx{constructor(a,l,d=null){this.predicate=a,this.flags=l,this.read=d}}class $C{constructor(a=[]){this.queries=a}elementStart(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let d=0;d<this.length;d++){const p=null!==l?l.length:0,v=this.getByIndex(d).embeddedTView(a,p);v&&(v.indexInDeclarationView=d,null!==l?l.push(v):l=[v])}return null!==l?new $C(l):null}template(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class qC{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new qC(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let p=0;p<d.length;p++){const v=d[p];this.matchTNodeWithReadOption(a,l,yN(l,v)),this.matchTNodeWithReadOption(a,l,ol(l,a,v,!1,!1))}else d===f_?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,ol(l,a,d,!1,!1))}matchTNodeWithReadOption(a,l,d){if(null!==d){const p=this.metadata.read;if(null!==p)if(p===_||p===Mb||p===f_&&4&l.type)this.addMatch(l.index,-2);else{const v=ol(l,a,p,!1,!1);null!==v&&this.addMatch(l.index,v)}else this.addMatch(l.index,d)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function yN(s,a){const l=s.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===a)return l[d+1];return null}function bN(s,a,l,d){return-1===l?function vN(s,a){return 11&s.type?C(s,a):4&s.type?xb(s,a):null}(a,s):-2===l?function wN(s,a,l){return l===_?C(a,s):l===f_?xb(a,s):l===Mb?rx(a,s):void 0}(s,a,d):io(s,s[1],l,a)}function ox(s,a,l,d){const p=a[19].queries[d];if(null===p.matches){const v=s.data,D=l.matches,T=[];for(let M=0;M<D.length;M+=2){const N=D[M];T.push(N<0?null:bN(a,v[N],D[M+1],l.metadata.read))}p.matches=T}return p.matches}function ZC(s,a,l,d){const p=s.queries.getByIndex(l),v=p.matches;if(null!==v){const D=ox(s,a,p,l);for(let T=0;T<v.length;T+=2){const M=v[T];if(M>0)d.push(D[T/2]);else{const N=v[T+1],W=a[-M];for(let ne=10;ne<W.length;ne++){const ce=W[ne];ce[17]===ce[3]&&ZC(ce[1],ce,N,d)}if(null!==W[9]){const ne=W[9];for(let ce=0;ce<ne.length;ce++){const ye=ne[ce];ZC(ye[1],ye,N,d)}}}}}return d}function ax(s){const a=Fe(),l=Yt(),d=bc();Xa(d+1);const p=hx(l,d);if(s.dirty&&function Ll(s){return 4==(4&s[2])}(a)===(2==(2&p.metadata.flags))){if(null===p.matches)s.reset([]);else{const v=p.crossesNgTemplate?ZC(l,a,d,[]):ox(l,a,p,d);s.reset(v,b),s.notifyOnChanges()}return!0}return!1}function lx(s,a,l){const d=Yt();d.firstCreatePass&&(dx(d,new sx(s,a,l),-1),2==(2&a)&&(d.staticViewQueries=!0)),cx(d,Fe(),a)}function KC(s,a,l,d){const p=Yt();if(p.firstCreatePass){const v=Un();dx(p,new sx(a,l,d),v.index),function CN(s,a){const l=s.contentQueries||(s.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,a)}(p,s),2==(2&l)&&(p.staticContentQueries=!0)}cx(p,Fe(),l)}function ux(){return function EN(s,a){return s[19].queries[a].queryList}(Fe(),bc())}function cx(s,a,l){const d=new jC(4==(4&l));Vg(s,a,d,d.destroy),null===a[19]&&(a[19]=new WC),a[19].queries.push(new GC(d))}function dx(s,a,l){null===s.queries&&(s.queries=new $C),s.queries.track(new qC(a,l))}function hx(s,a){return s.queries.getByIndex(a)}function m_(...s){}const rD=new Dn("Application Initializer");let g_=(()=>{class s{constructor(l){this.appInits=l,this.resolve=m_,this.reject=m_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,p)=>{this.resolve=d,this.reject=p})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const v=this.appInits[p]();if(Yg(v))l.push(v);else if(Nv(v)){const D=new Promise((T,M)=>{v.subscribe({complete:T,error:M})});l.push(D)}}Promise.all(l).then(()=>{d()}).catch(p=>{this.reject(p)}),0===l.length&&d(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(Zn(rD,8))},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const sD=new Dn("AppId",{providedIn:"root",factory:function oD(){return`${Ob()}${Ob()}${Ob()}`}});function Ob(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const aD=new Dn("Platform Initializer"),kx=new Dn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Nb=new Dn("appBootstrapListener"),Px=new Dn("AnimationModuleType"),Vp=new Dn("LocaleId",{providedIn:"root",factory:()=>mu(Vp,ot.Optional|ot.SkipSelf)||function Ox(){return typeof $localize<"u"&&$localize.locale||Uh}()}),Nx=new Dn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"}),dD=(()=>Promise.resolve(0))();function hD(s){typeof Zone>"u"?dD.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ns{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Il(!1),this.onMicrotaskEmpty=new Il(!1),this.onStable=new Il(!1),this.onError=new Il(!1),typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();const p=this;if(p._nesting=0,p._outer=p._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const v=Zone.AsyncStackTaggingZoneSpec;p._inner=p._inner.fork(new v("Angular"))}Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!d&&l,p.shouldCoalesceRunChangeDetection=d,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function ZN(){let s=hn.requestAnimationFrame,a=hn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&a){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function Vx(s){const a=()=>{!function YN(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(hn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,fD(s),s.isCheckStableRunning=!0,Lb(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),fD(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,p,v,D,T)=>{try{return Ux(s),l.invokeTask(p,v,D,T)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||s.shouldCoalesceRunChangeDetection)&&a(),Hx(s)}},onInvoke:(l,d,p,v,D,T,M)=>{try{return Ux(s),l.invoke(p,v,D,T,M)}finally{s.shouldCoalesceRunChangeDetection&&a(),Hx(s)}},onHasTask:(l,d,p,v)=>{l.hasTask(p,v),d===p&&("microTask"==v.change?(s._hasPendingMicrotasks=v.microTask,fD(s),Lb(s)):"macroTask"==v.change&&(s.hasPendingMacrotasks=v.macroTask))},onHandleError:(l,d,p,v)=>(l.handleError(p,v),s.runOutsideAngular(()=>s.onError.emit(v)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ns.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(Ns.isInAngularZone())throw new U(909,!1)}run(a,l,d){return this._inner.run(a,l,d)}runTask(a,l,d,p){const v=this._inner,D=v.scheduleEventTask("NgZoneEvent: "+p,a,KN,m_,m_);try{return v.runTask(D,l,d)}finally{v.cancelTask(D)}}runGuarded(a,l,d){return this._inner.runGuarded(a,l,d)}runOutsideAngular(a){return this._outer.run(a)}}const KN={};function Lb(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function fD(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Ux(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Hx(s){s._nesting--,Lb(s)}class QN{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Il,this.onMicrotaskEmpty=new Il,this.onStable=new Il,this.onError=new Il}run(a,l,d){return a.apply(l,d)}runGuarded(a,l,d){return a.apply(l,d)}runOutsideAngular(a){return a()}runTask(a,l,d,p){return a.apply(l,d)}}const jx=new Dn(""),zx=new Dn("");let Fb,XN=(()=>{class s{constructor(l,d,p){this._ngZone=l,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Fb||(function Gx(s){Fb=s}(p),p.addToWindow(d)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ns.assertNotInAngularZone(),hD(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())hD(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,p){let v=-1;d&&d>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(D=>D.timeoutId!==v),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:v,updateCb:p})}whenStable(l,d,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,d,p){return[]}}return s.\u0275fac=function(l){return new(l||s)(Zn(Ns),Zn(Up),Zn(zx))},s.\u0275prov=on({token:s,factory:s.\u0275fac}),s})(),Up=(()=>{class s{constructor(){this._applications=new Map}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return Fb?.findTestabilityInTree(this,l,d)??null}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Wu=null;const pD=new Dn("AllowMultipleToken"),Bb=new Dn("PlatformDestroyListeners");function Kx(s,a,l=[]){const d=`Platform: ${a}`,p=new Dn(d);return(v=[])=>{let D=yD();if(!D||D.injector.get(pD,!1)){const T=[...l,...v,{provide:p,useValue:!0}];s?s(T):function qx(s){if(Wu&&!Wu.get(pD,!1))throw new U(400,!1);Wu=s;const a=s.get(Qx);(function gD(s){const a=s.get(aD,null);a&&a.forEach(l=>l())})(s)}(function Yx(s=[],a){return Zc.create({name:a,providers:[{provide:Uc,useValue:"platform"},{provide:Bb,useValue:new Set([()=>Wu=null])},...s]})}(T,d))}return function eL(s){const a=yD();if(!a)throw new U(401,!1);return a}()}}function yD(){return Wu?.get(Qx)??null}let Qx=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const p=function Ub(s,a){let l;return l="noop"===s?new QN:("zone.js"===s?void 0:s)||new Ns(a),l}(d?.ngZone,function Vb(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(d)),v=[{provide:Ns,useValue:p}];return p.run(()=>{const D=Zc.create({providers:v,parent:this.injector,name:l.moduleType.name}),T=l.create(D),M=T.injector.get(Ho,null);if(!M)throw new U(402,!1);return p.runOutsideAngular(()=>{const N=p.onError.subscribe({next:W=>{M.handleError(W)}});T.onDestroy(()=>{Sl(this._modules,T),N.unsubscribe()})}),function vD(s,a,l){try{const d=l();return Yg(d)?d.catch(p=>{throw a.runOutsideAngular(()=>s.handleError(p)),p}):d}catch(d){throw a.runOutsideAngular(()=>s.handleError(d)),d}}(M,p,()=>{const N=T.injector.get(g_);return N.runInitializers(),N.donePromise.then(()=>(function sb(s){Zt(s,"Expected localeId to be defined"),"string"==typeof s&&(r_=s.toLowerCase().replace(/_/g,"-"))}(T.injector.get(Vp,Uh)||Uh),this._moduleDoBootstrap(T),T))})})}bootstrapModule(l,d=[]){const p=bD({},d);return function Wx(s,a,l){const d=new Uu(l);return Promise.resolve(d)}(0,0,l).then(v=>this.bootstrapModuleFactory(v,p))}_moduleDoBootstrap(l){const d=l.injector.get(Hp);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(p=>d.bootstrap(p));else{if(!l.instance.ngDoBootstrap)throw new U(403,!1);l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new U(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const l=this._injector.get(Bb,null);l&&(l.forEach(d=>d()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(Zn(Zc))},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function bD(s,a){return Array.isArray(a)?a.reduce(bD,s):{...s,...a}}let Hp=(()=>{class s{constructor(l,d,p){this._zone=l,this._injector=d,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new z.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),D=new z.y(T=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{Ns.assertNotInAngularZone(),hD(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const N=this._zone.onUnstable.subscribe(()=>{Ns.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{M.unsubscribe(),N.unsubscribe()}});this.isStable=(0,re.T)(v,D.pipe((0,Y.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,d){const p=l instanceof Zf;if(!this._injector.get(g_).done)throw!p&&function ln(s){const a=ge(s)||et(s)||mt(s);return null!==a&&a.standalone}(l),new U(405,false);let D;D=p?l:this._injector.get(Hc).resolveComponentFactory(l),this.componentTypes.push(D.componentType);const T=function mD(s){return s.isBoundToModule}(D)?void 0:this._injector.get(ii),N=D.create(Zc.NULL,[],d||D.selector,T),W=N.location.nativeElement,ne=N.injector.get(jx,null);return ne?.registerApplication(W),N.onDestroy(()=>{this.detachView(N.hostView),Sl(this.components,N),ne?.unregisterApplication(W)}),this._loadComponent(N),N}tick(){if(this._runningTick)throw new U(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;Sl(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(Nb,[]).concat(this._bootstrapListeners).forEach(p=>p(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>Sl(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new U(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(l){return new(l||s)(Zn(Ns),Zn(Tr),Zn(Ho))},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Sl(s,a){const l=s.indexOf(a);l>-1&&s.splice(l,1)}let ED=!0,Xx=!1;function nL(){return Xx=!0,ED}function iL(){if(Xx)throw new Error("Cannot enable prod mode after platform setup.");ED=!1}let sL=(()=>{class s{}return s.__NG_ELEMENT_ID__=CD,s})();function CD(s){return function DD(s,a,l){if(aa(s)&&!l){const d=en(s.index,a);return new fo(d,d)}return 47&s.type?new fo(a[16],a):null}(Un(),Fe(),16==(16&s))}class Gp{constructor(){}supports(a){return Lh(a)}create(a){return new tM(a)}}const MD=(s,a)=>a;class tM{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||MD}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,d=this._removalsHead,p=0,v=null;for(;l||d;){const D=!d||l&&l.currentIndex<Wp(d,p,v)?l:d,T=Wp(D,p,v),M=D.currentIndex;if(D===d)p--,d=d._nextRemoved;else if(l=l._next,null==D.previousIndex)p++;else{v||(v=[]);const N=T-p,W=M-p;if(N!=W){for(let ce=0;ce<N;ce++){const ye=ce<v.length?v[ce]:v[ce]=0,Oe=ye+ce;W<=Oe&&Oe<N&&(v[ce]=ye+1)}v[D.previousIndex]=W-N}}T!==M&&a(D,T,M)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!Lh(a))throw new U(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let p,v,D,l=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let T=0;T<this.length;T++)v=a[T],D=this._trackByFn(T,v),null!==l&&Object.is(l.trackById,D)?(d&&(l=this._verifyReinsertion(l,v,D,T)),Object.is(l.item,v)||this._addIdentityChange(l,v)):(l=this._mismatch(l,v,D,T),d=!0),l=l._next}else p=0,function ed(s,a){if(Array.isArray(s))for(let l=0;l<s.length;l++)a(s[l]);else{const l=s[er()]();let d;for(;!(d=l.next()).done;)a(d.value)}}(a,T=>{D=this._trackByFn(p,T),null!==l&&Object.is(l.trackById,D)?(d&&(l=this._verifyReinsertion(l,T,D,p)),Object.is(l.item,T)||this._addIdentityChange(l,T)):(l=this._mismatch(l,T,D,p),d=!0),l=l._next,p++}),this.length=p;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,d,p){let v;return null===a?v=this._itTail:(v=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,v,p)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,p))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,v,p)):a=this._addAfter(new dL(l,d),v,p),a}_verifyReinsertion(a,l,d,p){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==v?a=this._reinsertAfter(v,a._prev,p):a.currentIndex!=p&&(a.currentIndex=p,this._addToMoves(a,p)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const p=a._prevRemoved,v=a._nextRemoved;return null===p?this._removalsHead=v:p._nextRemoved=v,null===v?this._removalsTail=p:v._prevRemoved=p,this._insertAfter(a,l,d),this._addToMoves(a,d),a}_moveAfter(a,l,d){return this._unlink(a),this._insertAfter(a,l,d),this._addToMoves(a,d),a}_addAfter(a,l,d){return this._insertAfter(a,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,d){const p=null===l?this._itHead:l._next;return a._next=p,a._prev=l,null===p?this._itTail=a:p._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new kD),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,d=a._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new kD),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class dL{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class nM{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const l=a._prevDup,d=a._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class kD{constructor(){this.map=new Map}put(a){const l=a.trackById;let d=this.map.get(l);d||(d=new nM,this.map.set(l,d)),d.add(a)}get(a,l){const p=this.map.get(a);return p?p.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Wp(s,a,l){const d=s.previousIndex;if(null===d)return d;let p=0;return l&&d<l.length&&(p=l[d]),d+a+p}class RD{constructor(){}supports(a){return a instanceof Map||D0(a)}create(){return new iM}}class iM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||D0(a)))throw new U(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,p)=>{if(l&&l.key===p)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const v=this._getOrCreateRecordForKey(p,d);l=this._insertBeforeOrAppend(l,v)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const d=a._prev;return l._next=a,l._prev=d,a._prev=l,d&&(d._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const p=this._records.get(a);this._maybeAddToChanges(p,l);const v=p._prev,D=p._next;return v&&(v._next=D),D&&(D._prev=v),p._next=null,p._prev=null,p}const d=new rM(a);return this._records.set(a,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(d=>l(a[d],d))}}class rM{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sM(){return new zb([new Gp])}let zb=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(null!=d){const p=d.factories.slice();l=l.concat(p)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||sM()),deps:[[s,new be,new ie]]}}find(l){const d=this.factories.find(p=>p.supports(l));if(null!=d)return d;throw new U(901,!1)}}return s.\u0275prov=on({token:s,providedIn:"root",factory:sM}),s})();function PD(){return new Gb([new RD])}let Gb=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(d){const p=d.factories.slice();l=l.concat(p)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||PD()),deps:[[s,new be,new ie]]}}find(l){const d=this.factories.find(p=>p.supports(l));if(d)return d;throw new U(901,!1)}}return s.\u0275prov=on({token:s,providedIn:"root",factory:PD}),s})();const aM=Kx(null,"core",[]);let E_=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(Zn(Hp))},s.\u0275mod=Ht({type:s}),s.\u0275inj=Ft({}),s})();function mL(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(lt,Re,ee)=>{"use strict";ee.d(Re,{Z:()=>U});var h=ee(2090),ue=ee(4859),z=ee(9681),re=ee(1877);class Y{constructor(X,te){this._delegate=X,this.firebase=te,(0,z._addComponent)(X,new ue.wA("app-compat",()=>this,"PUBLIC")),this.container=X.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(X){this._delegate.automaticDataCollectionEnabled=X}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(X=>{this._delegate.checkDestroyed(),X()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,z.deleteApp)(this._delegate)))}_getService(X,te=z._DEFAULT_ENTRY_NAME){var me;this._delegate.checkDestroyed();const Me=this._delegate.container.getProvider(X);return!Me.isInitialized()&&"EXPLICIT"===(null===(me=Me.getComponent())||void 0===me?void 0:me.instantiationMode)&&Me.initialize(),Me.getImmediate({identifier:te})}_removeServiceInstance(X,te=z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(X).clearInstance(te)}_addComponent(X){(0,z._addComponent)(this._delegate,X)}_addOrOverwriteComponent(X){(0,z._addOrOverwriteComponent)(this._delegate,X)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const g=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),c=function j(){const q=function F(q){const X={},te={__esModule:!0,initializeApp:function De(ze,oe={}){const Ae=z.initializeApp(ze,oe);if((0,h.r3)(X,Ae.name))return X[Ae.name];const he=new q(Ae,te);return X[Ae.name]=he,he},app:Me,registerVersion:z.registerVersion,setLogLevel:z.setLogLevel,onLog:z.onLog,apps:null,SDK_VERSION:z.SDK_VERSION,INTERNAL:{registerComponent:function Ie(ze){const oe=ze.name,Ae=oe.replace("-compat","");if(z._registerComponent(ze)&&"PUBLIC"===ze.type){const he=(_e=Me())=>{if("function"!=typeof _e[Ae])throw g.create("invalid-app-argument",{appName:oe});return _e[Ae]()};void 0!==ze.serviceProps&&(0,h.ZB)(he,ze.serviceProps),te[Ae]=he,q.prototype[Ae]=function(..._e){return this._getService.bind(this,oe).apply(this,ze.multipleInstances?_e:[])}}return"PUBLIC"===ze.type?te[Ae]:null},removeApp:function me(ze){delete X[ze]},useAsService:function He(ze,oe){return"serverAuth"===oe?null:oe},modularAPIs:z}};function Me(ze){if(!(0,h.r3)(X,ze=ze||z._DEFAULT_ENTRY_NAME))throw g.create("no-app",{appName:ze});return X[ze]}return te.default=te,Object.defineProperty(te,"apps",{get:function Ee(){return Object.keys(X).map(ze=>X[ze])}}),Me.App=q,te}(Y);return q.INTERNAL=Object.assign(Object.assign({},q.INTERNAL),{createFirebaseNamespace:j,extendNamespace:function X(te){(0,h.ZB)(q,te)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),q}(),m=new re.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){m.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const q=self.firebase.SDK_VERSION;q&&q.indexOf("LITE")>=0&&m.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const U=c;!function P(q){(0,z.registerVersion)("@firebase/app-compat","0.1.37",q)}()},9681:(lt,Re,ee)=>{"use strict";ee.r(Re),ee.d(Re,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>Ws,_DEFAULT_ENTRY_NAME:()=>Zt,_addComponent:()=>nn,_addOrOverwriteComponent:()=>on,_apps:()=>mn,_clearComponents:()=>Gs,_components:()=>Tn,_getProvider:()=>Ft,_registerComponent:()=>Gi,_removeServiceInstance:()=>gn,deleteApp:()=>ra,getApp:()=>ir,getApps:()=>gr,initializeApp:()=>Br,onLog:()=>$s,registerVersion:()=>Pi,setLogLevel:()=>ai});var h=ee(5861),ue=ee(4859),z=ee(1877),re=ee(2090),Y=ee(8766);class V{constructor(Le){this.container=Le}getPlatformInfoString(){return this.container.getProviders().map(ut=>{if(function g(ct){return"VERSION"===ct.getComponent()?.type}(ut)){const At=ut.getImmediate();return`${At.library}/${At.version}`}return null}).filter(ut=>ut).join(" ")}}const F="@firebase/app",j="0.8.2",c=new z.Yd("@firebase/app"),Zt="[DEFAULT]",rt={[F]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},mn=new Map,Tn=new Map;function nn(ct,Le){try{ct.container.addComponent(Le)}catch(ut){c.debug(`Component ${Le.name} failed to register with FirebaseApp ${ct.name}`,ut)}}function on(ct,Le){ct.container.addOrOverwriteComponent(Le)}function Gi(ct){const Le=ct.name;if(Tn.has(Le))return c.debug(`There were multiple attempts to register component ${Le}.`),!1;Tn.set(Le,ct);for(const ut of mn.values())nn(ut,ct);return!0}function Ft(ct,Le){const ut=ct.container.getProvider("heartbeat").getImmediate({optional:!0});return ut&&ut.triggerHeartbeat(),ct.container.getProvider(Le)}function gn(ct,Le,ut=Zt){Ft(ct,Le).clearInstance(ut)}function Gs(){Tn.clear()}const Wi=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class $i{constructor(Le,ut,At){this._isDeleted=!1,this._options=Object.assign({},Le),this._config=Object.assign({},ut),this._name=ut.name,this._automaticDataCollectionEnabled=ut.automaticDataCollectionEnabled,this._container=At,this.container.addComponent(new ue.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Le){this.checkDestroyed(),this._automaticDataCollectionEnabled=Le}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Le){this._isDeleted=Le}checkDestroyed(){if(this.isDeleted)throw Wi.create("app-deleted",{appName:this._name})}}const Ws="9.12.1";function Br(ct,Le={}){let ut=ct;"object"!=typeof Le&&(Le={name:Le});const At=Object.assign({name:Zt,automaticDataCollectionEnabled:!1},Le),St=At.name;if("string"!=typeof St||!St)throw Wi.create("bad-app-name",{appName:String(St)});if(ut||(ut=(0,re.aH)()),!ut)throw Wi.create("no-options");const Ht=mn.get(St);if(Ht){if((0,re.vZ)(ut,Ht.options)&&(0,re.vZ)(At,Ht.config))return Ht;throw Wi.create("duplicate-app",{appName:St})}const ae=new ue.H0(St);for(const fe of Tn.values())ae.addComponent(fe);const se=new $i(ut,At,ae);return mn.set(St,se),se}function ir(ct=Zt){const Le=mn.get(ct);if(!Le&&ct===Zt)return Br();if(!Le)throw Wi.create("no-app",{appName:ct});return Le}function gr(){return Array.from(mn.values())}function ra(ct){return ot.apply(this,arguments)}function ot(){return(ot=(0,h.Z)(function*(ct){const Le=ct.name;mn.has(Le)&&(mn.delete(Le),yield Promise.all(ct.container.getProviders().map(ut=>ut.delete())),ct.isDeleted=!0)})).apply(this,arguments)}function Pi(ct,Le,ut){var At;let St=null!==(At=rt[ct])&&void 0!==At?At:ct;ut&&(St+=`-${ut}`);const Ht=St.match(/\s|\//),ae=Le.match(/\s|\//);if(Ht||ae){const se=[`Unable to register library "${St}" with version "${Le}":`];return Ht&&se.push(`library name "${St}" contains illegal characters (whitespace or "/")`),Ht&&ae&&se.push("and"),ae&&se.push(`version name "${Le}" contains illegal characters (whitespace or "/")`),void c.warn(se.join(" "))}Gi(new ue.wA(`${St}-version`,()=>({library:St,version:Le}),"VERSION"))}function $s(ct,Le){if(null!==ct&&"function"!=typeof ct)throw Wi.create("invalid-log-argument");(0,z.Am)(ct,Le)}function ai(ct){(0,z.Ub)(ct)}const Bn="firebase-heartbeat-store";let Qn=null;function Cn(){return Qn||(Qn=(0,Y.X3)("firebase-heartbeat-database",1,{upgrade:(ct,Le)=>{0===Le&&ct.createObjectStore(Bn)}}).catch(ct=>{throw Wi.create("idb-open",{originalErrorMessage:ct.message})})),Qn}function ft(){return(ft=(0,h.Z)(function*(ct){var Le;try{return(yield Cn()).transaction(Bn).objectStore(Bn).get(Wn(ct))}catch(ut){if(ut instanceof re.ZR)c.warn(ut.message);else{const At=Wi.create("idb-get",{originalErrorMessage:null===(Le=ut)||void 0===Le?void 0:Le.message});c.warn(At.message)}}})).apply(this,arguments)}function hn(ct,Le){return gi.apply(this,arguments)}function gi(){return(gi=(0,h.Z)(function*(ct,Le){var ut;try{const St=(yield Cn()).transaction(Bn,"readwrite");return yield St.objectStore(Bn).put(Le,Wn(ct)),St.done}catch(At){if(At instanceof re.ZR)c.warn(At.message);else{const St=Wi.create("idb-set",{originalErrorMessage:null===(ut=At)||void 0===ut?void 0:ut.message});c.warn(St.message)}}})).apply(this,arguments)}function Wn(ct){return`${ct.name}!${ct.options.appId}`}class ms{constructor(Le){this.container=Le,this._heartbeatsCache=null;const ut=this.container.getProvider("app").getImmediate();this._storage=new cn(ut),this._heartbeatsCachePromise=this._storage.read().then(At=>(this._heartbeatsCache=At,At))}triggerHeartbeat(){var Le=this;return(0,h.Z)(function*(){const At=Le.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),St=an();if(null===Le._heartbeatsCache&&(Le._heartbeatsCache=yield Le._heartbeatsCachePromise),Le._heartbeatsCache.lastSentHeartbeatDate!==St&&!Le._heartbeatsCache.heartbeats.some(Ht=>Ht.date===St))return Le._heartbeatsCache.heartbeats.push({date:St,agent:At}),Le._heartbeatsCache.heartbeats=Le._heartbeatsCache.heartbeats.filter(Ht=>{const ae=new Date(Ht.date).valueOf();return Date.now()-ae<=2592e6}),Le._storage.overwrite(Le._heartbeatsCache)})()}getHeartbeatsHeader(){var Le=this;return(0,h.Z)(function*(){if(null===Le._heartbeatsCache&&(yield Le._heartbeatsCachePromise),null===Le._heartbeatsCache||0===Le._heartbeatsCache.heartbeats.length)return"";const ut=an(),{heartbeatsToSend:At,unsentEntries:St}=function Vr(ct,Le=1024){const ut=[];let At=ct.slice();for(const St of ct){const Ht=ut.find(ae=>ae.agent===St.agent);if(Ht){if(Ht.dates.push(St.date),li(ut)>Le){Ht.dates.pop();break}}else if(ut.push({agent:St.agent,dates:[St.date]}),li(ut)>Le){ut.pop();break}At=At.slice(1)}return{heartbeatsToSend:ut,unsentEntries:At}}(Le._heartbeatsCache.heartbeats),Ht=(0,re.L)(JSON.stringify({version:2,heartbeats:At}));return Le._heartbeatsCache.lastSentHeartbeatDate=ut,St.length>0?(Le._heartbeatsCache.heartbeats=St,yield Le._storage.overwrite(Le._heartbeatsCache)):(Le._heartbeatsCache.heartbeats=[],Le._storage.overwrite(Le._heartbeatsCache)),Ht})()}}function an(){return(new Date).toISOString().substring(0,10)}class cn{constructor(Le){this.app=Le,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Le=this;return(0,h.Z)(function*(){return(yield Le._canUseIndexedDBPromise)&&(yield function Et(ct){return ft.apply(this,arguments)}(Le.app))||{heartbeats:[]}})()}overwrite(Le){var ut=this;return(0,h.Z)(function*(){var At;if(yield ut._canUseIndexedDBPromise){const Ht=yield ut.read();return hn(ut.app,{lastSentHeartbeatDate:null!==(At=Le.lastSentHeartbeatDate)&&void 0!==At?At:Ht.lastSentHeartbeatDate,heartbeats:Le.heartbeats})}})()}add(Le){var ut=this;return(0,h.Z)(function*(){var At;if(yield ut._canUseIndexedDBPromise){const Ht=yield ut.read();return hn(ut.app,{lastSentHeartbeatDate:null!==(At=Le.lastSentHeartbeatDate)&&void 0!==At?At:Ht.lastSentHeartbeatDate,heartbeats:[...Ht.heartbeats,...Le.heartbeats]})}})()}}function li(ct){return(0,re.L)(JSON.stringify({version:2,heartbeats:ct})).length}!function qi(ct){Gi(new ue.wA("platform-logger",Le=>new V(Le),"PRIVATE")),Gi(new ue.wA("heartbeat",Le=>new ms(Le),"PRIVATE")),Pi(F,j,ct),Pi(F,j,"esm2017"),Pi("fire-js","")}("")},4859:(lt,Re,ee)=>{"use strict";ee.d(Re,{H0:()=>F,wA:()=>z,zt:()=>Y});var h=ee(5861),ue=ee(2090);class z{constructor(c,m,w){this.name=c,this.instanceFactory=m,this.type=w,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(c){return this.instantiationMode=c,this}setMultipleInstances(c){return this.multipleInstances=c,this}setServiceProps(c){return this.serviceProps=c,this}setInstanceCreatedCallback(c){return this.onInstanceCreated=c,this}}const re="[DEFAULT]";class Y{constructor(c,m){this.name=c,this.container=m,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(c){const m=this.normalizeInstanceIdentifier(c);if(!this.instancesDeferred.has(m)){const w=new ue.BH;if(this.instancesDeferred.set(m,w),this.isInitialized(m)||this.shouldAutoInitialize())try{const x=this.getOrInitializeService({instanceIdentifier:m});x&&w.resolve(x)}catch{}}return this.instancesDeferred.get(m).promise}getImmediate(c){var m;const w=this.normalizeInstanceIdentifier(c?.identifier),x=null!==(m=c?.optional)&&void 0!==m&&m;if(!this.isInitialized(w)&&!this.shouldAutoInitialize()){if(x)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:w})}catch(P){if(x)return null;throw P}}getComponent(){return this.component}setComponent(c){if(c.name!==this.name)throw Error(`Mismatching Component ${c.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=c,this.shouldAutoInitialize()){if(function g(j){return"EAGER"===j.instantiationMode}(c))try{this.getOrInitializeService({instanceIdentifier:re})}catch{}for(const[m,w]of this.instancesDeferred.entries()){const x=this.normalizeInstanceIdentifier(m);try{const P=this.getOrInitializeService({instanceIdentifier:x});w.resolve(P)}catch{}}}}clearInstance(c=re){this.instancesDeferred.delete(c),this.instancesOptions.delete(c),this.instances.delete(c)}delete(){var c=this;return(0,h.Z)(function*(){const m=Array.from(c.instances.values());yield Promise.all([...m.filter(w=>"INTERNAL"in w).map(w=>w.INTERNAL.delete()),...m.filter(w=>"_delete"in w).map(w=>w._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(c=re){return this.instances.has(c)}getOptions(c=re){return this.instancesOptions.get(c)||{}}initialize(c={}){const{options:m={}}=c,w=this.normalizeInstanceIdentifier(c.instanceIdentifier);if(this.isInitialized(w))throw Error(`${this.name}(${w}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const x=this.getOrInitializeService({instanceIdentifier:w,options:m});for(const[P,U]of this.instancesDeferred.entries())w===this.normalizeInstanceIdentifier(P)&&U.resolve(x);return x}onInit(c,m){var w;const x=this.normalizeInstanceIdentifier(m),P=null!==(w=this.onInitCallbacks.get(x))&&void 0!==w?w:new Set;P.add(c),this.onInitCallbacks.set(x,P);const U=this.instances.get(x);return U&&c(U,x),()=>{P.delete(c)}}invokeOnInitCallbacks(c,m){const w=this.onInitCallbacks.get(m);if(w)for(const x of w)try{x(c,m)}catch{}}getOrInitializeService({instanceIdentifier:c,options:m={}}){let w=this.instances.get(c);if(!w&&this.component&&(w=this.component.instanceFactory(this.container,{instanceIdentifier:(j=c,j===re?void 0:j),options:m}),this.instances.set(c,w),this.instancesOptions.set(c,m),this.invokeOnInitCallbacks(w,c),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,c,w)}catch{}var j;return w||null}normalizeInstanceIdentifier(c=re){return this.component?this.component.multipleInstances?c:re:c}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class F{constructor(c){this.name=c,this.providers=new Map}addComponent(c){const m=this.getProvider(c.name);if(m.isComponentSet())throw new Error(`Component ${c.name} has already been registered with ${this.name}`);m.setComponent(c)}addOrOverwriteComponent(c){this.getProvider(c.name).isComponentSet()&&this.providers.delete(c.name),this.addComponent(c)}getProvider(c){if(this.providers.has(c))return this.providers.get(c);const m=new Y(c,this);return this.providers.set(c,m),m}getProviders(){return Array.from(this.providers.values())}}},1877:(lt,Re,ee)=>{"use strict";ee.d(Re,{Am:()=>j,Ub:()=>F,Yd:()=>g,in:()=>ue});const h=[];var ue=(()=>{return(c=ue||(ue={}))[c.DEBUG=0]="DEBUG",c[c.VERBOSE=1]="VERBOSE",c[c.INFO=2]="INFO",c[c.WARN=3]="WARN",c[c.ERROR=4]="ERROR",c[c.SILENT=5]="SILENT",ue;var c})();const z={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},re=ue.INFO,Y={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},V=(c,m,...w)=>{if(m<c.logLevel)return;const x=(new Date).toISOString(),P=Y[m];if(!P)throw new Error(`Attempted to log a message with an invalid logType (value: ${m})`);console[P](`[${x}]  ${c.name}:`,...w)};class g{constructor(m){this.name=m,this._logLevel=re,this._logHandler=V,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(m){if(!(m in ue))throw new TypeError(`Invalid value "${m}" assigned to \`logLevel\``);this._logLevel=m}setLogLevel(m){this._logLevel="string"==typeof m?z[m]:m}get logHandler(){return this._logHandler}set logHandler(m){if("function"!=typeof m)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=m}get userLogHandler(){return this._userLogHandler}set userLogHandler(m){this._userLogHandler=m}debug(...m){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...m),this._logHandler(this,ue.DEBUG,...m)}log(...m){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...m),this._logHandler(this,ue.VERBOSE,...m)}info(...m){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...m),this._logHandler(this,ue.INFO,...m)}warn(...m){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...m),this._logHandler(this,ue.WARN,...m)}error(...m){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...m),this._logHandler(this,ue.ERROR,...m)}}function F(c){h.forEach(m=>{m.setLogLevel(c)})}function j(c,m){for(const w of h){let x=null;m&&m.level&&(x=z[m.level]),w.userLogHandler=null===c?null:(P,U,...q)=>{const X=q.map(te=>{if(null==te)return null;if("string"==typeof te)return te;if("number"==typeof te||"boolean"==typeof te)return te.toString();if(te instanceof Error)return te.message;try{return JSON.stringify(te)}catch{return null}}).filter(te=>te).join(" ");U>=(x??P.logLevel)&&c({level:ue[U].toLowerCase(),message:X,args:q,type:P.name})}}}},8766:(lt,Re,ee)=>{"use strict";ee.d(Re,{Lj:()=>De,X3:()=>Me});var h=ee(5861);let z,re;const g=new WeakMap,F=new WeakMap,j=new WeakMap,c=new WeakMap,m=new WeakMap;let P={get(oe,Ae,he){if(oe instanceof IDBTransaction){if("done"===Ae)return F.get(oe);if("objectStoreNames"===Ae)return oe.objectStoreNames||j.get(oe);if("store"===Ae)return he.objectStoreNames[1]?void 0:he.objectStore(he.objectStoreNames[0])}return te(oe[Ae])},set:(oe,Ae,he)=>(oe[Ae]=he,!0),has:(oe,Ae)=>oe instanceof IDBTransaction&&("done"===Ae||"store"===Ae)||Ae in oe};function X(oe){return"function"==typeof oe?function q(oe){return oe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function V(){return re||(re=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(oe)?function(...Ae){return oe.apply(me(this),Ae),te(g.get(this))}:function(...Ae){return te(oe.apply(me(this),Ae))}:function(Ae,...he){const _e=oe.call(me(this),Ae,...he);return j.set(_e,Ae.sort?Ae.sort():[Ae]),te(_e)}}(oe):(oe instanceof IDBTransaction&&function x(oe){if(F.has(oe))return;const Ae=new Promise((he,_e)=>{const Ce=()=>{oe.removeEventListener("complete",we),oe.removeEventListener("error",We),oe.removeEventListener("abort",We)},we=()=>{he(),Ce()},We=()=>{_e(oe.error||new DOMException("AbortError","AbortError")),Ce()};oe.addEventListener("complete",we),oe.addEventListener("error",We),oe.addEventListener("abort",We)});F.set(oe,Ae)}(oe),((oe,Ae)=>Ae.some(he=>oe instanceof he))(oe,function Y(){return z||(z=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(oe,P):oe)}function te(oe){if(oe instanceof IDBRequest)return function w(oe){const Ae=new Promise((he,_e)=>{const Ce=()=>{oe.removeEventListener("success",we),oe.removeEventListener("error",We)},we=()=>{he(te(oe.result)),Ce()},We=()=>{_e(oe.error),Ce()};oe.addEventListener("success",we),oe.addEventListener("error",We)});return Ae.then(he=>{he instanceof IDBCursor&&g.set(he,oe)}).catch(()=>{}),m.set(Ae,oe),Ae}(oe);if(c.has(oe))return c.get(oe);const Ae=X(oe);return Ae!==oe&&(c.set(oe,Ae),m.set(Ae,oe)),Ae}const me=oe=>m.get(oe);function Me(oe,Ae,{blocked:he,upgrade:_e,blocking:Ce,terminated:we}={}){const We=indexedDB.open(oe,Ae),je=te(We);return _e&&We.addEventListener("upgradeneeded",_t=>{_e(te(We.result),_t.oldVersion,_t.newVersion,te(We.transaction))}),he&&We.addEventListener("blocked",()=>he()),je.then(_t=>{we&&_t.addEventListener("close",()=>we()),Ce&&_t.addEventListener("versionchange",()=>Ce())}).catch(()=>{}),je}function De(oe,{blocked:Ae}={}){const he=indexedDB.deleteDatabase(oe);return Ae&&he.addEventListener("blocked",()=>Ae()),te(he).then(()=>{})}const Ee=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],He=new Map;function ze(oe,Ae){if(!(oe instanceof IDBDatabase)||Ae in oe||"string"!=typeof Ae)return;if(He.get(Ae))return He.get(Ae);const he=Ae.replace(/FromIndex$/,""),_e=Ae!==he,Ce=Ie.includes(he);if(!(he in(_e?IDBIndex:IDBObjectStore).prototype)||!Ce&&!Ee.includes(he))return;const we=function(){var We=(0,h.Z)(function*(je,..._t){const sn=this.transaction(je,Ce?"readwrite":"readonly");let Zt=sn.store;return _e&&(Zt=Zt.index(_t.shift())),(yield Promise.all([Zt[he](..._t),Ce&&sn.done]))[0]});return function(_t){return We.apply(this,arguments)}}();return He.set(Ae,we),we}!function U(oe){P=oe(P)}(oe=>({...oe,get:(Ae,he,_e)=>ze(Ae,he)||oe.get(Ae,he,_e),has:(Ae,he)=>!!ze(Ae,he)||oe.has(Ae,he)}))},5861:(lt,Re,ee)=>{"use strict";function h(z,re,Y,V,g,F,j){try{var c=z[F](j),m=c.value}catch(w){return void Y(w)}c.done?re(m):Promise.resolve(m).then(V,g)}function ue(z){return function(){var re=this,Y=arguments;return new Promise(function(V,g){var F=z.apply(re,Y);function j(m){h(F,V,g,j,c,"next",m)}function c(m){h(F,V,g,j,c,"throw",m)}j(void 0)})}}ee.d(Re,{Z:()=>ue})}},lt=>{lt(lt.s=3941)}]);